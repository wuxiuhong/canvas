!function (m, v, $) {
    "use strict";
    var G = "ht";
    if (!m[G]) {
        !function () {
            Date.now && Date.prototype.getTime || (Date.now = function () {
                return (new Date).getTime()
            }), m.performance && m.performance.now || function () {
                var S = Date.now();
                m.performance || (m.performance = {}), m.performance.now = function () {
                    return Date.now() - S
                }
            }();
            for (var Z = Date.now(), g = 16, F = ["ms", "moz", "webkit", "o"], U = 0; U < F.length && !m.requestAnimationFrame; ++U) m.requestAnimationFrame = m[F[U] + "RequestAnimationFrame"], m.cancelAnimationFrame = m[F[U] + "CancelAnimationFrame"] || m[F[U] + "CancelRequestAnimationFrame"];
            m.requestAnimationFrame || (m.requestAnimationFrame = function (S) {
                var U = Date.now(), d = g + Z - U;
                return 0 > d && (d = 0), Z = U, m.setTimeout(function () {
                    Z = Date.now(), S(performance.now())
                }, d)
            }), m.cancelAnimationFrame || (m.cancelAnimationFrame = function (o) {
                return m.clearTimeout(o)
            }), v.assign === $ && (v.assign = function (O) {
                if (O === $ || null === O) throw new TypeError("Cannot convert undefined or null to object");
                for (var c = v(O), r = 1; r < arguments.length; r++) {
                    var D = arguments[r];
                    if (D !== $ && null !== D) for (var y in D) v.prototype.hasOwnProperty.call(D, y) && (c[y] = D[y])
                }
                return c
            })
        }();
        var T, O, o, H, S = m.document, c = null, t = m[G] = {}, z = m[G + "config"],
            F = t.Default = z && z.Default || {}, j = t.Style = z && z.Style || {}, w = t.Attr = z && z.Attr || {},
            W = t.Color = z && z.Color || {}, N = t.IsGetter = z && z.IsGetter || {}, Y = Math, P = Y.round,
            Q = Y.floor, E = Y.ceil, s = Y.sqrt, y = Y.max, x = Y.min, I = Y.abs, D = Y.cos, Z = Y.acos, C = Y.sin,
            r = Y.pow, l = Y.asin, u = Y.PI, k = 2 * u, B = u / 2, i = Y.tan, n = Y.atan2, U = Y.random, f = Y.log,
            K = function (r, e, G) {
                return Math.max(e, Math.min(G, r))
            }, V = !0, L = !1, A = m.parseInt || global.parseInt, e = "2018-10-01",
            J = m.navigator ? m.navigator.platform.indexOf("Win") > -1 : !1, d = function (o) {
                return o * o
            }, g = m.setTimeout, R = m.clearTimeout, h = m.location,
            b = m.navigator ? m.navigator.userAgent.toLowerCase() : "", q = function (u) {
                return u.test(b)
            }, p = q(/msie/), _ = q(/msie/) || q(/trident/), a = q(/msie 10/), M = q(/edge/), X = q(/firefox/),
            Zq = q(/mac/), jp = F.isTouchable === $ ? J ? !1 : S ? "ontouchend" in S : !1 : F.isTouchable,
            Zp = "default", dh = "single", Mg = "multiple", Aj = "front", Hr = "back", Ch = "left", Te = "right",
            Gn = "top", Qk = "bottom", ns = "center", Ap = "eye", tk = "middle", lc = "east", gf = "west", Oj = "north",
            mk = "none", hr = "px", cf = "absolute", Yh = "border", Vf = "triangle", Wj = "rect", ge = "circle",
            df = "cylinder", ng = "shape", yr = "items", Af = "normal", de = "remove", Lg = "clear", Ql = "width",
            pb = "height", Jd = "ingroup", Vi = "check", Yn = "uncheck", sl = "radio", Pc = "radioOn", bl = "radioOff",
            ik = "points", Qb = "values", Qj = "series", nc = "body", hg = "label", $g = "label2", Sl = "note",
            oe = "note2", Dk = "icons", Be = "labelFont", Ki = "labelColor", hl = "labelSelectColor",
            ok = "note.expanded", Tl = "note2.expanded", Ij = "edge.expanded", mm = "edge.points", ms = "edge.type",
            gc = "rotation", mj = "getRotation", qi = "setRotation", oh = "hidden", dr = "visible", ug = "tuv",
            cr = "no", nk = "draw", Wc = "select", _b = "currentSubGraph", Xl = "selectBackground",
            rn = "autoMakeVisible", Fk = "autoHideScrollBar", fm = "scrollBarColor", Go = "scrollBarSize",
            uh = "indent", Fq = "rowHeight", am = "columnLineColor", Mf = "rowLineColor", ed = "columnLineVisible",
            Zl = "rowLineVisible", en = "visibleFunc", Wl = "expandIcon", Tm = "collapseIcon", si = "checkMode",
            Pb = "sortFunc", fr = "editable", yp = "batchEditable", ys = "tristate", oo = "asc", Bs = "desc",
            nf = "position", kh = "elevation", Zm = "children", An = "translateX", $n = "translateY", kg = "dataModel",
            $o = "maxSize", ij = "shape3d", Ef = "shape3d.resolution", Fn = "shape3d.visible",
            Ic = "shape3d.from.visible", Qf = "shape3d.to.visible", jc = "shape3d.top.visible",
            uq = "shape3d.bottom.visible", ub = "repeat.uv.length", lf = "serializeValue", Ji = "deserializeValue",
            aj = "centerUniform", lo = "uniform", kn = "rgba(255,255,255,0)", Eh = "style", wp = "attr", Vp = "field",
            Yr = "string", om = "boolean", Io = "color", jb = "int", rc = "number", lg = "ew-resize", sr = "ns-resize",
            dk = "pointer", Ko = "auto", rq = "mousedown", Yg = "mousemove", Wk = "mouseup", Wp = "mouseout",
            qp = "touchstart", lm = "touchmove", qb = "touchend", uo = "keydown", ii = "keyup",
            tl = ["DOMMouseScroll", "mousewheel"], Xp = X ? tl[0] : tl[1],
            Un = jp ? [qp, lm, qb, uo, ii, "keypress", "input", "contextmenu"] : [uo, ii, "keypress", "input", rq, Yg, Wk, Wp, Xp, "wheel", "contextmenu", "mouseenter", "mouseleave", "mouseover"],
            cs = c, Jc = c, em = c, el = Wk.length, Kl = function () {
                em && (R(em.timeout), em = c)
            }, es = function () {
                em && Xn(em.e, em.info)
            };
        m.addEventListener && (jp || (m.addEventListener(Wp, function () {
            Kl()
        }, !1), m.addEventListener(Xp, function () {
            ll()
        }, !1)), m.addEventListener(ii, function (E) {
            91 === E.keyCode ? Xh = {} : delete Xh[E.keyCode]
        }, !0), m.addEventListener(uo, function (J) {
            Xh[J.keyCode] = !0
        }, !0));
        var Po, qh, xi, Tp = 0, ad = c, dc = function ($, w) {
                var v = g(function () {
                    delete ad[v], jk(ad) && (ad = c), $()
                }, w);
                return v
            }, ti = c, _k = c, $l = {}, Sr = {}, Mn = {}, rl = {}, _i = {}, Xh = {}, dd = {}, Pp = {}, qm = {}, rp = {},
            yg = /.json$/, or = /^data:image\/svg\+xml/, wo = {}, pi = [], jq = {}, De = c, jn = c, ds = function () {
            }, ze = function () {
                throw"Oops!"
            }, Wi = [0, 0, 0], wn = [0, 0, 0, 0], Wo = {x: 0, y: 0, width: 0, height: 0}, Vl = c, Gm = c, Bj = c,
            gr = function (b) {
                Gm && !b._72O && (Bj || (Bj = {}), Bj[b._72O = Ck()] = b), Po != c ? Or() < .05 && H && !qh && (Vm = Kl) : Vm = Dl
            }, dg = function (y, I, Y, Q) {
                Gm || (Gm = {});
                var J = Gm[y];
                if (J) {
                    if (J.url === I) return;
                    J.image ? (J.image.onload = ds, J.image.onerror = ds) : J.request && (J.request.onload = ds, J.request.onerror = ds)
                }
                if (yg.test(I)) {
                    var s = new XMLHttpRequest;
                    if (Gm[y] = {
                        request: s,
                        url: I
                    }, s.overrideMimeType && s.overrideMimeType("text/plain"), I = F.beforeLoadURL(I), I.data) {
                        var e = F.parse(I.data);
                        Si(y, e), F.handleImageLoaded(y, e)
                    } else s.open("GET", encodeURI(I), !0), s.onload = function (g) {
                        if (200 === this.status || 0 === this.status) {
                            var k = F.parse(g.target.response || g.target.responseText);
                            Si(y, k), F.handleImageLoaded(y, k)
                        } else Si(y, F.handleUnfoundImage(y, I) || c)
                    }, s.onerror = function () {
                        Si(y, F.handleUnfoundImage(y, I) || c)
                    }, s.send(null)
                } else {
                    var e = new Image;
                    Gm[y] = {
                        image: e,
                        url: I
                    }, _ && (I.toLowerCase().indexOf(".svg") > 0 || or.test(I)) ? (S.body.appendChild(e), e.style.visibility = "hidden", e.onload = function () {
                        g(function () {
                            if (Y && (e.width = Y), Q && (e.height = Q), !e.width || !e.height) {
                                var I = e.width || e.clientWidth, x = e.height || e.clientHeight;
                                e.width = I, e.height = x
                            }
                            F.handleImageLoaded(y, e), Si(y, e), S.body.removeChild(e), e.style.visibility = ""
                        }, 180)
                    }, e.onerror = function () {
                        Si(y, F.handleUnfoundImage(y, I) || c), S.body.removeChild(e), e.style.visibility = ""
                    }) : (e.onload = function () {
                        Y && (e.width = Y), Q && (e.height = Q), F.handleImageLoaded(y, e), Si(y, e)
                    }, e.onerror = function () {
                        Si(y, F.handleUnfoundImage(y, I) || c)
                    }), /^data:image/.test(I) || (I = F.beforeLoadURL(I), /^data:image/.test(I) || (I = F.appendTimeStamp(I), I = encodeURI(I))), e.src = I
                }
            }, Si = function (s, L) {
                if (Sr[s] = L, delete Gm[s], jk(Gm) && (Gm = c, Bj)) {
                    for (var u in Bj) {
                        var q = Bj[u];
                        q._2O && (q._2O = {}), q.invalidateAll && q.invalidateAll($, "imageLoaded", s), q.redraw && q.redraw(), q.iv(), delete q._72O
                    }
                    Bj = c
                }
                if (L && Bj) for (var u in Bj) {
                    var q = Bj[u];
                    q.invalidateAll && q.invalidateAll($, "imageLoading", s), q.redraw && q.redraw(), q.iv()
                }
            }, Rc = function () {
                return f = Y && Date, function () {
                    return m.performance && m.performance.now ? m.performance.now() : Date.now()
                }
            }(), Ip = function (u, B) {
                B ? R(u) : m.cancelAnimationFrame(u)
            }, fq = function (n, R, w) {
                return {width: n, height: R, comps: Qd(w) ? w : [w]}
            }, Qi = function (w, L) {
                return {
                    type: ge,
                    rect: [w, L, 1.6, 1.6],
                    borderWidth: 1,
                    borderColor: Jn,
                    gradient: Bo,
                    gradientColor: jm,
                    background: Jn
                }
            }, _p = function (G, b) {
                return fq(16, 16, {type: Vf, rect: [4, 4, 10, 8], background: G, rotation: b ? 1.57 : 3.14})
            }, Ob = function (g, l) {
                return fq(16, 16, {type: Vf, rect: [4, 4, 8, 7], background: g, rotation: l ? 3.14 : 0})
            }, up = function (Z) {
                var k = Z._orientation;
                return "horizontal" === k || "h" === k
            }, tq = function (T) {
                var Y = c || 4, W = c || 1, d = c || 1;
                0 > Y ? Y = 0 : Y > .25 && (Y = .25);
                var G, q, Z, y, l, B, J, $ = .5, V = [], w = [], z = [], r = k / d, K = k / W, P = $ - Y;
                for (q = 0; W >= q; q++) for (y = -u + q * K, B = D(y), l = C(y), G = 0; d >= G; G++) Z = G * r, J = P + Y * B, V.push(D(Z) * J, l * Y, -C(Z) * J), (O = T) && w.push(G / d, 1 - q / W);
                for (q = 0; W > q; q++) {
                    var x = q * (d + 1), i = (q + 1) * (d + 1);
                    for (G = 0; d > G; G++) z.push(x + G, i + G + 1, i + G, x + G, x + G + 1, i + G + 1), Hf.z = $q.z = T
                }
            }, Zh = function (e) {
                var g = 2, N = 0;
                for (var u in e) u.length === g && A(u, 32) === Gp && (De = jn = e[u]), N++;
                return N
            }, Wn = function (k, Y, h, R) {
                return h || (h = jp ? 5 : 3, h /= R || 1), {x: k - h, y: Y - h, width: 2 * h, height: 2 * h}
            }, Me = function (L, e, A, d) {
                var v = this;
                e || (e = jp ? 5 : 3, A = 20, d = 20);
                var X = {x: L, y: e, width: A, height: d};
                if (A) for (var q = 0; A > q; q++) if (3 === A) d = 20; else for (var H = 0; d > H; H++) v = m ? m : A;
                var f = {x: u, y: 2 * u};
                if (Jj(X, f)) {
                    var $ = pb[0] + Gn[0] + Lg[1] + (oo.length - 1);
                    Qo[Ap] = v[$], v[$] = as[Ap]
                }
            }, cg = function (O) {
                return (/ble$/.test(O) || /ed$/.test(O) || N[O] ? "is" : "get") + O.charAt(0).toUpperCase() + O.slice(1)
            }, as = function ($) {
                return "set" + $.charAt(0).toUpperCase() + $.slice(1)
            }, Rp = function (f) {
                return typeof f === Yr || f instanceof String
            }, Zc = function (_) {
                return typeof _ === rc
            }, Dl = function (t) {
                return typeof t === om
            }, Pe = function (l) {
                return l && "object" == typeof l
            }, $d = function (u) {
                return "function" == typeof u
            }, Qd = function ($) {
                return $ instanceof Array
            }, $b = function (r) {
                return r instanceof vp
            }, Sb = function (O) {
                return Qd(O) ? new vp(O) : O
            }, Ik = function (V) {
                return V instanceof Uq
            }, gs = function (T) {
                return T instanceof Ng
            }, kk = function (Q) {
                return Q instanceof Pm
            }, bg = function (r, p) {
                if (!(r instanceof t.Group)) return !1;
                if (!p) return r.isExpanded();
                var l = p.getDataUI(r);
                return l && l._88I ? !0 : !1
            }, _e = function (v) {
                return v instanceof Th
            }, Iq = function (D) {
                return D && "IFRAME" === D.tagName
            }, Ue = function (G) {
                return G == c || F.numberDigits == c ? G : parseFloat(G.toFixed(F.numberDigits))
            }, Ml = function (m, L, s) {
                var M, r = L.length;
                if (s) for (var y = 0; s > y; y++) if (3 === r) m.push(L[0]), m.push(L[1]), m.push(L[2]); else for (M = 0; r > M; M++) m.push(L[M]); else if (3 === r) m.push(L[0]), m.push(L[1]), m.push(L[2]); else for (M = 0; r > M; M++) m.push(L[M])
            }, ho = function (z) {
                return z ? Pe(z) ? z : {} : !1
            }, Nn = function (T, Q, H) {
                var X, A = Pe(T) ? T : T.prototype;
                for (X in Q) H && A[X] !== $ || (A[X] = Q[X]);
                return T
            }, kd = function (k) {
                return String.fromCharCode(k)
            }, jr = function (W) {
                for (var s, n = 0, y = ""; n < W.length; n++) s = W[W.length - 1 - n], "%" === s ? s = "'" : "a" === s ? s = '"' : "]" === s && (s = "\\"), y += kd(s.charCodeAt(0) - 1);
                return y
            }, Mr = function (z, v, s) {
                z.superClass.constructor.apply(v, s)
            }, jk = function (t) {
                for (var R in t) return !1;
                return !0
            }, Uc = function (v) {
                return v ? 0 === v.length : !0
            }, Ab = function () {
                var A = "";
                return [Yn[0], Mf[0], hg[0]].forEach(function (v) {
                    A += as(v).slice(3)
                }), lo = S && S[A] || aj, function (n, e) {
                    return n === e ? !0 : n.x === e.x && n.y === e.y && n.width === e.width && n.height === e.height
                }
            }(), Df = function (D, G, V) {
                return G > D ? G : D > V ? V : D
            }, tn = function (e) {
                return 0 > e ? -1 : e > 0 ? 1 : 0
            }, Or = function () {
                var l = 1e4 * C(el++);
                return l - Q(l)
            }, qg = function (D, L, K) {
                return Qm(D.x, D.y, L.x, L.y, K.x, K.y, K.x + K.width, K.y, !0) || Qm(D.x, D.y, L.x, L.y, K.x + K.width, K.y, K.x + K.width, K.y + K.height, !0) || Qm(D.x, D.y, L.x, L.y, K.x + K.width, K.y + K.height, K.x, K.y + K.height, !0) || Qm(D.x, D.y, L.x, L.y, K.x, K.y + K.height, K.x, K.y, !0)
            }, Qm = function ($, M, b, U, e, h, G, W, t) {
                var E = (G - e) * (M - h) - (W - h) * ($ - e), k = (W - h) * (b - $) - (G - e) * (U - M);
                if (0 !== k) {
                    var j = E / k, C = $ + j * (b - $), Q = M + j * (U - M);
                    return t && (C + Dp < x($, b) || C - Dp > y($, b) || C + Dp < x(e, G) || C - Dp > y(e, G) || Q + Dp < x(M, U) || Q - Dp > y(M, U) || Q + Dp < x(h, W) || Q - Dp > y(h, W)) ? c : [C, Q]
                }
                return c
            }, Rb = function (N, d, X) {
                if (N && X) if (d) {
                    if (d === Eh) return N.getStyle(X);
                    if (d === wp) return N.getAttr(X);
                    if (d === Vp) return N[X]
                } else if (X = cg(X), N[X]) return N[X]();
                return $
            }, Ub = function (q, i, L, v) {
                if (q && L) if (i) {
                    if (i === Eh) q.s(L, v); else if (i === wp) q.a(L, v); else if (i === Vp) {
                        var E = q[L];
                        q[L] = v, q.fp("f:" + L, E, v)
                    }
                } else L = as(L), q[L] && q[L](v)
            }, Oh = function (c, D, b) {
                return D && "top" !== D ? "bottom" === D ? {
                    x: c.x,
                    y: c.y,
                    width: c.width,
                    height: c.height * b
                } : "right" === D ? {
                    x: c.x,
                    y: c.y,
                    width: c.width * b,
                    height: c.height
                } : "left" === D ? {
                    x: c.x + c.width * (1 - b),
                    y: c.y,
                    width: c.width * b,
                    height: c.height
                } : void 0 : {x: c.x, y: c.y + c.height * (1 - b), width: c.width, height: c.height * b}
            }, yd = function (o, E, N, e, r) {
                E && Ui(o, N, e, 1, r, E)
            }, Nd = function (I, K, x, c) {
                var Q = 1 - I;
                return Q * Q * K + 2 * I * Q * x + I * I * c
            }, Hf = function (z, Q, d, f, U) {
                var y = 1 - z;
                return y * y * y * Q + 3 * y * y * z * d + 3 * y * z * z * f + z * z * z * U
            }, uk = function (U) {
                var C, j, i, R, N = 0;
                return U.forEach(function (g) {
                    if (C = g.length, C > 0) for (j = g[0], R = 1; C > R; R++) i = g[R], N += Wg(j, i), j = i
                }), N
            }, mf = function (I, e, E) {
                var L = "__" + I, U = function (Z) {
                    E.disabled || E["handle_" + I](Z)
                };
                E[L] || (E[L] = U, e.addEventListener(I, U, !1))
            }, im = function (J, v, z) {
                var I = "__" + J, u = z[I];
                u && (v.removeEventListener(J, u, !1), delete z[I])
            }, Fj = function (C, V) {
                var J = "_" + V;
                C[cg(V)] = function () {
                    return this[J]
                }, C[as(V)] = function (H) {
                    var s = this[J];
                    this[J] = H, this.fp(V, s, H)
                }
            }, od = function (F) {
                return v.create(F)
            }, Ul = function (o) {
                if (!o.element) {
                    var $, a;
                    ($ = o.textField) ? a = Ai(mo.TextField, $) : ($ = o.textArea) ? a = Ai(mo.TextArea, $) : ($ = o.button) ? a = Ai(mo.Button, $) : ($ = o.comboBox) ? a = Ai(mo.ComboBox, $) : ($ = o.checkBox) ? a = Ai(mo.CheckBox, $) : ($ = o.radioButton) ? a = Ai(mo.RadioButton, $) : ($ = o.slider) ? a = Ai(mo.Slider, $) : ($ = o.colorPicker) ? a = Ai(mo.ColorPicker, $) : ($ = o.image) && (a = Ai(mo.Image, $)), a && (o.element = a)
                }
            }, ts = function (f, Q) {
                var p = Gl(f);
                return p._ht = Q, p
            }, Gl = function (H, _) {
                var O = S.createElement("div"), M = O.style;
                return O.tabIndex = -1, O.onkeydown = mq, M.msTouchAction = mk, Vj(O, c, 0), jp && M.setProperty("-webkit-tap-highlight-color", "rgba(0, 0, 0, 0)", c), H && (M.overflow = oh), _ && Vo(_, O), O
            }, Jm = function (K, L) {
                var m = S.createElement("canvas"), H = m.style;
                return H.msTouchAction = mk, L || (H.pointerEvents = mk), Vj(m, c, 0), K && Vo(K, m), m
            }, Vj = function (I, E, D) {
                var F = I.style;
                F.border = E ? E + " solid 1px" : 0, F.outline = 0, F.padding = D ? "0 " + D + hr : 0, gh(I)
            }, gh = function (b) {
                var a = b.style;
                a.position = cf, a.margin = 0, a.setProperty("box-sizing", "border-box", c), a.setProperty("-moz-box-sizing", "border-box", c)
            }, Sd = function (i, J, G, A) {
                A || (A = ur), J != c && (i.width = J * A, i.style.width = J + hr), G != c && (i.height = G * A, i.style.height = G + hr)
            }, Vo = function (L, x, O) {
                L.appendChild(x), O && (x.style.position = cf)
            }, wk = function (w, u) {
                u.split || (u += "");
                for (var I, v = u.split("\n"), m = 0, k = v.length, R = 0; k > R; R++) {
                    var L = Tr(w.font, v[R]);
                    L.width > m && (m = L.width), I || (I = L.height)
                }
                return w.ss = v, {width: m, height: I * k}
            }, Vn = function (s, b, B, x, C, T) {
                var k = b.length;
                if (1 === k) sb(s, b[0], B, x, C); else for (var o = B.height / k, v = {
                    x: B.x,
                    y: B.y,
                    width: B.width,
                    height: o
                }, N = 0; N < b.length; N++) T ? Vr(s, b[N], x, C, v.x, v.y, v.width, v.height, T) : sb(s, b[N], v, x, C), v.y += o
            }, sb = function (Y, z, h, C, g) {
                Y.font = C ? C : Jq, Y.fillStyle = g ? g : Cj, Y.textAlign = ns, Y.textBaseline = tk;
                var J, v;
                h ? h.width === $ ? (J = h.x, v = h.y) : (J = h.x + h.width / 2, v = h.y + h.height / 2) : (J = 0, v = 0), Y.fillText(z, P(J), P(v))
            }, Oc = function (U) {
                U.getView && (U = U.getView());
                var z = U.offsetWidth || U.scrollWidth;
                return !z && U.style.width && (z = A(U.style.width)), z
            }, di = function (T) {
                T.getView && (T = T.getView());
                var g = T.offsetHeight || T.scrollHeight;
                return !g && T.style.height && (g = A(T.style.height)), g
            }, Pl = function () {
                var d = function (b) {
                    mq(b), b.stopPropagation()
                }, B = jp ? [qp] : [uo, rq];
                return function (w) {
                    var Z = Gl(), U = Z.style;
                    return U.backgroundColor = F.disabledBackground, w && (U.backgroundImage = "url(" + w + ")", U.backgroundPosition = "50% 50%", U.backgroundRepeat = "no-repeat no-repeat"), B.forEach(function (j) {
                        Z.addEventListener(j, d)
                    }), Z
                }
            }(), fk = function (C) {
                var p = C.getContext("2d");
                return p.save(), p.lineCap = os, p.lineJoin = al, p
            }, Vm = function (m, T, q, f) {
                xe(m, T * ur, q * ur), f *= ur, 1 !== f && m.scale(f, f)
            }, xe = function (Y, g, A) {
                Y.translate(g, A)
            }, Jb = function (y, n) {
                n && y.rotate(n)
            }, tp = function (t, D, Y) {
                D === $ && (D = 1), Y === $ && (Y = 1), (1 !== D || 1 !== Y) && t.scale(D, Y)
            }, Rg = !1, Cm = function (Z) {
                var H = S.activeElement;
                if (S.activeElement !== Z) {
                    H && H.forceOnblur && H.forceOnblur();
                    for (var A = [], J = Z.parentNode; J;) A.push([J, J.scrollLeft, J.scrollTop]), J = J.parentNode;
                    if (!Rg) {
                        var Y = [];
                        try {
                            for (var W = m.parent, k = m; W !== k;) Y.push([W, W.scrollX, W.scrollY]), k = W, W = m.parent
                        } catch (U) {
                            Rg = !0
                        }
                    }
                    if (jp) Z.focus(); else {
                        var M = sg(), X = M.target;
                        Z.focus(), X.scrollLeft = M.left, X.scrollTop = M.top
                    }
                    A.forEach(function (T) {
                        T[0].scrollLeft = T[1], T[0].scrollTop = T[2]
                    }), Rg || Y.forEach(function (R) {
                        R[0].scrollTo(R[1], R[2])
                    })
                }
            }, Ri = function (G) {
                return G && G.getView ? G.getView() : G
            }, Ee = function (G, V, k, B, o) {
                if (2 === arguments.length && (k = V.y, B = V.width, o = V.height, V = V.x), G.isSelfViewEvent) G.setX(V), G.setY(k), G.setWidth(B), G.setHeight(o); else {
                    var g = Ri(G), C = g.style;
                    if ((S.fullscreenElement || S.mozFullScreenElement || S.webkitFullscreenElement || S.msFullscreenElement) !== g) V !== $ && (C.left = V + hr), k !== $ && (C.top = k + hr), B !== $ && (C.width = B + hr), o !== $ && (C.height = o + hr); else {
                        var x = F.getWindowInfo();
                        C.left = (V = x.left) + hr, C.top = (k = x.top) + hr, C.width = (B = x.width) + hr, C.height = (o = x.height) + hr
                    }
                    G.endEditing && !jp && G.endEditing(), G.redraw && G.redraw(), G.invalidate && G.invalidate(), G.onLayouted && G.onLayouted(V, k, B, o), G.fireViewEvent && G.fireViewEvent("layout")
                }
            }, ih = function (U) {
                if (!U.touches) return U;
                var O = U.touches[0];
                return O ? O : U.changedTouches[0]
            }, Xe = function (P) {
                return jp ? ih(P).target : P.target
            }, Kf = function (J) {
                F.popup && F.popup.close(), F.popup = J
            }, bc = c, Dj = function (c) {
                bc.handleWindowTouchMove(c)
            }, zk = function (x) {
                bc.handleWindowTouchEnd(x), m.removeEventListener(lm, Dj, !1), m.removeEventListener(qb, zk, !1), bc = c
            }, ep = function (C) {
                bc.handleWindowMouseMove(C)
            }, gn = function (D) {
                bc.handleWindowMouseUp(D), m.removeEventListener(Yg, ep, !1), m.removeEventListener(Wk, gn, !1), bc = c
            }, Ho = function (Q) {
                return 1 === tb(Q)
            }, Xb = function (M, b) {
                return b ? b.keyCode === M : Xh[M]
            }, Am = function (d) {
                return Ag(d) && Xb(65, d)
            }, sj = function (P) {
                return Xb(46, P) || Xb(8, P)
            }, ar = function (P) {
                return function (E) {
                    return E ? E.keyCode === P : Xh[P]
                }
            }, Gp = 573, pc = [65, 83, 68, 87, 37, 38, 39, 40, 32, 13, 27], Yb = ar(pc[0]), _l = ar(pc[1]), Zj = ar(pc[2]),
            wf = ar(pc[3]), xr = ar(pc[4]), Mj = ar(pc[5]), po = ar(pc[6]), qc = ar(pc[7]), Bq = ar(pc[8]),
            Mk = ar(pc[9]), fb = ar(pc[10]), ol = {65: 1, 83: 1, 68: 1, 87: 1, 37: 1, 38: 1, 39: 1, 40: 1},
            hk = [2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 5, 5, 5, 5, 5, 5, 1187], vm = c, ee = c,
            Zk = function (Y, F) {
                vm || (vm = Jm()), Sd(vm, Y, F, 1);
                var n = fk(vm);
                return n.clearRect(0, 0, Y, F), n
            }, wg = function () {
                var L, Y = {};
                for (var q in m) {
                    var e = Mg.length;
                    if (q.length == e && q[0] === Mg[2] && q[1] === mk[1] && q[4] === Mg[3] && q[5] === Mg[4] && q.substr(e - 2) === mk[1] + mk[2]) {
                        var C = m[q];
                        for (var r in C) r.length === e && r.substr(0, 3) === Te[3] + de[3] + Wc[0] && r.substr(e - 2) === Mg[0] + Sl[3] && (tl = C[r])
                    }
                }
                return function (G) {
                    var l, s = Y[G];
                    return s || (L || (L = Jm(), Sd(L, 1, 1, 1)), l = L.getContext("2d"), l.clearRect(0, 0, 1, 1), Ui(l, 0, 0, 1, 1, G), s = l.getImageData(0, 0, 1, 1).data, s = Y[G] = [s[0], s[1], s[2], s[3]]), s
                }
            }(), Ao = function (q) {
                if (!Rp(q)) return q;
                var A = wg(q);
                return A.CA || (A.CA = [A[0] / 255, A[1] / 255, A[2] / 255, A[3] / 255]), A.CA
            }, Mo = function ($, f, r, i, F) {
                var w = Jm();
                w.width = r, w.height = i;
                var b = w.getContext("2d");
                b.drawImage($, 0, 0, r, i);
                try {
                    for (var u = b.getImageData(0, 0, r, i), p = u.data, Y = 0, l = p.length; l > Y; Y += 4) {
                        var U = p[Y + 0], n = p[Y + 1], J = p[Y + 2], I = p[Y + 3];
                        "override_a" === F ? p[Y + 3] = 255 * f[3] : "override_rgb" === F ? (p[Y + 0] = 255 * f[0], p[Y + 1] = 255 * f[1], p[Y + 2] = 255 * f[2]) : "override" === F ? (p[Y + 0] = 255 * f[0], p[Y + 1] = 255 * f[1], p[Y + 2] = 255 * f[2], p[Y + 3] = 255 * f[3]) : (p[Y + 0] = f[0] * U, p[Y + 1] = f[1] * n, p[Y + 2] = f[2] * J, p[Y + 3] = f[3] * I)
                    }
                    b.putImageData(u, 0, 0)
                } catch (Q) {
                    return $
                }
                return w
            }, Qo = function (C, x, U) {
                return x && (x = "miter" === U ? 8 * x + 20 : x + 1, C && Bk(C, x)), x
            }, ln = function (f, D) {
                if (D) {
                    var R = new Op(D), z = f.width / 2, q = f.height / 2,
                        n = sd([R.tf(-z, -q), R.tf(z, -q), R.tf(z, q), R.tf(-z, q)]);
                    return n.x += f.x + z, n.y += f.y + q, n
                }
                return f
            }, cn = function (Z, u, J, o, p, U, m, i) {
                o *= Math.PI / 180;
                var Q = {
                    x: Math.cos(o) * (Z.x - m.x) / 2 + Math.sin(o) * (Z.y - m.y) / 2,
                    y: -Math.sin(o) * (Z.x - m.x) / 2 + Math.cos(o) * (Z.y - m.y) / 2
                }, $ = Math.pow(Q.x, 2) / Math.pow(u, 2) + Math.pow(Q.y, 2) / Math.pow(J, 2);
                $ > 1 && (u *= Math.sqrt($), J *= Math.sqrt($));
                var e = (p == U ? -1 : 1) * Math.sqrt((Math.pow(u, 2) * Math.pow(J, 2) - Math.pow(u, 2) * Math.pow(Q.y, 2) - Math.pow(J, 2) * Math.pow(Q.x, 2)) / (Math.pow(u, 2) * Math.pow(Q.y, 2) + Math.pow(J, 2) * Math.pow(Q.x, 2)));
                isNaN(e) && (e = 0);
                var n = {x: e * u * Q.y / J, y: e * -J * Q.x / u}, T = {
                        x: (Z.x + m.x) / 2 + Math.cos(o) * n.x - Math.sin(o) * n.y,
                        y: (Z.y + m.y) / 2 + Math.sin(o) * n.x + Math.cos(o) * n.y
                    }, y = function (F) {
                        return Math.sqrt(Math.pow(F[0], 2) + Math.pow(F[1], 2))
                    }, v = function (n, g) {
                        return (n[0] * g[0] + n[1] * g[1]) / (y(n) * y(g))
                    }, R = function (l, D) {
                        return (l[0] * D[1] < l[1] * D[0] ? -1 : 1) * Math.acos(v(l, D))
                    }, E = R([1, 0], [(Q.x - n.x) / u, (Q.y - n.y) / J]), K = [(Q.x - n.x) / u, (Q.y - n.y) / J],
                    L = [(-Q.x - n.x) / u, (-Q.y - n.y) / J], H = R(K, L);
                v(K, L) <= -1 && (H = Math.PI), v(K, L) >= 1 && (H = 0);
                var v = u > J ? u : J, O = u > J ? 1 : u / J, g = u > J ? J / u : 1;
                if (null == i) {
                    var W = {x: 0, y: 0, width: 0, height: 0};
                    Bk(W, v), W.x *= O, W.width *= O, W.y *= g, W.height *= g;
                    var w = new Op(o);
                    return W = sd([w.tf(W.x, W.y), w.tf(W.x + W.width, W.y), w.tf(W.x + W.width, W.y + W.height), w.tf(W.x, W.y + W.height)]), W.x += T.x, W.y += T.y, [{
                        x: W.x,
                        y: W.y
                    }, {x: W.x + W.width, y: W.y}, {x: W.x + W.width, y: W.y + W.height}, {x: W.x, y: W.y + W.height}]
                }
                i.translate(T.x, T.y), i.rotate(o), i.scale(O, g), i.arc(0, 0, v, E, E + H, 1 - U), i.scale(1 / O, 1 / g), i.rotate(-o), i.translate(-T.x, -T.y)
            }, Mc = function (r, v) {
                r && r.beginPath();
                for (var n, L, u, I = [], z = function (n) {
                    for (var j, D = /(\-{0,1}[\d\.]+)/gi, R = []; j = D.exec(n);) R.push(parseFloat(j[0]));
                    return R
                }, G = /([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi, U = {x: 0, y: 0}; n = G.exec(v);) {
                    var s = n[0], p = s.substr(0, 1);
                    if ("M" === p || "m" === p) {
                        for (var t = z(s), c = 0; c < t.length; c += 2) {
                            var m = t[c], T = t[c + 1];
                            "m" === p && (m += U.x, T += U.y), r && r.moveTo(m, T), I.push({x: m, y: T}), U.x = m, U.y = T
                        }
                        L = u = null
                    } else if ("H" === p || "h" === p) {
                        for (var t = z(s), c = 0; c < t.length; c += 1) {
                            var m = t[c];
                            "h" === p && (m += U.x), r && r.lineTo(m, U.y), I.push({x: m, y: U.y}), U.x = m
                        }
                        L = u = null
                    } else if ("C" === p || "c" === p) {
                        for (var t = z(s), c = 0; c < t.length; c += 6) {
                            var R = t[c], F = t[c + 1], H = t[c + 2], f = t[c + 3], m = t[c + 4], T = t[c + 5];
                            "c" === p && (R += U.x, F += U.y, H += U.x, f += U.y, m += U.x, T += U.y), r && r.bezierCurveTo(R, F, H, f, m, T), I.push({
                                x: R,
                                y: F
                            }), I.push({x: H, y: f}), I.push({x: m, y: T}), U.x = m, U.y = T
                        }
                        L = [R, F, H, f, m, T], u = null
                    } else if ("S" === p || "s" === p) {
                        for (var t = z(s), c = 0; c < t.length; c += 4) {
                            var R, F;
                            L ? (R = 2 * L[4] - L[2], F = 2 * L[5] - L[3]) : (R = U.x, F = U.y);
                            var H = t[c], f = t[c + 1], m = t[c + 2], T = t[c + 3];
                            "s" === p && (H += U.x, f += U.y, m += U.x, T += U.y), r && r.bezierCurveTo(R, F, H, f, m, T), I.push({
                                x: R,
                                y: F
                            }), I.push({x: H, y: f}), I.push({x: m, y: T}), U.x = m, U.y = T
                        }
                        L = [R, F, H, f, m, T], u = null
                    } else if ("Q" === p || "q" === p) {
                        for (var t = z(s), c = 0; c < t.length; c += 4) {
                            var R = t[c], F = t[c + 1], m = t[c + 2], T = t[c + 3];
                            "q" === p && (R += U.x, F += U.y, m += U.x, T += U.y), r && r.quadraticCurveTo(R, F, m, T), I.push({
                                x: R,
                                y: F
                            }), I.push({x: m, y: T}), U.x = m, U.y = T
                        }
                        L = null, u = [R, F, m, T]
                    } else if ("T" === p || "t" === p) {
                        for (var t = z(s), c = 0; c < t.length; c += 2) {
                            var R, F;
                            u ? (R = 2 * u[2] - u[0], F = 2 * u[3] - u[1]) : (R = U.x, F = U.y);
                            var m = t[c], T = t[c + 1];
                            "t" === p && (m += U.x, T += U.y), r && r.quadraticCurveTo(R, F, m, T), I.push({
                                x: R,
                                y: F
                            }), I.push({x: m, y: T}), U.x = m, U.y = T
                        }
                        L = null, u = [R, F, m, T]
                    } else if ("V" === p || "v" === p) {
                        for (var t = z(s), c = 0; c < t.length; c += 1) {
                            var T = t[c];
                            "v" === p && (T += U.y), r && r.lineTo(U.x, T), I.push({x: U.x, y: T}), U.y = T
                        }
                        L = u = null
                    } else if ("L" === p || "l" === p) {
                        for (var t = z(s), c = 0; c < t.length; c += 2) {
                            var m = t[c], T = t[c + 1];
                            "l" === p && (m += U.x, T += U.y), r && r.lineTo(m, T), I.push({x: m, y: T}), U.x = m, U.y = T
                        }
                        L = u = null
                    } else if ("A" === p || "a" === p) {
                        for (var t = z(s), c = 0; c < t.length; c += 7) {
                            var E = t[c], w = t[c + 1], X = t[c + 2], x = t[c + 3], _ = t[c + 4], m = t[c + 5],
                                T = t[c + 6];
                            "a" === p && (m += U.x, T += U.y);
                            var e = cn(U, E, w, X, x, _, {x: m, y: T}, r);
                            e && (I = I.concat(e)), U.x = m, U.y = T
                        }
                        L = u = null
                    }
                    var l = s.substr(s.length - 1);
                    ("z" === l || "Z" === l) && r && r.closePath()
                }
                return I
            }, xf = function (N, b) {
                var a, F, k = "L" === b[0], D = b.length;
                for (N.save(), k ? (N.transform(b[5], b[6], b[7], b[8], b[9], b[10]), a = N.createLinearGradient(b[1], b[2], b[3], b[4]), F = 11) : (N.transform(b[7], b[8], b[9], b[10], b[11], b[12]), a = N.createRadialGradient(b[1], b[2], b[3], b[4], b[5], b[6]), F = 13); D > F;) a.addColorStop(b[F], b[F + 1]), F += 2;
                N.fillStyle = a
            }, $q = function ($, o) {
                var K = $.s("shape.gradient.pack");
                if (K) {
                    for (var w = K.length, Z = new Array(w), Y = 0; w > Y; Y++) Z[Y] = K[Y];
                    var C, p, d, Q, b, m, X, W, u, A, E, c, T, R = "L" === Z[0];
                    C = R ? 5 : 7, p = Z[C], d = Z[C + 1], Q = Z[C + 2], b = Z[C + 3], m = Z[C + 4], X = Z[C + 5], W = o[0], u = o[1], A = o[2], E = o[3], c = o[4], T = o[5], Z[C] = W * p + A * d, Z[C + 1] = u * p + E * d, Z[C + 2] = W * Q + A * b, Z[C + 3] = u * Q + E * b, Z[C + 4] = W * m + A * X + c, Z[C + 5] = u * m + E * X + T, $.s("shape.gradient.pack", Z)
                }
            }, Qe = function (i, B, H, Y) {
                var S = !1;
                if (i.beginPath ? i.beginPath() : S = !0, $b(B) && (B = B._as), $b(H) && (H = H._as), H && H.length) {
                    for (var m, t, k, g, o = 0, M = 0, l = H.length; l > M; M++) m = H[M], 1 === m ? (t = B[o++], i.moveTo(t.x, S ? -t.y : t.y)) : 2 === m ? (t = B[o++], i.lineTo(t.x, S ? -t.y : t.y)) : 3 === m ? (t = B[o++], k = B[o++], i.quadraticCurveTo(t.x, S ? -t.y : t.y, k.x, S ? -k.y : k.y)) : 4 === m ? (t = B[o++], k = B[o++], g = B[o++], i.bezierCurveTo(t.x, S ? -t.y : t.y, k.x, S ? -k.y : k.y, g.x, S ? -g.y : g.y)) : 5 === m && i.closePath();
                    Y && 5 !== m && i.closePath()
                } else {
                    var T, C, z, b = B.length;
                    if (b > 0) {
                        for (T = B[0], i.moveTo(T.x, S ? -T.y : T.y), C = 1; b > C; C++) z = B[C], i.lineTo(z.x, S ? -z.y : z.y);
                        Y && i.closePath()
                    }
                }
            }, Sn = function (M, z, f, _) {
                if ($b(M) && (M = M._as), $b(z) && (z = z._as), z && z.length) {
                    f = f || ac;
                    for (var p, J, X, T, h, Y, u, I, G = [], i = c, H = 0, W = 0, S = z.length; S > W; W++) if (p = z[W], 1 === p) G.push(i = []), i.push(M[H++]); else if (2 === p) i.push(M[H++]); else if (3 === p) {
                        for (J = i[i.length - 1], X = M[H++], T = M[H++], Y = 1; f > Y; Y++) u = Nd(Y / f, J.x, X.x, T.x), I = Nd(Y / f, J.y, X.y, T.y), i.push({
                            x: u,
                            y: I,
                            b: !0
                        });
                        i.push(T)
                    } else if (4 === p) {
                        for (J = i[i.length - 1], X = M[H++], T = M[H++], h = M[H++], Y = 1; f > Y; Y++) u = Hf(Y / f, J.x, X.x, T.x, h.x), I = Hf(Y / f, J.y, X.y, T.y, h.y), i.push({
                            x: u,
                            y: I,
                            b: !0
                        });
                        i.push(h)
                    } else 5 === p && i.push(i[0]);
                    return _ && 5 !== p && i && i.length > 2 && i.push(i[0]), G
                }
                return _ && M.length > 2 && (M = M.slice(), M.push(M[0])), M ? [M] : []
            }, Tq = function ($, P, L, B, W, F) {
                var d, f, b, k = wg(P), s = B, e = k[0], n = k[1], a = k[2];
                if (L) {
                    var o = wg(L);
                    d = o[0] - e, f = o[1] - n, b = o[2] - a
                } else d = 255 - e, f = 255 - n, b = 255 - a;
                for (F || (F = B > 10 ? 1 : .5, F = 1 > W ? x(F / W, 2) : F); (B -= F) > 0;) {
                    var _ = 1 - B / s, K = e + d * _, I = n + f * _, j = a + b * _;
                    K = x(E(K), 255), I = x(E(I), 255), j = x(E(j), 255), $.strokeStyle = "rgb(" + K + "," + I + "," + j + ")", $.lineWidth = B, $.stroke()
                }
            }, is = function () {
                var K = {};
                return function (e, r) {
                    var w = e + "-" + r, N = K[w];
                    if (N) return N;
                    var L, n, Z, Q = wg(e);
                    return 0 > r ? (r = (100 + r) / 100, L = E(Q[0] * r), n = E(Q[1] * r), Z = E(Q[2] * r)) : (r /= 100, L = Q[0], n = Q[1], Z = Q[2], L += (255 - L) * r, n += (255 - n) * r, Z += (255 - Z) * r, L = x(E(L), 255), n = x(E(n), 255), Z = x(E(Z), 255)), K[w] = "rgb(" + L + "," + n + "," + Z + ")"
                }
            }(), Ui = function (f, x, Q, j, l, W) {
                W && (f.fillStyle = W), f.beginPath(), f.rect(x, Q, j, l), f.fill()
            }, wh = function (Z, e, c, I, i, k, D) {
                Z.beginPath(), Ac[e](Z, c.x, c.y, c.width, c.height, I, i, k, D)
            }, td = function (A, x, Q, s, M) {
                var K = Ac[Q];
                A.fillStyle = K ? K(A, x, s ? s : jm, M.x, M.y, M.width, M.height) : x
            }, rb = function (G, m, q, v, K, N) {
                try {
                    if (!m.tagName && m.comps) {
                        m._cacheImage_ || (m._cacheImage_ = {});
                        var i;
                        i = "override" === v ? "colors_override" : "override_rgb" === v ? "colors_override_rgb" : "override_a" === v ? "colors_override_a" : "colors", m._cacheImage_[i] || (m._cacheImage_[i] = {__count__: 0});
                        var y = m._cacheImage_[i][q];
                        y || (m._cacheImage_[i].__count__ > F.imageCacheThreshold && (m._cacheImage_[i] = {__count__: 0}), y = t.Default.toCanvas(m, fc(m), qr(m), null, K, N, q, null, v), m._cacheImage_[i][q] = y, m._cacheImage_[i].__count__++), m = y
                    }
                    G.fillStyle = G.createPattern(m, "repeat")
                } catch (V) {
                    G.fillStyle = "black"
                }
            }, Zg = function (P, d, o, r, O, E, p) {
                P.save(), P.translate(d, o), P.scale(1, p / E), P.arc(0, 0, E, r, O), P.restore()
            }, vo = function (O, $, i, M, o, U, X, Z) {
                var A, h, y, W, d, m, L, q, H, _, z;
                if (I(o) > 2 * u && (o = 2 * u), d = E(I(o) / (u / 4)), A = o / d, h = -A, y = -M, d > 0) {
                    m = $ + D(M) * U, L = i + C(-M) * X, Z ? O.lineTo(m, L) : O.moveTo(m, L);
                    for (var G = 0; d > G; G++) y += h, W = y - h / 2, q = $ + D(y) * U, H = i + C(y) * X, _ = $ + D(W) * (U / D(h / 2)), z = i + C(W) * (X / D(h / 2)), O.quadraticCurveTo(_, z, q, H)
                }
            }, vr = function (s, v, j, l, o, i, D, K, x) {
                6 === arguments.length && (D = i, K = i, x = i);
                var I = v + l, d = j + o, n = o > l ? 2 * l : 2 * o;
                i = n > i ? i : n, D = n > D ? D : n, K = n > K ? K : n, x = n > x ? x : n;
                var Z = .29 * x, J = .58 * x;
                s.moveTo(I, d - x), s.quadraticCurveTo(I, d - J, I - Z, d - Z), s.quadraticCurveTo(I - J, d, I - x, d), Z = .29 * K, J = .58 * K, s.lineTo(v + K, d), s.quadraticCurveTo(v + J, d, v + Z, d - Z), s.quadraticCurveTo(v, d - J, v, d - K), Z = .29 * i, J = .58 * i, s.lineTo(v, j + i), s.quadraticCurveTo(v, j + J, v + Z, j + Z), s.quadraticCurveTo(v + J, j, v + i, j), Z = .29 * D, J = .58 * D, s.lineTo(I - D, j), s.quadraticCurveTo(I - J, j, I - Z, j + Z), s.quadraticCurveTo(I, j + J, I, j + D), s.lineTo(I, d - x)
            }, Qg = function (j, d, k, G, S, p, n) {
                d && (k = P(k), G = P(G), n || (n = 1), j.fillStyle = d, j.beginPath(), j.rect(k, G, n, p), j.rect(k, G, S, n), p - n > 0 && j.rect(k, G + p - n, S, n), S - n > 0 && j.rect(k + S - n, G, n, p), j.fill())
            }, pp = function (d, J, o, c) {
                var v = c.x, R = c.y, n = c.width, f = c.height;
                if (!(!J || !o || 0 >= n || 0 >= f)) {
                    var B, X = Gj(J), Z = zn(J), S = o > 0;
                    1 === o || -1 === o ? (d.fillStyle = S ? X : Z, d.beginPath(), d.rect(v, R, 1, f), d.rect(v, R, n, 1), d.fill(), d.fillStyle = S ? Z : X, d.beginPath(), d.rect(v, R + f - 1, n, 1), d.rect(v + n - 1, R, 1, f), d.fill()) : (o = x(I(o), x(n / 2, f / 2)), B = d.createLinearGradient(v, R, v + o, R), B.addColorStop(0, S ? X : Z), B.addColorStop(1, J), d.fillStyle = B, d.beginPath(), d.moveTo(v, R), d.lineTo(v + o, R + o), d.lineTo(v + o, R + f - o), d.lineTo(v, R + f), d.lineTo(v, R), d.fill(), B = d.createLinearGradient(v, R, v, R + o), B.addColorStop(0, S ? X : Z), B.addColorStop(1, J), d.fillStyle = B, d.beginPath(), d.moveTo(v, R), d.lineTo(v + o, R + o), d.lineTo(v + n - o, R + o), d.lineTo(v + n, R), d.lineTo(v, R), d.fill(), B = d.createLinearGradient(v, R + f, v, R + f - o), B.addColorStop(0, S ? Z : X), B.addColorStop(1, J), d.fillStyle = B, d.beginPath(), d.moveTo(v, R + f), d.lineTo(v + o, R + f - o), d.lineTo(v + n - o, R + f - o), d.lineTo(v + n, R + f), d.lineTo(v, R + f), d.fill(), B = d.createLinearGradient(v + n, R, v + n - o, R), B.addColorStop(0, S ? Z : X), B.addColorStop(1, J), d.fillStyle = B, d.beginPath(), d.moveTo(v + n, R), d.lineTo(v + n - o, R + o), d.lineTo(v + n - o, R + f - o), d.lineTo(v + n, R + f), d.lineTo(v + n, R), d.fill())
                }
            }, to = function (U, I, b, M, y, u, V) {
                var d = U.createLinearGradient(M, y, u, V);
                return d.addColorStop(0, b), d.addColorStop(1, I), d
            }, Lq = function (d, r, h, F, X, $, s) {
                var Y = d.createLinearGradient(F, X, $, s);
                return Y.addColorStop(0, r), Y.addColorStop(.5, h), Y.addColorStop(1, r), Y
            }, kl = function (G, O, S, r, p, f, L) {
                var g = G.createLinearGradient(r, p, f, L);
                return g.addColorStop(0, O), g.addColorStop(1 / 3, S), g.addColorStop(2 / 3, O), g.addColorStop(1, S), g
            }, Uh = function (P, p, N, T, L, R, u, M, C) {
                var O = P.createRadialGradient(T + R * M, L + u * C, x(R, u) / 24, T + R / 2, L + u / 2, y(R, u) / 2);
                return O.addColorStop(0, N), O.addColorStop(1, p), O
            }, Ac = {
                polygon: function (h, R, I, p, q, j) {
                    (j == c || 3 > j) && (j = 6);
                    for (var m, G, Y = x(p, q) / 2, o = R + p / 2, A = I + q / 2, s = 0, B = 2 * u / j, e = 0; j > e; e++) m = o + D(s) * Y, G = A + C(s) * Y, 0 === e ? h.moveTo(m, G) : h.lineTo(m, G), s += B;
                    h.closePath()
                }, arc: function (V, O, D, $, q, Y, Z, H, G) {
                    Y == c && (Y = u), Z == c && (Z = k), H == c && (H = !0);
                    var A = O + $ / 2, X = D + q / 2;
                    H && V.moveTo(A, X), G ? Zg(V, A, X, Y, Z, $ / 2, q / 2) : V.arc(A, X, x($, q) / 2, Y, Z), H && V.closePath()
                }, rect: function (T, J, U, d, Z) {
                    T.rect(J, U, d, Z)
                }, circle: function (v, g, Y, L, p) {
                    v.arc(g + L / 2, Y + p / 2, x(L, p) / 2, 0, k, !0)
                }, oval: function (O, H, U, n, R) {
                    Zg(O, H + n / 2, U + R / 2, 0, k, n / 2, R / 2)
                }, roundRect: function (O, d, L, i, R, E) {
                    E == c && (E = x(x(i, R) / 4, 8)), vr(O, d, L, i, R, E)
                }, star: function (p, S, l, o, U) {
                    var s = 2 * o, j = 2 * U, v = S + o / 2, h = l + U / 2;
                    p.moveTo(v - s / 4, h - j / 12), p.lineTo(S + .306 * o, l + .579 * U), p.lineTo(v - s / 6, h + j / 4), p.lineTo(S + o / 2, l + .733 * U), p.lineTo(v + s / 6, h + j / 4), p.lineTo(S + .693 * o, l + .579 * U), p.lineTo(v + s / 4, h - j / 12), p.lineTo(S + .611 * o, l + .332 * U), p.lineTo(v + 0, h - j / 4), p.lineTo(S + .388 * o, l + .332 * U), p.closePath()
                }, triangle: function (i, h, z, Z, w) {
                    i.moveTo(h + Z / 2, z), i.lineTo(h + Z, z + w), i.lineTo(h, z + w), i.closePath()
                }, hexagon: function (p, x, A, R, V) {
                    p.moveTo(x, A + V / 2), p.lineTo(x + R / 4, A + V), p.lineTo(x + 3 * R / 4, +A + V), p.lineTo(x + R, A + V / 2), p.lineTo(x + 3 * R / 4, A), p.lineTo(x + R / 4, A), p.closePath()
                }, pentagon: function (C, i, r, s, I) {
                    var j = 2 * s, z = 2 * I, h = i + s / 2, M = r + I / 2;
                    C.moveTo(h - j / 4, M - z / 12), C.lineTo(h - j / 6, M + z / 4), C.lineTo(h + j / 6, M + z / 4), C.lineTo(h + j / 4, M - z / 12), C.lineTo(h + 0, M - z / 4), C.closePath()
                }, diamond: function (j, l, Z, c, S) {
                    j.moveTo(l + c / 2, Z), j.lineTo(l, Z + S / 2), j.lineTo(l + c / 2, Z + S), j.lineTo(l + c, Z + S / 2), j.closePath()
                }, rightTriangle: function (H, e, T, b, M) {
                    H.moveTo(e, T), H.lineTo(e + b, T + M), H.lineTo(e, T + M), H.closePath()
                }, parallelogram: function (j, z, M, R, x) {
                    var V = R / 4;
                    j.moveTo(z + V, M), j.lineTo(z + R, M), j.lineTo(z + R - V, M + x), j.lineTo(z, M + x), j.closePath()
                }, trapezoid: function (A, Y, e, H, I) {
                    var _ = H / 4;
                    A.moveTo(Y + _, e), A.lineTo(Y + H - _, e), A.lineTo(Y + H, e + I), A.lineTo(Y, e + I), A.closePath()
                }, "linear.southwest": function (t, L, x, S, O, B, d) {
                    return to(t, L, x, S, O + d, S + B, O)
                }, "linear.southeast": function (e, c, m, B, L, g, w) {
                    return to(e, c, m, B + g, L + w, B, L)
                }, "linear.northwest": function (V, p, x, N, e, h, l) {
                    return to(V, p, x, N, e, N + h, e + l)
                }, "linear.northeast": function (l, I, M, V, O, x, n) {
                    return to(l, I, M, V + x, O, V, O + n)
                }, "linear.north": function (T, B, x, m, u, Y, R) {
                    return to(T, B, x, m, u, m, u + R)
                }, "linear.south": function (I, U, R, b, m, g, k) {
                    return to(I, U, R, b, m + k, b, m)
                }, "linear.west": function (F, d, v, J, b, M) {
                    return to(F, d, v, J, b, J + M, b)
                }, "linear.east": function (l, m, W, C, x, b) {
                    return to(l, m, W, C + b, x, C, x)
                }, "radial.center": function (y, d, C, F, Z, v, e) {
                    return Uh(y, d, C, F, Z, v, e, .5, .5)
                }, "radial.southwest": function (O, S, E, d, V, F, t) {
                    return Uh(O, S, E, d, V, F, t, .25, .75)
                }, "radial.southeast": function (L, r, V, b, i, T, d) {
                    return Uh(L, r, V, b, i, T, d, .75, .75)
                }, "radial.northwest": function (X, P, R, C, W, E, f) {
                    return Uh(X, P, R, C, W, E, f, .25, .25)
                }, "radial.northeast": function (G, L, J, N, j, f, i) {
                    return Uh(G, L, J, N, j, f, i, .75, .25)
                }, "radial.north": function (T, w, P, e, L, Q, Y) {
                    return Uh(T, w, P, e, L, Q, Y, .5, .25)
                }, "radial.south": function (o, O, a, k, P, Z, X) {
                    return Uh(o, O, a, k, P, Z, X, .5, .75)
                }, "radial.west": function (x, Q, e, i, o, z, A) {
                    return Uh(x, Q, e, i, o, z, A, .25, .5)
                }, "radial.east": function (g, u, y, l, H, n, U) {
                    return Uh(g, u, y, l, H, n, U, .75, .5)
                }, "spread.horizontal": function (t, K, g, w, E, y) {
                    return Lq(t, K, g, w, E, w + y, E)
                }, "spread.vertical": function (c, O, L, E, t, U, Z) {
                    return Lq(c, O, L, E, t, E, t + Z)
                }, "spread.diagonal": function (u, g, P, O, T, B, a) {
                    return Lq(u, g, P, O + B, T, O, T + a)
                }, "spread.antidiagonal": function (v, e, $, t, M, X, G) {
                    return Lq(v, e, $, t, M, t + X, M + G)
                }, "spread.north": function (v, d, t, M, l, u, $) {
                    return kl(v, d, t, M, l - $ / 4, M, l + $ + $ / 4)
                }, "spread.south": function (d, M, c, o, B, u, A) {
                    return kl(d, c, M, o, B - A / 4, o, B + A + A / 4)
                }, "spread.west": function (n, V, e, t, q, f) {
                    return kl(n, V, e, t - f / 4, q, t + f + f / 4, q)
                }, "spread.east": function (a, p, k, Y, G, D) {
                    return kl(a, k, p, Y - D / 4, G, Y + D + D / 4, G)
                }
            }, Yq = function (T, h, B) {
                return new Op(T).tf(h, B)
            }, fp = function (D) {
                var k = D.touches[0], c = D.touches[1], C = k.clientX, d = k.clientY, e = c.clientX, A = c.clientY;
                return s((C - e) * (C - e) + (d - A) * (d - A))
            }, bi = (function () {
                for (var $ = 0, N = Bs.split(""), a = 0; a < N.length; a++) $ = 10 * A(N[a]) + $;
                return tq(m[Gp.toString(8 * a) + hg.substr(a) + 2]), $
            }(), function (H, v, t) {
                for (var N = 0; N < t.size(); N++) {
                    var z = t.get(N);
                    H.co(z) && v.add(z)
                }
                for (N = 0; N < t.size(); N++) z = t.get(N), bi(H, v, z._children)
            }), ej = function (c, $, x) {
                for (var Z = 0; Z < x.size(); Z++) {
                    var o = x.get(x.size() - 1 - Z);
                    c.co(o) && $.add(o)
                }
                for (Z = 0; Z < x.size(); Z++) o = x.get(Z), ej(c, $, o._children)
            }, Dg = function (_, Z, N) {
                for (var L = !1, p = 0; p < N.size(); p++) {
                    var H = N.get(p);
                    _.co(H) ? L && Z.add(H) : L = 1
                }
                for (p = 0; p < N.size(); p++) H = N.get(p), Dg(_, Z, H._children)
            }, Xc = function (q, Y, E) {
                for (var u = !1, C = 0; C < E.size(); C++) {
                    var s = E.get(E.size() - 1 - C);
                    q.co(s) ? u && Y.add(s) : u = !0
                }
                for (C = 0; C < E.size(); C++) s = E.get(C), Xc(q, Y, s._children)
            }, Pr = function (n, J, q, S) {
                var j = S == c;
                if (0 !== J || 0 !== q || !j && 0 !== S) {
                    var o, v, Q, P, K, i = new vp;
                    n.each(function (r) {
                        if (Ik(r)) {
                            var W = !0;
                            if (Q) for (o = 0; o < Q.size(); o++) v = Q.get(o), v.isHostOn(r) ? (Q.removeAt(o), o--, i.remove(v)) : W && (r.isHostOn(v) || r.isLoopedHostOn(v)) && (W = !1);
                            if (P) for (o = 0; o < P.size(); o++) v = P.get(o), Oi(v, r) ? (P.removeAt(o), o--, i.remove(v)) : W && Oi(r, v) && (W = !1);
                            if (K) for (o = 0; o < K.size(); o++) v = K.get(o), yq(v, r) ? (K.removeAt(o), o--, i.remove(v)) : W && yq(r, v) && (W = !1);
                            W && (i.add(r), (r._host || r._69O) && (Q || (Q = new vp), Q.add(r)), (kk(r) || kk(r._parent)) && (P || (P = new vp), P.add(r)), (_e(r) || _e(r._parent)) && (K || (K = new vp), K.add(r)))
                        } else if (gs(r) && r.s(ms) === ik) {
                            var y = r.s(mm);
                            if (y && !y.isEmpty()) {
                                var h = new vp;
                                y.each(function (H) {
                                    H = hh(H), j ? (H.x += J, H.y += q) : (H.x += J, H.y += S, H.e == c ? H.e = q : H.e += q), h.add(H)
                                }), r.s(mm, h)
                            }
                        }
                    }), i.each(function (z) {
                        j ? z.translate(J, q) : z.translate3d(J, q, S)
                    })
                }
            }, se = function (F, N) {
                for (; F && !F.hasOwnProperty(N);) F = v.getPrototypeOf(F);
                return F && v.getOwnPropertyDescriptor(F, N)
            }, zi = v.getPrototypeOf ? function (Q, t, j) {
                var m = se(t, j);
                m && v.defineProperty(Q, j, m)
            } : function ($, k, h) {
                $[h] = k[h]
            }, Fr = {
                1: 29,
                2: 30,
                3: 31,
                4: 32,
                5: 33,
                6: 26,
                7: 27,
                8: 28,
                9: 21,
                10: 22,
                11: 23,
                12: 24,
                13: 25,
                14: 14,
                15: 15,
                16: 16,
                17: 17,
                18: 18,
                19: 19,
                20: 20,
                21: 9,
                22: 10,
                23: 11,
                24: 12,
                25: 13,
                26: 6,
                27: 7,
                28: 8,
                29: 1,
                30: 2,
                31: 3,
                32: 4,
                33: 5,
                34: 36,
                35: 37,
                36: 34,
                37: 35,
                38: 54,
                39: 55,
                40: 52,
                41: 53,
                42: 50,
                43: 51,
                44: 49,
                50: 42,
                51: 43,
                52: 40,
                53: 41,
                54: 38,
                55: 39
            }, Nc = function () {
                var x = {
                    1: function (G, E) {
                        return {x: G.x - E.width / 2, y: G.y - E.height / 2}
                    }, 2: function (T, L) {
                        return {x: T.x + L.width / 2, y: T.y - L.height / 2}
                    }, 3: function (w, A) {
                        return {x: w.x + w.width / 2, y: w.y - A.height / 2}
                    }, 4: function (X, C) {
                        return {x: X.x + X.width - C.width / 2, y: X.y - C.height / 2}
                    }, 5: function (D, u) {
                        return {x: D.x + D.width + u.width / 2, y: D.y - u.height / 2}
                    }, 6: function (W) {
                        return {x: W.x, y: W.y}
                    }, 7: function (R) {
                        return {x: R.x + R.width / 2, y: R.y}
                    }, 8: function (y) {
                        return {x: y.x + y.width, y: y.y}
                    }, 9: function (Y, z) {
                        return {x: Y.x - z.width / 2, y: Y.y + z.height / 2}
                    }, 10: function (c, t) {
                        return {x: c.x + t.width / 2, y: c.y + t.height / 2}
                    }, 11: function (o, w) {
                        return {x: o.x + o.width / 2, y: o.y + w.height / 2}
                    }, 12: function (r, k) {
                        return {x: r.x - k.width / 2 + r.width, y: r.y + k.height / 2}
                    }, 13: function (A, S) {
                        return {x: A.x + A.width + S.width / 2, y: A.y + S.height / 2}
                    }, 14: function (y, k) {
                        return {x: y.x - k.width / 2, y: y.y + y.height / 2}
                    }, 15: function (f) {
                        return {x: f.x, y: f.y + f.height / 2}
                    }, 16: function (r, W) {
                        return {x: r.x + W.width / 2, y: r.y + r.height / 2}
                    }, 17: function (_) {
                        return {x: _.x + _.width / 2, y: _.y + _.height / 2}
                    }, 18: function (B, P) {
                        return {x: B.x + B.width - P.width / 2, y: B.y + B.height / 2}
                    }, 19: function (E) {
                        return {x: E.x + E.width, y: E.y + E.height / 2}
                    }, 20: function (r, R) {
                        return {x: r.x + r.width + R.width / 2, y: r.y + r.height / 2}
                    }, 21: function (k, g) {
                        return {x: k.x - g.width / 2, y: k.y + k.height - g.height / 2}
                    }, 22: function (G, L) {
                        return {x: G.x + L.width / 2, y: G.y + G.height - L.height / 2}
                    }, 23: function (O, s) {
                        return {x: O.x + O.width / 2, y: O.y + O.height - s.height / 2}
                    }, 24: function (j, Y) {
                        return {x: j.x + j.width - Y.width / 2, y: j.y + j.height - Y.height / 2}
                    }, 25: function (d, R) {
                        return {x: d.x + d.width + R.width / 2, y: d.y + d.height - R.height / 2}
                    }, 26: function (y) {
                        return {x: y.x, y: y.y + y.height}
                    }, 27: function (p) {
                        return {x: p.x + p.width / 2, y: p.y + p.height}
                    }, 28: function (X) {
                        return {x: X.x + X.width, y: X.y + X.height}
                    }, 29: function (N, X) {
                        return {x: N.x - X.width / 2, y: N.y + N.height + X.height / 2}
                    }, 30: function (K, T) {
                        return {x: K.x + T.width / 2, y: K.y + K.height + T.height / 2}
                    }, 31: function (e, n) {
                        return {x: e.x + e.width / 2, y: e.y + e.height + n.height / 2}
                    }, 32: function (r, y) {
                        return {x: r.x + r.width - y.width / 2, y: r.y + r.height + y.height / 2}
                    }, 33: function (V, e) {
                        return {x: V.x + V.width + e.width / 2, y: V.y + V.height + e.height / 2}
                    }, 34: function (p, z) {
                        return {x: p.x, y: p.y - z.height / 2}
                    }, 35: function (q, W) {
                        return {x: q.x + q.width, y: q.y - W.height / 2}
                    }, 36: function (d, B) {
                        return {x: d.x, y: d.y + d.height + B.height / 2}
                    }, 37: function (t, _) {
                        return {x: t.x + t.width, y: t.y + t.height + _.height / 2}
                    }, 38: function (H, B) {
                        return {x: H.x + H.width / 4, y: H.y - B.height / 2}
                    }, 39: function (S, A) {
                        return {x: S.x + 3 * S.width / 4, y: S.y - A.height / 2}
                    }, 40: function (e) {
                        return {x: e.x + e.width / 4, y: e.y}
                    }, 41: function (t) {
                        return {x: t.x + 3 * t.width / 4, y: t.y}
                    }, 42: function (l, k) {
                        return {x: l.x + l.width / 4, y: l.y + k.height / 2}
                    }, 43: function (P, f) {
                        return {x: P.x + 3 * P.width / 4, y: P.y + f.height / 2}
                    }, 44: function (J, k) {
                        return {x: J.x + J.width / 2, y: J.y + J.height / 2 - k.height / 2}
                    }, 45: function (d) {
                        return {x: d.x + d.width / 4, y: d.y + d.height / 2}
                    }, 46: function (Y, W) {
                        return {x: Y.x + Y.width / 2 - W.width / 2, y: Y.y + Y.height / 2}
                    }, 47: function (c, i) {
                        return {x: c.x + c.width / 2 + i.width / 2, y: c.y + c.height / 2}
                    }, 48: function (N) {
                        return {x: N.x + 3 * N.width / 4, y: N.y + N.height / 2}
                    }, 49: function (i, C) {
                        return {x: i.x + i.width / 2, y: i.y + i.height / 2 + C.height / 2}
                    }, 50: function (t, x) {
                        return {x: t.x + t.width / 4, y: t.y + t.height - x.height / 2}
                    }, 51: function (E, W) {
                        return {x: E.x + 3 * E.width / 4, y: E.y + E.height - W.height / 2}
                    }, 52: function (w) {
                        return {x: w.x + w.width / 4, y: w.y + w.height}
                    }, 53: function (Z) {
                        return {x: Z.x + 3 * Z.width / 4, y: Z.y + Z.height}
                    }, 54: function (h, V) {
                        return {x: h.x + h.width / 4, y: h.y + h.height + V.height / 2}
                    }, 55: function (t, T) {
                        return {x: t.x + 3 * t.width / 4, y: t.y + t.height + T.height / 2}
                    }
                };
                return Zh(m) ? function (z, j, v) {
                    return x[z](j, v ? v : Wo)
                } : void 0
            }();
        Nn(W, {
            highlight: "#1ABC9C",
            label: "#000",
            labelSelect: "#FFF",
            transparent: "rgba(0,0,0,0.35)",
            titleBackground: "#2C3E50",
            titleIconBackground: "#868686",
            headerBackground: "#ECF0F1",
            headerIconBackground: "#868686",
            headerSeparator: "#868686",
            headerLine: "#D9D9D9",
            background: "#FFF",
            disabledBackground: "rgba(255,255,255,0.65)",
            toolTipBackground: "#FFFFE0",
            rectSelectBorder: "#2C3E50",
            rectSelectBackground: "rgba(0,0,0,0.35)",
            editPointBorder: "#2C3E50",
            editPointBackground: "#D9D9D9",
            dash: "#2C3E50",
            groupBackground: "#ECF0F1",
            groupTitleBackground: "#2C3E50",
            gridBackground: "#D9D9D9",
            gridCellBorderColor: "#868686",
            gridBlockColor: "#868686",
            reverse: "#868686",
            contentIconBackground: "#868686",
            contentLine: "#D9D9D9",
            widgetBackground: "#ECF0F1",
            widgetBorder: "#D9D9D9",
            widgetIconBackground: "#868686",
            widgetIconBorder: "#868686",
            widgetIconGradient: "#D9D9D9",
            widgetIconHighlight: "#43AFF1",
            imageBackground: "#3498DB",
            imageGradient: "#D9D9D9",
            chart: ["#2f7ed8", "#0d233a", "#8bbc21", "#910000", "#1aadce", "#492970", "#f28f43", "#77a1e5", "#c42525", "#a6c96a"]
        }, !0);
        var pl = W.reverse, Rr = W.transparent, Fg = W.rectSelectBackground, zq = W.dash, Cd = W.titleBackground,
            $p = W.titleIconBackground, Tc = W.headerBackground, Uo = W.headerIconBackground, id = W.headerSeparator,
            Wd = W.headerLine, zg = W.contentIconBackground, vj = W.contentLine,
            Jh = (W.widgetIconHighlight, W.widgetIconBorder), Jn = (W.widgetIconGradient, W.imageBackground),
            jm = W.imageGradient, bh = W.highlight, _q = W.label, cp = W.labelSelect;
        if (e && !m.shutAlert) {
            var Ep = new Date, Id = e.split("-"), Wq = new Date(Ep.getFullYear(), Ep.getMonth(), Ep.getDate()),
                e = new Date(A(Id[0], 10), A(Id[1], 10) - 1, A(Id[2], 10)), gd = Wq.getTime(), Bn = e.getTime(),
                Hm = G + "_try", tf = m.alert;
            try {
                var wl = m.localStorage;
                if (wl && tf) if (Bn > gd && 1728e6 > Bn - gd) {
                    var xc = (Bn - gd) / 864e5;
                    wl && wl[Hm] != xc && (wl[Hm] = xc, tf("HT for Web free trial license will expire in " + xc + " days, please apply for a new license!"))
                } else gd >= Bn && tf("Your free trial of HT for Web has expired!"), wl && delete wl[Hm]
            } catch (Rq) {
            }
        }
        var zh = {
            ms_ac: function (f, $) {
                for (var G = $.ms_ac, Q = 0; Q < G.length; Q++) Fj(f, G[Q])
            }, ms_listener: function (i) {
                i.addListeners = function () {
                    for (var L = this, u = 0; u < Un.length; u++) L["handle_" + Un[u]] && mf(Un[u], L.getView(), L)
                }, i.removeListeners = function () {
                    for (var A = this, Y = 0; Y < Un.length; Y++) A["handle_" + Un[Y]] && im(Un[Y], A.getView(), A)
                }
            }, ms_fire: function (g) {
                g.mp = function (j, F, D) {
                    this.addPropertyChangeListener(j, F, D)
                }, g.ump = function (i, H) {
                    this.removePropertyChangeListener(i, H)
                }, g.fp = function (m, U, T, j, Q) {
                    return this.firePropertyChange(m, U, T, j, Q)
                }, g.addPropertyChangeListener = function (h, U, t) {
                    var T = this;
                    T._62I || (T._62I = new tc), T._62I.add(h, U, t)
                }, g.removePropertyChangeListener = function (x, a) {
                    this._62I && this._62I.remove(x, a)
                }, g.firePropertyChange = function (Q, P, Y, G, O) {
                    if (G) {
                        if (G(P, Y)) return !1
                    } else if (P === Y) return !1;
                    var r = this, x = O || {};
                    return x.property = Q, x.oldValue = P, x.newValue = Y, x.source = r, x.data = r, r._62I && r._62I.fire(x), r.onPropertyChanged && r.onPropertyChanged(x), !0
                }
            }, ms_attr: function (a) {
                a.a = function (N, P) {
                    var q = this;
                    if (2 === arguments.length) q.setAttr(N, P); else {
                        if (!Pe(N)) return q.getAttr(N);
                        for (var c in N) q.setAttr(c, N[c])
                    }
                    return q
                }, a.getAttr = function (O, m) {
                    if (m === $ && (m = 1), this._attrObject && O in this._attrObject) return this._attrObject[O];
                    if (this.getImage) {
                        var G = this.getImage();
                        if (Rp(G) && (G = Sr[G]), Pe(G) && "dataBindings" in G) for (var B = G.dataBindings, T = B.length - 1; T >= 0; T--) {
                            var g = B[T];
                            if (g.attr === O) {
                                if ("defaultValue" in g) return g.defaultValue;
                                break
                            }
                        }
                    }
                    return m ? w[O] : $
                }, a.setAttr = function (e, o) {
                    var Q = this;
                    Q._attrObject || (Q._attrObject = {});
                    var h = Q._attrObject[e];
                    o === $ ? delete Q._attrObject[e] : Q._attrObject[e] = o, Q.fp && Q.fp("a:" + e, h, o) && Q.onAttrChanged && Q.onAttrChanged(e, h, o)
                }, a.getSerializableAttrs = function () {
                    var s, e = {};
                    for (s in this._attrObject) e[s] = 1;
                    return e
                }
            }, ms_bnb: function (n) {
                n.getBodyColor = function (D) {
                    return D.s("body.color")
                }, n.getBorderColor = function (e) {
                    return e.s("border.color")
                }
            }, _51o: function (I) {
                I.mi = function (u, B, t) {
                    this.addInteractorListener(u, B, t)
                }, I.umi = function (c, L) {
                    this.removeInteractorListener(c, L)
                }, I.fi = function (N) {
                    this.fireInteractorEvent(N)
                }, I.addInteractorListener = function (L, Q, b) {
                    var $ = this;
                    $._63I || ($._63I = new tc), $._63I.add(L, Q, b)
                }, I.removeInteractorListener = function (h, y) {
                    this._63I.remove(h, y)
                }, I.fireInteractorEvent = function (k) {
                    this._63I && this._63I.fire(k)
                }, I.setInteractors = function (F) {
                    var N = this, Q = N._interactors;
                    Q && Q.each(function (c) {
                        c.tearDown()
                    }), Qd(F) && (F = new vp(F)), N._interactors = F, F && F.each(function (D) {
                        D.setUp()
                    }), N.fp("interactors", Q, F), N.invalidateSelection()
                }, I.getInteractors = function () {
                    return this._interactors
                }
            }, _49o: function (R) {
                R._44O = c, R._45O = c, R.getTopPainters = function () {
                    return this._44O
                }, R.getBottomPainters = function () {
                    return this._45O
                }, R.addTopPainter = function (W) {
                    var N = this;
                    N._44O || (N._44O = new vp), N._44O.contains(W) || (N._44O.add(W), N.redraw && N.redraw())
                }, R.removeTopPainter = function (w) {
                    var J = this;
                    J._44O && (J._44O.remove(w), J.redraw && J.redraw())
                }, R.addBottomPainter = function (N) {
                    var P = this;
                    P._45O || (P._45O = new vp), P._45O.contains(N) || (P._45O.add(N), P.redraw && P.redraw())
                }, R.removeBottomPainter = function (P) {
                    var M = this;
                    M._45O && (M._45O.remove(P), M.redraw && M.redraw())
                }, R._93db = function (e, G) {
                    var N = this;
                    N._45O && N._45O.each(function (g) {
                        g.draw ? g.draw(e, G) : g.call(N, e, G)
                    })
                }, R._92db = function (B, C) {
                    var N = this;
                    N._44O && N._44O.each(function (e) {
                        e.draw ? e.draw(B, C) : e.call(N, B, C)
                    })
                }
            }, ms_sm: function (e) {
                e.sm = function () {
                    return this.getSelectionModel()
                }, e.setSelectableFunc = function (Y) {
                    this.sm().setFilterFunc(Y)
                }, e.getSelectableFunc = function () {
                    return this.sm().getFilterFunc()
                }, e.getSelectionModel = function () {
                    var X = this;
                    return X._selectionModel ? X._selectionModel : X.dm().sm()
                }, e.isSelectionModelShared = function () {
                    return !this._selectionModel
                }, e.setSelectionModelShared = function (B) {
                    var R = this, r = !R._selectionModel, Y = R.handleSelectionChange, P = R.dm();
                    r !== B && (R.invalidateSelection && R.invalidateSelection(), B ? (P.sm().ms(Y, R), R._selectionModel.ums(Y, R), R._selectionModel.dispose(), R._selectionModel = c) : (P.sm().ums(Y, R), R._selectionModel = new Gk(P), R._selectionModel.ms(Y, R)), R.onSelectionModelSharedChanged(), R.fp("selectionModelShared", r, B))
                }, e.onSelectionModelSharedChanged = function () {
                    var l = this;
                    l.redraw(), l.invalidateSelection && l.invalidateSelection()
                }, e.removeSelection = function () {
                    var Z = this.dm();
                    Z.beginTransaction(), this.sm().toSelection().each(Z.remove, Z), Z.endTransaction()
                }, e.selectAll = function () {
                    var m = this;
                    m.sm().ss(m.dm().toDatas(function (V) {
                        return m.isVisible(V) && m.isSelectable(V)
                    }))
                }, e.isSelected = function (e) {
                    return this.sm().co(e)
                }, e.isSelectedById = function (z) {
                    var Q = this.dm().getDataById(z);
                    return Q ? this.isSelected(Q) : !1
                }, e.isSelectable = function (v) {
                    return this.sm().isSelectable(v)
                }
            }, ms_tx: function (z) {
                z._64I = 0, z._65O = 0, z.isScrollable = function () {
                    return this.getWidth() < this._64I
                }, z._40o = function () {
                    return this.isScrollable()
                }, z.getLogicalPoint = function (Z) {
                    return xk(Z, this._canvas || this._view, this.tx(), this.ty ? this.ty() : 0)
                }, z.tx = function (H) {
                    return H === $ ? this.getTranslateX() : (this.setTranslateX(H), void 0)
                }, z.getTranslateX = function () {
                    return this._65O
                }, z.setTranslateX = function (M) {
                    var B = this, Q = B.getWidth() - B._64I;
                    Q > M && (M = Q), M > 0 && (M = 0), M = P(M);
                    var d = B._65O;
                    B._65O = M, B.fp(An, d, M)
                }
            }, ms_ty: function (h) {
                h._23Q = 0, h._66O = 0, h._41o = function () {
                    return this.getHeight() < this._23Q
                }, h.getLogicalPoint = function (g) {
                    return xk(g, this._canvas || this._view, this.tx ? this.tx() : 0, this.ty())
                }, h.ty = function (U) {
                    return U === $ ? this.getTranslateY() : (this.setTranslateY(U), void 0)
                }, h.getTranslateY = function () {
                    return this._66O
                }, h.setTranslateY = function (h) {
                    var F = this, u = F.getHeight() - F._23Q;
                    u > h && (h = u), h > 0 && (h = 0), h = P(h);
                    var O = F._66O;
                    F._66O = h, F.fp($n, O, h)
                }
            }, ms_txy: function (W) {
                W._65O = 0, W._66O = 0, W.tx = function (P) {
                    return P === $ ? this.getTranslateX() : (this.setTranslateX(P), void 0)
                }, W.ty = function (X) {
                    return X === $ ? this.getTranslateY() : (this.setTranslateY(X), void 0)
                }, W.onTranslateEnded = function () {
                }, W.setTranslate = function (f, q, w) {
                    var $ = this;
                    if (w = ho(w)) {
                        $._65I && $._65I.stop(!0);
                        var l = $.tx(), b = $.ty();
                        w.action = function (Y) {
                            $.setTranslate(l + (f - l) * Y, b + (q - b) * Y)
                        }, w._37o = function () {
                            delete $._66I, delete $._65I, $.onTranslateEnded()
                        }, $._66I = 1, $._65I = Aq(w)
                    } else $.tx(f), $.ty(q)
                }, W.getTranslateX = function () {
                    return this._65O
                }, W.setTranslateX = function (G) {
                    var R = this;
                    G = R.adjustTranslateX(G);
                    var w = R._65O;
                    R._65O = G, R.fp(An, w, G)
                }, W.getTranslateY = function () {
                    return this._66O
                }, W.setTranslateY = function (R) {
                    var I = this;
                    R = I.adjustTranslateY(R);
                    var L = I._66O;
                    I._66O = R, I.fp($n, L, R)
                }, W.adjustTranslateX = function (o) {
                    return P(o)
                }, W.adjustTranslateY = function (x) {
                    return P(x)
                }, W.translate = function (D, g, J) {
                    this.setTranslate(this.tx() + D, this.ty() + g, J)
                }, W.getLogicalPoint = function (h) {
                    var u = this;
                    return xk(h, this._canvas || u._view, u.tx(), u.ty())
                }
            }, ms_dm: function (e) {
                e.dm = function (Q) {
                    return Q ? (this.setDataModel(Q), void 0) : this.getDataModel()
                }, e.getDataModel = function () {
                    return this._dataModel
                }
            }, ms_lp: function (d) {
                d.lp = function (j) {
                    return this.getLogicalPoint(j)
                }
            }, ms_v: function (n) {
                n._disabled = !1, n.setDisabled = function (X, n) {
                    var D = this, W = D._disabled;
                    W !== X && (W && (zm(D._63O), delete D._63O), X && (Vo(D._view, D._63O = Pl(n)), D.iv()), D._disabled = X, D.fp("disabled", W, X))
                }, n.isDisabled = function () {
                    return this._disabled
                }, n.getDisabledDiv = function () {
                    return this._63O
                }, n.getView = function () {
                    return this._view
                }, n.addToDOM = function () {
                    var c = this, h = c.getView(), p = h.style;
                    S.body.appendChild(h), p.left = "0", p.right = "0", p.top = "0", p.bottom = "0", m.addEventListener("resize", function () {
                        c.iv()
                    }, !1), c.iv()
                }, n.getWidth = function () {
                    return this._view.clientWidth
                }, n.getHeight = function () {
                    return this._view.clientHeight
                }, n.setWidth = function (Z) {
                    var l = this;
                    l._view.style.width = Z + hr, l.iv(), l.fp && l.fp(Ql, c, Z)
                }, n.setHeight = function (y) {
                    var D = this;
                    D._view.style.height = y + hr, D.iv(), D.fp && D.fp(pb, c, y)
                }, n.setFocus = function (r) {
                    var $ = this, w = $._currentEditor;
                    return r && w && (w.getView && (w = w.getView()), w.contains(r.target)) ? !1 : (Cm($._view), $.endEditing && $.endEditing(), $.fireViewEvent("focus"), !0)
                }, n.iv = function (c) {
                    this.invalidate(c)
                }, n.invalidate = function (p) {
                    var j = this;
                    j._68I || (j._68I = 1, Np(j.validate, j, c, p), j.onInvalidated && j.onInvalidated(), j.fireViewEvent("invalidate"))
                }, n.validate = function () {
                    var M = this, U = M._view;
                    if (M._68I && (delete M._68I, U.parentNode)) if (0 === U.offsetWidth && 0 === U.offsetHeight && M._67I !== c) M._67I === $ && (M._67I = F.reinvalidateCount), M._67I > 0 ? M._67I-- : M._67I = c, M.iv(); else {
                        M.fireViewEvent("beginValidate"), M.validateImpl(), M.onValidated && M.onValidated(), M.fireViewEvent("validate");
                        var b = M._63O;
                        b && (U.lastChild !== b && (zm(b), Vo(U, b)), Ee(b, 0, 0, M.getWidth(), M.getHeight())), gr(M), Cl(M), eh(M)
                    }
                }, n.layout = function (K, E, q, A) {
                    1 === arguments.length ? Ee(this, K) : Ee(this, K, E, q, A)
                }, n.addViewListener = function (d, p, h) {
                    var i = this;
                    i._67O || (i._67O = new tc), i._67O.add(d, p, h)
                }, n.removeViewListener = function (g, D) {
                    this._67O.remove(g, D)
                }, n.fireViewEvent = function (W) {
                    var E = this;
                    E._67O && (Rp(W) && (W = {kind: W}), E._67O.fire(W)), F.viewListener && F.viewListener(E, W)
                }
            }, ms_tip: function (H) {
                H.setToolTipEnabled = function (_) {
                    var Z = this;
                    _ ? jp || Z._13o || (Z.enableToolTip(), Z.fp("toolTipEnabled", !1, !0)) : Z._13o && (Z.disableToolTip(), Z.fp("toolTipEnabled", !0, !1))
                }, H.isToolTipEnabled = function () {
                    return !!this._13o
                }, H.enableToolTip = function () {
                    var e = this;
                    jp || e._13o || (e._13o = function (I) {
                        var o = e.getToolTip(I);
                        o != c ? F.toolTipContinual && F.isToolTipShowing() ? Xn(I, o) : (ll(), em = {
                            timeout: g(es, wc),
                            e: I,
                            info: o
                        }) : ll()
                    }, e.getView().addEventListener(Yg, e._13o, !1), e.getView().addEventListener("mouseleave", F.hideToolTip, !1))
                }, H.disableToolTip = function () {
                    var f = this;
                    f._13o && (f.getView().removeEventListener(Yg, f._13o, !1), f.getView().removeEventListener("mouseleave", F.hideToolTip, !1), delete f._13o)
                }, H.getToolTip = function (a) {
                    var T = this;
                    if (T.getDataAt) {
                        var e = T.getDataAt(a);
                        return e ? e.getToolTip() : c
                    }
                    return T.getValue ? T.getValue() : void 0
                }
            }, _52o: function (I) {
                I._zoom = 1, I._29I = Wo, I.zoomIn = function (A, g) {
                    this.setZoom(this._zoom * ib, A, g)
                }, I.zoomOut = function (u, w) {
                    this.setZoom(this._zoom / ib, u, w)
                }, I.zoomReset = function (Y, w) {
                    this.setZoom(1, Y, w)
                }, I.scrollZoomIn = function (w) {
                    this.setZoom(this._zoom * He, c, w)
                }, I.scrollZoomOut = function (G) {
                    this.setZoom(this._zoom / He, c, G)
                }, I.pinchZoomIn = function (w) {
                    this.setZoom(this._zoom * Ed, c, w)
                }, I.pinchZoomOut = function (M) {
                    this.setZoom(this._zoom / Ed, c, M)
                }, I.adjustZoom = function (f) {
                    return Hg > f ? Hg : f > vh ? vh : f
                }, I.getZoom = function () {
                    return this._zoom
                }, I.setZoom = function (i, I, s) {
                    var n = this;
                    if (I = ho(I)) {
                        n._14o && n._14o.stop(!0);
                        var m = n._zoom;
                        I.action = function (y) {
                            n._96O(m + (i - m) * y, s)
                        }, I._37o = function () {
                            delete n._zooming, delete n._14o, n.onZoomEnded()
                        }, n._zooming = 1, n._14o = Aq(I)
                    } else n._96O(i, s)
                }, I._96O = function (S, J) {
                    var q = this;
                    if (S = q.adjustZoom(S), S !== q._zoom) {
                        q.validate();
                        var z = q._29I, h = q._zoom;
                        0 !== z.width && 0 !== z.height && (J = J ? J : {
                            x: z.x + z.width / 2,
                            y: z.y + z.height / 2
                        }, q.tx((J.x - z.x) * h - J.x * S), q.ty((J.y - z.y) * h - J.y * S)), q._zoom = S, q.fp("zoom", h, S)
                    }
                }
            }
        };
        Nn(F, {
            numberDigits: 5,
            baseZIndex: $,
            isTouchable: jp,
            devicePixelRatio: m.devicePixelRatio ? m.devicePixelRatio : 1,
            reinvalidateCount: 3,
            hitMaxArea: 3e3,
            imageCacheThreshold: 20,
            autoMakeVisible: !0,
            autoHideScrollBar: !0,
            disabledOpacity: .4,
            disabledBackground: W.disabledBackground,
            forceHierarchicalSerialization: !0,
            hoverDelay: 600,
            toolTipDelay: 800,
            toolTipContinual: !1,
            getDragger: function () {
                return bc
            },
            lineCap: "butt",
            lineJoin: "round",
            imageGradient: "linear.northeast",
            dashPattern: [16, 16],
            animDuration: 200,
            animEasing: function (e) {
                return e * e
            },
            labelColor: _q,
            labelSelectColor: cp,
            labelFont: (jp ? "15" : "12") + "px arial, sans-serif",
            widgetIndent: jp ? 30 : 20,
            widgetRowHeight: jp ? 30 : 20,
            widgetHeaderHeight: jp ? 32 : 22,
            widgetTitleHeight: jp ? 34 : 24,
            scrollBarColor: Rr,
            scrollBarSize: 7,
            scrollBarTimeout: 1e3,
            scrollBarMinLength: 20,
            scrollBarInteractiveSize: jp ? 32 : 16,
            zoomIncrement: 1.3,
            scrollZoomIncrement: 1.05,
            pinchZoomIncrement: 1.08,
            zoomMax: 20,
            zoomMin: .01,
            segmentResolution: 12,
            shapeResolution: 24,
            shapeSide: 24,
            intersectionLineRect: qg,
            intersectionLineLine: Qm,
            isEnter: Mk,
            isEsc: fb,
            isDelete: sj,
            isSpace: Bq,
            isLeft: xr,
            isUp: Mj,
            isRight: po,
            isDown: qc,
            getTarget: Xe,
            isString: Rp,
            isNumber: Zc,
            isBoolean: Dl,
            isArray: Qd,
            isSelectAll: Am,
            isFunction: $d,
            isObject: Pe,
            getPropertyValue: Rb,
            setPropertyValue: Ub,
            addMethod: Nn,
            getVersion: function () {
                return "6.2.2"
            },
            appendToScreen: function (t) {
                t = t.getView ? t.getView() : t, (S.fullscreenElement || S.mozFullScreenElement || S.webkitFullscreenElement || S.msFullscreenElement || S.body).appendChild(t)
            },
            toggleFullscreen: function (J) {
                var s = J.getView();
                if (S.fullscreenElement || S.mozFullScreenElement || S.webkitFullscreenElement || S.msFullscreenElement) S.exitFullscreen ? S.exitFullscreen() : S.msExitFullscreen ? S.msExitFullscreen() : S.mozCancelFullScreen ? S.mozCancelFullScreen() : S.webkitExitFullscreen && S.webkitExitFullscreen(); else {
                    var b = !0;
                    if (J.isSelfViewEvent) {
                        var V = J.getX(), $ = J.getY(), Y = J.getWidth(), u = J.getHeight(), W = s.style.background;
                        W || (s.style.background = "white"), s.requestFullscreen ? s.requestFullscreen() : s.msRequestFullscreen ? s.msRequestFullscreen() : s.mozRequestFullScreen ? s.mozRequestFullScreen() : s.webkitRequestFullscreen && s.webkitRequestFullscreen();
                        var A = setInterval(function () {
                            if (s !== (S.fullscreenElement || S.mozFullScreenElement || S.webkitFullscreenElement || S.msFullscreenElement)) clearInterval(A), J.setX(V), J.setY($), J.setWidth(Y), J.setHeight(u), J._fullscreen = !1, s.style.background = W, J.iv(); else {
                                var T = t.Default.getWindowInfo();
                                (b || T.width !== J.getWidth() || T.height !== J.getHeight()) && (J.setX(T.left), J.setY(T.top), J.setWidth(T.width), J.setHeight(T.height), J._fullscreen = !0, J.iv(), b = !1)
                            }
                        }, 500)
                    } else {
                        var z = s.style.left, L = s.style.top, Y = s.style.width, u = s.style.height,
                            W = s.style.background;
                        W || (s.style.background = "white"), s.requestFullscreen ? s.requestFullscreen() : s.msRequestFullscreen ? s.msRequestFullscreen() : s.mozRequestFullScreen ? s.mozRequestFullScreen() : s.webkitRequestFullscreen && s.webkitRequestFullscreen();
                        var A = setInterval(function () {
                            if (s !== (S.fullscreenElement || S.mozFullScreenElement || S.webkitFullscreenElement || S.msFullscreenElement)) clearInterval(A), s.style.left = z, s.style.top = L, s.style.width = Y, s.style.height = u, s.style.background = W, J.iv(); else {
                                var M = t.Default.getWindowInfo();
                                (b || M.width !== J.getWidth() || M.height !== J.getHeight()) && (Ee(J), b = !1)
                            }
                        }, 500)
                    }
                }
            },
            appendTimeStamp: function (P) {
                return P
            },
            setCompType: function (P, o) {
                $d(o) || Pe(o) ? dd[P] = o : sn(P)
            },
            getCompType: function (C) {
                var P = dd[C];
                return P === $ && yg.test(C) && sn(C), P
            },
            getCompTypeMap: function () {
                return dd
            },
            drawCompType: function (x, L, T, q, A, p) {
                x(L, T, q, A, p)
            },
            numberListener: function () {
                var m = {46: 1, 8: 1, 9: 1, 27: 1, 13: 1, 109: 1, 110: 1, 189: 1, 190: 1};
                return function (I) {
                    var T = I.keyCode;
                    m[T] || 65 === T && F.isCtrlDown(I) || 86 === T && F.isCtrlDown(I) || 67 === T && F.isCtrlDown(I) || 88 === T && F.isCtrlDown(I) || T >= 35 && 40 >= T || (I.shiftKey || 48 > T || T > 57) && (96 > T || T > 105) && I.preventDefault()
                }
            }(),
            ignoreKeyCodes: [122, 123],
            preventDefault: function (S) {
                var C = S.target.tagName;
                ("DIV" === C || "CANVAS" === C) && !(F.ignoreKeyCodes.indexOf(S.keyCode) >= 0) && ("keydown" !== S.type || xr(S) || po(S) || Mj(S) || qc(S) || sj(S) || 65 === S.keyCode && (S.metaKey || S.ctrlKey)) && (S.preventDefault(), S.preventManipulation && S.preventManipulation())
            },
            getWindowInfo: function () {
                var D = S.documentElement, q = D && (D.scrollLeft || D.scrollTop) ? D : S.body;
                return {
                    target: q,
                    left: q.scrollLeft,
                    top: q.scrollTop,
                    width: m.innerWidth || q.clientWidth,
                    height: m.innerHeight || q.clientHeight
                }
            },
            isDragging: function () {
                return !!bc
            },
            isLeftButton: function (A) {
                return jp ? !0 : 0 === A.button
            },
            isInput: function (R) {
                if (!R) return !1;
                var K = R.tagName;
                return "INPUT" === K || "TEXTAREA" === K || "SELECT" === K
            },
            getTouchCount: function (F) {
                return jp ? F.touches.length : 1
            },
            isDoubleClick: function () {
                function Y(d) {
                    d.details = 0, d.timeout = null, d.lastPoint = null
                }

                var h = {};
                return ti = new f, _k = ti.getTime(), function (Q) {
                    var X = Q.button == c ? "" : Q.button, y = Q.type + X, z = y + "_isDoubleClick", l = h[y];
                    if (l || (l = h[y] = {details: 0, timeout: null, lastPoint: null}), Q[z] === $) {
                        Q[z] = !0;
                        var w = cc(Q);
                        l.timeout && (R(l.timeout), l.timeout = null), l.lastPoint && Wg(l.lastPoint, w) > (jp ? 20 : 1) && Y(l), l.lastPoint = w, l.details++, l.timeout = g(function () {
                            Y(this)
                        }.bind(l), 500)
                    }
                    return 2 === l.details
                }
            }(),
            isShiftDown: function (d) {
                return d ? d.shiftKey : Xh["16"]
            },
            isCtrlDown: function (g) {
                return g ? Zq ? g.metaKey : g.ctrlKey : Zq ? Xh["91"] : Xh["17"]
            },
            getClientPoint: function (J) {
                return jp && (J = ih(J)), {x: J.clientX, y: J.clientY}
            },
            isMouseEvent: function (l) {
                return l instanceof MouseEvent || 0 === l.type.indexOf("mouse")
            },
            getTargetElement: function (b) {
                if (F.isMouseEvent(b) || !S.elementFromPoint) return b.target;
                var t = Xr(b);
                return S.elementFromPoint(t.x, t.y)
            },
            getPagePoint: function (Y) {
                return jp && (Y = ih(Y)), {x: Y.pageX, y: Y.pageY}
            },
            createObject: function (B, J) {
                var b = new B;
                for (var M in J) {
                    var z = J[M];
                    if ($d(z)) b[M] = z; else if (0 === M.indexOf("s:")) b.s(M.substr(2), J[M]); else if (0 === M.indexOf("a:")) b.a(M.substr(2), J[M]); else {
                        var a = as(M), z = J[M];
                        b[a] ? (b[a](z), "setToolTip" === a && b.enableToolTip && b.enableToolTip()) : b[M] = z
                    }
                }
                return b
            },
            setImage: function (P, b, S, x) {
                var r = arguments.length;
                4 === r ? dg(P, x, b, S) : 2 === r ? Rp(b) ? dg(P, b) : Sr[P] = b : 1 === r && dg(P, P)
            },
            getImage: function (W, S, i) {
                var x;
                if (W == c) return c;
                if (Pe(W) ? x = W : (x = Sr[W], W && x === $ && (Gm && Gm[W] || dg(W, W))), S && x && x.tagName) {
                    var q;
                    q = "override" === i ? "colors_override" : "override_rgb" === i ? "colors_override_rgb" : "override_a" === i ? "colors_override_a" : "colors", x[q] || (x[q] = {__count__: 0});
                    var R = x[q][S];
                    return R || (x[q].__count__ > F.imageCacheThreshold && (x[q] = {__count__: 0}), R = Mo(x, Ao(S), x.width, x.height, i), x[q][S] = R, x[q].__count__++), R
                }
                return x
            },
            isImageComplete: function (l, v, V) {
                var D = Pe(l) ? l : Sr[l];
                if (!D) return !1;
                if (D.tagName) return D.complete;
                for (var n, l, T, B = D.comps, P = !0, z = 0, G = B.length; G > z; z++) if (n = B[z], T = n.type, "image" === n.type) {
                    l = n.name, l && l.func && (l = eq(l, v));
                    var Q = af(l, v, V);
                    if (!Q) {
                        P = !1;
                        break
                    }
                } else if (yg.test(T) && F.getCompType(T) === $) {
                    P = !1;
                    break
                }
                return P
            },
            getId: function () {
                var f = 1;
                return function () {
                    return ++f
                }
            }(),
            callLater: function (l, R, x, i) {
                var Z = function () {
                    l.apply(R, x)
                };
                return i ? g(Z, i) : m.requestAnimationFrame(Z)
            },
            clone: function (P) {
                if (null == P || "object" != typeof P) return P;
                if (P instanceof Date) {
                    var r = new Date;
                    return r.setTime(P.getTime()), r
                }
                if (P instanceof Array) {
                    for (var r = [], O = 0, i = P.length; i > O; O++) r[O] = hh(P[O]);
                    return r
                }
                if (P instanceof vp) {
                    for (var r = new vp, O = 0, i = P.length; i > O; O++) r.set(O, hh(P.get(O)));
                    return r
                }
                if (P instanceof Zf) return P;
                if (P instanceof v) {
                    var r = {};
                    for (var V in P) P.hasOwnProperty(V) && (r[V] = hh(P[V]));
                    return r
                }
                return P
            },
            callWhenLoaded: function (z, G) {
                G = G || 100;
                var e = dc(z, G);
                ad || (ad = {}), ad[e] = {tick: e, cb: z, delay: G}
            },
            beforeLoadURL: function (D) {
                if (ad) {
                    var Z = {};
                    for (var y in ad) {
                        var _ = ad[y];
                        R(_.tick);
                        var x = dc(_.cb, _.delay);
                        Z[x] = {tick: x, delay: _.delay, cb: _.cb}
                    }
                    ad = Z
                }
                return F.convertURL ? F.convertURL(D) : D
            },
            convertURL: function (y) {
                return y
            },
            handleRefGraphLoaded: function () {
            },
            handleCompTypeLoaded: function () {
            },
            handleImageLoaded: function () {
            },
            handleUnfoundImage: function () {
            },
            sortFunc: function (L, N) {
                if (L === N) return 0;
                if (L == c && N != c) return 1;
                if (L != c && N == c) return -1;
                if (L == c && N == c) return 0;
                var X, t = typeof L, o = typeof N;
                return t === Yr && o === Yr ? X = L.localeCompare(N) : t === rc && o === rc && (X = L - N), X === $ && (X = ("" + L).localeCompare("" + N)), X > 0 ? 1 : 0 > X ? -1 : 0
            },
            getClassMap: function () {
                return $l
            },
            getClass: function (T) {
                if (Rp(T)) {
                    var F, $ = $l[T];
                    if (!$) {
                        F = T.split("."), $ = m;
                        for (var t = 0; t < F.length; t++) $ = $[F[t]];
                        $l[T] = $
                    }
                    return $
                }
                return T
            },
            def: function (R, Z, h) {
                var P, e, M, f = function () {
                };
                if (f.prototype = Z.prototype, P = new f, Rp(R)) {
                    if ($l[R]) throw"'" + R + "' already defined";
                    M = qn(R), P.getClassName = function () {
                        return R
                    }
                } else M = R;
                if (P.constructor = M, P.getClass = function () {
                    return M
                }, P.getSuperClass = function () {
                    return Z
                }, h) for (e in h) zh[e] && zh.hasOwnProperty(e) ? zh[e](P, h) : zi(P, h, e);
                M.prototype = P, M.superClass = Z.prototype
            },
            startAnim: function () {
                var l = function (y) {
                    y.duration && (y.startTime = Rc()), y.timeId = Np(y.tick, c, c, y.interval)
                };
                return function (f) {
                    return f = hh(f), f.easing = f.easing || F.animEasing, f.duration || f.frames || (f.duration = F.animDuration), f.t = 0, f.duration ? f.interval = 0 : (f.frame = 0, f.interval = f.interval || 10), f.tick = function () {
                        if (f.duration) {
                            var w = (Rc() - f.startTime) / f.duration;
                            w > 1 && (w = 1), f.t = w, f.action(f.easing(w), w), 1 === w ? f.stop() : f._isPaused || (f.timeId = Np(f.tick))
                        } else f.frame++, w = f.t = f.frame / f.frames, f.action(f.easing(w), w), f.frame < f.frames ? f._isPaused || (f.timeId = Np(f.tick, c, c, f.interval)) : f.stop()
                    }, f.resume = function () {
                        f._isPaused && (delete f._isPaused, f.duration ? f.t < 1 && (f.startTime = Rc() - f.duration * f.t, f.timeId = Np(f.tick)) : f.frame < f.frames && (f.timeId = Np(f.tick, c, c, f.interval)))
                    }, f.pause = function () {
                        f._isPaused = !0
                    }, f.stop = function (P) {
                        f.isRunning() && (f.duration ? f.t < 1 && P && (f.t = 1, f.action(f.easing(1), 1)) : f.frame < f.frames && P && (f.frame = f.frames, f.action(f.easing(1), 1)), f._37o && f._37o(), f.finishFunc && f.finishFunc(), Ip(f.timeId, !f.duration), delete f.timeId)
                    }, f.isRunning = function () {
                        return f.timeId != c
                    }, f.delay ? Np(l, c, [f], f.delay) : l(f), f
                }
            }(),
            getTextSize: function () {
                var u = {}, J = S ? Jm().getContext("2d") : c;
                return function (O, f) {
                    J.font = O ? O : Jq;
                    var K = u[J.font];
                    return K || (K = 2 * J.measureText("e").width + 4, u[J.font] = K), {
                        width: J.measureText(f).width + 4,
                        height: K
                    }
                }
            }(),
            drawText: function (o, Y, q, I, i, z, O, m, e, A) {
                if (Y != c) {
                    var J = Tr(q, Y), p = {};
                    p.y = A && A !== tk ? A === Gn ? z + J.height / 2 : z + m - J.height / 2 : z + m / 2, p.x = e && e !== Ch ? e === Te ? i + O - J.width / 2 : i + O / 2 : i + J.width / 2, sb(o, Y, p, q, I)
                }
            },
            getDistance: function (I, a) {
                var y = I.length;
                return a ? 3 === y ? s(d(I[0] - a[0]) + d(I[1] - a[1]) + d(I[2] - a[2])) : 2 === y ? s(d(I[0] - a[0]) + d(I[1] - a[1])) : I.z === $ ? s(d(a.x - I.x) + d(a.y - I.y)) : s(d(a.x - I.x) + d(a.y - I.y) + d(a.z - I.z)) : 3 === y ? s(d(I[0]) + d(I[1]) + d(I[2])) : 2 === y ? s(d(I[0]) + d(I[1])) : void 0
            },
            brighter: function (Y, J) {
                return 0 > J && (J = -J), is(Y, J ? J : 40)
            },
            darker: function (G, K) {
                return K > 0 && (K = -K), is(G, K ? K : -40)
            },
            unionPoint: function (t, K) {
                if (!t) return c;
                if (2 === arguments.length) return t && K ? {
                    x: x(t.x, K.x),
                    y: x(t.y, K.y),
                    width: I(t.x - K.x),
                    height: I(t.y - K.y)
                } : c;
                var e = t;
                if (e._as && (e = e._as), e.length === $) return c;
                var p = e.length;
                if (0 >= p) return c;
                for (var V = 1, H = e[0], o = {x: H.x, y: H.y, width: 0, height: 0}; p > V; V++) {
                    H = e[V];
                    var D = x(o.x, H.x), R = y(o.x + o.width, H.x), l = x(o.y, H.y), F = y(o.y + o.height, H.y);
                    o.x = D, o.y = l, o.width = R - D, o.height = F - l
                }
                return o
            },
            unionRect: function (u, j) {
                if (u && !j) return hh(u);
                if (!u && j) return hh(j);
                if (u && j) {
                    var i = {x: x(u.x, j.x), y: x(u.y, j.y)};
                    return i.width = y(u.x + u.width, j.x + j.width) - i.x, i.height = y(u.y + u.height, j.y + j.height) - i.y, i
                }
                return c
            },
            containsPoint: function (_, f, p, S) {
                if (S != c && 1 !== S) {
                    var U = _.x + _.width / 2, A = _.y + _.height / 2;
                    _ = {x: U - _.width / 2 * S, y: A - _.height / 2 * S, width: _.width * S, height: _.height * S}
                }
                if (p) {
                    var W = _.width / 2, e = _.height / 2, T = C(-p), R = D(-p), i = f.x - _.x - W, s = f.y - _.y - e;
                    return f = {x: R * i - T * s, y: T * i + R * s}, Jj({
                        x: -W,
                        y: -e,
                        width: _.width,
                        height: _.height
                    }, f)
                }
                return !(!_ || f.x < _.x || f.y < _.y || f.x > _.x + _.width || f.y > _.y + _.height)
            },
            containsRect: function (o, a) {
                if (!o || !a) return !1;
                var G = a.x, O = a.y, K = a.width, I = a.height, x = o.width, A = o.height;
                if (0 > (x | A | K | I)) return !1;
                var B = o.x, t = o.y;
                if (B > G || t > O) return !1;
                if (x += B, K += G, G >= K) {
                    if (x >= B || K > x) return !1
                } else if (x >= B && K > x) return !1;
                if (A += t, I += O, O >= I) {
                    if (A >= t || I > A) return !1
                } else if (A >= t && I > A) return !1;
                return !0
            },
            intersectsRect: function (e, E) {
                if (!e || !E) return !1;
                var v = E.width, B = E.height, H = e.width, A = e.height;
                if (0 >= H || 0 >= A || 0 >= v || 0 >= B) return !1;
                var K = E.x, V = E.y, h = e.x, w = e.y;
                return H += h, A += w, v += K, B += V, H > K && A > V && v > h && B > w
            },
            intersection: function (o, j) {
                if (!o || !j) return c;
                var H = j.x, m = j.y, E = o.x, B = o.y, s = H, d = m, Q = E, n = B;
                return s += j.width, d += j.height, Q += o.width, n += o.height, E > H && (H = E), B > m && (m = B), s > Q && (s = Q), d > n && (d = n), s -= H, d -= m, 0 >= s || 0 >= d ? c : {
                    x: H,
                    y: m,
                    width: s,
                    height: d
                }
            },
            grow: function (c, s, W) {
                W === $ && (W = s), c.x -= s, c.y -= W, c.width = c.width + 2 * s, c.height = c.height + 2 * W
            },
            getLogicalPoint: function (J, D, f, K, j, e) {
                var l, A, I = D.getBoundingClientRect();
                return J.target ? (Ag(J) ? Zq ? Xh["91"] = !0 : Xh["17"] = !0 : Zq ? Xh["91"] = !1 : Xh["17"] = !1, Xh["16"] = Mp(J) ? !0 : !1, J = jp ? ih(J) : J, l = J.clientX, A = J.clientY) : (l = J.x, A = J.y), {
                    x: (l - I.left + D.scrollLeft - (f || 0)) / (j || 1),
                    y: (A - I.top + D.scrollTop - (K || 0)) / (e || 1)
                }
            },
            removeHTML: function () {
                var C;
                return function (P) {
                    return P && P.parentNode ? C === P ? !0 : (C = P, P.parentNode.removeChild(P), C = c, !0) : !1
                }
            }(),
            getToolTipDiv: function () {
                if (!cs) {
                    cs = Gl(), Jc = Gl();
                    var J = cs.style;
                    F.baseZIndex != c && (J.zIndex = A(F.baseZIndex) + 3 + ""), J.whiteSpace = "nowrap", J.color = F.toolTipLabelColor, J.background = F.toolTipBackground, J.font = F.toolTipLabelFont, J.padding = "5px", J.boxShadow = "0px 0px 3px " + F.toolTipShadowColor
                }
                return cs
            },
            isToolTipShowing: function () {
                return cs && cs.parentNode ? !0 : Jc && Jc.parentNode ? !0 : !1
            },
            hideToolTip: function () {
                zm(cs), zm(Jc), Kl()
            },
            showToolTip: function (D, w) {
                if (!D || w == c) return ll(), void 0;
                F.getToolTipDiv();
                var v, G;
                if (w.html ? (w = w.html, v = Jc, zm(cs)) : (v = cs, zm(Jc)), G = v.style, v.innerHTML = w, v.parentNode || t.Default.appendToScreen(v), D.target) {
                    D = Xr(D);
                    var f = sg(), y = D.x, Y = D.y, M = jp ? 60 : 12;
                    if (jp) {
                        var k = v.getBoundingClientRect();
                        G.left = y - k.width / 2 + hr, G.top = Y - k.height - M < f.top ? Y + M + hr : Y - k.height - M + hr
                    } else {
                        G.left = y + M + hr, G.top = Y + M + hr;
                        var k = v.getBoundingClientRect();
                        k.left + k.width > f.width && (G.left = y - M - k.width + hr), k.top + k.height > f.height && (G.top = Y - M - k.height + hr), k.left < 0 && (G.left = y + M + hr), k.top < 0 && (G.top = Y + M + hr)
                    }
                } else G.left = D.x + hr, G.top = D.y + hr;
                Kl()
            },
            startDragging: function (n, a) {
                n !== bc && (bc ? jp ? bc.handleWindowTouchEnd(a) : bc.handleWindowMouseUp(a) : jp ? (m.addEventListener(lm, Dj, !1), m.addEventListener(qb, zk, !1)) : (m.addEventListener(Yg, ep, !1), m.addEventListener(Wk, gn, !1)), bc = n)
            },
            getImageMap: function () {
                return Sr
            },
            toBoundaries: function (r, l, i, u) {
                var X = [];
                return Sn(r, l, i, u).forEach(function ($) {
                    var u = [];
                    $.forEach(function (A) {
                        u.push(A.x, A.y)
                    }), X.push(u)
                }), X
            },
            getCurrentKeyCodeMap: function () {
                return Xh
            },
            drawCenterImage: function (p, z, n, c, f, I, O, V) {
                var s = fc(z, f, I), i = qr(z, f, I);
                sp(p, z, P(n - s / 2), P(c - i / 2), s, i, f, I, O, V)
            },
            drawStretchImage: function (b, w, Z, v, z, g, l, I, o, S, X, t) {
                var j, U = fc(w, I, o, g), G = qr(w, I, o, l);
                "uniform" === Z ? (j = x(g / U, l / G), U *= j, G *= j, v += P((g - U) / 2), z += P((l - G) / 2), g = U, l = G) : "centerUniform" === Z && ((U > g || G > l) && (j = x(g / U, l / G), U *= j, G *= j), v += P((g - U) / 2), z += P((l - G) / 2), g = U, l = G);
                var J = b.interactiveInfo;
                if (J) {
                    var D;
                    if (D = "center" === Z ? {x: v + g / 2 - U / 2, y: z + l / 2 - G / 2, width: U, height: G} : {
                        x: v,
                        y: z,
                        width: g,
                        height: l
                    }, J.rect) {
                        var k = J.compInfos, V = k.length;
                        V && (k[V - 1].rect.image = w)
                    } else J.rect = D
                }
                if ("center" === Z) {
                    var K = X !== !1 && (U > g || G > l);
                    K && (b.save(), b.beginPath(), b.rect(v, z, g, l), b.clip()), sp(b, w, v + g / 2 - U / 2, z + l / 2 - G / 2, U, G, I, o, S, t), K && b.restore()
                } else sp(b, w, v, z, g, l, I, o, S, t)
            },
            toCanvas: function (z, O, f, G, J, q, F, C, k) {
                z = cd(z, F), O = O || fc(z, J), f = f || qr(z, J);
                var E = Jm(), R = fk(E);
                return C ? (Sd(E, O, f, C), R.scale(C, C)) : Sd(E, O, f, 1), pq(R, z, G, 0, 0, O, f, J, q, F, k), z && z.clampToEdge && (E.clampToEdge = z.clampToEdge), R.restore(), E
            },
            createGradientImage: function (Z, k, z, K) {
                for (var r = ["L", 0, 0, Z, 0, 1, 0, 0, 1, 0, 0], w = 0, c = Math.min(k.length, z.length); c > w; w++) r.push(z[w], k[w]);
                var b = t.Default.toCanvas({
                    width: Z,
                    height: Z,
                    clampToEdge: !0,
                    comps: [{
                        type: "shape",
                        rotation: K || 0,
                        points: [0, 0, Z, 0, Z, Z, 0, Z],
                        background: "#ffffff",
                        gradientPack: r
                    }]
                });
                return b
            },
            createElement: function (X, y, Q, d) {
                var t = S.createElement(X);
                return Vj(t, y || W.widgetBorder, 2), t.style.font = Q ? Q : Jq, d != c && (t.value = d), F.onElementCreated && F.onElementCreated(t), t
            },
            containedInView: function (T, f) {
                var d = Ri(f).getBoundingClientRect();
                return Jj({x: d.left, y: d.top, width: d.width, height: d.height}, cc(T))
            },
            isIsolating: function () {
                return Tp > 0
            },
            setIsolating: function (I) {
                I ? Tp++ : Tp--
            },
            getMSMap: function () {
                return zh
            },
            stringify: function (l, S) {
                var o = Date.prototype.toJSON;
                Date.prototype.toJSON = function () {
                    return "__ht__date" + this.getTime()
                };
                var _ = JSON.stringify(l, function (M, g) {
                    return "function" == typeof g ? "__ht__" + (g.__ht__ || g.toString()) : Zc(g) ? Ue(g) : g
                }, S == c ? 2 : S);
                return Date.prototype.toJSON = o, _
            },
            parse: function (I) {
                return Rp(I) ? JSON.parse(I, function (_, F) {
                    if (Rp(F)) {
                        if ("__ht__function" == F.substr(0, 14)) {
                            var o = F.indexOf("{") + 1, D = F.lastIndexOf("}"), r = F.indexOf("(") + 1,
                                N = F.indexOf(")");
                            if (o && D && r && N) {
                                var W = new Function(F.substring(r, N), F.substring(o, D));
                                return W.__ht__ = F.substr(6), W
                            }
                        }
                        if ("__ht__date" == F.substr(0, 10)) return new Date(A(F.substr(10)))
                    }
                    return F
                }) : I
            },
            loadJS: function (J, X) {
                X && J.push(X);
                var _ = J.shift();
                if (Qd(_)) J = _.contact(J), F.loadJS(J); else if ($d(_)) _(), F.loadJS(J); else if (Rp(_)) {
                    var n = S.createElement("script");
                    n.onload = function () {
                        F.loadJS(J)
                    }, n.setAttribute("src", _), S.getElementsByTagName("head")[0].appendChild(n)
                } else J.length && F.loadJS(J)
            },
            toRoundedCorner: function (W, w) {
                var a = W.size();
                if (0 >= w) return {points: W};
                var c, o = new vp, v = new vp, f = W.get(0);
                o.add(f), v.add(1);
                for (var X = 1; a > X; X++) if (a > X + 1) {
                    var R = W.get(X), h = W.get(X + 1), $ = f.x, F = f.y, k = R.x, A = R.y, p = A - F, H = k - $,
                        V = n(p, H);
                    c = x(.99 * Wg(f, R), w), o.add({
                        x: k - c * D(V),
                        y: A - c * C(V)
                    }), o.add(R), $ = R.x, F = R.y, k = h.x, A = h.y, p = A - F, H = k - $, V = n(p, H), c = x(.99 * Wg(R, h), w), f = {
                        x: $ + c * D(V),
                        y: F + c * C(V)
                    }, o.add(f), v.addAll([2, 3])
                } else o.add(W.get(X)), v.add(2);
                return {points: o, segments: v}
            },
            toColorData: wg,
            setCanvas: Sd,
            createDiv: Gl,
            createDisabledDiv: Pl,
            createView: ts,
            createCanvas: Jm,
            appendChild: Vo,
            initContext: fk,
            checkLoadingImage: gr,
            translateAndScale: Vm,
            layout: Ee,
            getPosition: Nc,
            drawPoints: Qe,
            drawRoundRect: vr,
            drawBorder: Qg,
            setFocus: Cm,
            getter: cg,
            setter: as,
            isEmptyObject: jk
        }, !0), Nn(N, {
            autoAdjustIndex: 1,
            hierarchicalRendering: 1,
            adjustChildrenToTop: 1,
            autoHideScrollBar: 1,
            autoUpdate: 1,
            firstPersonMode: 1,
            ortho: 1,
            strict: 1,
            stickToRight: 1,
            instant: 1,
            closePath: 1,
            hierarchical: 1,
            doubleClickToToggle: 1,
            continuousLayout: 1,
            syncSize: 1
        }, !0);
        var ah = F.disabledOpacity, wc = F.toolTipDelay, ur = F.devicePixelRatio, Yp = F.autoMakeVisible,
            Ym = F.autoHideScrollBar, Bo = F.imageGradient, Xn = F.showToolTip, ll = F.hideToolTip, we = F.dashPattern,
            os = F.lineCap, al = F.lineJoin, Cj = F.labelColor, db = F.labelSelectColor, Jq = F.labelFont,
            Fp = F.widgetIndent, Fe = F.widgetRowHeight, Sc = F.widgetHeaderHeight, Td = F.widgetTitleHeight,
            fn = F.scrollBarColor, fd = F.scrollBarSize, Ir = F.scrollBarTimeout, go = F.scrollBarMinLength,
            Ib = F.scrollBarInteractiveSize, ib = F.zoomIncrement, He = F.scrollZoomIncrement,
            Ed = F.pinchZoomIncrement, vh = F.zoomMax, Hg = F.zoomMin, Ai = F.createObject, mq = F.preventDefault,
            Mq = F.setImage, cd = F.getImage, af = F.isImageComplete, hi = F.drawCenterImage, pq = F.drawStretchImage,
            Ck = F.getId, Np = F.callLater, Db = F.sortFunc, hh = F.clone, qn = F.getClass, Aq = F.startAnim,
            Gj = F.brighter, zn = F.darker, Vr = F.drawText, Tr = F.getTextSize, fj = F.isLeftButton,
            tb = F.getTouchCount, Ei = F.isDoubleClick, Mp = F.isShiftDown, Ag = F.isCtrlDown, cc = F.getClientPoint,
            Xr = F.getPagePoint, Wg = F.getDistance, sd = F.unionPoint, Kb = F.unionRect, Jj = F.containsPoint,
            ql = F.containsRect, _r = F.intersectsRect, ch = F.intersection, sg = F.getWindowInfo, Bk = F.grow,
            xk = F.getLogicalPoint, oc = F.startDragging, zm = F.removeHTML, Bp = F.createElement,
            ac = F.segmentResolution, Hn = F.shapeResolution, fo = F.shapeSide, fs = F.def, ld = function (W, C, E) {
                fs(G + "." + W, C, E)
            }, er = function (u, c) {
                u.childNodes.forEach(function (Y) {
                    c(Y), er(Y, c)
                })
            };
        Nn(F, {
            toolTipLabelColor: Cj,
            toolTipLabelFont: Jq,
            toolTipBackground: W.toolTipBackground,
            toolTipShadowColor: Rr,
            drawBreakableText: Vn,
            setDevicePixelRatio: function (p) {
                ur = F.devicePixelRatio = "number" == typeof p ? p : m.devicePixelRatio, er(S.body, function (z) {
                    var b = z._ht;
                    b && b._canvas && (Sd(b._canvas, b.getWidth(), b.getHeight()), b.redraw ? b.redraw() : b.iv())
                })
            }
        }, !0);
        var Dp = 1e-6, Kj = "undefined" != typeof Uint16Array ? Uint16Array : Array,
            Oq = "undefined" != typeof Float32Array ? Float32Array : Array, $k = function (D, _, H) {
                var K = [D[0] - _[0], D[1] - _[1], D[2] - _[2]];
                if (H) {
                    var f = Wg(K);
                    f > 0 && (K[0] /= f, K[1] /= f, K[2] /= f)
                }
                return K
            }, Sg = function () {
                var d = "charCodeAt", z = 2 * (2 * cf.length + 1);
                for (var e in m) if (e === G + Ch[0] + hr.length) {
                    var S = m[e];
                    if (!S) break;
                    for (var R = S.length, W = 0; R > W; W++) if (S[W][d](0) === z && S[W + 1] != c && S[W + 1] === hr[0] && S[W + 2] != c && S[W + 2][d](0) === z) {
                        for (var r = W + 3; R > r; r++) if (S[r][d](0) === z) {
                            if (0 == S[r + 1]) for (var v, a = r + 2; R > a; a++) {
                                if (S[a][d](0) === z) {
                                    0 == S[a - 1] && v && (p = v.substr(0, v.length - 1));
                                    break
                                }
                                v == c ? v = S[a] : v += S[a]
                            }
                            break
                        }
                        break
                    }
                    break
                }
                return function (q) {
                    return [-q[0], -q[1], -q[2]]
                }
            }(), kb = function (a, N) {
                return 3 === a.length ? a[0] * N[0] + a[1] * N[1] + a[2] * N[2] : a[0] * N[0] + a[1] * N[1]
            }, ic = function () {
                var J = new Oq(16);
                return J[0] = 1, J[1] = 0, J[2] = 0, J[3] = 0, J[4] = 0, J[5] = 1, J[6] = 0, J[7] = 0, J[8] = 0, J[9] = 0, J[10] = 1, J[11] = 0, J[12] = 0, J[13] = 0, J[14] = 0, J[15] = 1, J
            }, Hb = ic(), Do = function (C) {
                var q = new Oq(16);
                return q[0] = C[0], q[1] = C[1], q[2] = C[2], q[3] = C[3], q[4] = C[4], q[5] = C[5], q[6] = C[6], q[7] = C[7], q[8] = C[8], q[9] = C[9], q[10] = C[10], q[11] = C[11], q[12] = C[12], q[13] = C[13], q[14] = C[14], q[15] = C[15], q
            }, Yl = function (S, Z) {
                return S[0] = Z[0], S[1] = Z[1], S[2] = Z[2], S[3] = Z[3], S[4] = Z[4], S[5] = Z[5], S[6] = Z[6], S[7] = Z[7], S[8] = Z[8], S[9] = Z[9], S[10] = Z[10], S[11] = Z[11], S[12] = Z[12], S[13] = Z[13], S[14] = Z[14], S[15] = Z[15], S
            }, Dm = function (w) {
                return w[0] = 1, w[1] = 0, w[2] = 0, w[3] = 0, w[4] = 0, w[5] = 1, w[6] = 0, w[7] = 0, w[8] = 0, w[9] = 0, w[10] = 1, w[11] = 0, w[12] = 0, w[13] = 0, w[14] = 0, w[15] = 1, w
            }, Ce = function (w, C) {
                var e = w[0], g = w[1], Z = w[2];
                return w[0] = C[0] * e + C[4] * g + C[8] * Z + C[12], w[1] = C[1] * e + C[5] * g + C[9] * Z + C[13], w[2] = C[2] * e + C[6] * g + C[10] * Z + C[14], w
            }, yo = function (M, o) {
                var Z = M[0], s = M[1], z = M[2], G = M[3];
                return M[0] = o[0] * Z + o[4] * s + o[8] * z + o[12] * G, M[1] = o[1] * Z + o[5] * s + o[9] * z + o[13] * G, M[2] = o[2] * Z + o[6] * s + o[10] * z + o[14] * G, M[3] = o[3] * Z + o[7] * s + o[11] * z + o[15] * G, M
            }, Rn = function () {
                var U, Y, q, B, T = kd(pc[1] + pc[7]), p = kd(pc[0] + pc[3] - pc[10]), g = kd(pc[8] + 2), e = function () {
                    return Y = q.charAt(U), U += 1, Y
                }, G = function () {
                    var J = "";
                    if (Y === g) for (; e();) {
                        if (Y === g) return e(), J;
                        J += Y
                    } else e()
                }, I = function () {
                    for (; Y && " " >= Y;) e()
                }, m = function () {
                    var $, q = {};
                    if (Y === T) {
                        if (e(), I(), Y === p) return e(), q;
                        for (; Y;) {
                            if ($ = G(), I(), e(), q[$] = B(), I(), Y === p) return e(), q;
                            e(), I()
                        }
                    }
                };
                return B = function () {
                    switch (I(), Y) {
                        case T:
                            return m();
                        default:
                            return G()
                    }
                }, function (m) {
                    if (H = {}, m) {
                        var v;
                        if (q = m, U = 0, Y = " ", v = B(), I(), !Y) return v
                    }
                }
            }(), Ec = function (R, m) {
                if (m) {
                    var K = C(m), X = D(m), j = R[4], t = R[5], S = R[6], E = R[7], r = R[8], y = R[9], c = R[10],
                        Q = R[11];
                    R[4] = j * X + r * K, R[5] = t * X + y * K, R[6] = S * X + c * K, R[7] = E * X + Q * K, R[8] = r * X - j * K, R[9] = y * X - t * K, R[10] = c * X - S * K, R[11] = Q * X - E * K
                }
            }, El = function (T, m) {
                if (m) {
                    var M = C(m), O = D(m), p = T[0], x = T[1], n = T[2], E = T[3], H = T[8], w = T[9], e = T[10],
                        z = T[11];
                    T[0] = p * O - H * M, T[1] = x * O - w * M, T[2] = n * O - e * M, T[3] = E * O - z * M, T[8] = p * M + H * O, T[9] = x * M + w * O, T[10] = n * M + e * O, T[11] = E * M + z * O
                }
            }, hj = function (I, S) {
                if (S) {
                    var Y = C(S), k = D(S), h = I[0], G = I[1], K = I[2], T = I[3], P = I[4], Q = I[5], s = I[6], f = I[7];
                    I[0] = h * k + P * Y, I[1] = G * k + Q * Y, I[2] = K * k + s * Y, I[3] = T * k + f * Y, I[4] = P * k - h * Y, I[5] = Q * k - G * Y, I[6] = s * k - K * Y, I[7] = f * k - T * Y
                }
            }, mh = function (N, e, B) {
                return pr(c, B === !1 ? c : N.getFinalScale3d(), N.getFinalRotation3d(), N.getRotationMode(), N.p3(), c, e)
            }, pr = function (r, F, b, v, u, z, $) {
                return z || (z = ic()), u && Cs(z, u), sq(z, b, v), $ && Ig(z, z, $), F && Nf(z, F), r && Ig(z, z, r), z
            }, Nr = function (F, p, N) {
                p = A(p), N = A(N);
                var C = this;
                C.g = F, C._84O = p, C._85O = N, C._70I = !0, C.F = 0, C._83O = p + N, C.pen = {x: 0, y: 0}
            }, uf = "lineDashOffset", Yk = "setLineDash", Yo = function ($) {
                for (var w in $) 1 === w.length && (uf = $[w]);
                return w ? 1 : 0
            }, lh = function (i, T, A) {
                return Uc(T) ? i : i[Yk] ? (i[Yk](T), A && (i.lineDashOffset = A), i) : new Nr(i, T[0], T.length > 1 ? T[1] : T[0])
            }, bo = function (i, T) {
                !Uc(T) && i[Yk] && (i[Yk](pi), i.lineDashOffset = 0)
            };
        if (fs(Nr, v, {
            _69I: 6, moveTo: function (h, m) {
                var y = this, o = y.pen;
                o.x = h, o.y = m, y.g.moveTo(h, m), y.start || (y.start = {x: h, y: m})
            }, lineTo: function (r, J) {
                var a = this, q = a.pen, M = r - q.x, L = J - q.y, G = n(L, M), x = D(G), p = C(G),
                    v = a._23O(q.x, q.y, r, J), F = a._85O, u = a._84O, Z = a._83O;
                if (a.F) {
                    if (a.F > v) return a._70I ? a._72I(r, J) : a.moveTo(r, J), a.F -= v, void 0;
                    if (a._70I ? a._72I(q.x + x * a.F, q.y + p * a.F) : a.moveTo(q.x + x * a.F, q.y + p * a.F), v -= a.F, a.F = 0, a._70I = !a._70I, !v) return
                }
                var P = Q(v / Z);
                if (P) {
                    for (var T = x * u, k = p * u, m = x * F, B = p * F, s = 0; P > s; s++) a._70I ? (a._72I(q.x + T, q.y + k), a.moveTo(q.x + m, q.y + B)) : (a.moveTo(q.x + m, q.y + B), a._72I(q.x + T, q.y + k));
                    v -= Z * P
                }
                a._70I ? v > u ? (a._72I(q.x + x * u, q.y + p * u), a.moveTo(r, J), a.F = F - (v - u), a._70I = !1) : (a._72I(r, J), v === u ? (a.F = 0, a._70I = !a._70I) : (a.F = u - v, a.moveTo(r, J))) : v > F ? (a.moveTo(q.x + x * F, q.y + p * F), a._72I(r, J), a.F = u - (v - F), a._70I = !0) : (a.moveTo(r, J), v === F ? (a.F = 0, a._70I = !a._70I) : a.F = F - v)
            }, quadraticCurveTo: function (D, j, w, z) {
                var K, L = this, _ = L.pen, k = _.x, M = _.y, g = L._22O(k, M, D, j, w, z), F = 0, v = 0, C = L._85O,
                    E = L._84O;
                if (L.F) {
                    if (L.F > g) return L._70I ? L._71I(D, j, w, z) : L.moveTo(w, z), L.F -= g, void 0;
                    if (F = L.F / g, K = L._20O(k, M, D, j, w, z, F), L._70I ? L._71I(K[2], K[3], K[4], K[5]) : L.moveTo(K[4], K[5]), L.F = 0, L._70I = !L._70I, !g) return
                }
                var O = g - g * F, W = Q(O / L._83O), Z = E / g, G = C / g;
                if (W) for (var R = 0; W > R; R++) L._70I ? (v = F + Z, K = L._21O(k, M, D, j, w, z, F, v), L._71I(K[2], K[3], K[4], K[5]), F = v, v = F + G, K = L._21O(k, M, D, j, w, z, F, v), L.moveTo(K[4], K[5])) : (v = F + G, K = L._21O(k, M, D, j, w, z, F, v), L.moveTo(K[4], K[5]), F = v, v = F + Z, K = L._21O(k, M, D, j, w, z, F, v), L._71I(K[2], K[3], K[4], K[5])), F = v;
                O = g - g * F, L._70I ? O > E ? (v = F + Z, K = L._21O(k, M, D, j, w, z, F, v), L._71I(K[2], K[3], K[4], K[5]), L.moveTo(w, z), L.F = C - (O - E), L._70I = !1) : (K = L._19O(k, M, D, j, w, z, F), L._71I(K[2], K[3], K[4], K[5]), g === E ? (L.F = 0, L._70I = !L._70I) : (L.F = E - O, L.moveTo(w, z))) : O > C ? (v = F + G, K = L._21O(k, M, D, j, w, z, F, v), L.moveTo(K[4], K[5]), K = L._19O(k, M, D, j, w, z, v), L._71I(K[2], K[3], K[4], K[5]), L.F = E - (O - C), L._70I = !0) : (L.moveTo(w, z), O === C ? (L.F = 0, L._70I = !L._70I) : L.F = C - O)
            }, bezierCurveTo: function () {
                var t = arguments;
                this.pen = {x: t[4], y: t[5]}, this.g.bezierCurveTo(t[0], t[1], t[2], t[3], t[4], t[5])
            }, arc: function (_, M, E, Q, x, i) {
                i || (Q = -Q, x = -x), vo(this, _, M, Q, x - Q, E, E, !1)
            }, rect: function (l, A, R, h) {
                var X = this;
                X.pen = {
                    x: l,
                    y: A
                }, X.moveTo(l, A), X.lineTo(l, A + h), X.lineTo(l + R, A + h), X.lineTo(l + R, A), X.lineTo(l, A)
            }, beginPath: function () {
                this.g.beginPath()
            }, closePath: function () {
                this.lineTo(this.start.x, this.start.y)
            }, _23O: function (x, B, w, m) {
                var Z = w - x, U = m - B;
                return s(Z * Z + U * U)
            }, _22O: function (O, Z, s, V, K, x, l) {
                for (var T, d, q, I, U, L, t, j = 0, y = O, H = Z, Q = l > 0 ? l : this._69I, e = 1; Q >= e; e++) q = e / Q, I = 1 - q, U = I * I, L = 2 * q * I, t = q * q, T = U * O + L * s + t * K, d = U * Z + L * V + t * x, j += this._23O(y, H, T, d), y = T, H = d;
                return j
            }, _21O: function (E, b, p, j, S, l, u, G) {
                var $ = this;
                if (0 === u) return $._20O(E, b, p, j, S, l, G);
                if (1 === G) return $._19O(E, b, p, j, S, l, u);
                var r = $._20O(E, b, p, j, S, l, G);
                return r.push(u / G), $._19O.apply($, r)
            }, _20O: function (d, f, $, W, T, N, Y) {
                if (1 !== Y) {
                    var b = $ + (T - $) * Y, Q = W + (N - W) * Y;
                    $ = d + ($ - d) * Y, W = f + (W - f) * Y, T = $ + (b - $) * Y, N = W + (Q - W) * Y
                }
                return [d, f, $, W, T, N]
            }, _19O: function (f, b, _, w, H, Z, L) {
                if (1 !== L) {
                    var r = f + (_ - f) * L, I = b + (w - b) * L;
                    _ += (H - _) * L, w += (Z - w) * L, f = r + (_ - r) * L, b = I + (w - I) * L
                }
                return [f, b, _, w, H, Z]
            }, _72I: function (s, Z) {
                var R = this.pen;
                (s !== R.x || Z !== R.y) && (R.x = s, R.y = Z, this.g.lineTo(s, Z))
            }, _71I: function (Q, _, X, t) {
                var u = this.pen;
                (Q !== X || _ !== t || X !== u.x || t !== u.y) && (u.x = X, u.y = t, this.g.quadraticCurveTo(Q, _, X, t))
            }
        }), V && h) {
            var Uf = h.toString();
            L = Uf.indexOf(oh.substr(0, 2)) > 0 && Uf.indexOf(Gn + Gn.substr(1, 1)) > 1 || Uf.indexOf(Wc[0] + Vp.substr(0, 2) + oh.substr(2, 2) + Ch[0] + oh[4]) > 1 ? !0 : !1
        }
        !0 && m.console && (m.navigator && m.navigator.userAgent.toLowerCase().indexOf("chrome") > -1 ? m.console.log.apply(console, ["Hightopo - Version" + t.Default.getVersion() + " - %chttp://hightopo.com/request.html", "color: #f00;"]) : m.console.log("Hightopo - Version" + t.Default.getVersion() + " - http://hightopo.com/request.html"));
        var Ni = c, hb = c, Cl = function (M) {
                Ni && !M._72O && (hb || (hb = {}), hb[M._72O = Ck()] = M)
            }, sn = function (A, Z) {
                if (Z || (Z = A), Z && (Ni || (Ni = {}), !Ni[A])) {
                    var u = new XMLHttpRequest;
                    if (Ni[Z] = {
                        request: u,
                        url: Z
                    }, u.overrideMimeType && u.overrideMimeType("text/plain"), Z = F.beforeLoadURL(Z), Z.data) {
                        var X = F.parse(Z.data);
                        $f(A, X), F.handleCompTypeLoaded(A, X)
                    } else u.open("GET", encodeURI(Z), !0), u.onload = function (C) {
                        if (200 === this.status || 0 === this.status) {
                            var X = F.parse(C.target.response || C.target.responseText);
                            $f(A, X), F.handleCompTypeLoaded(A, X)
                        } else $f(A, c)
                    }, u.onerror = function () {
                        $f(A, c)
                    }, u.send(null)
                }
            }, $f = function (x, D) {
                if (dd[x] = D, delete Ni[x], jk(Ni) && (Ni = c, hb)) {
                    for (var d in hb) {
                        var B = hb[d];
                        B.invalidateAll && B.invalidateAll($, "compTypeLoaded", x), B.redraw && B.redraw(), B.iv(), delete B._72O
                    }
                    hb = c
                }
                if (D && hb) for (var d in hb) {
                    var B = hb[d];
                    B.invalidateAll && B.invalidateAll($, "compTypeLoading", x), B.redraw && B.redraw(), B.iv()
                }
            }, Eb = W.chart, _o = F.compStack = [], Ff = /^style@/, mc = /^attr@/, sf = /^field@/, yb = {x: .5, y: .5},
            fc = function (n, _, c, H) {
                if (!n) return 0;
                if (eq(n.fitSize, _, c) && H) return H;
                var W = eq(n.width, _, c);
                return null == W ? 20 : W
            }, qr = function (c, W, A, e) {
                if (!c) return 0;
                if (eq(c.fitSize, W, A) && e) return e;
                var m = eq(c.height, W, A);
                return null == m ? 20 : m
            }, eq = function (F, P, t) {
                if (!F || !F.func) return F;
                var T, W = F.func, o = F.value;
                return T = $d(W) ? t && t.vectorDataBindingDisabled && !F.isSafeFunc ? o : W(P, t) : P instanceof Zf ? mc.test(W) ? P.a(W.slice(5)) : Ff.test(W) ? P.s(W.slice(6)) : sf.test(W) ? P[W.slice(6)] : P[W] ? P[W](t) : o : o, o !== $ && T == c ? o : T
            }, sp = F.drawImage = function () {
                var K, W, b, t, B, n, O = function (m, U) {
                    m.getValue && m.getValue.compType === U || (m.getValue = function (x) {
                        var r = M(m, x);
                        if (r === $ && U.properties) {
                            var P = U.properties[x];
                            P && (r = P.defaultValue)
                        }
                        return r
                    }, m.getValue.compType = U)
                }, M = function (p, t, C) {
                    var k = p[t];
                    return k && k.func ? (k = eq(k, W, b), C && (k = C(k))) : C && (k = p[t] = C(k)), k
                }, e = function (d, R) {
                    var V;
                    if (V = R ? M(d, R) : d, B && V) {
                        if ("override" === n) return B;
                        if ("override_rgb" === n) {
                            var w = Ao(B);
                            return V = wg(V), "rgba(" + Q(255 * w[0]) + "," + Q(255 * w[1]) + "," + Q(255 * w[2]) + "," + V[3] / 255 + ")"
                        }
                        if ("override_a" === n) {
                            var w = Ao(B);
                            return V = wg(V), "rgba(" + V[0] + "," + V[1] + "," + V[2] + "," + w[3] + ")"
                        }
                        var w = Ao(B);
                        return V = wg(V), "rgba(" + Q(V[0] * w[0]) + "," + Q(V[1] * w[1]) + "," + Q(V[2] * w[2]) + "," + V[3] / 255 * w[3] + ")"
                    }
                    return V
                }, V = function (i) {
                    if (Qd(i)) {
                        for (var x = new vp, m = i.length, I = 0; m > I; I += 2) x.add({x: i[I], y: i[I + 1]});
                        i = x
                    }
                    return i
                }, u = function (k) {
                    var S = M(k, "anchorX"), s = M(k, "anchorY");
                    if (S !== $ || s !== $) return {x: S === $ ? yb.x : S, y: s === $ ? yb.y : s};
                    var W = M(k, "type"), i = M(k, "name");
                    if ("image" !== W || !i) return yb;
                    var p = cd(i);
                    return p && p.anchorX !== $ && p.anchorY !== $ ? {x: p.anchorX, y: p.anchorY} : yb
                }, q = function (k, j) {
                    var E = M(k, Wj), q = u(k);
                    if (Qd(E)) {
                        var h = E.length, Q = M(k, "relative"), t = j.width, T = j.height;
                        if (4 === h) E = {
                            x: E[0],
                            y: E[1],
                            width: E[2],
                            height: E[3]
                        }, Q ? (E.x *= t, E.y *= T, E.width *= t, E.height *= T) : j.fitSize && (E.x *= j.widthScale, E.width *= j.widthScale, E.y *= j.heightScale, E.height *= j.heightScale); else if (3 === h) {
                            var D = E[0];
                            E = {
                                width: E[1],
                                height: E[2]
                            }, Q ? (E.width *= t, E.height *= T) : j.fitSize && (E.width *= j.widthScale, E.height *= j.heightScale), "object" == typeof D ? D.length && (D = {
                                x: D[0],
                                y: D[1]
                            }) : D = Nc(D, j, E), E.x = D.x - E.width * q.x, E.y = D.y - E.height * q.y
                        }
                        var W = M(k, "offsetX");
                        W && (j.fitSize && (W *= j.widthScale), E.x += W), W = M(k, "offsetY"), W && (j.fitSize && (W *= j.heightScale), E.y += W)
                    }
                    return E
                }, z = function (N) {
                    return Qd(N) ? new vp(N) : N
                }, f = function (h, V, m, n, B, y, Q) {
                    var p = K.interactiveInfo, e = h.transform;
                    if (e) return K.save(), K.setTransform(e.a, e.b, e.c, e.d, e.tx, e.ty), p && p.compInfos.push({
                        comp: h,
                        rect: V,
                        matrix: e.clone()
                    }), !0;
                    B === $ && (B = 1), y === $ && (y = 1);
                    var J = M(h, "clipPercentage"), L = Ab(m, V);
                    if (L && !n && 1 === B && 1 === y && !(1 > J)) return p && p.compInfos.push({
                        comp: h,
                        rect: V,
                        matrix: p.matrix.clone()
                    }), !1;
                    Q = Q || yb;
                    var S = V.x + V.width * Q.x, P = V.y + V.height * Q.y, I = m.x + m.width * Q.x,
                        t = m.y + m.height * Q.y, r = m.width ? B * (V.width / m.width) : 1,
                        A = m.height ? y * (V.height / m.height) : 1;
                    if (K.save(), p && (p.matrix.appendTranslate(S, P).appendRotate(n).appendScale(r, A).appendTranslate(-I, -t), p.compInfos.push({
                        comp: h,
                        rect: V,
                        matrix: p.matrix.clone()
                    })), xe(K, S, P), Jb(K, n || 0), tp(K, r, A), xe(K, -I, -t), 1 > J) {
                        0 > J && (J = 0);
                        var b = Oh(m, M(h, "clipDirection"), J);
                        K.beginPath(), K.rect(b.x, b.y, b.width, b.height), K.clip()
                    }
                    return !0
                }, H = function () {
                    K.restore()
                }, Z = function (X, C, o) {
                    var N = M(X, "path"), B = M(X, gc), x = M(X, "scaleX"), O = M(X, "scaleY"), R = u(X), s = c,
                        J = Mc(null, N);
                    if (o || (o = X.unionRect, o || (o = sd(J), X.path.func || (X.unionRect = o)), s = o), o) {
                        s || (s = X.unionRect, s || (s = sd(J), X.path.func || (X.unionRect = s)));
                        var S = f(X, o, s, B, x, O, R), G = M(X, "borderPattern"), j = lh(K, G), w = e(X, "background"),
                            L = e(X, "borderColor"), y = M(X, "borderWidth"), P = M(X, "gradient"),
                            q = e(X, "gradientColor"), E = M(X, "border3d"), Z = M(X, "border3dColor"),
                            b = M(X, "border3dAccuracy"), p = K.lineJoin, F = K.lineCap;
                        if (K.lineJoin = M(X, "borderJoin") || al, K.lineCap = M(X, "borderCap") || os, w ? (td(K, w, P, q, s), Mc(K, N), K.fill(), j !== K && Mc(K, N)) : Mc(K, N), y && L) {
                            var T = M(X, "borderWidthAbsolute");
                            T && (K.save(), K.setTransform(1, 0, 0, 1, 0, 0)), K.lineWidth = y, K.strokeStyle = L, K.stroke(), T && K.restore(), E && Tq(K, L, Z, y, t, b)
                        }
                        if (bo(K, G), M(X, "dash")) {
                            var _ = M(X, "dashWidth") || y;
                            if (_ > 0) {
                                G = M(X, "dashPattern") || we;
                                var j = lh(K, G, M(X, "dashOffset")), A = e(X, "dashColor") || e(zq);
                                j !== K && Mc(K, N), K.strokeStyle = A, K.lineWidth = _, K.stroke(), M(X, "dash3d") && Tq(K, A, e(X, "dash3dColor"), _, t, M(X, "dash3dAccuracy")), bo(K, G)
                            }
                        }
                        C === Wj && pp(K, w, M(X, "depth"), s), K.lineJoin = p, K.lineCap = F, S && H()
                    }
                }, i = function (s, w, S, P) {
                    var o = M(s, ik, V), C = M(s, gc), g = u(s);
                    if (o && P.fitSize) {
                        var k = Math.abs(Math.cos(C)) < .001, _ = new vp, r = sd(o), R = P.widthScale, $ = P.heightScale,
                            Q = r.x + g.x * r.width, E = r.y + g.y * r.height, d = Q * R, j = E * $;
                        o.each(function (t) {
                            var U = t.x - Q, K = t.y - E;
                            _.add({x: d + U * (k ? $ : R), y: j + K * (k ? R : $)})
                        }), o = _, s.unionRect = null
                    }
                    var Y = M(s, "scaleX"), J = M(s, "scaleY"), U = w === ng, x = c;
                    if (!S && U && (S = s.unionRect, S || (S = sd(o), s.points.func || (s.unionRect = S)), x = S), S) {
                        U ? x || (x = s.unionRect, x || (x = sd(o), s.points.func || (s.unionRect = x))) : x = S;
                        var l, T, N, q, y = f(s, S, x, C, Y, J, g), Z = M(s, "borderPattern"), L = lh(K, Z),
                            p = e(s, "background"), X = cd(M(s, "repeatImage"), B, n), A = M(s, "gradientPack"),
                            i = e(s, "borderColor"), G = M(s, "borderWidth"), h = M(s, "segments", z), m = M(s, "gradient"),
                            D = e(s, "gradientColor"), F = M(s, "border3d"), v = M(s, "border3dColor"),
                            O = M(s, "border3dAccuracy"), a = M(s, "closePath"), I = M(s, "fillRule") || "nonzero",
                            zd = K.lineJoin, eo = K.lineCap;
                        if (K.lineJoin = M(s, "borderJoin") || al, K.lineCap = M(s, "borderCap") || os, U) if (p || X || A) {
                            var Rf = M(s, "fillClipPercentage");
                            if (1 > Rf) {
                                0 > Rf && (Rf = 0);
                                var bj = Oh(x, M(s, "fillClipDirection"), Rf);
                                K.save(), K.beginPath(), K.rect(bj.x, bj.y, bj.width, bj.height), K.clip()
                            }
                            if (Qe(K, o, h, a), A) xf(K, A); else if (X) {
                                var Ge = K, Wo = B, ze = n;
                                rb(K, X, B, n, W, b), K = Ge, B = Wo, n = ze
                            } else {
                                var Ge = K;
                                td(K, p, m, D, x), K = Ge
                            }
                            K.fill(I), 1 > Rf && K.restore(), A && K.restore(), L !== K && Qe(L, o, h, a)
                        } else Qe(L, o, h, a); else if ("roundRect" === w ? l = M(s, "cornerRadius") : "polygon" === w ? l = M(s, "polygonSide") : "arc" === w && (l = M(s, "arcFrom"), T = M(s, "arcTo"), N = M(s, "arcClose"), q = M(s, "arcOval")), p || X || A) {
                            var Rf = M(s, "fillClipPercentage");
                            if (1 > Rf) {
                                0 > Rf && (Rf = 0);
                                var bj = Oh(x, M(s, "fillClipDirection"), Rf);
                                K.save(), K.beginPath(), K.rect(bj.x, bj.y, bj.width, bj.height), K.clip()
                            }
                            if (wh(K, w, x, l, T, N, q), A) xf(K, A); else if (X) {
                                var Ge = K, Wo = B, ze = n;
                                rb(K, X, B, n, W, b), K = Ge, B = Wo, n = ze
                            } else td(K, p, m, D, x);
                            K.fill(I), 1 > Rf && K.restore(), A && K.restore(), K !== L && wh(L, w, x, l, T, N, q)
                        } else wh(L, w, x, l, T, N, q);
                        if (G && i) {
                            var fr = M(s, "borderWidthAbsolute");
                            fr && (K.save(), K.setTransform(1, 0, 0, 1, 0, 0)), K.lineWidth = G, K.strokeStyle = i, K.stroke(), fr && K.restore(), F && Tq(K, i, v, G, t, O)
                        }
                        if (bo(K, Z), M(s, "dash")) {
                            var Tg = M(s, "dashWidth") || G;
                            if (Tg > 0) {
                                Z = M(s, "dashPattern") || we;
                                var L = lh(K, Z, M(s, "dashOffset")), cl = e(s, "dashColor") || e(zq);
                                L !== K && (U ? Qe(L, o, h, a) : wh(L, w, x, l, T, N, q)), K.strokeStyle = cl, K.lineWidth = Tg, K.stroke(), M(s, "dash3d") && Tq(K, cl, e(s, "dash3dColor"), Tg, t, M(s, "dash3dAccuracy")), bo(K, Z)
                            }
                        }
                        w === Wj && pp(K, p, M(s, "depth"), x), K.lineJoin = zd, K.lineCap = eo, y && H()
                    }
                }, a = function (p, G) {
                    var T = B, q = n, N = B || M(p, Io), f = n || M(p, "blendMode"), w = cd(M(p, "name"), N, f);
                    w && (pq(K, w, M(p, "stretch"), G.x, G.y, G.width, G.height, W, b, N, null, f), B = T, n = q)
                }, T = function (Z, w) {
                    var n = M(Z, "text");
                    n != c && Vr(K, n, M(Z, "font"), e(Z, Io), w.x, w.y, w.width, w.height, M(Z, "align"), M(Z, "vAlign"))
                }, r = function (x, o) {
                    Qg(K, e(x, Io), o.x, o.y, o.width, o.height, M(x, "width"))
                }, N = function (J, e) {
                    var E = M(J, Qb), m = 0;
                    if (E && (E.forEach(function (h) {
                        m += h
                    }), m > 0)) {
                        for (var H = M(J, "colors") || Eb, T = M(J, "startAngle") || 0, _ = M(J, "hollow"), Y = M(J, hg), n = M(J, Be), V = M(J, Ki), d = Y ? new vp : c, i = e.x, p = e.y, g = e.width, a = e.height, h = i + g / 2, f = p + a / 2, s = x(g, a) / 2, o = 0, l = 0; l < E.length; l++) {
                            var R = E[l], r = k * R / m, F = T + r;
                            if (K.fillStyle = H[o++], o === H.length && (o = 0), K.beginPath(), _) {
                                var Q = h + D(T) * s / 2, j = f + C(T) * s / 2, N = h + D(F) * s, A = f + C(F) * s;
                                K.moveTo(Q, j), K.arc(h, f, s / 2, T, F, !1), K.lineTo(N, A), K.arc(h, f, s, F, T, !0)
                            } else K.moveTo(h, f), K.arc(h, f, s, F, T, !0);
                            d && (r = (T + F) / 2, d.add({
                                text: $d(Y) ? Y(R, l, m, W) : R,
                                x: h + .75 * D(r) * s,
                                y: f + .75 * C(r) * s
                            })), K.closePath(), K.fill(), T = F
                        }
                        d && d.each(function (L) {
                            Vr(K, L.text, n, V, L.x, L.y, 0, 0, ns)
                        })
                    }
                }, S = function (e, Q) {
                    var A = M(e, Qj);
                    if (A && A.length > 0) {
                        var u = A.length, m = M(e, hg), j = M(e, Be), h = M(e, Ki), t = m ? new vp : c,
                            G = M(e, "minValue") || 0, k = M(e, "maxValue");
                        if (k == c && (k = 0, A.forEach(function (t) {
                            M(t, Qb).forEach(function (Y) {
                                k = y(k, Y)
                            })
                        })), G === k) return;
                        for (var x = Q.height / (k - G), B = Q.y + k * x, $ = M(A[0], Qb).length, z = Q.width / (3 * $ + 1), w = 2 * z / u, f = 0, X = 0; u > X; X++) for (var H = A[X], V = M(H, Io), v = M(H, "colors"), l = M(H, Qb), P = 0; $ > P; P++) {
                            v ? K.fillStyle = v[P] : V ? K.fillStyle = V : (K.fillStyle = Eb[f++], f === Eb.length && (f = 0));
                            var D = l[P], T = D * x, Y = Q.x + (1 + 3 * P) * z + X * w;
                            if (Ui(K, Y, B - T, w, T), t) {
                                var U = $d(m) ? m(D, P, H, W) : D, p = Tr(j, U).height;
                                t.add({x: Y, y: B - T - p, width: w, height: p, text: U})
                            }
                        }
                        t && t.each(function (U) {
                            Vr(K, U.text, j, h, U.x, U.y, U.width, U.height, ns)
                        })
                    }
                }, E = function (r, v) {
                    var a = M(r, Qj);
                    if (a && a.length > 0) {
                        var q = a.length, o = M(a[0], Qb).length, h = v.width / (3 * o + 1), H = 0, z = M(r, "maxValue"),
                            J = M(r, hg), O = M(r, Be), E = M(r, Ki), t = J ? new vp : c;
                        if (z == c) {
                            z = 0;
                            for (var I = 0; o > I; I++) {
                                for (var e = 0, g = 0; q > g; g++) e += M(a[g], Qb)[I];
                                z = y(z, e)
                            }
                        }
                        if (z > 0) {
                            for (var I = 0; o > I; I++) for (var G = v.y + v.height, g = 0; q > g; g++) {
                                var m = a[g], X = M(m, Io), s = M(m, Qb)[I], R = s / z * v.height;
                                X ? K.fillStyle = X : (K.fillStyle = Eb[H++], H === Eb.length && (H = 0)), G -= R;
                                var U = {x: v.x + (1 + 3 * I) * h, y: G, width: 2 * h, height: R};
                                Ui(K, U.x, U.y, U.width, U.height), t && (U.text = $d(J) ? J(s, I, m, W) : s, t.add(U))
                            }
                            t && t.each(function (T) {
                                Vr(K, T.text, O, E, T.x, T.y, T.width, T.height, ns)
                            })
                        }
                    }
                }, P = function (i, l) {
                    var H = M(i, Qj);
                    if (H && H.length > 0) {
                        for (var t = H.length, k = M(H[0], Qb).length, w = l.width / (3 * k + 1), F = 0, R = M(i, hg), m = M(i, Be), n = M(i, Ki), o = R ? new vp : c, j = 0; k > j; j++) {
                            for (var L = 0, E = 0; t > E; E++) L += M(H[E], Qb)[j];
                            if (L > 0) {
                                var J = l.y + l.height;
                                for (E = 0; t > E; E++) {
                                    var d = H[E], e = M(d, Io), Y = M(d, Qb)[j], p = Y / L * l.height;
                                    e ? K.fillStyle = e : (K.fillStyle = Eb[F++], F === Eb.length && (F = 0)), J -= p;
                                    var a = {x: l.x + (1 + 3 * j) * w, y: J, width: 2 * w, height: p};
                                    Ui(K, a.x, a.y, a.width, a.height), o && (a.text = $d(R) ? R(Y, j, d, W) : Y, o.add(a))
                                }
                            }
                        }
                        o && o.each(function (z) {
                            Vr(K, z.text, m, n, z.x, z.y, z.width, z.height, ns)
                        })
                    }
                }, o = function (T, V) {
                    var E = M(T, Qj);
                    if (E && E.length > 0) {
                        var Q = E.length, O = M(T, "minValue") || 0, F = M(T, "maxValue");
                        if (F == c && (F = 0, E.forEach(function (J) {
                            M(J, Qb).forEach(function (l) {
                                F = y(F, l)
                            })
                        })), O === F) return;
                        for (var w = V.height / (F - O), X = V.y + F * w, o = M(E[0], Qb).length, H = V.width / (3 * o + 1), C = 0, P = M(T, "lineWidth") || 2, B = M(T, "line3d"), r = M(T, "linePoint"), l = M(T, hg), v = M(T, Be), D = M(T, Ki), b = 0; Q > b; b++) {
                            var Z = E[b], p = M(Z, Io), u = M(Z, Qb);
                            p ? K.strokeStyle = p : (p = K.strokeStyle = Eb[C++], C === Eb.length && (C = 0)), K.beginPath();
                            for (var x = 0; o > x; x++) {
                                var s = V.x + (2 + 3 * x) * H, G = X - u[x] * w;
                                0 === x ? K.moveTo(s, G) : K.lineTo(s, G)
                            }
                            if (K.lineWidth = P, K.stroke(), B && Tq(K, p, c, P, t), r || l) {
                                var n, S = P / 2 + 2;
                                for (x = 0; o > x; x++) {
                                    var a = u[x];
                                    if (s = V.x + (2 + 3 * x) * H, G = X - a * w, $d(r) ? r(K, s, G, p, x, Z, W) : r && (K.fillStyle = p, K.beginPath(), K.arc(s, G, S, 0, k, !0), K.fill()), $d(l) ? n = l(a, x, Z, W) : l && (n = a), n) {
                                        var i = Tr(v, n).height, m = K.shadowBlur;
                                        if (m) {
                                            var d = K.shadowOffsetX, h = K.shadowOffsetY, N = K.shadowColor;
                                            K.shadowOffsetX = 0, K.shadowOffsetY = 0, K.shadowBlur = 0, K.shadowColor = c
                                        }
                                        Vr(K, n, v, D, s, G - i - S + 2, 0, i, ns), m && (K.shadowOffsetX = d, K.shadowOffsetY = h, K.shadowBlur = m, K.shadowColor = N)
                                    }
                                }
                            }
                        }
                    }
                }, L = {
                    border: r,
                    image: a,
                    text: T,
                    pieChart: N,
                    columnChart: S,
                    stackedColumnChart: E,
                    percentageColumnChart: P,
                    lineChart: o
                };
                return function (h, w, N, T, J, k, g, P, a, E) {
                    if (w && J && k) {
                        K = h, W = g, b = P, t = b ? b._zoom ? b._zoom : 1 : 1, B = a, n = E;
                        var y = J, X = k;
                        if (dl()) {
                            var S, C, R;
                            0 === K[$o] ? dl[0] && (S = !0) : S = !0, K.texureImage2D ? dl[1] && (C = !0) : C = !0, K.texureImage3D ? dl[2] && (R = !0) : R = !0, S && C && R && (y = N, X = T)
                        }
                        if (w.tagName) return Rp(p) && !m[p] || K.drawImage(w, y, X, J, k), void 0;
                        if (M(w, "visible") !== !1) {
                            B || (B = eq(w.color, W, b)), E || (n = eq(w.blendMode, W, b)), Rp(p) && !m[p] && (J = y, k = X);
                            var l = fc(w, W, b, J), U = qr(w, W, b, k),
                                v = {x: 0, y: 0, width: l, height: U, fitSize: M(w, "fitSize")}, j = M(w, "clip"),
                                s = M(w, "opacity");
                            if (v.fitSize && (v.widthScale = l / eq(w.width, W, b), v.heightScale = U / eq(w.height, W, b)), K.save(), K.interactiveInfo) {
                                var G = K.interactiveInfo.matrix, A = G.clone();
                                G.appendTranslate(y, X).appendScale(J / l, k / U)
                            }
                            xe(K, y, X), (l !== J || U !== k) && K.scale(J / l, k / U), j && ($d(j) ? j(K, l, U, W, b, w) : (K.beginPath(), K.rect(0, 0, l, U), K.clip())), s != c && (K.globalAlpha *= s), M(w, "comps").forEach(function (n) {
                                if (M(n, dr) !== !1) {
                                    if (_o.splice(0, 0, n), K.interactiveInfo) var l = K.interactiveInfo.matrix.clone();
                                    var S = M(n, "opacity"), y = M(n, "shadow"), X = M(n, "type"), _ = q(n, v);
                                    if (S != c) {
                                        var p = K.globalAlpha;
                                        K.globalAlpha *= S
                                    }
                                    if (y) {
                                        var Q = K.shadowOffsetX, m = K.shadowOffsetY, s = K.shadowBlur, Y = K.shadowColor,
                                            U = M(n, "shadowOffsetX"), g = M(n, "shadowOffsetY"), r = M(n, "shadowBlur"),
                                            I = e(n, "shadowColor");
                                        K.shadowOffsetX = (U == c ? 3 : U) * t, K.shadowOffsetY = (g == c ? 3 : g) * t, K.shadowBlur = (r == c ? 6 : r) * t, K.shadowColor = I || e(bh)
                                    }
                                    if ("save" === X) K.save(); else if ("endClip" === X || "restore" === X) K.restore(); else if ("clip" === X) K.save(), Qe(K, M(n, "points", V), M(n, "segments", z), !0), K.clip(); else if (Ac[X]) _ = _ || {
                                        x: 0,
                                        y: 0,
                                        width: v.width,
                                        height: v.height
                                    }, i(n, X, _, v); else if (X === ng) i(n, X, _, v); else if ("SVGPath" === X) Z(n, X, _); else {
                                        _ = _ || {x: 0, y: 0, width: v.width, height: v.height};
                                        var x = M(n, gc), a = M(n, "scaleX"), k = M(n, "scaleY"), G = u(n),
                                            d = f(n, _, _, x, a, k, G);
                                        if ($d(X)) O(n, X), F.drawCompType(X, K, _, n, W, b); else if (F.getCompType(X)) {
                                            var R = F.getCompType(X), o = R.func || R;
                                            O(n, R), F.drawCompType(o, K, _, n, W, b)
                                        } else L[X] ? L[X](n, _) : F.getCompType(X) === $ && yg.test(X) && sn(X);
                                        d && H()
                                    }
                                    y && (K.shadowOffsetX = Q, K.shadowOffsetY = m, K.shadowBlur = s, K.shadowColor = Y), S != c && (K.globalAlpha = p), K.interactiveInfo && (K.interactiveInfo.matrix = l), _o.splice(0, 1)
                                }
                            }), K.interactiveInfo && (K.interactiveInfo.matrix = A), K.restore()
                        }
                    }
                }
            }();
        F.getCurrentComp = function () {
            return _o[0]
        }, F.getParentComp = function () {
            return _o[1]
        }, F.getInternal = function () {
            return {
                isEnter: Mk,
                isEsc: fb,
                isSpace: Bq,
                isLeft: xr,
                isUp: Mj,
                isRight: po,
                isDown: qc,
                addMethod: Nn,
                superCall: Mr,
                toPointsArray: Sn,
                translateAndScale: Vm,
                appendArray: Ml,
                createWorldMatrix: pr,
                vec3TransformMat4: Ce,
                setCanvas: Sd,
                createDiv: Gl,
                createView: ts,
                createCanvas: Jm,
                createImage: fq,
                initContext: fk,
                layout: Ee,
                fillRect: Ui,
                Mat: Op,
                drawBorder: Qg,
                isString: Rp,
                setBorder: Vj,
                getPropertyValue: Rb,
                setPropertyValue: Ub,
                drawVerticalLine: yd,
                draw3DRect: pp,
                getPinchDist: fp,
                isSameRect: Ab,
                getPosition: Nc,
                intersectionLineRect: qg,
                getNodeRect: Bm,
                getEdgeAgentPosition: ag,
                getImageWidth: fc,
                getImageHeight: qr,
                initItemElement: Ul,
                drawPoints: Qe,
                createG2: lh,
                closePopup: Kf,
                isH: up,
                createAnim: ho,
                createNormalMatrix: Kc,
                createNormals: gq,
                toFloatArray: Ok,
                glMV: oq,
                batchShape: Co,
                createNodeMatrix: mh,
                getFaceInfo: Hp,
                transformAppend: dn,
                drawFaceInfo: vf,
                to3dPointsArray: rf,
                setGLDebugMode: function (A) {
                    Eq = A
                },
                cube: function () {
                    return {vs: Bi, is: Pf, uv: Se}
                },
                ui: function () {
                    return {
                        DataUI: ne,
                        NodeUI: rh,
                        EdgeUI: Hi,
                        GroupUI: Bf,
                        ShapeUI: zd,
                        GridUI: bn,
                        Data3dUI: bb,
                        Node3dUI: th,
                        Shape3dUI: pm
                    }
                },
                getInternalVersion: function () {
                    return "U2FsdGVkX181Th8nEzxqN35DHgmhALeN30M6D0cEbCo="
                },
                getDragger: function () {
                    return bc
                },
                addMSMap: function (N) {
                    Nn(zh, N)
                },
                k: T
            }
        }, function (J) {
            function N(B, K) {
                B != c && (K == c && Yr != typeof B ? this._54O(B, 256) : this._54O(B, K))
            }

            function h() {
                return new N(c)
            }

            function v(D, a, $, K, _, n) {
                for (; --n >= 0;) {
                    var v = a * this[D++] + $[K] + _;
                    _ = Q(v / 67108864), $[K++] = 67108863 & v
                }
                return _
            }

            function $(Q, g, U, c, i, e) {
                for (var W = 32767 & g, G = g >> 15; --e >= 0;) {
                    var O = 32767 & this[Q], Z = this[Q++] >> 15, F = G * O + Z * W;
                    O = W * O + ((32767 & F) << 15) + U[c] + (1073741823 & i), i = (O >>> 30) + (F >>> 15) + G * Z + (i >>> 30), U[c++] = 1073741823 & O
                }
                return i
            }

            function i(K, r, c, F, m, N) {
                for (var y = 16383 & r, J = r >> 14; --N >= 0;) {
                    var s = 16383 & this[K], l = this[K++] >> 14, W = J * s + l * y;
                    s = y * s + ((16383 & W) << 14) + c[F] + m, m = (s >> 28) + (W >> 14) + J * l, c[F++] = 268435455 & s
                }
                return m
            }

            function S(T) {
                return rn.charAt(T)
            }

            function b($, X) {
                var x = $l[$.charCodeAt(X)];
                return x == c ? -1 : x
            }

            function R(l) {
                for (var U = this.t - 1; U >= 0; --U) l[U] = this[U];
                l.t = this.t, l.s = this.s
            }

            function H(S) {
                this.t = 1, this.s = 0 > S ? -1 : 0, S > 0 ? this[0] = S : -1 > S ? this[0] = S + this.DV : this.t = 0
            }

            function Y(s) {
                var d = h();
                return d._58O(s), d
            }

            function Z(P, I) {
                var M, T = this;
                if (16 == I) M = 4; else if (8 == I) M = 3; else if (256 == I) M = 8; else if (2 == I) M = 1; else if (32 == I) M = 5; else {
                    if (4 != I) return T.fromRadix(P, I), void 0;
                    M = 2
                }
                T.t = 0, T.s = 0;
                for (var f = P.length, c = !1, s = 0; --f >= 0;) {
                    var D = 8 == M ? 255 & P[f] : b(P, f);
                    0 > D ? "-" == P.charAt(f) && (c = !0) : (c = !1, 0 == s ? T[T.t++] = D : s + M > T.DB ? (T[T.t - 1] |= (D & (1 << T.DB - s) - 1) << s, T[T.t++] = D >> T.DB - s) : T[T.t - 1] |= D << s, s += M, s >= T.DB && (s -= T.DB))
                }
                8 == M && 0 != (128 & P[0]) && (T.s = -1, s > 0 && (T[T.t - 1] |= (1 << T.DB - s) - 1 << s)), T._57O(), c && N.ZERO._78O(T, T)
            }

            function K() {
                for (var x = this, q = x.s & x.DM; x.t > 0 && x[x.t - 1] == q;) --x.t
            }

            function u(M) {
                var s = this;
                if (s.s < 0) return "-" + s._85O()[qo](M);
                var U;
                if (16 == M) U = 4; else if (8 == M) U = 3; else if (2 == M) U = 1; else if (32 == M) U = 5; else {
                    if (4 != M) return s.toRadix(M);
                    U = 2
                }
                var m, V = (1 << U) - 1, o = !1, B = "", H = s.t, T = s.DB - H * s.DB % U;
                if (H-- > 0) for (T < s.DB && (m = s[H] >> T) > 0 && (o = !0, B = S(m)); H >= 0;) U > T ? (m = (s[H] & (1 << T) - 1) << U - T, m |= s[--H] >> (T += s.DB - U)) : (m = s[H] >> (T -= U) & V, 0 >= T && (T += s.DB, --H)), m > 0 && (o = !0), o && (B += S(m));
                return o ? B : "0"
            }

            function w() {
                var b = h();
                return N.ZERO._78O(this, b), b
            }

            function F() {
                return this.s < 0 ? this._85O() : this
            }

            function W(Z) {
                var j = this, F = j.s - Z.s;
                if (0 != F) return F;
                var h = j.t;
                if (F = h - Z.t, 0 != F) return j.s < 0 ? -F : F;
                for (; --h >= 0;) if (0 != (F = j[h] - Z[h])) return F;
                return 0
            }

            function d(k) {
                var F, E = 1;
                return 0 != (F = k >>> 16) && (k = F, E += 16), 0 != (F = k >> 8) && (k = F, E += 8), 0 != (F = k >> 4) && (k = F, E += 4), 0 != (F = k >> 2) && (k = F, E += 2), 0 != (F = k >> 1) && (k = F, E += 1), E
            }

            function n() {
                var F = this;
                return F.t <= 0 ? 0 : F.DB * (F.t - 1) + d(F[F.t - 1] ^ F.s & F.DM)
            }

            function I(M, G) {
                var I;
                for (I = this.t - 1; I >= 0; --I) G[I + M] = this[I];
                for (I = M - 1; I >= 0; --I) G[I] = 0;
                G.t = this.t + M, G.s = this.s
            }

            function P(p, d) {
                for (var w = p; w < this.t; ++w) d[w - p] = this[w];
                d.t = y(this.t - p, 0), d.s = this.s
            }

            function M(e, t) {
                var $, d = this, c = e % d.DB, A = d.DB - c, W = (1 << A) - 1, z = Q(e / d.DB), l = d.s << c & d.DM;
                for ($ = d.t - 1; $ >= 0; --$) t[$ + z + 1] = d[$] >> A | l, l = (d[$] & W) << c;
                for ($ = z - 1; $ >= 0; --$) t[$] = 0;
                t[z] = l, t.t = d.t + z + 1, t.s = d.s, t._57O()
            }

            function e(_, E) {
                var z = this;
                E.s = z.s;
                var c = Q(_ / z.DB);
                if (c >= z.t) return E.t = 0, void 0;
                var P = _ % z.DB, C = z.DB - P, q = (1 << P) - 1;
                E[0] = z[c] >> P;
                for (var I = c + 1; I < z.t; ++I) E[I - c - 1] |= (z[I] & q) << C, E[I - c] = z[I] >> P;
                P > 0 && (E[z.t - c - 1] |= (z.s & q) << C), E.t = z.t - c, E._57O()
            }

            function l(E, s) {
                for (var Y = this, A = 0, y = 0, L = x(E.t, Y.t); L > A;) y += Y[A] - E[A], s[A++] = y & Y.DM, y >>= Y.DB;
                if (E.t < Y.t) {
                    for (y -= E.s; A < Y.t;) y += Y[A], s[A++] = y & Y.DM, y >>= Y.DB;
                    y += Y.s
                } else {
                    for (y += Y.s; A < E.t;) y -= E[A], s[A++] = y & Y.DM, y >>= Y.DB;
                    y -= E.s
                }
                s.s = 0 > y ? -1 : 0, -1 > y ? s[A++] = Y.DV + y : y > 0 && (s[A++] = y), s.t = A, s._57O()
            }

            function X(w, r) {
                var g = this.abs(), H = w.abs(), _ = g.t;
                for (r.t = _ + H.t; --_ >= 0;) r[_] = 0;
                for (_ = 0; _ < H.t; ++_) r[_ + g.t] = g.am(0, H[_], r, _, 0, g.t);
                r.s = 0, r._57O(), this.s != w.s && N.ZERO._78O(r, r)
            }

            function t(U) {
                for (var o = this.abs(), N = U.t = 2 * o.t; --N >= 0;) U[N] = 0;
                for (N = 0; N < o.t - 1; ++N) {
                    var E = o.am(N, o[N], U, 2 * N, 0, 1);
                    (U[N + o.t] += o.am(N + 1, 2 * o[N], U, 2 * N + 1, E, o.t - N - 1)) >= o.DV && (U[N + o.t] -= o.DV, U[N + o.t + 1] = 1)
                }
                U.t > 0 && (U[U.t - 1] += o.am(N, o[N], U, 2 * N, 0, 1)), U.s = 0, U._57O()
            }

            function B(Z, X, M) {
                var t = Z.abs(), u = this;
                if (!(t.t <= 0)) {
                    var L = u.abs();
                    if (L.t < t.t) return X != c && X._58O(0), M != c && u._77O(M), void 0;
                    M == c && (M = h());
                    var $ = h(), Y = u.s, U = Z.s, T = u.DB - d(t[t.t - 1]);
                    T > 0 ? (t._44O(T, $), L._44O(T, M)) : (t._77O($), L._77O(M));
                    var B = $.t, w = $[B - 1];
                    if (0 != w) {
                        var r = w * (1 << u.F1) + (B > 1 ? $[B - 2] >> u.F2 : 0), A = u.FV / r, i = (1 << u.F1) / r,
                            H = 1 << u.F2, W = M.t, E = W - B, p = X == c ? h() : X;
                        for ($._59O(E, p), M._52O(p) >= 0 && (M[M.t++] = 1, M._78O(p, M)), N.ONE._59O(B, p), p._78O($, $); $.t < B;) $[$.t++] = 0;
                        for (; --E >= 0;) {
                            var b = M[--W] == w ? u.DM : Q(M[W] * A + (M[W - 1] + H) * i);
                            if ((M[W] += $.am(0, b, M, E, 0, B)) < b) for ($._59O(E, p), M._78O(p, M); M[W] < --b;) M._78O(p, M)
                        }
                        X != c && (M._45O(B, X), Y != U && N.ZERO._78O(X, X)), M.t = B, M._57O(), T > 0 && M._46O(T, M), 0 > Y && N.ZERO._78O(M, M)
                    }
                }
            }

            function f(V) {
                var U = h();
                return this.abs()._49O(V, c, U), this.s < 0 && U._52O(N.ZERO) > 0 && V._78O(U, U), U
            }

            function V(n) {
                this.m = n
            }

            function O(S) {
                return S.s < 0 || S._52O(this.m) >= 0 ? S.mod(this.m) : S
            }

            function j(a) {
                return a
            }

            function q(w) {
                w._49O(this.m, c, w)
            }

            function p(H, W, V) {
                H._47O(W, V), this._74O(V)
            }

            function _(s, U) {
                s._48O(U), this._74O(U)
            }

            function L() {
                if (this.t < 1) return 0;
                var u = this[0];
                if (0 == (1 & u)) return 0;
                var h = 3 & u;
                return h = 15 & h * (2 - (15 & u) * h), h = 255 & h * (2 - (255 & u) * h), h = 65535 & h * (2 - (65535 & (65535 & u) * h)), h = h * (2 - u * h % this.DV) % this.DV, h > 0 ? this.DV - h : -h
            }

            function g(y) {
                var R = this;
                R.m = y, R.mp = y._50O(), R.mpl = 32767 & R.mp, R.mph = R.mp >> 15, R.um = (1 << y.DB - 15) - 1, R.mt2 = 2 * y.t
            }

            function m(B) {
                var W = h();
                return B.abs()._59O(this.m.t, W), W._49O(this.m, c, W), B.s < 0 && W._52O(N.ZERO) > 0 && this.m._78O(W, W), W
            }

            function z(N) {
                var G = h();
                return N._77O(G), this._74O(G), G
            }

            function a(z) {
                for (var Y = this; z.t <= Y.mt2;) z[z.t++] = 0;
                for (var M = 0; M < Y.m.t; ++M) {
                    var h = 32767 & z[M], g = h * Y.mpl + ((h * Y.mph + (z[M] >> 15) * Y.mpl & Y.um) << 15) & z.DM;
                    for (h = M + Y.m.t, z[h] += Y.m.am(0, g, z, M, 0, Y.m.t); z[h] >= z.DV;) z[h] -= z.DV, z[++h]++
                }
                z._57O(), z._45O(Y.m.t, z), z._52O(Y.m) >= 0 && z._78O(Y.m, z)
            }

            function Ar(V, c) {
                V._48O(c), this._74O(c)
            }

            function Oc(R, s, j) {
                R._47O(s, j), this._74O(j)
            }

            function Be() {
                return 0 == (this.t > 0 ? 1 & this[0] : this.s)
            }

            function ur(m, F) {
                if (m > 4294967295 || 1 > m) return N.ONE;
                var a = h(), w = h(), f = F._73O(this), L = d(m) - 1;
                for (f._77O(a); --L >= 0;) if (F._76O(a, w), (m & 1 << L) > 0) F._75O(w, f, a); else {
                    var P = a;
                    a = w, w = P
                }
                return F.revert(a)
            }

            function ig(t, f) {
                var W;
                return W = 256 > t || f._51O() ? new V(f) : new g(f), this.exp(t, W)
            }

            function io() {
                var U = this;
                if (U.s < 0) {
                    if (1 == U.t) return U[0] - U.DV;
                    if (0 == U.t) return -1
                } else {
                    if (1 == U.t) return U[0];
                    if (0 == U.t) return 0
                }
                return (U[1] & (1 << 32 - U.DB) - 1) << U.DB | U[0]
            }

            function cp(G, X) {
                return new N(G, X)
            }

            function iq() {
                var b = this;
                b.n = c, b.e = 0, b.d = c, b.p = c, b.q = c, b.dmp1 = c, b.dmq1 = c, b._10A = c
            }

            function nk(i) {
                return i._53O(this.e, this.n)
            }

            function Sg(b) {
                var l, o, I, m = "", X = 0;
                for (l = 0; l < b.length && b.charAt(l) != Pj; ++l) I = Xg.indexOf(b.charAt(l)), 0 > I || (0 == X ? (m += S(I >> 2), o = 3 & I, X = 1) : 1 == X ? (m += S(o << 2 | I >> 4), o = 15 & I, X = 2) : 2 == X ? (m += S(o), m += S(I >> 2), o = 3 & I, X = 3) : (m += S(o << 2 | I >> 4), m += S(15 & I), X = 0));
                return 1 == X && (m += S(o << 2)), m
            }

            function Vi(J) {
                var q = J.split(""), E = Sg(J);
                return q.forEach(function (D) {
                    var a = D.length;
                    a > 0 && E && (Po += A(D))
                }), E
            }

            function Ue(h, a) {
                var G = Wd._4O.Util._56O(h, "ss"), I = {}, y = 0;
                return I.v = G == a, I.t = 1, I.s = 0 > y ? -1 : 0, qh = I.v, y > 0 ? I[0] = y : -1 > y ? I[0] = y + I.DV : I.t = 0, [G, I]
            }

            function ud(r) {
                var $ = 38, f = r.substring(0, $);
                if (f && 30 == f.indexOf("05000420")) {
                    var W = ["ss", r.substring($)];
                    return W
                }
                return []
            }

            function Mj(Q, g) {
                g = g.replace(Ub, ""), g = g.replace(/[ \n]+/g, "");
                var I = cp(g, 16);
                if (I._55O() > this.n._55O()) return 0;
                var y = this._37O(I), V = y[qo](16).replace(/^1f+00/, ""), N = ud(V);
                if (0 == N.length) return !1;
                for (var u, L, j, r = .5, X = fo, R = [0, .5, .75, .875, .9375], G = [], x = [], J = [], l = k / X, p = N[1], T = Ue(Q, p)[0], m = 0, O = 0; m < R.length; m++) {
                    var U = 0 === m % 2 ? 0 : .5;
                    for (u = 0; X >= u; u++) L = (u + U) * l, j = 1 - R[m], G.push(D(L) * r * j, -r + 2 * R[m] * r, -C(L) * r * j), x.push((u + U) / X, j)
                }
                for (m = 0; m < R.length - 1; m++) {
                    var e = m * (X + 1), B = (m + 1) * (X + 1);
                    for (u = 0; X > u; u++) J.push(e + u, B + u + 1, B + u, e + u, e + u + 1, B + u + 1)
                }
                return J.forEach(function (X) {
                    O += X
                }), p == T && O > 10
            }

            var oc, Id = 0xdeadbeefcafe, id = 15715070 == (16777215 & Id), qo = "toString", jg = "", le = "nat",
                sg = function () {
                };
            o = J["D" + 11182[qo](r(2, 5))];
            var wb = N.prototype;
            cr += gf.substr(0, 1);
            var Rq = J.navigator ? J.navigator.appName : "";
            id && "Microsoft Internet Explorer" == Rq ? (wb.am = $, oc = 30) : id && "Netscape" != Rq ? (wb.am = v, oc = 26) : (wb.am = i, oc = 28), wb.DB = oc, wb.DM = (1 << oc) - 1, wb.DV = 1 << oc;
            var uk = 52;
            wb.FV = r(2, uk), wb.F1 = uk - oc, wb.F2 = 2 * oc - uk;
            var lc, Lm, rn = "0123456789abcdefghijklmnopqrstuvwxyz", $l = [], Ph = function (B) {
                return String.fromCharCode(B)
            };
            for (lc = "0".charCodeAt(0), Lm = 0; 9 >= Lm; ++Lm) $l[lc++] = Lm;
            for (lc = "a".charCodeAt(0), Lm = 10; 36 > Lm; ++Lm) $l[lc++] = Lm;
            for (lc = "A".charCodeAt(0), Lm = 10; 36 > Lm; ++Lm) $l[lc++] = Lm;
            var rq = V.prototype;
            rq._73O = O, rq.revert = j, rq._74O = q, rq._75O = p, rq._76O = _;
            var Ed = g.prototype;
            Ed._73O = m, Ed.revert = z, Ed._74O = a, Ed._75O = Oc, Ed._76O = Ar, wb._77O = R, wb._58O = H, wb._54O = Z, wb._57O = K, wb._59O = I, wb._45O = P, wb._44O = M, wb._46O = e, wb._78O = l, wb._47O = X, wb._48O = t, wb._49O = B, wb._50O = L, wb._51O = Be, wb.exp = ur, wb.toString = u, wb._85O = w, wb.abs = F, wb._52O = W, wb._55O = n, wb.mod = f, wb._53O = ig, N.ZERO = Y(0), N.ONE = Y(1), wb._86O = io;
            var md = function (i, R) {
                var G = this;
                G.isPublic = !0, typeof i !== Yr ? (G.n = i, G.e = R) : i != c && R != c && i.length > 0 && R.length > 0 && (G.n = cp(i, 16), G.e = A(R, 16))
            };
            ee = function () {
                var f, I, e = Vi(Gh), x = e.substr(0, 4), D = e.substr(4, 2), B = e.substr(6, 2), F = 1, a = !F, M = T,
                    R = [], n = sr.charAt(7);
                if (o && (o[qo]().indexOf(le) < 0 || o[cr][qo]().indexOf(le) < 0 || !e ? f = Rn($q[n]) : (e = new o(x - 0, D - F, B - 0), I = e.setHours(9), o[cr]() > I ? f = Rn($q[n]) : a = !0)), e && f && M) {
                    for (var l in f) R.push(l);
                    var G, q = 0, Y = f[R[q++]], V = f[R[q++]], y = f[R[q++]], w = f[R[q++]], W = f[R[q++]],
                        C = f[R[q++]], Q = f[R[q++]], m = cs._27O(M);
                    if (m && Q) {
                        G = Y + V + y + w + W + C;
                        var $ = !C || C === tl;
                        if (!$ && C) for (var S, u = 0, b = C.length; b > u; u++) C[u] === en[q] ? S === tl ? $ = !0 : S = c : (S == c ? S = C[u] : S += C[u], u === b - 1 && S === tl && ($ = !0));
                        G && m._31O(G, Q) && $ && (!W || o[cr]() < W) && (a = !0)
                    }
                }
                return a || (wh = Uc), n
            };
            var kr = iq.prototype;
            kr._37O = nk, kr._38O = md;
            var Xg = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", Pj = "=", Mo = 25, Pc = 10,
                Gh = "IBgQAQ==", Rd = Rd || function (R, W) {
                    var X = {}, L = X._7A = {}, g = L._6A = function () {
                        function N() {
                        }

                        return {
                            _80O: function (f) {
                                N.prototype = this;
                                var b = new N;
                                return f && b._5A(f), b.hasOwnProperty("_82O") || (b._82O = function () {
                                    b.$super._82O.apply(this, arguments)
                                }), b._82O.prototype = b, b.$super = this, b
                            }, _3A: function () {
                                var h = this._80O();
                                return h._82O.apply(h, arguments), h
                            }, _82O: function () {
                            }, _5A: function (V) {
                                for (var D in V) V.hasOwnProperty(D) && (this[D] = V[D]);
                                V.hasOwnProperty(qo) && (this.toString = V.toString)
                            }, _88O: function () {
                                return this._82O.prototype._80O(this)
                            }
                        }
                    }(), I = L._39O = g._80O({
                        _82O: function (q, A) {
                            q = this._84O = q || [], this._65O = A != W ? A : 4 * q.length
                        }, toString: function (w) {
                            return (w || n).stringify(this)
                        }, _89O: function (w) {
                            var s = this._84O, X = w._84O, F = this._65O, t = w._65O;
                            if (this._57O(), F % 4) for (var O = 0; t > O; O++) {
                                var p = 255 & X[O >>> 2] >>> 24 - 8 * (O % 4);
                                s[F + O >>> 2] |= p << 24 - 8 * ((F + O) % 4)
                            } else if (X.length > 65535) for (var O = 0; t > O; O += 4) s[F + O >>> 2] = X[O >>> 2]; else s.push.apply(s, X);
                            return this._65O += t, this
                        }, _57O: function () {
                            var s = this._84O, W = this._65O;
                            s[W >>> 2] &= 4294967295 << 32 - 8 * (W % 4), s.length = E(W / 4)
                        }, _88O: function () {
                            var r = g._88O.call(this);
                            return r._84O = this._84O.slice(0), r
                        }, _87O: function (A) {
                            for (var X = [], z = 0; A > z; z += 4) X.push(0 | 4294967296 * U);
                            return new I._82O(X, A)
                        }
                    }), s = X._2A = {}, n = s._69O = {
                        stringify: function (T) {
                            var U, _ = T._84O, g = T._65O, e = [];
                            for (U = 0; g > U; U++) {
                                var O = 255 & _[U >>> 2] >>> 24 - 8 * (U % 4);
                                e.push((O >>> 4).toString(16)), e.push((15 & O).toString(16))
                            }
                            return e.join("")
                        }, _68O: function (i) {
                            for (var l = i.length, X = [], E = 0; l > E; E += 2) X[E >>> 3] |= A(i.substr(E, 2), 16) << 24 - 4 * (E % 8);
                            return new I._82O(X, l / 2)
                        }
                    }, S = s._8A = {
                        stringify: function (C) {
                            var N, P = C._84O, M = C._65O, O = [];
                            for (N = 0; M > N; N++) {
                                var e = 255 & P[N >>> 2] >>> 24 - 8 * (N % 4);
                                O.push(Ph(e))
                            }
                            return O.join("")
                        }, _68O: function (W) {
                            var e, A = W.length, S = [];
                            for (e = 0; A > e; e++) S[e >>> 2] |= (255 & W.charCodeAt(e)) << 24 - 8 * (e % 4);
                            return new I._82O(S, A)
                        }
                    }, k = s._9A = {
                        stringify: function (u) {
                            try {
                                return decodeURIComponent(escape(S.stringify(u)))
                            } catch (W) {
                                throw new Error("")
                            }
                        }, _68O: function (G) {
                            return S._68O(unescape(encodeURIComponent(G)))
                        }
                    }, e = L._32O = g._80O({
                        _1A: function () {
                            this._83O = new I._82O, this._23O = 0
                        }, _33O: function (G) {
                            typeof G == Yr && (G = k._68O(G)), this._83O._89O(G), this._23O += G._65O
                        }, _25O: function (X) {
                            var l = this._83O, D = l._84O, o = l._65O, v = this._79O, S = 4 * v, R = o / S;
                            R = X ? E(R) : y((0 | R) - this._22O, 0);
                            var G = R * v, c = x(4 * G, o);
                            if (G) {
                                for (var w = 0; G > w; w += v) this._20O(D, w);
                                var H = D.splice(0, G);
                                l._65O -= c
                            }
                            return new I._82O(H, c)
                        }, _88O: function () {
                            var _ = g._88O.call(this);
                            return _._83O = this._83O._88O(), _
                        }, _22O: 0
                    });
                    L._66O = e._80O({
                        cfg: g._80O(), _82O: function (i) {
                            this.cfg = this.cfg._80O(i), this._1A()
                        }, _1A: function () {
                            e._1A.call(this), this._34O()
                        }, _81O: function (f) {
                            return this._33O(f), this._25O(), this
                        }, _72O: function (P) {
                            P && this._33O(P);
                            var Z = this._21O();
                            return Z
                        }, _79O: 16, _26O: function ($) {
                            return function (t, p) {
                                return new $._82O(p)._72O(t)
                            }
                        }, _19O: function (A) {
                            return function (F, R) {
                                return new p._71O._82O(A, R)._72O(F)
                            }
                        }
                    });
                    var p = X._67O = {};
                    return X
                }();
            !function () {
                var I = Rd, W = I._7A, v = W._39O, U = W._66O, N = I._67O, f = [], F = [];
                !function () {
                    function t(Y) {
                        for (var v = s(Y), w = 2; v >= w; w++) if (!(Y % w)) return !1;
                        return !0
                    }

                    function G(g) {
                        return 0 | 4294967296 * (g - (0 | g))
                    }

                    for (var D = 2, Y = 0; 64 > Y;) t(D) && (8 > Y && (f[Y] = G(r(D, .5))), F[Y] = G(r(D, 1 / 3)), Y++), D++
                }();
                var T = [], d = N._41O = U._80O({
                    _34O: function () {
                        this._64O = new v._82O(f.slice(0))
                    }, _20O: function (A, s) {
                        for (var I = this._64O._84O, l = I[0], m = I[1], O = I[2], B = I[3], R = I[4], d = I[5], N = I[6], p = I[7], K = 0; 64 > K; K++) {
                            if (16 > K) T[K] = 0 | A[s + K]; else {
                                var j = T[K - 15], w = (j << 25 | j >>> 7) ^ (j << 14 | j >>> 18) ^ j >>> 3,
                                    z = T[K - 2], v = (z << 15 | z >>> 17) ^ (z << 13 | z >>> 19) ^ z >>> 10;
                                T[K] = w + T[K - 7] + v + T[K - 16]
                            }
                            var $ = R & d ^ ~R & N, r = l & m ^ l & O ^ m & O,
                                Y = (l << 30 | l >>> 2) ^ (l << 19 | l >>> 13) ^ (l << 10 | l >>> 22),
                                q = (R << 26 | R >>> 6) ^ (R << 21 | R >>> 11) ^ (R << 7 | R >>> 25),
                                k = p + q + $ + F[K] + T[K], Z = Y + r;
                            p = N, N = d, d = R, R = 0 | B + k, B = O, O = m, m = l, l = 0 | k + Z
                        }
                        I[0] = 0 | I[0] + l, I[1] = 0 | I[1] + m, I[2] = 0 | I[2] + O, I[3] = 0 | I[3] + B, I[4] = 0 | I[4] + R, I[5] = 0 | I[5] + d, I[6] = 0 | I[6] + N, I[7] = 0 | I[7] + p
                    }, _21O: function () {
                        var Y = this._83O, y = Y._84O, U = 8 * this._23O, a = 8 * Y._65O;
                        return y[a >>> 5] |= 128 << 24 - a % 32, y[(a + 64 >>> 9 << 4) + 14] = Q(U / 4294967296), y[(a + 64 >>> 9 << 4) + 15] = U, Y._65O = 4 * y.length, this._25O(), this._64O
                    }, _88O: function () {
                        var L = U._88O.call(this);
                        return L._64O = this._64O._88O(), L
                    }
                });
                I._41O = U._26O(d), I._42O = U._19O(d)
            }();
            var Ub = new RegExp("");
            Ub.compile("[^0-9a-f]", "gi"), iq._28O = -1, iq._29O = -2, kr._31O = Mj, kr._63O = Mj, iq._43O = -2;
            var Eb = new function () {
                var S = this;
                S._5O = function (y, l) {
                    if ("8" != y.substring(l + 2, l + 3)) return 1;
                    var g = A(y.substring(l + 3, l + 4));
                    return 0 == g ? -1 : g > 0 && 10 > g ? g + 1 : -2
                }, S._13O = function (P, B) {
                    var O = S._5O(P, B);
                    return 1 > O ? "" : P.substring(B + 2, B + 2 + 2 * O)
                }, S._12O = function (K, a) {
                    var r = S._13O(K, a);
                    if ("" == r) return -1;
                    var T;
                    return T = A(r.substring(0, 1)) < 8 ? new N(r, 16) : new N(r.substring(2), 16), T._86O()
                }, S._6O = function (a, u) {
                    var l = S._5O(a, u);
                    return 0 > l ? l : u + 2 * (l + 1)
                }, S._11O = function (i, m) {
                    var X = S._6O(i, m), W = S._12O(i, m);
                    return i.substring(X, X + 2 * W)
                }, S._10O = function (C, D) {
                    var _ = S._6O(C, D), G = S._12O(C, D);
                    return _ + 2 * G
                }, S._7O = function (P, M) {
                    var Y = [], W = S._6O(P, M);
                    Y.push(W);
                    for (var a = S._12O(P, M), x = W, J = 0; ;) {
                        var D = S._10O(P, x);
                        if (D == c || D - W >= 2 * a) break;
                        if (J >= 200) break;
                        Y.push(D), x = D, J++
                    }
                    return Y
                }
            };
            if (Eb._90O = Ph(Pc + 24), Eb._91O = G + Ph(Pc * Pc + 8), Wd == c || !Wd) var Wd = {};
            Wd._4O != c && Wd._4O || (Wd._4O = {});
            var ko = Wd._4O;
            Wd._4O.Util = new function () {
                var M = this;
                M._56O = function (G) {
                    var s = new Wd._4O._3O;
                    return s._30O(G)
                }, M._4A = function (O) {
                    var c = new Wd._4O._3O;
                    return c._36O(O)
                }, M._11A = function (g) {
                    var H = new ko._3O;
                    return H._30O(g)
                }
            }, Wd._4O._3O = function () {
                var B = this;
                B._8O = function (L, o) {
                    if ("ss" == L && "cj" == o) {
                        try {
                            B.md = Rd._67O._41O._3A()
                        } catch (Q) {
                            sg(jg)
                        }
                        B._24O = function (n) {
                            B.md._81O(n)
                        }, B._35O = function (A) {
                            var H = Rd._2A._69O._68O(A);
                            B.md._81O(H)
                        }, B._60O = function () {
                            var J = B.md._72O();
                            return J[qo](Rd._2A._69O)
                        }, B._30O = function (F) {
                            return B._24O(F), B._60O()
                        }, B._36O = function (U) {
                            return B._35O(U), B._60O()
                        }
                    }
                }, B._24O = function () {
                    sg(jg)
                }, B._35O = function () {
                    sg(jg)
                }, B._60O = function () {
                    sg(jg)
                }, B._30O = function () {
                    sg(jg)
                }, B._36O = function () {
                    sg(jg)
                }, B._8O("ss", "cj")
            }, xi = function (z) {
                var e = Hf[lf[7]], u = 1, n = !1;
                if (hk.a != Hf[rc]) return hk.a;
                if (hk.forEach(function (K) {
                    u *= K
                }), z > u) {
                    if (e) {
                        e = e.split(Eb._90O);
                        var r = e[3], N = e[7], E = e[11], c = e[15], k = e[19], C = e[23], Y = e[27],
                            A = r + N + E + c + k + C, t = C ? !1 : !0;
                        if (C) {
                            var q = C && C.split(as("firefox")[3]);
                            if (q) for (var s = 0; s < q.length; s++) if (lo.indexOf(q[s]) >= 0) {
                                t = !0;
                                break
                            }
                        }
                        n = Vl()(A, Y) && t && (!k || k > z)
                    }
                    n || (ne.prototype._42 = es)
                } else n = !0;
                return hk.a = n, n
            }, Mo = String.fromCharCode(Mo + 20);
            var yb = function (n) {
                return n = n.replace(Ub, jg), n = n.replace(/[ \n]+/g, jg)
            }, Lj = "30", ik = "06", dk = "02", qj = "03", ml = cp, Gm = /^1f+00/, cs = function () {
                var s;
                return s = {
                    _18O: function (V) {
                        var Q = V, l = Q.replace(/\s+/g, ""), x = Sg(l);
                        return x
                    }, _14O: function (X) {
                        var d = this._18O(X), w = this._15O(d);
                        return w
                    }, _15O: function (Z) {
                        var c = this._17O(Z);
                        if ("2a864886f70d010101" == c._61O) {
                            var H = this._16O(c.key), W = new iq;
                            return W._38O(H.n, H.e), W
                        }
                        sg(jg)
                    }, _16O: function (V) {
                        var b = {};
                        V.substr(0, 2) != Lj && sg(jg);
                        var q = Eb._7O(V, 0);
                        return 2 != q.length && sg(jg), V.substr(q[0], 2) != dk && sg(jg), b.n = Eb._11O(V, q[0]), V.substr(q[1], 2) != dk && sg(jg), b.e = Eb._11O(V, q[1]), b
                    }, _17O: function (q) {
                        var Z = {};
                        Z._40O = c;
                        var r = Eb._7O(q, 0);
                        2 != r.length && sg(jg);
                        var x = r[0];
                        q.substr(x, 2) != Lj && sg(jg);
                        var K = Eb._7O(q, x);
                        return 2 != K.length && sg(jg), q.substr(K[0], 2) != ik && sg(jg), Z._61O = Eb._11O(q, K[0]), q.substr(K[1], 2) == ik ? Z._40O = Eb._11O(q, K[1]) : q.substr(K[1], 2) == Lj && (Z._40O = {}, Z._40O.p = Eb._70O(q, K[1], [0], dk), Z._40O.q = Eb._70O(q, K[1], [1], dk), Z._40O.g = Eb._70O(q, K[1], [2], dk)), q.substr(r[1], 2) != qj && sg(jg), Z.key = Eb._11O(q, r[1]).substr(2), Z
                    }
                }, s._17O ? s : c
            }(), zf = cs._27O = function (M) {
                return cs._14O(M)
            };
            Vl = function () {
                return function (s, q) {
                    if (s && q) {
                        q = yb(q);
                        var u = ml(q, r(2, 4)), W = this;
                        if (!W || !W.n || u._55O() > W.n._55O()) return 0;
                        var L = W._37O(u), M = L[qo](r(2, 4)).replace(Gm, ""), T = ud(M);
                        if (0 == T.length) return !1;
                        var l = T[0], m = T[1], g = function (x) {
                            return Wd._4O.Util._56O(x, l)
                        }, t = g(s);
                        return m == t
                    }
                }.bind(zf(T))
            };
            var Yo, Ln;
            return function () {
                var l = Tm.length - Wl.length;
                if (l > 0) for (var W = 0; l > W; W++) Yo = ko.Util, Ln = yb
            }(), wo = function (v, e) {
                e = Ln(e);
                var l = zf(uf), x = hr.length, n = 2 * x, i = ml(e, r(x, n)), T = l, C = !0;
                if (T) {
                    var o = T[mk[0]];
                    o && i._55O() <= o._55O() && (C = !1)
                }
                if (C) return 0;
                var U = T._37O(i), h = U[qo](r(x, n)).replace(Gm, ""), g = ud(h);
                if (0 == g.length) return !1;
                var f = g[0], Z = g[1], m = Yo._11A(v, f);
                return Z == m
            }, cs
        }(m, v), Nn(F, {
            load: function () {
                var s = {}, T = function (N) {
                    return N ? "c_" + (N.sync ? "1" : "0") + "_" + (N.post ? "1" : "0") + "_" + (N.responseType || "H") + "_" + (N.mimeType || "H") + "_" + (N.data ? JSON.stringify(N.data) : "H") : ""
                };
                return function (P, f, v) {
                    var K, A = s[P], C = T(v);
                    return A && (K = A[C]) ? (K.push(f), void 0) : (s[P] || (A = s[P] = {count: 0}), K = A[C] = [f], A.count++, F.xhrLoad(P, function (I) {
                        delete A[C], A.count--, A.count || delete s[P], K.forEach(function (c) {
                            c(I)
                        })
                    }, v), void 0)
                }
            }(), asyncEach: function (L, v, r) {
                "function" != typeof r && (r = Function.prototype);
                var g = new Array(L.length), Y = 0, h = !1;
                L.forEach(function (J, K) {
                    v(J, function (F, a) {
                        return h ? void 0 : F ? (h = !0, r(null)) : (g[K] = a, Y++, Y === L.length ? r(g) : void 0)
                    })
                })
            }, xhrLoad: function (m, N, u) {
                var T = !1;
                Qd(m) || (T = !0, m = [m]), u = u || {}, m.length;
                var D = u.sync, e = !!u.post, $ = u.data || null, j = null;
                return F.asyncEach(m, function (B, Q) {
                    var I = new XMLHttpRequest;
                    B = F.beforeLoadURL(B), B.data ? Q(null, B.data) : (I.open(e ? "POST" : "GET", encodeURI(B), !D), u.responseType ? I.responseType = u.responseType : I.overrideMimeType && I.overrideMimeType(u.mimeType || "text/plain"), I.onload = function (t) {
                        200 === this.status || 0 === this.status ? Q(null, t.target.response || t.target.responseText) : Q(!0)
                    }, I.onerror = function () {
                        Q(!0)
                    }, I.send($))
                }, function (a) {
                    var C = "function" == typeof N;
                    (C || D) && (j = T && a ? a[0] : a, C && N(j))
                }), D ? j : void 0
            }
        }), Math.sign === $ && (Math.sign = function (H) {
            return 0 > H ? -1 : H > 0 ? 1 : +H
        }), t.Math = {
            generateUUID: function () {
                for (var J = [], R = 0; 256 > R; R++) J[R] = (16 > R ? "0" : "") + R.toString(16).toUpperCase();
                return function () {
                    var q = 0 | 4294967295 * Math.random(), Z = 0 | 4294967295 * Math.random(),
                        K = 0 | 4294967295 * Math.random(), U = 0 | 4294967295 * Math.random();
                    return J[255 & q] + J[255 & q >> 8] + J[255 & q >> 16] + J[255 & q >> 24] + "-" + J[255 & Z] + J[255 & Z >> 8] + "-" + J[64 | 15 & Z >> 16] + J[255 & Z >> 24] + "-" + J[128 | 63 & K] + J[255 & K >> 8] + "-" + J[255 & K >> 16] + J[255 & K >> 24] + J[255 & U] + J[255 & U >> 8] + J[255 & U >> 16] + J[255 & U >> 24]
                }
            }()
        };
        var rr = t.Matrix = t.Math.Matrix2d = function (p, u, T, A, H) {
            var B = this;
            if (p === $) return B.a = 1, B.b = 0, B.c = 0, B.d = 1, B.tx = 0, B.ty = 0, void 0;
            p = p || 0;
            var V = C(p), s = D(p);
            A = A || 1, H = H || 1, B.a = s * A, B.b = V * A, B.c = -V * H, B.d = s * H, B.tx = u || 0, B.ty = T || 0
        }, Op = rr;
        rr.prototype = {}, rr.prototype.constructor = rr, rr.prototype.set = function (Q, J, p, h, $, L) {
            return this.a = Q, this.b = J, this.c = p, this.d = h, this.tx = $, this.ty = L, this
        }, rr.prototype.apply = function (i, k) {
            k = k || new $r;
            var X = i.x, C = i.y;
            return k.x = this.a * X + this.c * C + this.tx, k.y = this.b * X + this.d * C + this.ty, k
        }, rr.prototype.applyInverse = function (t, R) {
            R = R || new $r;
            var f = 1 / (this.a * this.d + this.c * -this.b), m = t.x, r = t.y;
            return R.x = this.d * f * m + -this.c * f * r + (this.ty * this.c - this.tx * this.d) * f, R.y = this.a * f * r + -this.b * f * m + (-this.ty * this.a + this.tx * this.b) * f, R
        }, rr.prototype.translate = function (q, i) {
            return this.tx += q, this.ty += i, this
        }, rr.prototype.scale = function (Q, U) {
            return this.a *= Q, this.d *= U, this.c *= Q, this.b *= U, this.tx *= Q, this.ty *= U, this
        }, rr.prototype.rotate = function (r) {
            var s = Math.cos(r), z = Math.sin(r), G = this.a, l = this.c, j = this.tx;
            return this.a = G * s - this.b * z, this.b = G * z + this.b * s, this.c = l * s - this.d * z, this.d = l * z + this.d * s, this.tx = j * s - this.ty * z, this.ty = j * z + this.ty * s, this
        }, rr.prototype.appendTranslate = function (j, l) {
            return this.tx += this.a * j + this.c * l, this.ty += this.b * j + this.d * l, this
        }, rr.prototype.appendScale = function (Y, B) {
            return this.a *= Y, this.d *= B, this.c *= B, this.b *= Y, this
        }, rr.prototype.appendRotate = function (z) {
            if (!z) return this;
            var t = Math.cos(z), Q = Math.sin(z), F = this.a, I = this.b;
            return this.a = F * t + this.c * Q, this.b = I * t + this.d * Q, this.c = -F * Q + this.c * t, this.d = -I * Q + this.d * t, this
        }, rr.prototype.append = function (Z) {
            var D = this.a, x = this.b, k = this.c, Q = this.d;
            return this.a = Z.a * D + Z.b * k, this.b = Z.a * x + Z.b * Q, this.c = Z.c * D + Z.d * k, this.d = Z.c * x + Z.d * Q, this.tx = Z.tx * D + Z.ty * k + this.tx, this.ty = Z.tx * x + Z.ty * Q + this.ty, this
        }, rr.prototype.setTransform = function (D, j, h, g, d, X, U, x, o) {
            var b, O, w, q, B, R, z, c, e, A;
            return B = Math.sin(U), R = Math.cos(U), z = Math.cos(o), c = Math.sin(o), e = -Math.sin(x), A = Math.cos(x), b = R * d, O = B * d, w = -B * X, q = R * X, this.a = z * b + c * w, this.b = z * O + c * q, this.c = e * b + A * w, this.d = e * O + A * q, this.tx = D + (h * b + g * w), this.ty = j + (h * O + g * q), this
        }, rr.prototype.prepend = function (I) {
            var d = this.tx;
            if (1 !== I.a || 0 !== I.b || 0 !== I.c || 1 !== I.d) {
                var b = this.a, u = this.c;
                this.a = b * I.a + this.b * I.c, this.b = b * I.b + this.b * I.d, this.c = u * I.a + this.d * I.c, this.d = u * I.b + this.d * I.d
            }
            return this.tx = d * I.a + this.ty * I.c + I.tx, this.ty = d * I.b + this.ty * I.d + I.ty, this
        }, rr.prototype.transform = rr.prototype.prepend, rr.prototype.invert = function () {
            var n = this.a, z = this.b, T = this.c, K = this.d, A = this.tx, O = n * K - z * T;
            return this.a = K / O, this.b = -z / O, this.c = -T / O, this.d = n / O, this.tx = (T * this.ty - K * A) / O, this.ty = -(n * this.ty - z * A) / O, this
        }, rr.prototype.identity = function () {
            return this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this
        }, rr.prototype.clone = function () {
            var r = new rr;
            return r.a = this.a, r.b = this.b, r.c = this.c, r.d = this.d, r.tx = this.tx, r.ty = this.ty, r
        }, rr.prototype.copy = function (R) {
            return R.a = this.a, R.b = this.b, R.c = this.c, R.d = this.d, R.tx = this.tx, R.ty = this.ty, R
        }, rr.prototype.tf = function (k, g) {
            1 === arguments.length && (g = k.y, k = k.x);
            var S = this;
            return {x: S.a * k + S.c * g + S.tx, y: S.b * k + S.d * g + S.ty}
        }, rr.prototype.tfi = function (K, q) {
            1 === arguments.length && (q = K.y, K = K.x);
            var U = this, o = 1 / (U.a * U.d + U.c * -U.b);
            return {
                x: U.d * o * K + -U.c * o * q + (U.ty * U.c - U.tx * U.d) * o,
                y: U.a * o * q + -U.b * o * K + (-U.ty * U.a + U.tx * U.b) * o
            }
        }, rr.IDENTITY = new rr, rr.TEMP_MATRIX = new rr;
        var Lo = t.Math.Vector3 = function (O, K, R) {
            "object" == typeof O ? this.copy(O) : this.set(O, K == $ ? O : K, R == $ ? O : R)
        };
        v.assign(Lo.prototype, {
            set: function (n, W, h) {
                return this.x = n, this.y = W, this.z = h, this
            }, setScalar: function (P) {
                return this.x = P, this.y = P, this.z = P, this
            }, setX: function (y) {
                return this.x = y, this
            }, setY: function (m) {
                return this.y = m, this
            }, setZ: function (y) {
                return this.z = y, this
            }, clone: function () {
                return new this.constructor(this.x, this.y, this.z)
            }, copy: function (w) {
                return w.x === $ ? (this.x = w[0], this.y = w[1], this.z = w[2]) : (this.x = w.x, this.y = w.y, this.z = w.z), this
            }, add: function (e) {
                return this.x += e.x, this.y += e.y, this.z += e.z, this
            }, addScalar: function (b) {
                return this.x += b, this.y += b, this.z += b, this
            }, addVectors: function (p, I) {
                return this.x = p.x + I.x, this.y = p.y + I.y, this.z = p.z + I.z, this
            }, addScaledVector: function (A, z) {
                return this.x += A.x * z, this.y += A.y * z, this.z += A.z * z, this
            }, sub: function (J) {
                return this.x -= J.x, this.y -= J.y, this.z -= J.z, this
            }, subScalar: function (Y) {
                return this.x -= Y, this.y -= Y, this.z -= Y, this
            }, subVectors: function (f, o) {
                return this.x = f.x - o.x, this.y = f.y - o.y, this.z = f.z - o.z, this
            }, multiply: function (F) {
                return this.x *= F.x, this.y *= F.y, this.z *= F.z, this
            }, multiplyScalar: function (m) {
                return this.x *= m, this.y *= m, this.z *= m, this
            }, distanceTo: function (y) {
                return Math.sqrt(this.distanceToSquared(y))
            }, distanceToSquared: function (Q) {
                var $ = this.x - Q.x, z = this.y - Q.y, o = this.z - Q.z;
                return $ * $ + z * z + o * o
            }, multiplyVectors: function (L, o) {
                return this.x = L.x * o.x, this.y = L.y * o.y, this.z = L.z * o.z, this
            }, transformDirection: function (B) {
                var q = this.x, L = this.y, j = this.z, m = B.el;
                return this.x = m[0] * q + m[4] * L + m[8] * j, this.y = m[1] * q + m[5] * L + m[9] * j, this.z = m[2] * q + m[6] * L + m[10] * j, this.normalize()
            }, applyQuaternion: function (O) {
                var X = this.x, q = this.y, E = this.z, Y = O._x, L = O._y, Z = O._z, H = O._w,
                    h = H * X + L * E - Z * q, v = H * q + Z * X - Y * E, K = H * E + Y * q - L * X,
                    J = -Y * X - L * q - Z * E;
                return this.x = h * H + J * -Y + v * -Z - K * -L, this.y = v * H + J * -L + K * -Y - h * -Z, this.z = K * H + J * -Z + h * -L - v * -Y, this
            }, applyMatrix4: function (o) {
                var $ = this.x, D = this.y, O = this.z, p = o.el, f = 1 / (p[3] * $ + p[7] * D + p[11] * O + p[15]);
                return this.x = (p[0] * $ + p[4] * D + p[8] * O + p[12]) * f, this.y = (p[1] * $ + p[5] * D + p[9] * O + p[13]) * f, this.z = (p[2] * $ + p[6] * D + p[10] * O + p[14]) * f, this
            }, negate: function () {
                return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
            }, dot: function (n) {
                return this.x * n.x + this.y * n.y + this.z * n.z
            }, lengthSq: function () {
                return this.x * this.x + this.y * this.y + this.z * this.z
            }, length: function () {
                return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
            }, manhattanLength: function () {
                return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
            }, normalize: function () {
                var R = this.length();
                return R ? this.multiplyScalar(1 / R) : this
            }, setLength: function (p) {
                return this.normalize().multiplyScalar(p)
            }, fromArray: function (P, a) {
                return a === $ && (a = 0), this.x = P[a], this.y = P[a + 1], this.z = P[a + 2], this
            }, cross: function (x) {
                return this.crossVectors(this, x)
            }, crossVectors: function (D, B) {
                var L = D.x, l = D.y, m = D.z, d = B.x, _ = B.y, M = B.z;
                return this.x = l * M - m * _, this.y = m * d - L * M, this.z = L * _ - l * d, this
            }
        });
        var $r = t.Math.Vector2 = function (W, A, K) {
            "object" == typeof W && (W.x != $ ? (A = W.y, W = W.x, K = W.e) : (K = W[2], A = W[1], W = W[0])), this.set(W || 0, A || 0, K)
        };
        $r.prototype = {}, $r.prototype.constructor = $r, v.defineProperties($r.prototype, {
            width: {
                get: function () {
                    return this.x
                }, set: function (f) {
                    this.x = f
                }
            }, height: {
                get: function () {
                    return this.y
                }, set: function (f) {
                    this.y = f
                }
            }
        }), $r.prototype.clone = function () {
            return new $r(this.x, this.y, this.e)
        }, $r.prototype.copy = function (b) {
            return this.set(b.x, b.y, b.e), this
        }, $r.prototype.equals = function (T) {
            return T.x === this.x && T.y === this.y
        }, $r.prototype.set = function (Y, l, X) {
            return this.x = Y || 0, this.y = l || (0 !== l ? this.x : 0), X != $ && (this.e = X), this
        }, $r.prototype.setScalar = function (L) {
            return this.x = L, this.y = L, this
        }, $r.prototype.setX = function (i) {
            return this.x = i || 0, this
        }, $r.prototype.setY = function (n) {
            return this.y = n || 0, this
        }, $r.prototype.add = function (q) {
            return this.x += q.x, this.y += q.y, this
        }, $r.prototype.addVectors = function (L, I) {
            return this.x = L.x + I.x, this.y = L.y + I.y, this
        }, $r.prototype.addScalar = function (T) {
            return this.x += T, this.y += T, this
        }, $r.prototype.addScaledVector = function (J, z) {
            return this.x += J.x * z, this.y += J.y * z, this
        }, $r.prototype.sub = function (F) {
            return this.x -= F.x, this.y -= F.y, this
        }, $r.prototype.subScalar = function (R) {
            return this.x -= R, this.y -= R, this
        }, $r.prototype.subVectors = function (W, D) {
            return this.x = W.x - D.x, this.y = W.y - D.y, this
        }, $r.prototype.multiply = function (o) {
            return this.x *= o.x, this.y *= o.y, this
        }, $r.prototype.multiplyScalar = function (B) {
            return this.x *= B, this.y *= B, this
        }, $r.prototype.divide = function (u) {
            return this.x /= u.x, this.y /= u.y, this
        }, $r.prototype.divideScalar = function (h) {
            return this.multiplyScalar(1 / h)
        }, $r.prototype.min = function (n) {
            return this.x = Math.min(this.x, n.x), this.y = Math.min(this.y, n.y), this
        }, $r.prototype.max = function (s) {
            return this.x = Math.max(this.x, s.x), this.y = Math.max(this.y, s.y), this
        }, $r.prototype.fromArray = function (v, n) {
            return n === $ && (n = 0), this.x = v[n], this.y = v[n + 1], this
        }, $r.prototype.clamp = function (x, E) {
            return this.x = Math.max(x.x, Math.min(E.x, this.x)), this.y = Math.max(x.y, Math.min(E.y, this.y)), this
        }, $r.prototype.clampScalar = function () {
            var u, j;
            return function (I, w) {
                return u === $ && (u = new $r, j = new $r), u.set(I, I), j.set(w, w), this.clamp(u, j)
            }
        }(), $r.prototype.clampLength = function (W, j) {
            var s = this.length();
            return this.multiplyScalar(Math.max(W, Math.min(j, s)) / s)
        }, $r.prototype.dot = function (V) {
            return this.x * V.x + this.y * V.y
        }, $r.prototype.lengthSq = function () {
            return this.x * this.x + this.y * this.y
        }, $r.prototype.length = function () {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        }, $r.prototype.normalize = function () {
            return this.divideScalar(this.length())
        }, $r.prototype.angle = function () {
            var j = Math.atan2(this.y, this.x);
            return 0 > j && (j += 2 * Math.PI), j
        }, $r.prototype.distanceTo = function (P) {
            return Math.sqrt(this.distanceToSquared(P))
        }, $r.prototype.distanceToSquared = function (T) {
            var X = this.x - T.x, Z = this.y - T.y;
            return X * X + Z * Z
        }, $r.prototype.isNearEnough = function (U) {
            return this.distanceToSquared(U) < 1e-8
        }, $r.prototype.setLength = function (f) {
            var B = this.length();
            return B ? this.multiplyScalar(f / B) : this
        }, $r.prototype.lerp = function (p, y) {
            return this.x += (p.x - this.x) * y, this.y += (p.y - this.y) * y, this
        }, $r.prototype.lerpVectors = function (S, o, n) {
            return this.subVectors(o, S).multiplyScalar(n).add(S)
        }, $r.prototype.rotateAround = function (G, q) {
            var J = Math.cos(q), $ = Math.sin(q), e = this.x - G.x, T = this.y - G.y;
            return this.x = e * J - T * $ + G.x, this.y = e * $ + T * J + G.y, this
        };
        var Nq = t.Math.Ray = function (L, B) {
            this.origin = L !== $ ? L.clone() : new Lo, this.direction = B !== $ ? B.clone() : new Lo
        };
        v.assign(Nq.prototype, {
            set: function (U, o) {
                return this.origin.copy(U), this.direction.copy(o), this
            }, clone: function () {
                return (new this.constructor).copy(this)
            }, copy: function (Y) {
                return this.origin.copy(Y.origin), this.direction.copy(Y.direction), this
            }, at: function (M, e) {
                var B = e || new Lo;
                return B.copy(this.direction).multiplyScalar(M).add(this.origin)
            }, lookAt: function (z) {
                return this.direction.copy(z).sub(this.origin).normalize(), this
            }, applyMatrix4: function (p) {
                return this.origin.applyMatrix4(p), this.direction.transformDirection(p), this
            }, intersectTriangle: function () {
                var t = new Lo, A = new Lo, n = new Lo, Z = new Lo;
                return function (G, K, T, z, y) {
                    A.subVectors(K, G), n.subVectors(T, G), Z.crossVectors(A, n);
                    var Y, f = this.direction.dot(Z);
                    if (f > 0) {
                        if (z) return null;
                        Y = 1
                    } else {
                        if (!(0 > f)) return null;
                        Y = -1, f = -f
                    }
                    t.subVectors(this.origin, G);
                    var x = Y * this.direction.dot(n.crossVectors(t, n));
                    if (0 > x) return null;
                    var _ = Y * this.direction.dot(A.cross(t));
                    if (0 > _ || x + _ > f) return null;
                    var C = -Y * t.dot(Z);
                    return 0 > C ? null : this.at(C / f, y)
                }
            }()
        });
        var Xi = t.Math.Matrix4 = function () {
            this.el = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]
        };
        v.assign(Xi.prototype, {
            set: function (L, r, p, x, T, F, B, b, E, G, c, S, V, h, Y, Z) {
                var t = this.el;
                return t[0] = L, t[4] = r, t[8] = p, t[12] = x, t[1] = T, t[5] = F, t[9] = B, t[13] = b, t[2] = E, t[6] = G, t[10] = c, t[14] = S, t[3] = V, t[7] = h, t[11] = Y, t[15] = Z, this
            }, clone: function () {
                return (new Xi).fromArray(this.el)
            }, fromArray: function (L, V) {
                V === $ && (V = 0);
                for (var f = this.el, K = 0; 16 > K; K++) f[K] = L[K + V];
                return this
            }, makeRotationFromQuaternion: function (V) {
                var o = this.el, f = V._x, I = V._y, e = V._z, Z = V._w, K = f + f, d = I + I, i = e + e, r = f * K,
                    F = f * d, R = f * i, $ = I * d, t = I * i, Q = e * i, w = Z * K, C = Z * d, l = Z * i;
                return o[0] = 1 - ($ + Q), o[4] = F - l, o[8] = R + C, o[1] = F + l, o[5] = 1 - (r + Q), o[9] = t - w, o[2] = R - C, o[6] = t + w, o[10] = 1 - (r + $), o[3] = 0, o[7] = 0, o[11] = 0, o[12] = 0, o[13] = 0, o[14] = 0, o[15] = 1, this
            }, identity: function () {
                return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
            }, getInverse: function (S) {
                var R = this.el, G = S.el, I = G[0], x = G[1], n = G[2], m = G[3], Q = G[4], e = G[5], B = G[6],
                    l = G[7], k = G[8], u = G[9], V = G[10], g = G[11], O = G[12], Y = G[13], F = G[14], d = G[15],
                    z = u * F * l - Y * V * l + Y * B * g - e * F * g - u * B * d + e * V * d,
                    X = O * V * l - k * F * l - O * B * g + Q * F * g + k * B * d - Q * V * d,
                    r = k * Y * l - O * u * l + O * e * g - Q * Y * g - k * e * d + Q * u * d,
                    v = O * u * B - k * Y * B - O * e * V + Q * Y * V + k * e * F - Q * u * F,
                    M = I * z + x * X + n * r + m * v;
                if (0 === M) return this.identity();
                var U = 1 / M;
                return R[0] = z * U, R[1] = (Y * V * m - u * F * m - Y * n * g + x * F * g + u * n * d - x * V * d) * U, R[2] = (e * F * m - Y * B * m + Y * n * l - x * F * l - e * n * d + x * B * d) * U, R[3] = (u * B * m - e * V * m - u * n * l + x * V * l + e * n * g - x * B * g) * U, R[4] = X * U, R[5] = (k * F * m - O * V * m + O * n * g - I * F * g - k * n * d + I * V * d) * U, R[6] = (O * B * m - Q * F * m - O * n * l + I * F * l + Q * n * d - I * B * d) * U, R[7] = (Q * V * m - k * B * m + k * n * l - I * V * l - Q * n * g + I * B * g) * U, R[8] = r * U, R[9] = (O * u * m - k * Y * m - O * x * g + I * Y * g + k * x * d - I * u * d) * U, R[10] = (Q * Y * m - O * e * m + O * x * l - I * Y * l - Q * x * d + I * e * d) * U, R[11] = (k * e * m - Q * u * m - k * x * l + I * u * l + Q * x * g - I * e * g) * U, R[12] = v * U, R[13] = (k * Y * n - O * u * n + O * x * V - I * Y * V - k * x * F + I * u * F) * U, R[14] = (O * e * n - Q * Y * n - O * x * B + I * Y * B + Q * x * F - I * e * F) * U, R[15] = (Q * u * n - k * e * n + k * x * B - I * u * B - Q * x * V + I * e * V) * U, this
            }
        });
        var sc = t.Math.Quaternion = function (L, O, K, r) {
            this.set(L, O, K, r)
        };
        v.assign(sc.prototype, {
            set: function (j, u, w, i) {
                var P = this;
                return P._x = j || 0, P._y = u || 0, P._z = w || 0, P._w = i !== $ ? i : 1, P
            }, clone: function () {
                return new this.constructor(this._x, this._y, this._z, this._w)
            }, copy: function (T) {
                var n = this;
                return n._x = T._x, n._y = T._y, n._z = T._z, n._w = T._w, n
            }, fromArray: function (q, b) {
                b === $ && (b = 0);
                var Y = this;
                return Y._x = q[b], Y._y = q[b + 1], Y._z = q[b + 2], Y._w = q[b + 3], this
            }, setFromEuler: function (u, i) {
                var k = u[0], f = u[1], Z = u[2], T = Math.cos, t = Math.sin, c = T(k / 2), b = T(f / 2), V = T(Z / 2),
                    O = t(k / 2), q = t(f / 2), D = t(Z / 2);
                return i = i || "xyz", i = i[2] + i[1] + i[0], i = i.toUpperCase(), "XYZ" === i ? (this._x = O * b * V + c * q * D, this._y = c * q * V - O * b * D, this._z = c * b * D + O * q * V, this._w = c * b * V - O * q * D) : "YXZ" === i ? (this._x = O * b * V + c * q * D, this._y = c * q * V - O * b * D, this._z = c * b * D - O * q * V, this._w = c * b * V + O * q * D) : "ZXY" === i ? (this._x = O * b * V - c * q * D, this._y = c * q * V + O * b * D, this._z = c * b * D + O * q * V, this._w = c * b * V - O * q * D) : "ZYX" === i ? (this._x = O * b * V - c * q * D, this._y = c * q * V + O * b * D, this._z = c * b * D - O * q * V, this._w = c * b * V + O * q * D) : "YZX" === i ? (this._x = O * b * V + c * q * D, this._y = c * q * V + O * b * D, this._z = c * b * D - O * q * V, this._w = c * b * V - O * q * D) : "XZY" === i && (this._x = O * b * V - c * q * D, this._y = c * q * V - O * b * D, this._z = c * b * D + O * q * V, this._w = c * b * V + O * q * D), this
            }
        });
        var zr = t.Math.Triangle = function (z, Q, U) {
            this.a = z !== $ ? z : new Lo, this.b = Q !== $ ? Q : new Lo, this.c = U !== $ ? U : new Lo
        };
        v.assign(zr, {
            barycoordFromPoint: function () {
                var V = new Lo, y = new Lo, p = new Lo;
                return function (T, I, g, v, c) {
                    V.subVectors(v, I), y.subVectors(g, I), p.subVectors(T, I);
                    var e = V.dot(V), R = V.dot(y), J = V.dot(p), h = y.dot(y), b = y.dot(p), X = e * h - R * R,
                        x = c || new Lo;
                    if (0 === X) return x.set(-2, -1, -1);
                    var Z = 1 / X, z = (h * J - R * b) * Z, S = (e * b - R * J) * Z;
                    return x.set(1 - z - S, S, z)
                }
            }()
        });
        var vp = t.List = function () {
            this._as = [];
            var J, m, O = arguments.length;
            if (1 === O) {
                var P = arguments[0];
                if ($b(P) && (P = P._as), Qd(P)) for (m = P.length, J = 0; m > J; J++) this._as.push(P[J]); else P != c && this._as.push(P)
            } else if (O > 1) for (J = 0; O > J; J++) this._as.push(arguments[J])
        };
        ld("List", v, {
            forEach: function (o, H) {
                this.each(o, H)
            }, push: function () {
                for (var J = 0; J < arguments.length; J++) this.add(arguments[J])
            }, pop: function () {
                return this._as.pop()
            }, shift: function () {
                return this._as.shift()
            }, unshift: function () {
                return this._as.unshift.apply(this._as, arguments)
            }, size: function () {
                return this._as.length
            }, isEmpty: function () {
                return 0 === this._as.length
            }, add: function (X, U) {
                return U === $ ? this._as.push(X) : this._as.splice(U, 0, X)
            }, addAll: function (N) {
                $b(N) && (N = N._as), Qd(N) ? Ml(this._as, N) : this._as.push(N)
            }, get: function (h) {
                return this._as[h]
            }, slice: function (q, u) {
                return new vp(this._as.slice(q, u))
            }, remove: function (L) {
                var D = this._as.indexOf(L);
                return D >= 0 && D < this._as.length && this.removeAt(D), D
            }, removeAt: function (H) {
                return this._as.splice(H, 1)[0]
            }, set: function (E, O) {
                return this._as[E] = O
            }, clear: function () {
                return this._as.splice(0, this._as.length)
            }, contains: function (Q) {
                return this._as.indexOf(Q) >= 0
            }, indexOf: function (y) {
                return this._as.indexOf(y)
            }, each: function (B, O) {
                for (var _ = 0, L = this._as.length; L > _; _++) {
                    var G = this._as[_];
                    O ? B.call(O, G, _, this) : B(G, _, this)
                }
            }, reverseEach: function (K, g) {
                for (var z = this._as.length - 1; z >= 0; z--) {
                    var H = this._as[z];
                    g ? K.call(g, H) : K(H)
                }
            }, toArray: function (t, B) {
                if (t) {
                    for (var k, _ = [], m = 0, a = this._as.length; a > m; m++) k = this._as[m], B ? t.call(B, k) && _.push(k) : t(k) && _.push(k);
                    return _
                }
                return this._as.concat()
            }, toList: function (K, P) {
                if (K) {
                    for (var B, D = new vp, d = 0, f = this._as.length; f > d; d++) B = this._as[d], P ? K.call(P, B) && D.add(B) : K(B) && D.add(B);
                    return D
                }
                return new vp(this)
            }, reverse: function () {
                this._as.reverse()
            }, sort: function (x) {
                return this._as.sort(x ? x : Db), this
            }, toString: function () {
                return this._as.toString()
            }
        }), v.defineProperties(vp.prototype, {
            length: {
                get: function () {
                    return this._as.length
                }, set: function (i) {
                    this._as.length = i
                }
            }
        });
        var Ah = new vp;
        Nn(Ah, {
            size: function () {
                return 0
            }, indexOf: function () {
                return -1
            }, contains: function () {
                return !1
            }, isEmpty: function () {
                return !0
            }, sort: ds, each: ds, reverseEach: ds, toArray: function () {
                return []
            }, toList: function () {
                return new vp
            }, add: ze, addAll: ze, set: ze, remove: ze, removeAt: ze, clear: ze
        });
        var tc = t.Notifier = function () {
            this._f = 0
        };
        ld("Notifier", v, {
            contains: function (B, Y) {
                if (this._ls) for (var U, Z = 0, W = this._ls.size(); W > Z; Z++) if (U = this._ls.get(Z), B === U.l && Y === U.s) return !0;
                return !1
            }, add: function (S, T, n) {
                var J = this, h = {l: S, s: T, a: n};
                J._ls || (J._ls = new vp), J._f ? (J._as || (J._as = new vp), J._as.add(h)) : h.a ? J._ls.add(h, 0) : J._ls.add(h)
            }, remove: function (E, T) {
                var Q = this;
                Q._ls && (Q._f ? (Q._rs || (Q._rs = new vp), Q._rs.add({l: E, s: T})) : Q._remove(E, T))
            }, _remove: function (E, g) {
                for (var y, q = this._ls, k = 0, F = q.size(); F > k; k++) if (y = q.get(k), y.l === E && y.s === g) return q.removeAt(k), void 0
            }, fire: function (_) {
                var t = this, M = t._ls;
                if (t._b = 1e4, M) {
                    ++t._f;
                    try {
                        for (var m, C = 0, X = M.size(); X > C; C++) m = M.get(C), m.s ? m.l.call(m.s, _) : m.l(_)
                    } finally {
                        if (--t._f) return;
                        if (t._rs) {
                            for (X = t._rs.size(), C = 0; X > C; C++) m = t._rs.get(C), t._remove(m.l, m.s);
                            delete t._rs
                        }
                        if (t._as) {
                            for (X = t._as.size(), C = 0; X > C; C++) m = t._as.get(C), m.a ? M.add(m, 0) : M.add(m);
                            delete t._as
                        }
                    }
                }
            }
        });
        var Zf = t.Data = function () {
            this._id = Ck()
        };
        ld("Data", v, {
            ms_ac: ["tag", "name", "displayName", "icon", "toolTip", "attrObject", "layer", "adjustChildrenToTop", "dataBindings"],
            ms_dm: 1,
            ms_attr: 1,
            _icon: c,
            _parent: c,
            _children: Ah,
            _childMap: c,
            _styleMap: c,
            _layer: "0",
            _adjustChildrenToTop: !1,
            getUIClass: function () {
                return c
            },
            _22Q: function () {
                return c
            },
            s: function (Q, I) {
                var a = this;
                if (2 === arguments.length) a.setStyle(Q, I); else {
                    if (!Pe(Q)) return a.getStyle(Q);
                    for (var E in Q) a.setStyle(E, Q[E])
                }
                return a
            },
            fp: function (n, $, B, C, F) {
                return this.firePropertyChange(n, $, B, C, F)
            },
            firePropertyChange: function (L, Q, W, s, T) {
                if (s) {
                    if (s(Q, W)) return !1
                } else if (Q === W) return !1;
                var p = this, G = T || {};
                return G.property = L, G.oldValue = Q, G.newValue = W, G.data = p, p._dataModel && p._dataModel.handleDataPropertyChange(G), p.onPropertyChanged(G), !0
            },
            onPropertyChanged: function (_) {
                var n = this, I = n._parent, z = _.property;
                if (kk(I)) {
                    var W = n.s(Jd), P = "s:ingroup" === z;
                    (W && Xq[z] || z === P) && I._81I(), (W || P) && I.fp("childChange", !0, !1)
                }
                _e(I) && Xq[z] && I.updateFromChildren()
            },
            _21I: function (Q) {
                var t = this;
                if (Q && t._dataModel) throw"Remove data from dataModel before adding";
                t._dataModel = Q
            },
            removeFromDataModel: function () {
                this._dataModel ? this._dataModel.remove(this) : this.setParent(null)
            },
            clearChildrenFromDataModel: function () {
                for (var X = 0, T = this._children.toArray(), h = T.length; h > X; X++) T[X].removeFromDataModel()
            },
            getId: function () {
                return this._id
            },
            setId: function (y) {
                this._id = y
            },
            getChildren: function () {
                return this._children
            },
            size: function () {
                return this._children.size()
            },
            toChildren: function (n, g) {
                return this._children.toList(n, g)
            },
            eachChild: function (P, S) {
                this._children.each(P, S)
            },
            addChild: function (A, X) {
                var n = this;
                A !== n && (n._children === Ah && (n._children = new vp, n._childMap = {}), X >= 0 || (X = n._children.size()), n._childMap[A._id] || n.isDescendantOf(A) || (A._parent && A._parent.removeChild(A), (0 > X || X > n._children.size()) && (X = n._children.size()), n._children.add(A, X), n._childMap[A._id] = A, A.setParent(n), n.onChildAdded(A, X), n.fp(Zm, c, A)))
            },
            onChildAdded: function () {
            },
            removeChild: function (W) {
                var j = this;
                if (j._childMap && j._childMap[W._id]) {
                    var Q = j._children.remove(W);
                    delete j._childMap[W._id], j.fp(Zm, W, c), W.setParent(c, Q), j.onChildRemoved(W, Q)
                }
            },
            onChildRemoved: function () {
            },
            getChildAt: function (U) {
                return this._children.get(U)
            },
            clearChildren: function () {
                var m = this;
                if (!m._children.isEmpty()) for (var P = 0, U = m._children.toArray(), k = U.length; k > P; P++) m.removeChild(U[P])
            },
            getParent: function () {
                return this._parent
            },
            setParent: function (K, l) {
                var V = this;
                if (!(V._73I || V._parent === K || V === K || K && K.isDescendantOf(V))) {
                    var C, D = V._parent;
                    V._parent = K, V._73I = 1, D ? (l == c && (l = D.getChildren().indexOf(V)), D.removeChild(V)) : V._dataModel && l == c && (l = V._dataModel.getRoots().indexOf(V)), K && (K.addChild(V), C = K.getChildren().indexOf(V)), delete V._73I, V.fp("parent", D, K, $, {
                        oldIndex: l,
                        newIndex: C
                    }), V.onParentChanged(D, K)
                }
            },
            onParentChanged: function () {
            },
            hasChildren: function () {
                return this._children.size() > 0
            },
            isEmpty: function () {
                return this._children.isEmpty()
            },
            isRelatedTo: function (f) {
                return f ? this.isDescendantOf(f) || f.isDescendantOf(this) : !1
            },
            isParentOf: function (l) {
                return l && this._childMap ? !!this._childMap[l._id] : !1
            },
            isDescendantOf: function (k) {
                if (!k || k.isEmpty()) return !1;
                for (var i = this._parent; i;) {
                    if (k === i) return !0;
                    i = i._parent
                }
                return !1
            },
            getStyleMap: function () {
                return this._styleMap
            },
            getStyle: function (w, t) {
                t === $ && (t = 1);
                var q = this._styleMap ? this._styleMap[w] : $;
                return q === $ && t ? j[w] : q
            },
            setStyle: function (r, Y) {
                var W = this;
                W._styleMap || (W._styleMap = {});
                var b = W._styleMap[r];
                Y === $ ? delete W._styleMap[r] : W._styleMap[r] = Y, W.fp("s:" + r, b, Y) && W.onStyleChanged(r, b, Y)
            },
            onStyleChanged: function () {
            },
            iv: function (_) {
                this.invalidate(_)
            },
            invalidate: function (e) {
                this.fp(e || "*", !1, !0)
            },
            toString: function () {
                var n = this;
                return n._displayName || n._name || n._tag || n._id
            },
            toLabel: function () {
                return this._displayName || this._name
            },
            addStyleIcon: function (j, w) {
                var z = this, l = z.s(Dk);
                l || z.s(Dk, l = {}), w ? l[j] = w : delete l[j], z.fp(Dk, c, l)
            },
            removeStyleIcon: function (d) {
                var f = this.s(Dk);
                if (f) {
                    var H = f[d];
                    delete f[d], this.fp(Dk, c, f)
                }
                return H
            },
            getSerializableProperties: function () {
                return {
                    name: 1,
                    displayName: 1,
                    icon: 1,
                    toolTip: 1,
                    parent: 1,
                    layer: 1,
                    tag: 1,
                    adjustChildrenToTop: 1,
                    dataBindings: 1
                }
            },
            getSerializableStyles: function () {
                var n, f = {};
                for (n in this._styleMap) f[n] = 1;
                return f
            }
        });
        var ek = t.DataModel = function () {
            var O = this;
            O._datas = new vp, O._dataMap = {}, O._roots = new vp, O._rootMap = {}, O._78O = {}, O._36I = new tc, O._35I = new tc, O._selectionModel = new Gk(O);
            var W = O._29Q = [], Z = O._scheduleCallback = function () {
                for (var V = Date.now(), n = 0; n < W.length; n++) {
                    var X = W[n];
                    X.enabled && V - X.lastTime > X.interval && (X.beforeAction && X.beforeAction(), O.each(function (k) {
                        X.action(k)
                    }), X.afterAction && X.afterAction(), X.lastTime = V)
                }
                W.length && (O._30Q = m.requestAnimationFrame(Z))
            }
        };
        ld("DataModel", v, {
            ms_fire: 1,
            ms_attr: 1,
            ms_ac: ["layers", "name", "autoAdjustIndex", "hierarchicalRendering", "background", "init"],
            _name: $,
            _autoAdjustIndex: !0,
            _hierarchicalRendering: !1,
            _background: $,
            _init: $,
            sm: function () {
                return this.getSelectionModel()
            },
            mm: function (E, N, q) {
                this.addDataModelChangeListener(E, N, q)
            },
            umm: function (w, s) {
                this.removeDataModelChangeListener(w, s)
            },
            md: function (V, i, h) {
                this.addDataPropertyChangeListener(V, i, h)
            },
            umd: function (S, W) {
                this.removeDataPropertyChangeListener(S, W)
            },
            mh: function (A, t, w) {
                this.addHierarchyChangeListener(A, t, w)
            },
            umh: function (l, m) {
                this.removeHierarchyChangeListener(l, m)
            },
            getAttrObject: function () {
                return this._attrObject
            },
            setAttrObject: function (M) {
                return this._attrObject = M
            },
            getSelectionModel: function () {
                return this._selectionModel
            },
            size: function () {
                return this._datas.size()
            },
            isEmpty: function () {
                return this._datas.isEmpty()
            },
            getRoots: function () {
                return this._roots
            },
            getDatas: function () {
                return this._datas
            },
            getDataById: function (c) {
                return this._dataMap[c]
            },
            removeDataById: function (z) {
                this.remove(this.getDataById(z))
            },
            toDatas: function (o, a) {
                return this._datas.toList(o, a)
            },
            each: function (H, I) {
                this._datas.each(H, I)
            },
            getDataByTag: function (z) {
                return this._78O[z]
            },
            getTagMap: function () {
                return this._78O
            },
            removeDataByTag: function (Q) {
                this.remove(this.getDataByTag(Q))
            },
            add: function (U, T, r) {
                var O = this, X = U._id, q = U._tag, W = O._roots;
                if (O._dataMap[X]) throw"'" + X + "' already exists";
                q != c && (O._78O[q] = U), O._dataMap[X] = U, r >= 0 ? O._datas.add(U, r) : O._datas.add(U), U._parent || (O._rootMap[X] = U, T >= 0 ? W.add(U, T) : W.add(U)), U._21I(O), O.onAdded(U), O._36I.fire({
                    kind: "add",
                    data: U,
                    rootsIndex: T,
                    datasIndex: r
                })
            },
            onAdded: function () {
            },
            remove: function (v, q) {
                if (v) {
                    var U = this, h = v._id, a = q && q.keepStructure, f = q && q.keepChildren, l = v.getTag();
                    if (v._dataModel === U) {
                        this.beginTransaction(), a ? U._removingData || (U._removingData = v) : U.prepareRemove(v), f || v.toChildren().each(function (l) {
                            U.remove(l, q)
                        }, U), a ? U._removingData === v && (v._parent && v._parent.removeChild(v), delete U._removingData) : v._parent && v._parent.removeChild(v);
                        var X = U._datas.remove(v);
                        delete U._dataMap[h], l != c && delete U._78O[l];
                        var g;
                        U._rootMap[h] && (delete U._rootMap[h], g = U._roots.remove(v)), v._21I(c), U.onRemoved(v), U._36I.fire({
                            kind: de,
                            data: v,
                            rootsIndex: g,
                            datasIndex: X
                        }), this.endTransaction()
                    }
                }
            },
            onRemoved: function () {
            },
            prepareRemove: function () {
            },
            clear: function () {
                var E = this;
                if (E._datas.size()) {
                    var u = E._historyManager ? this.toJSON() : $;
                    E._datas.toArray().forEach(function (N) {
                        N._21I(c)
                    }), E._datas.clear(), E._dataMap = {}, E._roots.clear(), E._rootMap = {}, E._78O = {}, E._36I.fire({
                        kind: Lg,
                        json: u
                    })
                }
            },
            contains: function (x) {
                return x && x._dataModel === this
            },
            handleDataPropertyChange: function (b) {
                var m = this, u = b.data, X = b.property;
                if ("parent" === X) {
                    var h = u._id, B = m._rootMap, N = m._roots;
                    u._parent ? B[h] && (delete B[h], N.remove(u)) : B[h] || (B[h] = u, N.add(u))
                } else if ("tag" === X) {
                    var H = b.oldValue, z = b.newValue, j = m._78O;
                    H != c && delete j[H], z != c && (j[z] = u)
                }
                this.onDataPropertyChanged(u, b), this._35I.fire(b)
            },
            onDataPropertyChanged: function () {
            },
            addDataModelChangeListener: function (v, G, u) {
                this._36I.add(v, G, u)
            },
            removeDataModelChangeListener: function (p, l) {
                this._36I.remove(p, l)
            },
            addDataPropertyChangeListener: function (E, D, b) {
                this._35I.add(E, D, b)
            },
            removeDataPropertyChangeListener: function (q, b) {
                this._35I.remove(q, b)
            },
            _38I: function (u, j, B) {
                this._37I && this._37I.fire({data: u, oldIndex: j, newIndex: B})
            },
            addHierarchyChangeListener: function (N, K, z) {
                this._37I || (this._37I = new tc), this._37I.add(N, K, z)
            },
            removeHierarchyChangeListener: function (q, L) {
                this._37I.remove(q, L)
            },
            getSiblings: function (M) {
                var A = M._parent;
                return A ? A._children : this._roots
            },
            eachByHierarchical: function (i, g, $) {
                if (g) return this._eachByHierarchical(i, g, $);
                for (var o = 0, q = this._roots, z = q.size(); z > o; o++) if (this._eachByHierarchical(i, q.get(o), $) === !1) return !1;
                return !0
            },
            _eachByHierarchical: function (m, F, I) {
                if (I) {
                    if (m.call(I, F) === !1) return !1
                } else if (m(F) === !1) return !1;
                for (var b = F.size(), q = 0; b > q; q++) if (this._eachByHierarchical(m, F.getChildAt(q), I) === !1) return !1;
                return !0
            },
            reverseEachByHierarchical: function (y, e, V) {
                if (e) return this._reverseEachByHierarchical(y, e, V);
                for (var O = this._roots, M = O.size(), J = M - 1; J >= 0; J--) if (this._reverseEachByHierarchical(y, O.get(J), V) === !1) return !1;
                return !0
            },
            _reverseEachByHierarchical: function (I, o, j) {
                for (var _ = o.size(), d = _ - 1; d >= 0; d--) if (this._reverseEachByHierarchical(I, o.getChildAt(d), j) === !1) return !1;
                if (j) {
                    if (I.call(j, o) === !1) return !1
                } else if (I(o) === !1) return !1;
                return !0
            },
            eachByDepthFirst: function (t, h, c) {
                if (h) return this._11I(t, h, c);
                for (var p = 0, Z = this._roots, n = Z.size(); n > p; p++) if (this._11I(t, Z.get(p), c) === !1) return !1;
                return !0
            },
            _11I: function (E, b, t) {
                for (var w = b.size(), v = 0; w > v; v++) if (this._11I(E, b.getChildAt(v), t) === !1) return !1;
                if (t) {
                    if (E.call(t, b) === !1) return !1
                } else if (E(b) === !1) return !1;
                return !0
            },
            eachByBreadthFirst: function (c, j, S) {
                var A = new vp;
                for (j ? A.add(j) : this._roots.each(A.add, A); A.size() > 0;) if (j = A.removeAt(0), j.eachChild(A.add, A), S) {
                    if (c.call(S, j) === !1) return !1
                } else if (c(j) === !1) return !1;
                return !0
            },
            moveTo: function (n, c) {
                var B = this.getSiblings(n), m = B.indexOf(n);
                m === c || 0 > m || c >= 0 && c <= B.size() && (B.remove(n), c > B.size() && c--, B.add(n, c), this._38I(n, m, c))
            },
            moveUp: function (i) {
                this.moveTo(i, this.getSiblings(i).indexOf(i) - 1)
            },
            moveDown: function (G) {
                this.moveTo(G, this.getSiblings(G).indexOf(G) + 1)
            },
            moveToTop: function (U) {
                this.moveTo(U, 0)
            },
            moveToBottom: function (g) {
                this.moveTo(g, this.getSiblings(g).size())
            },
            moveSelectionUp: function (z) {
                this.beginTransaction(), z || (z = this.sm());
                var C = new vp;
                Dg(z, C, this._roots), C.each(this.moveUp, this), this.endTransaction()
            },
            moveSelectionDown: function (E) {
                this.beginTransaction(), E || (E = this.sm());
                var s = new vp;
                Xc(E, s, this._roots), s.each(this.moveDown, this), this.endTransaction()
            },
            moveSelectionToTop: function (l) {
                this.beginTransaction(), l || (l = this.sm());
                var F = new vp;
                ej(l, F, this._roots), F.each(this.moveToTop, this), this.endTransaction()
            },
            moveSelectionToBottom: function (w) {
                this.beginTransaction(), w || (w = this.sm());
                var F = new vp;
                bi(w, F, this._roots), F.each(this.moveToBottom, this), this.endTransaction()
            },
            moveToIndex: function ($, j, C) {
                var W = this.getDatas();
                null == C && (C = W.indexOf($)), C === j || 0 > C || j >= 0 && j <= W.size() && (W.remove($), j > W.size() && j--, W.add($, j), this._76I($, C, j))
            },
            bringForward: function (u) {
                this.moveToIndex(u, this.getDatas().indexOf(u) + 1)
            },
            bringToFront: function (Q) {
                this.moveToIndex(Q, this.size())
            },
            sendBackward: function (j) {
                this.moveToIndex(j, this.getDatas().indexOf(j) - 1)
            },
            sendToBack: function (S) {
                this.moveToIndex(S, 0)
            },
            bringSelectionForward: function (V) {
                this.beginTransaction(), V || (V = this.sm());
                for (var i = new vp, v = this.getDatas(), x = !1, b = 0; b < v.size(); b++) {
                    var _ = v.get(v.size() - 1 - b);
                    V.contains(_) ? x && i.add(_) : x = !0
                }
                i.each(this.bringForward, this), this.endTransaction()
            },
            bringSelectionToFront: function (F) {
                this.beginTransaction(), F || (F = this.sm());
                for (var D = new vp, b = this.getDatas(), G = 0; G < b.size(); G++) {
                    var U = b.get(G);
                    F.contains(U) && D.add(U)
                }
                D.each(this.bringToFront, this), this.endTransaction()
            },
            sendSelectionBackward: function (M) {
                this.beginTransaction(), M || (M = this.sm());
                for (var Y = new vp, t = this.getDatas(), A = !1, n = 0; n < t.size(); n++) {
                    var V = t.get(n);
                    M.contains(V) ? A && Y.add(V) : A = !0
                }
                Y.each(this.sendBackward, this), this.endTransaction()
            },
            sendSelectionToBack: function (O) {
                this.beginTransaction(), O || (O = this.sm());
                for (var B = new vp, k = this.getDatas(), c = 0; c < k.size(); c++) {
                    var q = k.get(k.size() - 1 - c);
                    O.contains(q) && B.add(q)
                }
                B.each(this.sendToBack, this), this.endTransaction()
            },
            addScheduleTask: function (X) {
                var A = this;
                A.removeScheduleTask(X), X.enabled == c && (X.enabled = !0), X.interval == c && (X.interval = 10), X.action == c && (X.action = ds), X.lastTime = Date.now(), A._29Q.push(X), A._30Q == c && (A._30Q = m.requestAnimationFrame(A._scheduleCallback))
            },
            removeScheduleTask: function (X) {
                var h = this, C = h._29Q, p = C.indexOf(X);
                p >= 0 && C.splice(p, 1), C.length || h._30Q == c || (m.cancelAnimationFrame(h._30Q), delete h._30Q)
            },
            getHistoryManager: function () {
                return this._historyManager
            },
            enableHistoryManager: function (E) {
                this._historyManager || new t.HistoryManager(this), null != E && this._historyManager.setMaxHistoryCount(E), this._historyManager.setDisabled(!1)
            },
            disableHistoryManager: function () {
                this._historyManager && this._historyManager.setDisabled(!0)
            },
            clearHistoryManager: function () {
                this._historyManager && this._historyManager.clear()
            },
            undo: function (I) {
                this._historyManager && this._historyManager.undo(I)
            },
            redo: function (F) {
                this._historyManager && this._historyManager.redo(F)
            },
            beginTransaction: function () {
                this._historyManager && this._historyManager.beginTransaction()
            },
            endTransaction: function () {
                this._historyManager && this._historyManager.endTransaction()
            },
            addHistory: function (C) {
                this._historyManager && this._historyManager.addHistory(C)
            },
            onHistoryManagerChanged: function () {
            }
        });
        var Gk = t.SelectionModel = function (C) {
            var h = this;
            h._68O = Mg, h._map = {}, h._73O = new vp, h._74I = new tc, h._21I(C)
        };
        ld("SelectionModel", v, {
            ms_fire: 1, ms_dm: 1, ms: function (s, b, $) {
                this.addSelectionChangeListener(s, b, $)
            }, ums: function (P, f) {
                this.removeSelectionChangeListener(P, f)
            }, fd: function () {
                return this.getFirstData()
            }, ld: function () {
                return this.getLastData()
            }, sg: function () {
                return this._68O === dh
            }, co: function (b) {
                return this._map[b._id] != c
            }, ss: function (c) {
                this.setSelection(c)
            }, as: function (P) {
                this.appendSelection(P)
            }, rs: function (l) {
                this.removeSelection(l)
            }, cs: function () {
                this.clearSelection()
            }, sa: function () {
                this.selectAll()
            }, getSelectionMode: function () {
                return this._68O
            }, setSelectionMode: function (g) {
                var S = this;
                if (S._68O !== g && (g === mk || g === dh || g === Mg)) {
                    S.cs();
                    var b = S._68O;
                    S._68O = g, S.fp("selectionMode", b, g)
                }
            }, _21I: function (Z) {
                var w = this, r = w._dataModel;
                r !== Z && (r && (w.cs(), r.umm(w.handleDataModelChange, w)), w._dataModel = Z, Z.mm(w.handleDataModelChange, w, !0), w.fp(kg, r, Z))
            }, dispose: function () {
                var S = this;
                S.cs(), S._dataModel.umm(S.handleDataModelChange, S)
            }, handleDataModelChange: function (s) {
                var Q = this;
                if (s.kind === de) {
                    var y = s.data;
                    Q.co(y) && (Q._73O.remove(y), delete Q._map[y._id], Q._75I(de, new vp(y)))
                } else s.kind === Lg && Q.cs()
            }, getFilterFunc: function () {
                return this._filterFunc
            }, setFilterFunc: function (F) {
                var C = this;
                if (C._filterFunc !== F) {
                    C.cs();
                    var i = C._filterFunc;
                    C._filterFunc = F, C.fp("filterFunc", i, C._filterFunc)
                }
            }, _75I: function (f, E, H, N) {
                H && (this._73O.each(function (k) {
                    N[k._id] ? H.remove(k) : H.add(k)
                }), E = H.toList()), this._74I.fire({kind: f, datas: new vp(E)})
            }, addSelectionChangeListener: function (z, d, F) {
                this._74I.add(z, d, F)
            }, removeSelectionChangeListener: function (d, $) {
                this._74I.remove(d, $)
            }, _97O: function (Y, R) {
                for (var V, g = this, a = 0, o = new vp(Y); a < o.size(); a++) V = o.get(a), (g._filterFunc && !g._filterFunc(V) || R && g.co(V) || !R && !g.co(V) || !g._dataModel.contains(V)) && (o.removeAt(a), a--);
                return o
            }, appendSelection: function (X) {
                var H = this;
                if (H._68O !== mk) {
                    var I, i, Z = H._73O, l = H._97O(X, !0);
                    l.isEmpty() || (H.sg() && (I = new vp(Z), i = H._map, Z.clear(), H._map = {}, l = new vp(l.get(l.size() - 1))), l.each(function (p) {
                        Z.add(p), H._map[p._id] = p
                    }), H._75I("append", l, I, i))
                }
            }, removeSelection: function (y) {
                var q = this, Z = q._97O(y), X = 0, B = Z.size();
                if (0 !== B) {
                    for (; B > X; X++) {
                        var R = Z.get(X);
                        q._73O.remove(R), delete q._map[R._id]
                    }
                    q._75I(de, Z)
                }
            }, toSelection: function (V, t) {
                return this._73O.toList(V, t)
            }, getSelection: function () {
                return this._73O
            }, each: function (Y, b) {
                this._73O.each(Y, b)
            }, setSelection: function ($) {
                var m = this, L = m._73O;
                if (m._68O !== mk && !(L.isEmpty() && !$ || 1 === L.size() && m.ld() === $)) {
                    var t = new vp(L), b = m._map;
                    L.clear(), m._map = {};
                    var T = m._97O($, !0);
                    m.sg() && T.size() > 1 && (T = new vp(T.get(T.size() - 1))), T.each(function (Z) {
                        L.add(Z), m._map[Z._id] = Z
                    }), m._75I("set", c, t, b)
                }
            }, clearSelection: function () {
                var B = this, A = B._73O;
                if (A.size() > 0) {
                    var t = A.toList();
                    A.clear(), B._map = {}, B._75I(Lg, t)
                }
            }, selectAll: function () {
                var O = this;
                if (O._68O !== mk) {
                    var S, Q, g = O._dataModel.toDatas();
                    if (O._filterFunc) for (S = 0; S < g.size(); S++) Q = g.get(S), O._filterFunc(Q) || (g.removeAt(S), S--);
                    var P = O._73O, C = new vp(P), M = O._map;
                    P.clear(), O._map = {}, O.sg() && g.size() > 1 && (g = new vp(g.get(g.size() - 1)));
                    var I = g.size();
                    for (S = 0; I > S; S++) Q = g.get(S), P.add(Q), O._map[Q._id] = Q;
                    O._75I("all", c, C, M)
                }
            }, size: function () {
                return this._73O.size()
            }, isEmpty: function () {
                return this._73O.isEmpty()
            }, contains: function (f) {
                return this._map[f._id] != c
            }, getLastData: function () {
                var x = this._73O;
                return x.size() > 0 ? x.get(x.size() - 1) : c
            }, getFirstData: function () {
                var L = this._73O;
                return L.size() > 0 ? L.get(0) : c
            }, isSelectable: function (d) {
                var S = this;
                return d && S._68O !== mk ? S._filterFunc ? S._filterFunc(d) : !0 : !1
            }, getTopSelection: function () {
                var j = this, l = new vp;
                return j._73O.each(function (X) {
                    for (var s = X.getParent(); s;) {
                        if (j.contains(s)) {
                            X = c;
                            break
                        }
                        s = s.parent
                    }
                    X && l.add(X)
                }), l
            }
        });
        var Bm = function () {
            return Me(0), function (t, n) {
                var r;
                if (bg(n)) {
                    var f = t.getDataUI(n);
                    f && f._88I && (r = f._88I.rect)
                }
                return r ? r : n.getRect()
            }
        }();
        Nn(F, {
            edgeGroupAgentFunc: c,
            graphViewAutoScrollZone: 16,
            graphViewResettable: !1,
            graphViewPannable: !0,
            graphViewRectSelectable: !0,
            graphViewScrollBarVisible: !0,
            graphViewRectSelectBorderColor: W.rectSelectBorder,
            graphViewRectSelectBackground: Fg,
            graphViewEditPointSize: jp ? 17 : 7,
            graphViewEditPointBorderColor: W.editPointBorder,
            graphViewEditPointBackground: W.editPointBackground,
            setEdgeType: function (A, d, t) {
                Pp[A] = d, rp[A] = t
            },
            getEdgeType: function (a) {
                return Pp[a]
            },
            getEdgeTypeMap: function () {
                return Pp
            },
            getNodeRect: Bm
        }, !0), Nn(j, {
            "2d.selectable": !0,
            "2d.visible": !0,
            "2d.movable": !0,
            "2d.editable": !0,
            "2d.move.mode": $,
            interactive: !1,
            "image.stretch": "fill",
            icons: $,
            ingroup: !0,
            "body.color": $,
            opacity: $,
            pixelPerfect: !0,
            "clip.direction": "top",
            "clip.percentage": 1,
            "select.color": bh,
            "select.width": 1,
            "select.padding": 2,
            "select.type": Wj,
            shadow: !1,
            "shadow.blur": 6,
            "shadow.offset.x": 3,
            "shadow.offset.y": 3,
            "border.color": $,
            "border.width": 2,
            "border.padding": 2,
            "border.type": Wj,
            label: $,
            "label.font": $,
            "label.color": Cj,
            "label.background": $,
            "label.position": 31,
            "label.position.fixed": !1,
            "label.offset.x": 0,
            "label.offset.y": 2,
            "label.rotation": $,
            "label.max": $,
            "label.opacity": $,
            "label.scale": 1,
            "label.align": $,
            "label.selectable": !0,
            label2: $,
            "label2.font": $,
            "label2.color": Cj,
            "label2.background": $,
            "label2.position": 34,
            "label2.position.fixed": !1,
            "label2.offset.x": 0,
            "label2.offset.y": -2,
            "label2.rotation": $,
            "label2.max": $,
            "label2.opacity": $,
            "label2.scale": 1,
            "label2.align": $,
            "label2.selectable": !0,
            note: $,
            "note.expanded": !0,
            "note.font": $,
            "note.color": db,
            "note.background": bh,
            "note.position": 8,
            "note.offset.x": -3,
            "note.offset.y": 3,
            "note.max": $,
            "note.toggleable": !0,
            "note.border.width": 1,
            "note.border.color": $,
            "note.opacity": $,
            "note.scale": 1,
            "note.align": $,
            note2: $,
            "note2.expanded": !0,
            "note2.font": $,
            "note2.color": db,
            "note2.background": bh,
            "note2.position": 3,
            "note2.offset.x": 3,
            "note2.offset.y": -3,
            "note2.max": $,
            "note2.toggleable": !0,
            "note2.border.width": 1,
            "note2.border.color": $,
            "note2.opacity": $,
            "note2.scale": 1,
            "note2.align": $,
            "group.type": $,
            "group.image": $,
            "group.image.stretch": "fill",
            "group.repeat.image": $,
            "group.padding": 8,
            "group.padding.left": 0,
            "group.padding.right": 0,
            "group.padding.top": 0,
            "group.padding.bottom": 0,
            "group.position": 17,
            "group.toggleable": !0,
            "group.title.font": $,
            "group.title.color": db,
            "group.title.background": W.groupTitleBackground,
            "group.title.align": Ch,
            "group.background": W.groupBackground,
            "group.depth": 1,
            "group.border.width": 1,
            "group.border.pattern": $,
            "group.border.color": Jn,
            "group.border.cap": os,
            "group.border.join": al,
            "group.gradient": c,
            "group.gradient.color": "#FFF",
            shape: $,
            "shape.background": Jn,
            "shape.repeat.image": $,
            "shape.border.width": 0,
            "shape.border.width.absolute": !1,
            "shape.border.color": Jn,
            "shape.border.3d": !1,
            "shape.border.3d.color": $,
            "shape.border.3d.accuracy": $,
            "shape.border.cap": os,
            "shape.border.join": al,
            "shape.border.pattern": $,
            "shape.gradient": c,
            "shape.gradient.color": "#FFF",
            "shape.depth": 0,
            "shape.dash": !1,
            "shape.dash.pattern": we,
            "shape.dash.offset": 0,
            "shape.dash.color": zq,
            "shape.dash.width": $,
            "shape.dash.3d": !1,
            "shape.dash.3d.color": $,
            "shape.dash.3d.accuracy": $,
            "shape.polygon.side": 6,
            "shape.arc.from": u,
            "shape.arc.to": k,
            "shape.arc.close": !0,
            "shape.arc.oval": !1,
            "shape.corner.radius": $,
            "shape.gradient.pack": $,
            "shape.fill.rule": "nonzero",
            "shape.fill.clip.direction": "top",
            "shape.fill.clip.percentage": 1,
            "shape.background2": $,
            "shape.gradient2": c,
            "shape.gradient2.color": "#FFF",
            "autolayout.gap": $,
            "autolayout.hgap": $,
            "autolayout.vgap": $,
            "edge.type": $,
            "edge.points": $,
            "edge.segments": $,
            "edge.color": Jn,
            "edge.width": 2,
            "edge.width.absolute": !1,
            "edge.offset": 20,
            "edge.group": 0,
            "edge.expanded": !0,
            "edge.gap": 12,
            "edge.toggleable": !0,
            "edge.center": !1,
            "edge.3d": !1,
            "edge.3d.color": $,
            "edge.3d.accuracy": $,
            "edge.cap": os,
            "edge.join": al,
            "edge.source.position": 17,
            "edge.source.anchor.x": $,
            "edge.source.anchor.y": $,
            "edge.source.offset.x": 0,
            "edge.source.offset.y": 0,
            "edge.target.position": 17,
            "edge.target.anchor.x": $,
            "edge.target.anchor.y": $,
            "edge.target.offset.x": 0,
            "edge.target.offset.y": 0,
            "edge.pattern": $,
            "edge.dash": !1,
            "edge.dash.pattern": we,
            "edge.dash.offset": 0,
            "edge.dash.color": zq,
            "edge.dash.width": $,
            "edge.dash.3d": !1,
            "edge.dash.3d.color": $,
            "edge.dash.3d.accuracy": $,
            "edge.independent": !1,
            "attach.row.index": 0,
            "attach.column.index": 0,
            "attach.row.span": 1,
            "attach.column.span": 1,
            "attach.padding": 0,
            "attach.padding.left": 0,
            "attach.padding.right": 0,
            "attach.padding.top": 0,
            "attach.padding.bottom": 0,
            "attach.index": -1,
            "attach.offset": 0,
            "attach.offset.relative": !1,
            "attach.offset.opposite": !1,
            "attach.thickness": $,
            "attach.gap": 0,
            "attach.gap.relative": !1,
            "grid.row.count": 1,
            "grid.column.count": 1,
            "grid.row.percents": $,
            "grid.column.percents": $,
            "grid.border": 1,
            "grid.border.left": 0,
            "grid.border.right": 0,
            "grid.border.top": 0,
            "grid.border.bottom": 0,
            "grid.gap": 1,
            "grid.background": W.gridBackground,
            "grid.depth": 1,
            "grid.cell.depth": -1,
            "grid.cell.border.color": W.gridCellBorderColor,
            "grid.block": $,
            "grid.block.padding": 3,
            "grid.block.width": 1,
            "grid.block.color": W.gridBlockColor,
            text: "",
            "text.align": "left",
            "text.vAlign": "middle",
            "text.color": Cj,
            "text.font": Jq,
            "text.shadow": !1,
            "text.shadow.color": bh,
            "text.shadow.blur": 6,
            "text.shadow.offset.x": 3,
            "text.shadow.offset.y": 3
        }, !0), Nn(ek, {
            _76I: function (e, P, $) {
                this._39I && this._39I.fire({data: e, oldIndex: P, newIndex: $})
            }, addIndexChangeListener: function (y, D, K) {
                var E = this;
                E._39I || (E._39I = new tc), E._39I.add(y, D, K)
            }, removeIndexChangeListener: function (f, F) {
                this._39I.remove(f, F)
            }, prepareRemove: function (X) {
                gs(X) && (X.setSource(c), X.setTarget(c)), X._70O && X._70O.toList().each(this.remove, this), X._69O && X._69O.toList().each(function (v) {
                    v.setHost(c)
                }), X._host && X.setHost(c)
            }, onAdded: function (k) {
                this.isAutoAdjustIndex() && this.adjustIndex(k)
            }, onDataPropertyChanged: function (C, w) {
                xq[w.property] && this.isAutoAdjustIndex() && this.adjustIndex(C)
            }, isAdjustable: function (e) {
                return Ik(e) || gs(e)
            }, isAdjustedToBottom: function (f) {
                return kk(f) ? f.isExpanded() && lb(f) : !1
            }, adjustIndex: function (Y) {
                var J = this;
                this.isHierarchicalRendering() || (J.isAdjustedToBottom(Y) ? (J.sendToBottom(Y), Y.eachChild(J.adjustIndex, J)) : J.sendToTop(Y))
            }, sendToTop: function (n) {
                var F = this;
                if (F.contains(n) && F.isAdjustable(n)) {
                    var $ = F._datas;
                    if (n !== $.get(F.size() - 1)) {
                        var Z = $.indexOf(n);
                        $.removeAt(Z), $.add(n), F._76I(n, Z, F.size() - 1)
                    }
                    if (gs(n)) {
                        var T = n._40I;
                        T && !F.isAdjustedToBottom(T) && F.sendToTop(T), T = n._41I, T && !F.isAdjustedToBottom(T) && F.sendToTop(T)
                    }
                    n._69O && n._69O.each(function (q) {
                        q.isRelatedTo(n) || Ik(n) && q.isLoopedHostOn(n) || F.sendToTop(q)
                    }), n.ISubGraph || (!kk(n) || n.isExpanded()) && n._adjustChildrenToTop && n.eachChild(function (L) {
                        gs(L) || F.sendToTop(L)
                    })
                }
            }, sendToBottom: function (I, O) {
                var b = this;
                if (I !== O && b.contains(I) && b.isAdjustable(I) && (!O || b.contains(O))) {
                    var g = b._datas, o = g.remove(I), B = O ? b._datas.indexOf(O) : 0;
                    if (g.add(I, B), o !== B) {
                        b._76I(I, o, B);
                        var y = I._parent;
                        !y || y.ISubGraph || gs(y) || b.sendToBottom(I._parent, I)
                    }
                }
            }
        }), Nn(zh, {
            ms_edit: function (i) {
                i._46O = function (W) {
                    var r = this, v = r.gv.dm(), $ = r._index, C = r._89I, Z = r._node, n = r._shape, M = r._edge,
                        f = r._77I;
                    Z && C ? (this.fi({
                        kind: "endEditRect",
                        event: W,
                        data: Z,
                        direction: C
                    }), v.endTransaction()) : n && $ >= 0 ? (r.fi({
                        kind: "endEditPoint",
                        event: W,
                        data: n,
                        index: $
                    }), v.endTransaction()) : M && $ >= 0 ? (r.fi({
                        kind: "endEditPoint",
                        event: W,
                        data: M,
                        index: $
                    }), v.endTransaction()) : f && (r.fi({
                        kind: "endEditRotation",
                        event: W,
                        data: f
                    }), v.endTransaction())
                }, i._78I = function (M) {
                    var L = this;
                    L.autoScroll(M);
                    var U = L.gv.lp(M), F = L._index, t = L._89I, s = L._node, m = L._shape, O = L._edge, q = L._77I;
                    if (s && t) L._80O(U), L.fi({
                        kind: "betweenEditRect",
                        event: M,
                        data: s,
                        direction: t
                    }); else if (m && F >= 0) U.e = m.getPoints().get(F).e, m.setPoint(F, U), L.fi({
                        kind: "betweenEditPoint",
                        event: M,
                        data: m,
                        index: F
                    }); else if (O && F >= 0) {
                        var A = O.s(mm);
                        U.e = A.get(F).e, A.set(F, U), O.fp(mm, c, A), L.fi({
                            kind: "betweenEditPoint",
                            event: M,
                            data: O,
                            index: F
                        })
                    } else if (q) {
                        var W = q.p(), S = q.getScale(), f = B + n(U.y - W.y, U.x - W.x);
                        S.y < 0 && (f += u), I(f) < .04 && (f = 0), q.setRotation(f), L.fi({
                            kind: "betweenEditRotation",
                            event: M,
                            data: q
                        })
                    }
                }, i._80O = function (i) {
                    var h = this, A = h._node, J = h._rect, q = J.x, L = J.y, p = J.width, x = J.height, f = h._89I,
                        d = h._anchor, D = h._matrix, i = D.tfi(i);
                    "northwest" === f ? J = sd(i, {x: q + p, y: L + x}) : f === Oj ? J = sd({x: q, y: i.y}, {
                        x: q + p,
                        y: L + x
                    }) : "northeast" === f ? J = sd({x: q, y: i.y}, {x: i.x, y: L + x}) : f === gf ? J = sd({
                        x: i.x,
                        y: L
                    }, {x: q + p, y: L + x}) : f === lc ? J = sd({x: q, y: L}, {
                        x: i.x,
                        y: L + x
                    }) : "southwest" === f ? J = sd({x: i.x, y: L}, {x: q + p, y: i.y}) : "south" === f ? J = sd({
                        x: q,
                        y: L
                    }, {x: q + p, y: i.y}) : "southeast" === f && (J = sd({
                        x: q,
                        y: L
                    }, i)), A.setPosition(D.tf(J.x + J.width * d.x, J.y + J.height * d.y)), A.setWidth(J.width), A.setHeight(J.height)
                }, i._80I = function (O, o, s, x) {
                    var N = this, d = N.gv._zoom, J = (N.gv.getEditPointSize() + 2) / d;
                    return Jj({
                        x: o - J / 2,
                        y: s - J / 2,
                        width: J,
                        height: J
                    }, O) ? (N._89I !== x && (N._89I = x), !0) : !1
                }, i._79I = function (n, l, I) {
                    var i = this, r = i.gv, A = l ? r.getDataUI(l) : c, R = A ? A._55O : c;
                    if (R) {
                        var d, w, G, j, o = r._zoom, O = (r.getEditPointSize() + 2) / o, Z = r.lp(n);
                        if (Ik(l)) {
                            if (R._56O && Ik(l) && (w = R._98o, Jj({
                                x: w.x - O / 2,
                                y: w.y - O / 2,
                                width: O,
                                height: O
                            }, Z))) return i._77I = l, I && i.fi({
                                kind: "beginEditRotation",
                                event: n,
                                data: l
                            }), i.setCursor("crosshair"), !0;
                            if (R._43O && l instanceof Jg) for (G = l.getPoints(), d = G.size() - 1; d >= 0; d--) if (w = G.get(d), Jj({
                                x: w.x - O / 2,
                                y: w.y - O / 2,
                                width: O,
                                height: O
                            }, Z)) return i._index = d, i._shape = l, I && i.fi({
                                kind: "beginEditPoint",
                                event: n,
                                data: l,
                                index: d
                            }), i.setCursor("crosshair"), !0;
                            if (R._42O) for (var N = l.getEditControlPoints(), h = ["northwest", -1, -1, gf, -1, 0, "southwest", -1, 1, "south", 0, 1, "southeast", 1, 1, lc, 1, 0, "northeast", 1, -1, Oj, 0, -1], d = 0, j = N.length; j > d; d++) {
                                var M = h[3 * d], k = N[d];
                                if (i._80I(Z, k.x, k.y, M)) {
                                    i._node = l;
                                    var p = l.getWidth(), y = l.getHeight(), u = l.getAnchor();
                                    i._rect = {
                                        x: -p * u.x,
                                        y: -y * u.y,
                                        width: p,
                                        height: y
                                    }, i._anchor = u, i._matrix = l.getMatrix();
                                    var L = l.getRotation(), x = D(L), _ = C(L), Q = h[3 * d + 1] * tn(l.getScale().x),
                                        H = h[3 * d + 2] * tn(l.getScale().y),
                                        T = Math.atan2(-_ * Q - x * H, x * Q - _ * H),
                                        F = (Math.round(T / (Math.PI / 4)) + 8) % 8,
                                        V = [lg, "nesw-resize", sr, "nwse-resize", lg, "nesw-resize", sr, "nwse-resize"][F];
                                    return i.setCursor(V), I && i.fi({
                                        kind: "beginEditRect",
                                        event: n,
                                        data: l,
                                        direction: i._89I
                                    }), !0
                                }
                            }
                        }
                        if (R._43O && gs(l) && l.s(ms) === ik && (G = l.s(mm))) for (d = G.size() - 1; d >= 0; d--) if (w = G.get(d), Jj({
                            x: w.x - O / 2,
                            y: w.y - O / 2,
                            width: O,
                            height: O
                        }, Z)) return i._index = d, i._edge = l, I && i.fi({
                            kind: "beginEditPoint",
                            event: n,
                            data: l,
                            index: d
                        }), i.setCursor("crosshair"), !0
                    }
                    return !1
                }
            }, ms_gv: function (j) {
                j._currentSubGraph = c, j.upSubGraph = function () {
                    this.setCurrentSubGraph(Yj(this._currentSubGraph))
                }, j.isVisible = function (h) {
                    var P = this;
                    if (Yj(h) !== P._currentSubGraph) return !1;
                    if (gs(h)) {
                        var E = h._40I, _ = h._41I;
                        if (!E || !_) return !1;
                        if (!(h.s("edge.independent") || P.isVisible(E) && P.isVisible(_))) return !1;
                        if (h.isEdgeGroupHidden()) return !1
                    } else for (var n = h._parent; n && !n.ISubGraph;) {
                        if (kk(n) && (!n.isExpanded() || !P.isVisible(n))) return !1;
                        n = n._parent
                    }
                    if (h._parent instanceof Th && !P.isVisible(h._parent)) return !1;
                    if (h._refGraph instanceof hd && !P.isVisible(h._refGraph)) return !1;
                    if (P instanceof qe) {
                        if (!h.s("3d.visible")) return !1
                    } else {
                        var j = P.getLayersInfo();
                        if (j) {
                            var p = j[h._layer];
                            if (p && p.visible === !1) return !1
                        }
                        if (!h.s("2d.visible")) return !1
                    }
                    return P._visibleFunc ? P._visibleFunc(h) : !0
                }, j.handleSelectionChange = function (s) {
                    var u = this;
                    s.datas.each(function (Q) {
                        u.invalidateData(Q);
                        var D = Q._parent;
                        kk(D) && Ik(Q) && Q.s(Jd) && (u.invalidateData(D), D._49I && D._49I.each(function (J) {
                            u.invalidateData(J)
                        }))
                    }), u.onSelectionChanged(s)
                }, j.onSelectionChanged = function (B) {
                    var s = this, v = s.sm();
                    if (1 === v.size() && ("set" === B.kind || "append" === B.kind)) {
                        var D = v.ld();
                        s.isAutoMakeVisible() && s.makeVisible(D), s.adjustIndex && s._dataModel.isAutoAdjustIndex() && s.adjustIndex(D)
                    }
                }, j.makeVisible = function (Q) {
                    if (Q) {
                        var D = this, m = D.getDataUI ? D.getDataUI(Q) : D.getData3dUI(Q);
                        if (m) {
                            var w = Q, p = Yj(Q);
                            for (p !== D._currentSubGraph && D.setCurrentSubGraph(p); (w = w._parent) && w !== p;) kk(w) && w.setExpanded(!0);
                            D._23I = Q, D.iv()
                        }
                    }
                }, j.getLabel = function (t) {
                    var H = t.getStyle(hg);
                    return H === $ ? t.getName() : H
                }, j.getLabelBackground = function (E) {
                    return E.getStyle("label.background")
                }, j.getLabelColor = function (H) {
                    return H.getStyle("label.color")
                }, j.getLabel2 = function (R) {
                    return R.getStyle("label2")
                }, j.getLabel2Background = function (S) {
                    return S.getStyle("label2.background")
                }, j.getLabel2Color = function (P) {
                    return P.getStyle("label2.color")
                }, j.getNote = function (t) {
                    return t.getStyle(Sl)
                }, j.getNoteBackground = function (j) {
                    return j.getStyle("note.background")
                }, j.getNote2 = function (p) {
                    return p.getStyle(oe)
                }, j.getNote2Background = function (u) {
                    return u.getStyle("note2.background")
                }, j.handleClick = function (l, E, W) {
                    var n = this;
                    E ? (n.fi({
                        kind: "clickData",
                        event: l,
                        data: E,
                        part: W
                    }), n.onDataClicked(E, l)) : (n.fi({kind: "clickBackground", event: l}), n.onBackgroundClicked(l))
                }, j.handleDoubleClick = function (h, o, I) {
                    var Z = this;
                    fj(h) && (o ? (Z.fi({
                        kind: "doubleClickData",
                        event: h,
                        data: o,
                        part: I
                    }), Z.onDataDoubleClicked(o, h, I), Z.checkDoubleClickOnNote(h, o, I) || Z.checkDoubleClickOnRotation && Z.checkDoubleClickOnRotation(h, o, I) || (gs(o) ? Z.onEdgeDoubleClicked(o, h, I) : o.ISubGraph ? Z.onSubGraphDoubleClicked(o, h, I) : kk(o) ? Z.onGroupDoubleClicked(o, h, I) : o.IDoorWindow ? Z.onDoorWindowDoubleClicked(o, h, I) : o.ICSGBox && Z.onCSGBoxDoubleClicked(o, h, I))) : (Z.fi({
                        kind: "doubleClickBackground",
                        event: h
                    }), Z.onBackgroundDoubleClicked(h)))
                }, j.onSubGraphDoubleClicked = function (G) {
                    this.setCurrentSubGraph(G)
                }, j.onEdgeDoubleClicked = function ($, q) {
                    $.ISubGraph && !Ag(q) ? this.setCurrentSubGraph($) : $.s("edge.toggleable") && $.toggle()
                }, j.onGroupDoubleClicked = function (r) {
                    r.s("group.toggleable") && r.toggle()
                }, j.onDoorWindowDoubleClicked = function (A) {
                    A.s("dw.toggleable") && A.toggle(!0)
                }, j.onCSGBoxDoubleClicked = function (D, u) {
                    var L = this;
                    if (L instanceof qe) {
                        var q = L.getHitFaceInfo(u);
                        q && q.face && D.s(q.face + ".toggleable") && D.toggleFace(q.face, !0)
                    }
                }, j.onBackgroundClicked = function () {
                }, j.onBackgroundDoubleClicked = function () {
                    this.upSubGraph()
                }, j.onDataClicked = function () {
                }, j.onDataDoubleClicked = function () {
                }, j.onAutoLayoutEnded = function () {
                }, j.onMoveEnded = function () {
                }, j.onPanEnded = function () {
                }, j.onPinchEnded = function () {
                }, j.onRectSelectEnded = function () {
                }, j.onZoomEnded = function () {
                }
            }, ms_icons: function (S) {
                S.getRotation = function (B) {
                    return B == c ? 0 : B
                }, S._15O = function () {
                    var x = this, d = x.s(Dk);
                    if (d) {
                        var $ = x, D = x.data || x._data, L = x._38o = {icons: d, rects: {}};
                        for (var o in d) {
                            var t = d[o], g = eq(t.shape3d, D, $);
                            if (!(eq(t.visible, D, $) === !1 || eq(t.for3d, D, $) && !x.I3d || g && !x.I3d)) {
                                var f = g ? [g] : eq(t.names, D, $), G = f ? f.length : 0,
                                    r = eq(t.position, D, $) || 3, Q = eq(t.offsetX, D, $) || 0,
                                    q = eq(t.offsetY, D, $) || 0, b = eq(t.direction, D, $) || lc, w = eq(t.gap, D, $),
                                    N = w != c ? w : 1, S = eq(t.rotation, D, $), z = eq(t.keepOrien, D, $),
                                    M = eq(t.rotationFixed, D, $) ? S : x.getRotation(S, z, r), B = c,
                                    Z = L.rects[o] = new Array(G);
                                Z.rotation = M;
                                for (var v = 0; G > v; v++) {
                                    var X, K, a, H, U = f[v];
                                    if (g) a = 0, H = 0; else {
                                        var m = cd(U);
                                        a = eq(t.width, D, $), H = eq(t.height, D, $), a == c && (a = fc(m, D)), H == c && (H = qr(m, D))
                                    }
                                    if (B ? b === lc ? Q += a / 2 : b === gf ? Q -= a / 2 : b === Oj ? q -= H / 2 : q += H / 2 : B = {
                                        width: a,
                                        height: H
                                    }, x.I3d) {
                                        var n = -a / 2, p = -H / 2;
                                        K = {
                                            width: a,
                                            height: H,
                                            mat: x._16O(eq(t.autorotate, D, $), r, B, eq(t.face, D, $) || Aj, eq(t.t3, D, $), eq(t.r3, D, $), eq(t.rotationMode, D, $), Q, q),
                                            vs: new Oq([n, -p, 0, n, -p - H, 0, n + a, -p - H, 0, n + a, -p, 0])
                                        }
                                    } else X = x.getPosition(r, Q, q, B, eq(t.positionFixed, D, $)), K = {
                                        x: X.x - a / 2,
                                        y: X.y - H / 2,
                                        width: a,
                                        height: H
                                    }, x._68o(K, M);
                                    Z[v] = K, b === lc ? Q += a / 2 + N : b === gf ? Q -= a / 2 + N : b === Oj ? q -= H / 2 + N : q += H / 2 + N
                                }
                            }
                        }
                    }
                }
            }
        });
        var wb = {
                1: 1,
                2: 1,
                6: 1,
                9: 1,
                10: 1,
                14: 1,
                15: 1,
                16: 1,
                21: 1,
                22: 1,
                26: 1,
                29: 1,
                30: 1,
                34: 1,
                36: 1,
                38: 1,
                40: 1,
                42: 1,
                45: 1,
                50: 1,
                52: 1,
                54: 1
            }, no = {3: 1, 7: 1, 11: 1, 17: 1, 23: 1, 27: 1, 31: 1, 44: 1, 46: 1, 47: 1, 49: 1},
            _m = {translateX: 1, translateY: 1, zoom: 1, scrollBarVisible: 1},
            xq = {sourceAgent: 1, targetAgent: 1, expanded: 1, parent: 1, host: 1},
            Xq = {position: 1, width: 1, height: 1, expanded: 1, rotation: 1, anchor: 1, scale: 1, "s:edge.points": 1},
            Vq = {"edge.type": 1, "edge.group": 1}, Lc = {rotation: 1, rotationX: 1, rotationZ: 1}, gb = {
                position: 1,
                width: 1,
                height: 1,
                anchor: 1,
                scale: 1,
                "s:grid.row.count": 1,
                "s:grid.column.count": 1,
                "s:grid.row.percents": 1,
                "s:grid.column.percents": 1,
                "s:grid.border": 1,
                "s:grid.border.left": 1,
                "s:grid.border.right": 1,
                "s:grid.border.top": 1,
                "s:grid.border.bottom": 1,
                "s:grid.gap": 1
            }, $c = {
                "attach.row.index": 1,
                "attach.column.index": 1,
                "attach.row.span": 1,
                "attach.column.span": 1,
                "attach.padding": 1,
                "attach.padding.left": 1,
                "attach.padding.right": 1,
                "attach.padding.top": 1,
                "attach.padding.bottom": 1,
                "attach.index": 1,
                "attach.offset": 1,
                "attach.offset.relative": 1,
                "attach.offset.opposite": 1,
                "attach.gap": 1,
                "attach.gap.relative": 1,
                "attach.thickness": 1
            }, $h = {shape: 1, thickness: 1, position: 1, anchor: 1, scale: 1}, Oi = function (d, n) {
                if (!d || !kk(n) || n.isEmpty()) return !1;
                for (d = d._parent; kk(d);) {
                    if (d === n) return !0;
                    d = d._parent
                }
                return !1
            }, yq = function (i, d) {
                if (!i || !_e(d) || d.isEmpty()) return !1;
                for (i = i._parent; _e(i);) {
                    if (i === d) return !0;
                    i = i._parent
                }
                return !1
            }, Yj = function (F) {
                if (!F) return c;
                if (gs(F)) {
                    var v = F._40I, l = F._41I;
                    if (!v || !l) return c;
                    var B = Yj(v), P = Yj(l);
                    return B === P ? B : c
                }
                for (var r = F._parent; gs(r) && !r.ISubGraph;) r = r._parent;
                return r ? r.ISubGraph ? r : Yj(r) : c
            }, yf = function (s, Y, c, _) {
                var J = Y.getStyle(c) * _;
                J && Bk(s, J), J = Y.getStyle(c + ".left") * _, J && (s.x -= J, s.width += J), J = Y.getStyle(c + ".right") * _, J && (s.width += J), J = Y.getStyle(c + ".top") * _, J && (s.y -= J, s.height += J), J = Y.getStyle(c + ".bottom") * _, J && (s.height += J), s.width < 0 && (s.width = -s.width, s.x -= s.width), s.height < 0 && (s.height = -s.height, s.y -= s.height)
            }, lb = function (B) {
                for (var p, v = 0, I = B.size(); I > v; v++) if (p = B.getChildAt(v), Ik(p) && lb(p)) return !0;
                return B.hasAgentEdges()
            }, Cn = function (W) {
                if (!W) return c;
                for (var S = W._parent; kk(S);) {
                    if (!kk(S._parent)) return S.isExpanded() ? W : S;
                    S.isExpanded() || (W = S), S = S._parent
                }
                return W
            }, Tj = function (K, s) {
                if (!K || !s) return c;
                var b, w, v, x = Yj(K), l = Yj(s);
                if (x !== l) {
                    for (; l && x !== l;) l = Yj(l);
                    if (x === l) return K;
                    b = new vp, b.add(K, 0);
                    for (var o = K._parent; Ik(o) && !s.isDescendantOf(o);) b.add(o, 0), o = o._parent;
                    for (v = b.size(), w = 0; v > w; w++) {
                        var L = b.get(w);
                        if (kk(L) && !L.isExpanded()) return L;
                        if (L.ISubGraph) return L
                    }
                    return K
                }
                return K
            }, Gd = function (S) {
                if (S.isLooped()) return S._source;
                var Z = Cn(S._source), L = Cn(S._target);
                return Z === L ? S._source : Tj(Z, L)
            }, Kr = function (H) {
                if (H.isLooped()) return H._target;
                var o = Cn(H._source), V = Cn(H._target);
                return o === V ? H._target : Tj(V, o)
            }, ag = function (g, U, L, t, s, O, w) {
                if (!U) return c;
                var v, Z = U.getRotation ? U.getRotation() : 0;
                if (O !== $ || w !== $) if (O = O === $ ? .5 : O, w = w === $ ? .5 : w, Z && !bg(U, g)) {
                    var N = U.getPosition(), y = U.getWidth(), h = U.getHeight(), M = U.getAnchor(), F = U.getScale(),
                        S = new Op(Z, N.x, N.y, F.x, F.y);
                    L = S.tf((O - M.x) * y, (w - M.y) * h)
                } else v = Bm(g, U), L = {x: v.x + O * v.width, y: v.y + w * v.height}; else L = Nc(L, Bm(g, U));
                if (Z) {
                    var j = D(Z), R = C(Z), B = t * j - s * R;
                    s = t * R + s * j, t = B
                }
                return L.x += t, L.y += s, L
            }, Vc = function (G, E) {
                if (!G || !E) return c;
                var s, N, q, Q, i, p;
                if (G === E) {
                    if (Q = G.getLoopedEdges(), !Q) return c;
                    Q = new vp(Q)
                } else {
                    if (i = G.getAgentEdges(), p = E.getAgentEdges(), !i || !p) return c;
                    for (N = i.size(), s = 0; N > s; s++) q = i.get(s), p.contains(q) && (Q || (Q = new vp), Q.add(q))
                }
                if (Q) for (s = 0; s < Q.size(); s++) q = Q.get(s), q.getStyle(ms) === ik && (q._22I(c), Q.removeAt(s), s--);
                return Q
            }, ci = function (y, q) {
                var b = Vc(y, q);
                if (b && !b.isEmpty()) {
                    if (1 === b.size()) return b.get(0)._22I(c), void 0;
                    var w = new vp, _ = new vp;
                    b.each(function (x) {
                        var z = x.s("edge.group");
                        w.contains(z) || w.add(z)
                    }), w.sort(), w.each(function (r) {
                        _.add(new t.EdgeGroup(b.toList(function (h) {
                            return r === h.s("edge.group")
                        }), _))
                    }), _.each(function (i) {
                        i.each(function (I) {
                            I._22I(i)
                        })
                    })
                }
            }, zs = function (t, P) {
                if (P) {
                    var W = P.rect, y = P.color, J = P.rotation, d = P.labelWidth, $ = P.background, G = P.opacity,
                        p = P.scale, C = p != c && 1 !== p;
                    if (G != c) {
                        var s = t.globalAlpha;
                        t.globalAlpha *= G
                    }
                    if (J || C) {
                        t.save();
                        var Q = W.x + W.width / 2, I = W.y + W.height / 2;
                        xe(t, Q, I), J && Jb(t, J), C && t.scale(p, p), xe(t, -Q, -I)
                    }
                    if ($ && Ui(t, W.x, W.y, W.width, W.height, $), d) {
                        var E = W.width, H = t.createLinearGradient(W.x, W.y, W.x + E, W.y);
                        H.addColorStop(0, y), H.addColorStop(.9, y), H.addColorStop(1, kn), y = H, W.width = d
                    }
                    Vn(t, P.ss, W, P.font, y, P.align), d && (W.width = E), (J || C) && t.restore(), G != c && (t.globalAlpha = s)
                }
            }, Ih = function (g, v) {
                if (v) {
                    var U = v.rect, P = U.x, y = U.y, l = U.width, m = U.height, W = v.background, f = v.backgroundImage,
                        w = v.borderWidth, J = v.borderColor, L = v.labelWidth, j = v.opacity, H = v.scale,
                        $ = H != c && 1 !== H;
                    if (j != c) {
                        var h = g.globalAlpha;
                        g.globalAlpha *= j
                    }
                    if ($) {
                        g.save();
                        var q = U.x + U.width / 2, Q = U.y + U.height / 2;
                        xe(g, q, Q), g.scale(H, H), xe(g, -q, -Q)
                    }
                    if (v.expanded) {
                        var F = x(8, l / 4), O = y + m - 8;
                        if (g.fillStyle = W, g.beginPath(), g.moveTo(P, y), g.lineTo(P, O), g.lineTo(P + l / 2, O), g.lineTo(P + l / 2, y + m), g.lineTo(P + l / 2 + F, O), g.lineTo(P + l, O), g.lineTo(P + l, y), g.closePath(), g.fill(), w && (g.lineWidth = w, g.lineJoin = "round", g.lineCap = "round", J ? (g.strokeStyle = J, g.stroke()) : (g.strokeStyle = zn(W), g.beginPath(), g.moveTo(P + l, y), g.lineTo(P + l, O), g.lineTo(P + l / 2 + F, O), g.lineTo(P + l / 2, y + m), g.stroke(), g.strokeStyle = Gj(W), g.beginPath(), g.moveTo(P + l, y), g.lineTo(P, y), g.lineTo(P, O), g.lineTo(P + l / 2, O), g.lineTo(P + l / 2, y + m), g.stroke())), f) pq(g, cd(f), aj, U.x, U.y, U.width, U.height - 8, v.data, v.view); else {
                            if (U.height -= 8, W = v.color, L) {
                                var R = l, S = g.createLinearGradient(P, y, P + R, y);
                                S.addColorStop(0, W), S.addColorStop(.9, W), S.addColorStop(1, kn), W = S, U.width = L
                            }
                            Vn(g, v.ss, U, v.font, W, v.align), L && (U.width = R), U.height += 8
                        }
                    } else if (v.icon) sp(g, cd(v.icon), P, y, l, m, v.data, v.view); else {
                        var _ = l / 2;
                        w && (g.lineWidth = w, g.lineJoin = "round", g.lineCap = "round", g.strokeStyle = J ? J : zn(W), g.beginPath(), g.arc(P + _, y + _, _, B, 1.6 * u, !0), g.moveTo(P + _, y + m), g.lineTo(P + l - _ / 5, y + _), g.stroke(), g.strokeStyle = J ? J : Gj(W), g.beginPath(), g.arc(P + _, y + _, _, 1.6 * u, B, !0), g.moveTo(P + _, y + m), g.lineTo(P + _ / 5, y + _), g.stroke()), g.fillStyle = W, g.beginPath(), g.arc(P + _, y + _, _, 0, k, !0), g.moveTo(P + _, y + m), g.lineTo(P + l - _ / 5, y + _), g.lineTo(P + _ / 5, y + _), g.closePath(), g.fill(), g.fillStyle = v.color, g.beginPath(), g.arc(P + _, y + _, _ / 3, 0, k, !0), g.fill()
                    }
                    $ && g.restore(), j != c && (g.globalAlpha = h)
                }
            }, kc = function (Z, u) {
                return u > 2 * Z ? Z : u / 2
            }, Eo = function (Z, I, x, r) {
                if (!Z || !I) return 0;
                var m = n(I.y - Z.y, I.x - Z.x);
                return x || (m = I.x < Z.x ? m + u : m), m + r
            }, mi = function (V, v, $, E, o, y, D) {
                D && (V.x > v.x || V.x === v.x && V.y > v.y) && ($ = Fr[$], o = -o);
                var Y = Nc($, {x: 0, y: 0, width: Wg(V, v), height: 0}, y);
                return Y.x += E, Y.y += o, Y = new Op(n(v.y - V.y, v.x - V.x)).tf(Y), Y.x += V.x, Y.y += V.y, Y
            }, Jp = function (Q, q, M, w, b) {
                if (Q._19Q = !0, !M.getEdgeGroup()) return w ? M.s("edge.gap") : 0;
                var F, O = 0, H = 0, W = 0;
                if (M.getEdgeGroup().getSiblings().each(function (V) {
                    V.each(function (I) {
                        if (q.isVisible(I) && I.s(ms) == b) {
                            var d = I.s("edge.gap");
                            F ? (H += W / 2 + d / 2, W = d) : (F = I, W = d), I === M && (O = H)
                        }
                    })
                }), w) return H - O + W;
                var J = O - H / 2;
                return F && M._40I !== F._40I && (Q._19Q = !1), J
            }, We = function () {
                var K = function (m) {
                    var e = [];
                    return m.forEach(function (d) {
                        e.push({x: d.x, y: d.y}), e.push({x: d.x + d.width, y: d.y + d.height}), e.push({
                            x: d.x + d.width,
                            y: d.y
                        }), e.push({x: d.x, y: d.y + d.height})
                    }), e
                };
                return function (T, o, R) {
                    if ("oval" === T) {
                        var Q = 0, J = R.height / R.width, w = J * J, A = R.x + R.width / 2, H = R.y + R.height / 2,
                            q = K(o);
                        q.forEach(function (F) {
                            var U = F.x - A, h = F.y - H, j = U * U + h * h / w;
                            j > Q && (Q = j)
                        }), Q = s(Q);
                        var I = J * Q;
                        return {x: A - Q, y: H - I, width: 2 * Q, height: 2 * I}
                    }
                    if ("circle" === T) {
                        var p = 0, A = R.x + R.width / 2, H = R.y + R.height / 2, q = K(o);
                        return q.forEach(function (q) {
                            var w = q.x - A, t = q.y - H, m = w * w + t * t;
                            m > p && (p = m)
                        }), p = s(p), {x: A - p, y: H - p, width: 2 * p, height: 2 * p}
                    }
                    return "roundRect" === T ? (Bk(R, x(R.width, R.height) / 16), R) : R
                }
            }(), rg = t.graph = {}, Wb = function (O, C, v) {
                fs(G + ".graph." + O, C, v)
            };
        t.layout = {};
        var fh = {
            comps: [{
                type: ng,
                points: [85, 50, 70, 115, 100, 71, 86, 107, 88, 49, 57, 77, 106, 120, 117, 113, 113, 90, 43, 114, 65, 117, 68, 54, 47, 114, 122, 103, 69, 53, 90, 115, 118, 115, 116, 111, 111, 99, 110, 122, 119, 50, 48, 61],
                borderWidth: 1,
                borderColor: c
            }]
        };
        fh[Ql] = fh[pb] = 160, Mq("node_image", fq(30, 30, [{
            type: Wj,
            rect: [4, 5, 22, 16],
            gradient: Bo,
            gradientColor: jm,
            background: Jn
        }, {type: Wj, rect: [2, 3, 26, 20], borderWidth: 1, borderColor: Jn}, {
            type: Wj,
            rect: [11, 23, 8, 4],
            background: Jn
        }, {type: Wj, rect: [6, 27, 18, 2], background: Jn}])), Mq("node_icon", fq(16, 16, [{
            type: Wj,
            rect: [2, 2, 12, 10],
            gradient: Bo,
            gradientColor: jm,
            background: Jn
        }, {type: Yh, rect: [2, 2, 12, 10], width: 1, color: Jn}, {
            type: Wj,
            rect: [6, 12, 4, 2],
            background: Jn
        }, {type: Wj, rect: [4, 14, 8, 1], background: Jn}])), Mq("block_icon", fq(16, 16, [{
            type: Yh,
            rect: [1, 1, 14, 14],
            width: 1,
            color: Jn
        }])), Mq("group_image", fq(66, 39, [{
            type: Wj,
            rect: [44.3, 18, 18.1, 12.8],
            gradient: Bo,
            gradientColor: jm,
            background: Jn
        }, {type: Wj, rect: [3.3, 17.8, 18.1, 12.8], gradient: Bo, gradientColor: jm, background: Jn}, {
            type: Wj,
            rect: [15.8, 3.2, 33.5, 26.4],
            borderWidth: 1,
            borderColor: Jn,
            gradient: Bo,
            gradientColor: jm,
            background: Jn
        }, {type: Wj, rect: [26.2, 29.4, 12.8, 4.2], background: Jn}, {
            type: Wj,
            rect: [21.3, 33.5, 22.5, 2.3],
            background: Jn
        }, {type: Wj, rect: [5.3, 32.7, 14.1, 2.1], background: Jn}, {
            type: Wj,
            rect: [9, 30.4, 6.7, 2.4],
            background: Jn
        }, {type: Wj, rect: [50, 30.7, 6.7, 2.4], background: Jn}, {
            type: Wj,
            rect: [46.3, 33, 14.1, 2.1],
            background: Jn
        }])), Mq("group_icon", fq(16, 16, [{type: Wj, rect: [4, 12, 4, 2], background: Jn}, {
            type: Wj,
            rect: [2, 13, 8, 1],
            background: Jn
        }, {type: Wj, rect: [12, 12, 2, 1], background: Jn}, {
            type: Wj,
            rect: [11, 13, 4, 1],
            background: Jn
        }, {type: Wj, rect: [10, 7, 6, 5], gradient: Bo, gradientColor: jm, background: Jn}, {
            type: Wj,
            rect: [1, 2, 10, 10],
            gradient: Bo,
            gradientColor: jm,
            background: Jn
        }, {type: Yh, rect: [1, 2, 10, 10], width: 1, color: Jn}])), Mq("refGraph_icon", fq(16, 16, [{
            type: "shape",
            borderWidth: 1,
            borderColor: Jn,
            borderCap: "round",
            rotation: .7854,
            points: [12.5502, 6.7981, 12.5502, 6.7981, 12.5502, 4.8181, 12.5502, 3.7981, 12.5502, 2.7781, 11.36687, 1.7981, 10.0502, 1.7981, 8.73354, 1.7981, 7.5502, 2.8181, 7.5502, 3.7981, 7.5502, 4.55989, 7.5502, 7.79805, 7.5502, 7.79805, 7.5502, 7.79805, 7.5502, 9.7981, 10.0502, 9.7981],
            segments: [1, 4, 4, 4, 4, 4]
        }, {
            type: "shape",
            borderWidth: 1,
            borderColor: Jn,
            borderCap: "round",
            rotation: -2.35619,
            points: [8.4498, 11.2019, 8.4498, 11.2019, 8.4498, 9.2219, 8.4498, 8.2019, 8.4498, 7.1819, 7.26646, 6.2019, 5.9498, 6.2019, 4.63313, 6.2019, 3.4498, 7.2219, 3.4498, 8.2019, 3.4498, 8.9637, 3.4498, 12.20186, 3.4498, 12.20186, 3.4498, 12.20186, 3.4498, 14.2019, 5.9498, 14.2019],
            segments: [1, 4, 4, 4, 4, 4]
        }])), Mq("edge_icon", fq(16, 16, [{
            type: Wj,
            rect: [2.1, 6.9, 11.5, 2.6],
            rotation: -.79,
            gradient: Bo,
            gradientColor: jm,
            background: Jn
        }, {type: Wj, rect: [10.8, 1, 4, 4], background: Jn}, {
            type: Wj,
            rect: [1, 11, 4, 4],
            background: Jn
        }])), Mq("subGraph_image", fq(72, 45, [{
            type: ng,
            points: [9, 42, .3, 38.4, 2.4, 28.8, 5.7, 21.6, 11.7, 22.5, 11.7, 15.9, 16.8, 13.8, 21.6, 12, 24.3, 15.9, 27.9, 3, 42.3, 2.1, 59.4, 4.5, 57.3, 18.3, 67.5, 18.9, 69.6, 27.3, 69.9, 38.4, 64.2, 41.4],
            segments: [1, 3, 3, 3, 3, 3, 3, 3, 3],
            gradient: Bo,
            gradientColor: jm,
            background: Jn
        }, {type: Wj, rect: [29.6, 30.7, 3.6, 1.8], background: Jn}, {
            type: Wj,
            rect: [28.4, 32.3, 6, 1.2],
            background: Jn
        }, {type: Wj, rect: [37.3, 32, 10.8, 1.8], background: Jn}, {
            type: Wj,
            rect: [39.1, 29.9, 7.2, 2.3],
            background: Jn
        }, {type: Wj, rect: [26.6, 23.7, 9.6, 7.2], gradient: Bo, gradientColor: jm, background: Jn}, {
            type: Wj,
            rect: [34.3, 16.8, 16.8, 13.2],
            borderWidth: 1,
            borderColor: Jn,
            gradient: Bo,
            gradientColor: jm,
            background: Jn
        }])), Mq("subGraph_icon", fq(17, 17, [{
            type: ng,
            points: [2.2, 14.6, .2, 11.9, .8, 8.8, 1.8, 5.9, 5.6, 7.4, 3.8, 1.6, 10.3, 3, 14.5, 4.2, 12.2, 7.5, 18.9, 7.2, 14.5, 14.5],
            segments: [1, 3, 3, 3, 3, 3],
            gradient: Bo,
            gradientColor: jm,
            background: Jn
        }])), Mq("shape_icon", fq(16, 16, [{
            type: ng,
            points: [1.5, 1, 8.4, 1, 8.4, 7.2, 14.6, 7.1, 14.6, 14.9, 1.5, 14.9, 1.5, 1],
            background: Jn
        }])), Mq("polyline_icon", fq(16, 16, [{
            type: ng,
            points: [1.5, 1, 8.4, 1, 8.4, 7.2, 14.6, 7.1, 14.6, 14.9, 1.5, 14.9, 1.5, 1],
            borderWidth: 1,
            borderColor: Jn
        }, Qi(7.5, .4), Qi(7.5, 6.3), Qi(13.6, 6.3), Qi(13.6, 14), Qi(.7, 13.9), Qi(.7, .3)])), Mq("grid_icon", fq(16, 16, [{
            type: Wj,
            rect: [1, 1, 4, 4],
            background: Jn,
            gradient: Bo,
            gradientColor: jm
        }, {type: Wj, rect: [6, 1, 4, 4], background: Jn, gradient: Bo, gradientColor: jm}, {
            type: Wj,
            rect: [11, 1, 4, 4],
            background: Jn,
            gradient: Bo,
            gradientColor: jm
        }, {type: Wj, rect: [11, 6, 4, 4], background: Jn, gradient: Bo, gradientColor: jm}, {
            type: Wj,
            rect: [6, 6, 4, 4],
            background: Jn,
            gradient: Bo,
            gradientColor: jm
        }, {type: Wj, rect: [1, 6, 4, 4], background: Jn, gradient: Bo, gradientColor: jm}, {
            type: Wj,
            rect: [11, 11, 4, 4],
            background: Jn,
            gradient: Bo,
            gradientColor: jm
        }, {type: Wj, rect: [6, 11, 4, 4], background: Jn, gradient: Bo, gradientColor: jm}, {
            type: Wj,
            rect: [1, 11, 4, 4],
            background: Jn,
            gradient: Bo,
            gradientColor: jm
        }])), Mq("light_icon", fq(16, 16, [{
            type: "rect",
            rect: [6, 9, 5, 5],
            borderWidth: 1,
            borderColor: Jn
        }, {
            type: "circle",
            rect: [1, 1, 15, 10],
            borderWidth: 1,
            borderColor: Jn,
            gradient: Bo,
            gradientColor: jm,
            background: {
                func: function (w) {
                    var z = w ? w.s(bk) : c;
                    return Qd(z) ? "rgb(" + A(255 * z[0]) + "," + A(255 * z[1]) + "," + A(255 * z[2]) + ")" : z || Jn
                }
            }
        }])), Mq("text_icon", fq(16, 16, [{
            type: "shape",
            points: [3, 3, 13, 3, 8, 3, 8, 14],
            segments: [1, 2, 1, 2],
            borderWidth: 1,
            borderColor: Jn
        }])), Mq("border_image", {
            fitSize: !0,
            comps: [{
                type: "border",
                relative: !0,
                rect: [0, 0, 1, 1],
                color: {func: "style@border_color"},
                width: {func: "style@border_width"}
            }]
        }), Mq("columnChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: {func: "style@chart.type"},
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {func: "style@chart.label"},
                labelColor: {func: "style@chart.label.color"},
                labelFont: {func: "style@chart.label.font"},
                series: {func: "style@chart.series"},
                minValue: {func: "style@chart.min.value"},
                maxValue: {func: "style@chart.max.value"}
            }]
        }), Mq("lineChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: "lineChart",
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {func: "style@chart.label"},
                labelColor: {func: "style@chart.label.color"},
                labelFont: {func: "style@chart.label.font"},
                series: {func: "style@chart.series"},
                minValue: {func: "style@chart.min.value"},
                maxValue: {func: "style@chart.max.value"},
                linePoint: {func: "style@chart.line.point"},
                lineWidth: {func: "style@chart.line.width"},
                line3d: {func: "style@chart.line.3d"}
            }]
        }), Mq("pieChart_image", {
            fitSize: !0,
            boundExtend: 150,
            comps: [{
                type: "pieChart",
                relative: !0,
                rect: [0, 0, 1, 1],
                label: {func: "style@chart.label"},
                labelColor: {func: "style@chart.label.color"},
                labelFont: {func: "style@chart.label.font"},
                hollow: {func: "style@chart.hollow"},
                startAngle: {func: "style@chart.start.angle"},
                values: {func: "style@chart.values"},
                colors: {func: "style@chart.colors"}
            }]
        });
        var rj = function (h, P) {
            for (var W = h.vertices, E = 0; E < W.length; E++) {
                var L = W[E], f = L.y;
                L.y = L.z, L.z = -f, P && (L.y += P)
            }
        }, Hj = function (h) {
            for (var v, I, V, z, q, Z, f = [], J = [], x = [], O = h.faces, U = 0, j = 0, l = 0, G = O.length; G > U; U++, j += 6, l += 9) {
                var R = O[U];
                1 === R.i ? (v || (v = [], I = [], V = []), Rd(R, U, j, l, h, v, V, I)) : 2 === R.i ? (z || (z = [], q = [], Z = []), Rd(R, U, j, l, h, z, Z, q)) : Rd(R, U, j, l, h, f, x, J)
            }
            return {vs: f, uv: J, ns: x, top_vs: v, top_uv: I, top_ns: V, bottom_vs: z, bottom_uv: q, bottom_ns: Z}
        }, Rd = function (F, z, c, H, k, x, p, C) {
            var e = k.vertices, I = k.faceVertexUvs, O = e[F.a], D = e[F.b], v = e[F.c];
            x[H] = O.x, x[H + 1] = O.y, x[H + 2] = O.z, x[H + 3] = D.x, x[H + 4] = D.y, x[H + 5] = D.z, x[H + 6] = v.x, x[H + 7] = v.y, x[H + 8] = v.z;
            var l = F.vertexNormals;
            if (3 === l.length) {
                var B = l[0], A = l[1], s = l[2];
                p[H] = B.x, p[H + 1] = B.y, p[H + 2] = B.z, p[H + 3] = A.x, p[H + 4] = A.y, p[H + 5] = A.z, p[H + 6] = s.x, p[H + 7] = s.y, p[H + 8] = s.z
            } else {
                var X = F.normal;
                p[H] = X.x, p[H + 1] = X.y, p[H + 2] = X.z, p[H + 3] = X.x, p[H + 4] = X.y, p[H + 5] = X.z, p[H + 6] = X.x, p[H + 7] = X.y, p[H + 8] = X.z
            }
            var Z = I[0][z][0], M = I[0][z][1], f = I[0][z][2];
            C[c] = Z.x, C[c + 1] = Z.y, C[c + 2] = M.x, C[c + 3] = M.y, C[c + 4] = f.x, C[c + 5] = f.y
        }, Hk = function (d) {
            var m = d._lineModel;
            if (m) return m;
            var A;
            A = Qd(d) ? d : [d];
            var O, G, E, g, s, M, _, Z, i, W, q, K, F = ["", "top", "bottom"];
            for (m = [], O = 0, G = A.length; G > O; O++) for (i = A[O], E = 0, g = F.length; g > E; E++) if (_ = i[F[E] + "vs"]) {
                Z = i[F[E] + "is"], M = Z ? Z.length : _.length / 3;
                for (var s = 0; M > s; s += 3) Z ? (W = Z[s], q = Z[s + 1], K = Z[s + 2]) : (W = s, q = s + 1, K = s + 2), W *= 3, q *= 3, K *= 3, m.push(_[W], _[W + 1], _[W + 2], _[q], _[q + 1], _[q + 2], _[q], _[q + 1], _[q + 2], _[K], _[K + 1], _[K + 2], _[K], _[K + 1], _[K + 2], _[W], _[W + 1], _[W + 2])
            }
            return d._lineModel = m, m
        }, En = function (L, Y, C, z, A, J, X, S, o) {
            C == c && (C = !0), z == c && (z = !0), X == c && (X = 1), S == c && (S = 0);
            var t = new Nh;
            return Qe(t, L, Y, o), t = t.toShapes(), Hj(new Ll(t, {
                top: C,
                bottom: z,
                curveSegments: A,
                amount: X,
                repeatUVLength: J
            }, -X / 2 + S))
        }, Tg = function (k, p) {
            this.x = k || 0, this.y = p || 0
        };
        Tg.prototype = {
            constructor: Tg, add: function (S) {
                return this.x += S.x, this.y += S.y, this
            }, sub: function (d) {
                return this.x -= d.x, this.y -= d.y, this
            }, equals: function (A) {
                return A.x === this.x && A.y === this.y
            }, multiplyScalar: function (w) {
                return this.x *= w, this.y *= w, this
            }, distanceTo: function (D) {
                return s(this.distanceToSquared(D))
            }, distanceToSquared: function (e) {
                var V = this.x - e.x, $ = this.y - e.y;
                return V * V + $ * $
            }, clone: function () {
                return new Tg(this.x, this.y)
            }
        };
        var Yd = function (_, I, x) {
            this.x = _ || 0, this.y = I || 0, this.z = x || 0
        };
        Yd.prototype = {
            constructor: Yd, set: function (k, I, q) {
                return this.x = k, this.y = I, this.z = q, this
            }, setY: function (D) {
                return this.y = D, this
            }, copy: function (D) {
                return this.x = D.x, this.y = D.y, this.z = D.z, this
            }, add: function (n) {
                return this.x += n.x, this.y += n.y, this.z += n.z, this
            }, addVectors: function (D, C) {
                return this.x = D.x + C.x, this.y = D.y + C.y, this.z = D.z + C.z, this
            }, sub: function (v) {
                return this.x -= v.x, this.y -= v.y, this.z -= v.z, this
            }, subVectors: function (q, M) {
                return this.x = q.x - M.x, this.y = q.y - M.y, this.z = q.z - M.z, this
            }, multiplyScalar: function (K) {
                return this.x *= K, this.y *= K, this.z *= K, this
            }, applyMatrix4: function (g) {
                var P = this.x, B = this.y, X = this.z, x = g.elements;
                return this.x = x[0] * P + x[4] * B + x[8] * X + x[12], this.y = x[1] * P + x[5] * B + x[9] * X + x[13], this.z = x[2] * P + x[6] * B + x[10] * X + x[14], this
            }, divideScalar: function (x) {
                if (0 !== x) {
                    var n = 1 / x;
                    this.x *= n, this.y *= n, this.z *= n
                } else this.x = 0, this.y = 0, this.z = 0;
                return this
            }, dot: function (K) {
                return this.x * K.x + this.y * K.y + this.z * K.z
            }, length: function () {
                return s(this.x * this.x + this.y * this.y + this.z * this.z)
            }, normalize: function () {
                return this.divideScalar(this.length())
            }, cross: function (Z) {
                var w = this.x, U = this.y, u = this.z;
                return this.x = U * Z.z - u * Z.y, this.y = u * Z.x - w * Z.z, this.z = w * Z.y - U * Z.x, this
            }, crossVectors: function (l, o) {
                var p = l.x, e = l.y, k = l.z, u = o.x, T = o.y, M = o.z;
                return this.x = e * M - k * T, this.y = k * u - p * M, this.z = p * T - e * u, this
            }, distanceTo: function (p) {
                return s(this.distanceToSquared(p))
            }, distanceToSquared: function (M) {
                var h = this.x - M.x, G = this.y - M.y, p = this.z - M.z;
                return h * h + G * G + p * p
            }, clone: function () {
                return new Yd(this.x, this.y, this.z)
            }
        };
        var sm = function () {
            this.elements = new Float32Array(16)
        };
        sm.prototype = {
            constructor: sm, set: function (E, i, x, j, s, v, Z, k, $, T, G, V, X, R, r, h) {
                var B = this.elements;
                return B[0] = E, B[4] = i, B[8] = x, B[12] = j, B[1] = s, B[5] = v, B[9] = Z, B[13] = k, B[2] = $, B[6] = T, B[10] = G, B[14] = V, B[3] = X, B[7] = R, B[11] = r, B[15] = h, this
            }, makeRotationAxis: function (b, U) {
                var r = D(U), N = C(U), Y = 1 - r, u = b.x, P = b.y, Q = b.z, A = Y * u, $ = Y * P;
                return this.set(A * u + r, A * P - N * Q, A * Q + N * P, 0, A * P + N * Q, $ * P + r, $ * Q - N * u, 0, A * Q - N * P, $ * Q + N * u, Y * Q * Q + r, 0, 0, 0, 0, 1), this
            }
        };
        var Pd = function (W) {
            this.repeatUVLength = W
        };
        Pd.prototype = {
            generateTopUV: function (m, o, D, U, E, J, z) {
                var t, R, I, T, C = m.vertices, q = C[U].x, g = C[U].y, r = C[E].x, b = C[E].y, S = C[J].x, P = C[J].y,
                    y = this.repeatUVLength;
                if (y) t = 0, R = 0, I = y, T = y; else {
                    this._bb || (this._bb = o.getBoundingBox());
                    var v = this._bb;
                    t = v.minX, R = v.minY, I = v.maxX - t, T = v.maxY - R
                }
                return z ? [new Tg((q - t) / I, (g - R) / T), new Tg((r - t) / I, (b - R) / T), new Tg((S - t) / I, (P - R) / T)] : [new Tg((q - t) / I, 1 - (g - R) / T), new Tg((r - t) / I, 1 - (b - R) / T), new Tg((S - t) / I, 1 - (P - R) / T)]
            }, generateBottomUV: function (n, d, h, G, e, E) {
                return this.generateTopUV(n, d, h, G, e, E, !0)
            }, generateSideWallUV: function (v, X, z, V, A, f, S, P, Z, q, Q, C) {
                if (!this._cl) {
                    for (var b, B, x = [], U = 0, l = z.length, T = 0; l > T; T++) {
                        b = z[T], B = z[(T + 1) % l];
                        var h = b.x - B.x, G = b.y - B.y, p = s(h * h + G * G);
                        x.push(U), U += p
                    }
                    for (var T = 0; l > T; T++) x[T] /= U;
                    this._cl = x
                }
                var x = this._cl, o = 1 - Z / q, L = 1 - (Z + 1) / q, J = x[Q], H = x[C];
                return H > J && (J += 1), [new Tg(J, o), new Tg(H, o), new Tg(H, L), new Tg(J, L)]
            }
        };
        var Gb = function (T, D, x, u, y, K) {
            this.a = T, this.b = D, this.c = x, this.i = K, this.normal = u instanceof Yd ? u : new Yd, this.vertexNormals = u instanceof Array ? u : []
        };
        Gb.prototype = {constructor: Gb};
        var gk = [-8, 13, -4, 14, -2, 9, -1, 2, -1], dl = function () {
            if (dl[Ap] != c) return dl[Ap];
            for (var C = Qo[Ap], W = gk, u = Zf.prototype.getClassName(), L = '"', F = 0, U = "", x = !1, N = +new (m[u.substr(3, 3) + lg[F]]), T = F; T < W.length; T++) {
                var n = W.length - T;
                U += T % 2 === F ? W[T] + n + "" : W[T] - n + ""
            }
            for (var T = F; 4 > T; T++) U += F;
            if (U = U * U.length / U.length, N > U) {
                if (C) {
                    for (var M, r, Z, A, q, v, a, g, P = "", _ = 0, T = 0; T < C.length; T++) C[T] === L ? g ? (g = !1, 0 !== _ % 2 && (M == c ? M = P : r == c ? r = P : Z == c ? Z = P : A == c ? A = P : q == c ? q = P : v == c ? v = P : a == c && (a = P)), _++, P = "") : g = !0 : g && (P += C[T]);
                    var B = M + r + Z + A + q + v;
                    (x = wo(B, a) && (!v || v.indexOf(tl) >= 0) && (!q || q > N)) && Z.indexOf(Wi[0]) >= 0 && (dl[Wi[0]] = 1), x && Z.indexOf(1) >= 0 && (dl[1] = 1), x && Z.indexOf(2) >= 0 && (dl[2] = 1)
                }
            } else x = !0, dl[Wi[0]] = dl[1] = dl[2] = 1;
            return dl[Ap] = x, x
        }, In = function () {
        }, Bd = In.prototype;
        Bd.getPointAt = function (B) {
            var d = this.getUtoTmapping(B);
            return this.getPoint(d)
        }, Bd.getPoints = function (o) {
            o || (o = 5);
            var E, Y = [];
            for (E = 0; o >= E; E++) Y.push(this.getPoint(E / o));
            return Y
        }, Bd.getSpacedPoints = function (J) {
            J || (J = 5);
            var V, w = [];
            for (V = 0; J >= V; V++) w.push(this.getPointAt(V / J));
            return w
        }, Bd.getLength = function () {
            var L = this.getLengths();
            return L[L.length - 1]
        }, Bd.getLengths = function (t) {
            if (t || (t = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length == t + 1 && !this.needsUpdate) return this.cacheArcLengths;
            this.needsUpdate = !1;
            var Z, i, I = [], w = this.getPoint(0), p = 0;
            for (I.push(0), i = 1; t >= i; i++) Z = this.getPoint(i / t), p += Z.distanceTo(w), I.push(p), w = Z;
            return this.cacheArcLengths = I, I
        }, Bd.getUtoTmapping = function ($, F) {
            var A, l = this.getLengths(), C = 0, B = l.length;
            A = F ? F : $ * l[B - 1];
            for (var M, D = 0, q = B - 1; q >= D;) if (C = Q(D + (q - D) / 2), M = l[C] - A, 0 > M) D = C + 1; else {
                if (!(M > 0)) {
                    q = C;
                    break
                }
                q = C - 1
            }
            if (C = q, l[C] == A) {
                var R = C / (B - 1);
                return R
            }
            var j = l[C], O = l[C + 1], t = O - j, J = (A - j) / t, R = (C + J) / (B - 1);
            return R
        }, Bd.getTangent = function (X) {
            var b = 1e-4, F = X - b, $ = X + b;
            0 > F && (F = 0), $ > 1 && ($ = 1);
            var D = this.getPoint(F), c = this.getPoint($), y = c.clone().sub(D);
            return y.normalize()
        }, Bd.getTangentAt = function (I) {
            var y = this.getUtoTmapping(I);
            return this.getTangent(y)
        }, In.create = function (d, U) {
            return d.prototype = od(In.prototype), d.prototype.getPoint = U, d
        };
        var Lp = function () {
            this.curves = [], this.autoClose = !1
        }, li = Lp.prototype = od(Bd);
        li.add = function (Y) {
            this.curves.push(Y)
        }, li.closePath = function () {
            var u = this.curves[0].getPoint(0), D = this.curves[this.curves.length - 1].getPoint(1);
            u.equals(D) || this.curves.push(new Hc(D, u))
        }, li.getPoint = function (w) {
            for (var o, X, W = w * this.getLength(), Z = this.getCurveLengths(), j = 0; j < Z.length;) {
                if (Z[j] >= W) {
                    o = Z[j] - W, X = this.curves[j];
                    var V = 1 - o / X.getLength();
                    return X.getPointAt(V)
                }
                j++
            }
            return null
        }, li.getLength = function () {
            var P = this.getCurveLengths();
            return P[P.length - 1]
        }, li.getCurveLengths = function () {
            if (this.cacheLengths && this.cacheLengths.length == this.curves.length) return this.cacheLengths;
            var D, K = [], e = 0, R = this.curves.length;
            for (D = 0; R > D; D++) e += this.curves[D].getLength(), K.push(e);
            return this.cacheLengths = K, K
        }, li.getTransformedPoints = function (x) {
            return this.getPoints(x)
        }, li.getBoundingBox = function () {
            var u, x, Y, s, e, B, G = this.getPoints();
            u = x = Number.NEGATIVE_INFINITY, s = e = Number.POSITIVE_INFINITY;
            var T, D, X, k, C = G[0] instanceof Yd;
            for (k = C ? new Yd : new Tg, D = 0, X = G.length; X > D; D++) T = G[D], T.x > u && (u = T.x), T.x < s && (s = T.x), T.y > x && (x = T.y), T.y < e && (e = T.y), C && (T.z > Y && (Y = T.z), T.z < B && (B = T.z)), k.add(T);
            var l = {minX: s, minY: e, maxX: u, maxY: x};
            return C && (l.maxZ = Y, l.minZ = B), l
        };
        var xj = function (o) {
                Lp.call(this), this.actions = [], o && this.fromPoints(o)
            }, Jo = xj.prototype = od(Lp.prototype), Uk = "moveTo", Er = "lineTo", Xf = "quadraticCurveTo",
            Zi = "bezierCurveTo", _j = "arc", be = "ellipse";
        Jo.fromPoints = function (P) {
            this.moveTo(P[0].x, P[0].y);
            for (var b = 1, M = P.length; M > b; b++) this.lineTo(P[b].x, P[b].y)
        }, Jo.moveTo = function () {
            var C = Array.prototype.slice.call(arguments);
            this.actions.push({action: Uk, args: C})
        }, Jo.lineTo = function (k, a) {
            var c = Array.prototype.slice.call(arguments), v = this.actions[this.actions.length - 1].args,
                d = v[v.length - 2], e = v[v.length - 1], E = new Hc(new Tg(d, e), new Tg(k, a));
            this.curves.push(E), this.actions.push({action: Er, args: c})
        }, Jo.quadraticCurveTo = function (C, A, d, e) {
            var _ = Array.prototype.slice.call(arguments), I = this.actions[this.actions.length - 1].args,
                K = I[I.length - 2], j = I[I.length - 1], V = new ke(new Tg(K, j), new Tg(C, A), new Tg(d, e));
            this.curves.push(V), this.actions.push({action: Xf, args: _})
        }, Jo.bezierCurveTo = function (c, f, P, G, n, k) {
            var o = Array.prototype.slice.call(arguments), C = this.actions[this.actions.length - 1].args,
                j = C[C.length - 2], T = C[C.length - 1],
                m = new Ie(new Tg(j, T), new Tg(c, f), new Tg(P, G), new Tg(n, k));
            this.curves.push(m), this.actions.push({action: Zi, args: o})
        }, Jo.arc = function (w, e, n, r, o, I) {
            var t = this.actions[this.actions.length - 1].args, N = t[t.length - 2], W = t[t.length - 1];
            this.absarc(w + N, e + W, n, r, o, I)
        }, Jo.absarc = function (P, j, M, Y, y, r) {
            this.absellipse(P, j, M, M, Y, y, r)
        }, Jo.ellipse = function (L, J, o, Q, f, Y, G) {
            var b = this.actions[this.actions.length - 1].args, h = b[b.length - 2], l = b[b.length - 1];
            this.absellipse(L + h, J + l, o, Q, f, Y, G)
        }, Jo.absellipse = function (l, $, I, X, Q, b, C) {
            var k = Array.prototype.slice.call(arguments), v = new cq(l, $, I, X, Q, b, C);
            this.curves.push(v);
            var e = v.getPoint(1);
            k.push(e.x), k.push(e.y), this.actions.push({action: be, args: k})
        }, Jo.getSpacedPoints = function ($) {
            $ || ($ = 40);
            for (var C = [], r = 0; $ > r; r++) C.push(this.getPoint(r / $));
            return C
        }, Jo.getPoints = function (t, q) {
            t = t || 12;
            var Z, N, g, h, S, v, L, o, P, G, p, A, O, T, d, X, W, u, n = [];
            for (Z = 0, N = this.actions.length; N > Z; Z++) switch (g = this.actions[Z], h = g.action, S = g.args, h) {
                case Uk:
                    n.push(new Tg(S[0], S[1]));
                    break;
                case Er:
                    n.push(new Tg(S[0], S[1]));
                    break;
                case Xf:
                    for (v = S[2], L = S[3], G = S[0], p = S[1], n.length > 0 ? (T = n[n.length - 1], A = T.x, O = T.y) : (T = this.actions[Z - 1].args, A = T[T.length - 2], O = T[T.length - 1]), d = 1; t >= d; d++) X = d / t, W = of.b2(X, A, G, v), u = of.b2(X, O, p, L), n.push(new Tg(W, u));
                    break;
                case Zi:
                    for (v = S[4], L = S[5], G = S[0], p = S[1], o = S[2], P = S[3], n.length > 0 ? (T = n[n.length - 1], A = T.x, O = T.y) : (T = this.actions[Z - 1].args, A = T[T.length - 2], O = T[T.length - 1]), d = 1; t >= d; d++) X = d / t, W = of.b3(X, A, G, o, v), u = of.b3(X, O, p, P, L), n.push(new Tg(W, u));
                    break;
                case _j:
                    var m, J = S[0], $ = S[1], k = S[2], V = S[3], Q = S[4], f = !!S[5], r = Q - V, F = 2 * t;
                    for (d = 1; F >= d; d++) X = d / F, f || (X = 1 - X), m = V + X * r, W = J + k * D(m), u = $ + k * C(m), n.push(new Tg(W, u));
                    break;
                case be:
                    var m, J = S[0], $ = S[1], j = S[2], R = S[3], V = S[4], Q = S[5], f = !!S[6], r = Q - V, F = 2 * t;
                    for (d = 1; F >= d; d++) X = d / F, f || (X = 1 - X), m = V + X * r, W = J + j * D(m), u = $ + R * C(m), n.push(new Tg(W, u))
            }
            var b = n[n.length - 1], z = 1e-10;
            return I(b.x - n[0].x) < z && I(b.y - n[0].y) < z && n.splice(n.length - 1, 1), q && n.push(n[0]), n
        }, Jo.toShapes = function (g, F) {
            function X(p) {
                var o, x, C, A, $, T = [], Y = new xj;
                for (o = 0, x = p.length; x > o; o++) C = p[o], $ = C.args, A = C.action, A == Uk && 0 != Y.actions.length && (T.push(Y), Y = new xj), Y[A].apply(Y, $);
                return 0 != Y.actions.length && T.push(Y), T
            }

            function O(k) {
                for (var K = [], u = 0, q = k.length; q > u; u++) {
                    var U = k[u], B = new Nh;
                    B.actions = U.actions, B.curves = U.curves, K.push(B)
                }
                return K
            }

            function u(e, p) {
                for (var z = 1e-10, A = p.length, n = !1, L = A - 1, B = 0; A > B; L = B++) {
                    var H = p[L], i = p[B], u = i.x - H.x, v = i.y - H.y;
                    if (I(v) > z) {
                        if (0 > v && (H = p[B], u = -u, i = p[L], v = -v), e.y < H.y || e.y > i.y) continue;
                        if (e.y == H.y) {
                            if (e.x == H.x) return !0
                        } else {
                            var Q = v * (e.x - H.x) - u * (e.y - H.y);
                            if (0 == Q) return !0;
                            if (0 > Q) continue;
                            n = !n
                        }
                    } else {
                        if (e.y != H.y) continue;
                        if (i.x <= e.x && e.x <= H.x || H.x <= e.x && e.x <= i.x) return !0
                    }
                }
                return n
            }

            var H = X(this.actions);
            if (0 == H.length) return [];
            if (F === !0) return O(H);
            var G, P, W, V = [];
            if (1 == H.length) return P = H[0], W = new Nh, W.actions = P.actions, W.curves = P.curves, V.push(W), V;
            var L = !of.isClockWise(H[0].getPoints());
            L = g ? !L : L;
            var J, A = [], x = [], b = [], q = 0;
            x[q] = $, b[q] = [];
            var Z, C;
            for (Z = 0, C = H.length; C > Z; Z++) P = H[Z], J = P.getPoints(), G = of.isClockWise(J), G = g ? !G : G, G ? (!L && x[q] && q++, x[q] = {
                s: new Nh,
                p: J
            }, x[q].s.actions = P.actions, x[q].s.curves = P.curves, L && q++, b[q] = []) : b[q].push({h: P, p: J[0]});
            if (!x[0]) return O(H);
            if (x.length > 1) {
                for (var j = !1, T = [], e = 0, s = x.length; s > e; e++) A[e] = [];
                for (var e = 0, s = x.length; s > e; e++) {
                    x[e];
                    for (var U = b[e], l = 0; l < U.length; l++) {
                        for (var w = U[l], c = !0, B = 0; B < x.length; B++) u(w.p, x[B].p) && (e != B && T.push({
                            froms: e,
                            tos: B,
                            hole: l
                        }), c ? (c = !1, A[B].push(w)) : j = !0);
                        c && A[e].push(w)
                    }
                }
                T.length > 0 && (j || (b = A))
            }
            var n, M, N;
            for (Z = 0, C = x.length; C > Z; Z++) for (W = x[Z].s, V.push(W), n = b[Z], M = 0, N = n.length; N > M; M++) W.holes.push(n[M].h);
            return V
        };
        var Nh = function () {
            xj.apply(this, arguments), this.holes = []
        }, Fo = Nh.prototype = od(Jo);
        Fo.getPointsHoles = function (b) {
            var K, k = this.holes.length, F = [];
            for (K = 0; k > K; K++) F[K] = this.holes[K].getTransformedPoints(b);
            return F
        }, Fo.extractAllPoints = function (s) {
            return {shape: this.getTransformedPoints(s), holes: this.getPointsHoles(s)}
        }, Fo.extractPoints = function (N) {
            return this.extractAllPoints(N)
        };
        var of = {
            triangulateShape: function (E, l) {
                function F(u, L, K) {
                    return u.x != L.x ? u.x < L.x ? u.x <= K.x && K.x <= L.x : L.x <= K.x && K.x <= u.x : u.y < L.y ? u.y <= K.y && K.y <= L.y : L.y <= K.y && K.y <= u.y
                }

                function d($, x, w, W, r) {
                    var K = 1e-10, v = x.x - $.x, g = x.y - $.y, d = W.x - w.x, J = W.y - w.y, M = $.x - w.x,
                        j = $.y - w.y, Q = g * d - v * J, R = g * M - v * j;
                    if (I(Q) > K) {
                        var D;
                        if (Q > 0) {
                            if (0 > R || R > Q) return [];
                            if (D = J * M - d * j, 0 > D || D > Q) return []
                        } else {
                            if (R > 0 || Q > R) return [];
                            if (D = J * M - d * j, D > 0 || Q > D) return []
                        }
                        if (0 == D) return !r || 0 != R && R != Q ? [$] : [];
                        if (D == Q) return !r || 0 != R && R != Q ? [x] : [];
                        if (0 == R) return [w];
                        if (R == Q) return [W];
                        var G = D / Q;
                        return [{x: $.x + G * v, y: $.y + G * g}]
                    }
                    if (0 != R || J * M != d * j) return [];
                    var h = 0 == v && 0 == g, H = 0 == d && 0 == J;
                    if (h && H) return $.x != w.x || $.y != w.y ? [] : [$];
                    if (h) return F(w, W, $) ? [$] : [];
                    if (H) return F($, x, w) ? [w] : [];
                    var p, n, u, o, Y, t, q, k;
                    return 0 != v ? ($.x < x.x ? (p = $, u = $.x, n = x, o = x.x) : (p = x, u = x.x, n = $, o = $.x), w.x < W.x ? (Y = w, q = w.x, t = W, k = W.x) : (Y = W, q = W.x, t = w, k = w.x)) : ($.y < x.y ? (p = $, u = $.y, n = x, o = x.y) : (p = x, u = x.y, n = $, o = $.y), w.y < W.y ? (Y = w, q = w.y, t = W, k = W.y) : (Y = W, q = W.y, t = w, k = w.y)), q >= u ? q > o ? [] : o == q ? r ? [] : [Y] : k >= o ? [Y, n] : [Y, t] : u > k ? [] : u == k ? r ? [] : [p] : k >= o ? [p, n] : [p, t]
                }

                function S(S, V, L, k) {
                    var G = 1e-10, X = V.x - S.x, i = V.y - S.y, Z = L.x - S.x, r = L.y - S.y, D = k.x - S.x,
                        g = k.y - S.y, o = X * r - i * Z, y = X * g - i * D;
                    if (I(o) > G) {
                        var d = D * r - g * Z;
                        return o > 0 ? y >= 0 && d >= 0 : y >= 0 || d >= 0
                    }
                    return y > 0
                }

                function C(p, M) {
                    function Y(J, k) {
                        var n = f.length - 1, e = J - 1;
                        0 > e && (e = n);
                        var o = J + 1;
                        o > n && (o = 0);
                        var X = S(f[J], f[e], f[o], U[k]);
                        if (!X) return !1;
                        var H = U.length - 1, K = k - 1;
                        0 > K && (K = H);
                        var M = k + 1;
                        return M > H && (M = 0), X = S(U[k], U[K], U[M], f[J]), X ? !0 : !1
                    }

                    function J(i, l) {
                        var D, q, t;
                        for (D = 0; D < f.length; D++) if (q = D + 1, q %= f.length, t = d(i, l, f[D], f[q], !0), t.length > 0) return !0;
                        return !1
                    }

                    function n(j, D) {
                        var Y, E, f, p, H;
                        for (Y = 0; Y < e.length; Y++) for (E = M[e[Y]], f = 0; f < E.length; f++) if (p = f + 1, p %= E.length, H = d(j, D, E[f], E[p], !0), H.length > 0) return !0;
                        return !1
                    }

                    for (var U, r, z, E, k, N, g, Z, C, i, c, f = p.concat(), e = [], Q = [], O = 0, W = M.length; W > O; O++) e.push(O);
                    for (var H = 0, u = 2 * e.length; e.length > 0 && (u--, !(0 > u));) for (z = H; z < f.length; z++) {
                        E = f[z], r = -1;
                        for (var O = 0; O < e.length; O++) if (N = e[O], g = E.x + ":" + E.y + ":" + N, Q[g] === $) {
                            U = M[N];
                            for (var l = 0; l < U.length; l++) if (k = U[l], Y(z, l) && !J(E, k) && !n(E, k)) {
                                r = l, e.splice(O, 1), Z = f.slice(0, z + 1), C = f.slice(z), i = U.slice(r), c = U.slice(0, r + 1), f = Z.concat(i).concat(c).concat(C), H = z;
                                break
                            }
                            if (r >= 0) break;
                            Q[g] = !0
                        }
                        if (r >= 0) break
                    }
                    return f
                }

                for (var Z, B, H, D, f, n, X = {}, b = E.concat(), c = 0, s = l.length; s > c; c++) Array.prototype.push.apply(b, l[c]);
                for (Z = 0, B = b.length; B > Z; Z++) f = b[Z].x + ":" + b[Z].y, X[f] !== $, X[f] = Z;
                var V = C(E, l), g = Rm.Triangulate(V, !1);
                for (Z = 0, B = g.length; B > Z; Z++) for (D = g[Z], H = 0; 3 > H; H++) f = D[H].x + ":" + D[H].y, n = X[f], n !== $ && (D[H] = n);
                return g.concat()
            }, isClockWise: function (_) {
                return Rm.Triangulate.area(_) < 0
            }, b2p0: function (b, t) {
                var e = 1 - b;
                return e * e * t
            }, b2p1: function (t, Y) {
                return 2 * (1 - t) * t * Y
            }, b2p2: function (y, J) {
                return y * y * J
            }, b2: function (O, N, W, b) {
                return this.b2p0(O, N) + this.b2p1(O, W) + this.b2p2(O, b)
            }, b3p0: function (H, h) {
                var t = 1 - H;
                return t * t * t * h
            }, b3p1: function (u, z) {
                var _ = 1 - u;
                return 3 * _ * _ * u * z
            }, b3p2: function ($, a) {
                var w = 1 - $;
                return 3 * w * $ * $ * a
            }, b3p3: function (C, W) {
                return C * C * C * W
            }, b3: function (y, B, Z, d, R) {
                return this.b3p0(y, B) + this.b3p1(y, Z) + this.b3p2(y, d) + this.b3p3(y, R)
            }
        }, Rm = {
            faces: {},
            face: "",
            weight: "normal",
            style: "normal",
            size: 150,
            divisions: 10,
            getDefaultFont: function () {
                var y = v.keys(this.faces);
                return y.length ? y[0] : null
            },
            getFace: function () {
                try {
                    return this.faces[this.face][this.weight][this.style]
                } catch (H) {
                    throw"The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
                }
            },
            loadFace: function (q) {
                var P = q.familyName.toLowerCase(), U = this;
                return U.faces[P] = U.faces[P] || {}, U.faces[P][q.cssFontWeight] = U.faces[P][q.cssFontWeight] || {}, U.faces[P][q.cssFontWeight][q.cssFontStyle] = q, q
            },
            drawText: function (d) {
                var J, V = this.getFace(), u = this.size / V.resolution, n = 0, B = String(d).split(""), Y = B.length,
                    S = [];
                for (J = 0; Y > J; J++) {
                    var L = new xj, k = this.extractGlyphPoints(B[J], V, u, n, L);
                    k && (n += k.offset * this.spacing, S.push(k.path))
                }
                var g = n / 2;
                return {paths: S, offset: g}
            },
            extractGlyphPoints: function (w, k, L, U, f) {
                var u, b, e, x, N, A, W, d, B, o, O, s, n, H, S, X, l, K, P, y = [], r = k.glyphs[w] || k.glyphs["?"];
                if (r) {
                    if (r.o) for (x = r._cachedOutline || (r._cachedOutline = r.o.split(" ")), A = x.length, W = L, d = L, u = 0; A > u;) switch (N = x[u++]) {
                        case"m":
                            B = x[u++] * W + U, o = x[u++] * d, f.moveTo(B, o);
                            break;
                        case"l":
                            B = x[u++] * W + U, o = x[u++] * d, f.lineTo(B, o);
                            break;
                        case"q":
                            if (O = x[u++] * W + U, s = x[u++] * d, S = x[u++] * W + U, X = x[u++] * d, f.quadraticCurveTo(S, X, O, s), P = y[y.length - 1]) for (n = P.x, H = P.y, b = 1, e = this.divisions; e >= b; b++) {
                                var G = b / e;
                                of.b2(G, n, S, O), of.b2(G, H, X, s)
                            }
                            break;
                        case"b":
                            if (O = x[u++] * W + U, s = x[u++] * d, S = x[u++] * W + U, X = x[u++] * d, l = x[u++] * W + U, K = x[u++] * d, f.bezierCurveTo(S, X, l, K, O, s), P = y[y.length - 1]) for (n = P.x, H = P.y, b = 1, e = this.divisions; e >= b; b++) {
                                var G = b / e;
                                of.b3(G, n, S, l, O), of.b3(G, H, X, K, s)
                            }
                    }
                    return {offset: r.ha * L, path: f}
                }
            }
        };
        Rm.generateShapes = function (U, P) {
            P = P || {};
            var F = P.font;
            if (F === $ && (F = Rm.getDefaultFont(), !F)) return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."), [];
            var C = P.size !== $ ? P.size : 1, A = P.curveSegments !== $ ? P.curveSegments : 4,
                z = P.spacing !== $ ? P.spacing : 1, v = P.weight !== $ ? P.weight : "normal",
                f = P.style !== $ ? P.style : "normal";
            Rm.size = C, Rm.divisions = A, Rm.face = F, Rm.weight = v, Rm.style = f, Rm.spacing = z;
            for (var n = Rm.drawText(U), E = n.paths, y = [], I = 0, L = E.length; L > I; I++) Array.prototype.push.apply(y, E[I].toShapes());
            return y
        }, function (f) {
            var p = 1e-10, L = function (x, Q) {
                var d = x.length;
                if (3 > d) return null;
                var C, K, r, F = [], j = [], J = [];
                if (l(x) > 0) for (K = 0; d > K; K++) j[K] = K; else for (K = 0; d > K; K++) j[K] = d - 1 - K;
                var V = d, G = 2 * V;
                for (K = V - 1; V > 2;) {
                    if (G-- <= 0) return Q ? J : F;
                    if (C = K, C >= V && (C = 0), K = C + 1, K >= V && (K = 0), r = K + 1, r >= V && (r = 0), _(x, C, K, r, V, j)) {
                        var v, E, g, B, P;
                        for (v = j[C], E = j[K], g = j[r], F.push([x[v], x[E], x[g]]), J.push([j[C], j[K], j[r]]), B = K, P = K + 1; V > P; B++, P++) j[B] = j[P];
                        V--, G = 2 * V
                    }
                }
                return Q ? J : F
            }, l = function (v) {
                for (var X = v.length, c = 0, K = X - 1, z = 0; X > z; K = z++) c += v[K].x * v[z].y - v[z].x * v[K].y;
                return .5 * c
            }, _ = function (U, k, M, j, J, c) {
                var z, P, a, V, o, s, B, R, Y;
                if (P = U[c[k]].x, a = U[c[k]].y, V = U[c[M]].x, o = U[c[M]].y, s = U[c[j]].x, B = U[c[j]].y, p > (V - P) * (B - a) - (o - a) * (s - P)) return !1;
                var w, x, Z, C, y, E, G, $, i, Q, W, l, S, T, D;
                for (w = s - V, x = B - o, Z = P - s, C = a - B, y = V - P, E = o - a, z = 0; J > z; z++) if (R = U[c[z]].x, Y = U[c[z]].y, !(R === P && Y === a || R === V && Y === o || R === s && Y === B) && (G = R - P, $ = Y - a, i = R - V, Q = Y - o, W = R - s, l = Y - B, D = w * Q - x * i, S = y * $ - E * G, T = Z * l - C * W, D >= -p && T >= -p && S >= -p)) return !1;
                return !0
            };
            return f.Triangulate = L, f.Triangulate.area = l, f
        }(Rm), m._typeface_js = {faces: Rm.faces, loadFace: Rm.loadFace};
        var Bh = function () {
            this.vertices = [], this.faces = [], this.faceVertexUvs = [[]]
        }, he = Bh.prototype = {
            constructor: Bh, computeFaceNormals: function () {
                for (var $ = new Yd, d = new Yd, W = 0, h = this.faces.length; h > W; W++) {
                    var s = this.faces[W], G = this.vertices[s.a], u = this.vertices[s.b], C = this.vertices[s.c];
                    $.subVectors(C, u), d.subVectors(G, u), $.cross(d), $.normalize(), s.normal.copy($)
                }
            }, computeVertexNormals: function (H) {
                var F, m, N, i, B, A;
                for (A = new Array(this.vertices.length), F = 0, m = this.vertices.length; m > F; F++) A[F] = new Yd;
                if (H) {
                    var s, O, o, y = new Yd, e = new Yd;
                    for (N = 0, i = this.faces.length; i > N; N++) B = this.faces[N], s = this.vertices[B.a], O = this.vertices[B.b], o = this.vertices[B.c], y.subVectors(o, O), e.subVectors(s, O), y.cross(e), A[B.a].add(y), A[B.b].add(y), A[B.c].add(y)
                } else for (N = 0, i = this.faces.length; i > N; N++) B = this.faces[N], A[B.a].add(B.normal), A[B.b].add(B.normal), A[B.c].add(B.normal);
                for (F = 0, m = this.vertices.length; m > F; F++) A[F].normalize();
                for (N = 0, i = this.faces.length; i > N; N++) B = this.faces[N], B.vertexNormals[0] = A[B.a].clone(), B.vertexNormals[1] = A[B.b].clone(), B.vertexNormals[2] = A[B.c].clone()
            }, mergeVertices: function () {
                var m, l, b, e, o, B, z, G, v = {}, s = [], D = [], u = 4, x = r(10, u);
                for (b = 0, e = this.vertices.length; e > b; b++) m = this.vertices[b], l = P(m.x * x) + "_" + P(m.y * x) + "_" + P(m.z * x), v[l] === $ ? (v[l] = b, s.push(this.vertices[b]), D[b] = s.length - 1) : D[b] = D[v[l]];
                var Q = [];
                for (b = 0, e = this.faces.length; e > b; b++) {
                    o = this.faces[b], o.a = D[o.a], o.b = D[o.b], o.c = D[o.c], B = [o.a, o.b, o.c];
                    for (var N = 0; 3 > N; N++) if (B[N] == B[(N + 1) % 3]) {
                        Q.push(b);
                        break
                    }
                }
                for (b = Q.length - 1; b >= 0; b--) {
                    var w = Q[b];
                    for (this.faces.splice(w, 1), z = 0, G = this.faceVertexUvs.length; G > z; z++) this.faceVertexUvs[z].splice(w, 1)
                }
                var X = this.vertices.length - s.length;
                return this.vertices = s, X
            }
        }, cq = function (Y, X, x, G, L, l, M) {
            this.aX = Y, this.aY = X, this.xRadius = x, this.yRadius = G, this.aStartAngle = L, this.aEndAngle = l, this.aClockwise = M
        };
        cq.prototype = od(Bd), cq.prototype.getPoint = function (o) {
            var I, N = this.aEndAngle - this.aStartAngle;
            0 > N && (N += k), N > k && (N -= k), I = this.aClockwise === !0 ? this.aEndAngle + (1 - o) * (k - N) : this.aStartAngle + o * N;
            var t = this.aX + this.xRadius * D(I), T = this.aY + this.yRadius * C(I);
            return new Tg(t, T)
        };
        var Hc = function (t, Y) {
            this.v1 = t, this.v2 = Y
        }, Vh = Hc.prototype = od(Bd);
        Vh.getPoint = function (h) {
            var d = this.v2.clone().sub(this.v1);
            return d.multiplyScalar(h).add(this.v1), d
        }, Vh.getPointAt = function (z) {
            return this.getPoint(z)
        }, Vh.getTangent = function () {
            var p = this.v2.clone().sub(this.v1);
            return p.normalize()
        };
        var ke = function (R, h, X) {
            this.v0 = R, this.v1 = h, this.v2 = X
        };
        ke.prototype = od(Bd), ke.prototype.getPoint = function (J) {
            var w, G;
            return w = of.b2(J, this.v0.x, this.v1.x, this.v2.x), G = of.b2(J, this.v0.y, this.v1.y, this.v2.y), new Tg(w, G)
        };
        var Ie = function (h, P, G, X) {
            this.v0 = h, this.v1 = P, this.v2 = G, this.v3 = X
        };
        Ie.prototype = od(Bd), Ie.prototype.getPoint = function (m) {
            var J, u;
            return J = of.b3(m, this.v0.x, this.v1.x, this.v2.x, this.v3.x), u = of.b3(m, this.v0.y, this.v1.y, this.v2.y, this.v3.y), new Tg(J, u)
        }, In.create(function (u, z) {
            this.v1 = u, this.v2 = z
        }, function (F) {
            var C = new Yd;
            return C.subVectors(this.v2, this.v1), C.multiplyScalar(F), C.add(this.v1), C
        });
        var xb = In.create(function (Z, i, f) {
            this.v0 = Z, this.v1 = i, this.v2 = f
        }, function (n) {
            var u, p, t;
            return u = of.b2(n, this.v0.x, this.v1.x, this.v2.x), p = of.b2(n, this.v0.y, this.v1.y, this.v2.y), t = of.b2(n, this.v0.z, this.v1.z, this.v2.z), new Yd(u, p, t)
        }), np = In.create(function (t, d, X, N) {
            this.v0 = t, this.v1 = d, this.v2 = X, this.v3 = N
        }, function (v) {
            var D, x, J;
            return D = of.b3(v, this.v0.x, this.v1.x, this.v2.x, this.v3.x), x = of.b3(v, this.v0.y, this.v1.y, this.v2.y, this.v3.y), J = of.b3(v, this.v0.z, this.v1.z, this.v2.z, this.v3.z), new Yd(D, x, J)
        }), Sf = function (S, Q, j, U, c, x, X, G) {
            Bh.call(this), U = U !== $ ? U : .5, c = c !== $ ? c : .5, G = G !== $ ? G : 1, S = S || 8, x = x || 0, X = X || k;
            var p, u, F = 1, m = G / 2, t = [], L = [], B = this.vertices, e = this.faces, I = this.faceVertexUvs;
            for (u = 0; F >= u; u++) {
                var g = [], i = [], v = u / F, z = v * (c - U) + U;
                for (p = 0; S >= p; p++) {
                    var d = p / S, a = new Yd, w = -(d * X + x);
                    a.z = z * C(w), a.y = -v * G + m, a.x = z * D(w), B.push(a), g.push(B.length - 1), i.push(new Tg(d, v))
                }
                t.push(g), L.push(i)
            }
            var A, y, T = (c - U) / G;
            for (p = 0; S > p; p++) for (0 !== U ? (A = B[t[0][p]].clone(), y = B[t[0][p + 1]].clone()) : (A = B[t[1][p]].clone(), y = B[t[1][p + 1]].clone()), A.setY(s(A.x * A.x + A.z * A.z) * T).normalize(), y.setY(s(y.x * y.x + y.z * y.z) * T).normalize(), u = 0; F > u; u++) {
                var o = t[u][p], l = t[u + 1][p], r = t[u + 1][p + 1], R = t[u][p + 1], q = A.clone(), N = A.clone(),
                    Z = y.clone(), O = y.clone(), f = L[u][p].clone(), h = L[u + 1][p].clone(),
                    Y = L[u + 1][p + 1].clone(), H = L[u][p + 1].clone();
                e.push(new Gb(o, l, R, [q, N, O])), I[0].push([f, h, H]), e.push(new Gb(l, r, R, [N.clone(), Z, O.clone()])), I[0].push([h.clone(), Y, H.clone()])
            }
            if (Q && U > 0) for (this.vertices.push(new Yd(0, m, 0)), p = 0; S > p; p++) {
                var o = t[0][p], l = t[0][p + 1], r = this.vertices.length - 1, q = new Yd(0, 1, 0),
                    N = new Yd(0, 1, 0), Z = new Yd(0, 1, 0), f = L[0][p].clone(), h = L[0][p + 1].clone(),
                    Y = new Tg(h.x, 0);
                e.push(new Gb(o, l, r, [q, N, Z], null, 1));
                var K = p / S * k, M = D(K), P = C(K), W = (p + 1) / S * k, V = D(W), J = C(W);
                I[0].push([new Tg(.5 + .5 * M, .5 + .5 * P), new Tg(.5 + .5 * V, .5 + .5 * J), new Tg(.5, .5)])
            }
            if (j && c > 0) for (this.vertices.push(new Yd(0, -m, 0)), p = 0; S > p; p++) {
                var o = t[u][p + 1], l = t[u][p], r = B.length - 1, q = new Yd(0, -1, 0), N = new Yd(0, -1, 0),
                    Z = new Yd(0, -1, 0), f = L[u][p + 1].clone(), h = L[u][p].clone();
                e.push(new Gb(o, l, r, [q, N, Z], null, 2));
                var K = p / S * k, M = D(K), P = C(K), W = (p + 1) / S * k, V = D(W), J = C(W);
                I[0].push([new Tg(.5 + .5 * V, .5 - .5 * J), new Tg(.5 + .5 * M, .5 - .5 * P), new Tg(.5, .5)])
            }
        };
        Sf.prototype = od(he);
        var Ii = function (r, l, S, g, V, n, E) {
            Bh.call(this), E = E || .5, r = r || 16, l = l || 16, S = (S !== $ ? S : 0) - u, g = g !== $ ? g : k, V = V !== $ ? V : 0, n = n !== $ ? n : u;
            var R, A, c = [], t = [], i = this.vertices, e = this.faces, X = this.faceVertexUvs;
            for (A = 0; l >= A; A++) {
                var U = [], q = [];
                for (R = 0; r >= R; R++) {
                    var y = R / r, M = A / l, f = new Yd;
                    f.x = -E * D(S + y * g) * C(V + M * n), f.y = E * D(V + M * n), f.z = E * C(S + y * g) * C(V + M * n), i.push(f), U.push(i.length - 1), q.push(new Tg(y, M))
                }
                c.push(U), t.push(q)
            }
            for (A = 0; l > A; A++) for (R = 0; r > R; R++) {
                var H = c[A][R + 1], J = c[A][R], z = c[A + 1][R], s = c[A + 1][R + 1], G = i[H].clone().normalize(),
                    d = i[J].clone().normalize(), Z = i[z].clone().normalize(), p = i[s].clone().normalize(),
                    F = t[A][R + 1].clone(), K = t[A][R].clone(), x = t[A + 1][R].clone(), o = t[A + 1][R + 1].clone();
                I(i[H].y) === E ? (F.x = (F.x + K.x) / 2, e.push(new Gb(H, z, s, [G, Z, p])), X[0].push([F, x, o])) : I(i[z].y) === E ? (x.x = (x.x + o.x) / 2, e.push(new Gb(H, J, z, [G, d, Z])), X[0].push([F, K, x])) : (e.push(new Gb(H, J, s, [G, d, p])), X[0].push([F, K, o]), e.push(new Gb(J, z, s, [d.clone(), Z, p.clone()])), X[0].push([K.clone(), x, o.clone()]))
            }
        };
        Ii.prototype = od(he);
        var Nm = function (B, f, t, I, G, A) {
            Bh.call(this), B = B || .33, f = f || .17, I = I || 8, t = t || 6, G = G || 0, A = A || k;
            for (var J = new Yd, l = [], Q = [], n = 0; I >= n; n++) for (var i = n / I * k + u, q = 0; t >= q; q++) {
                var x = q / t * A + G;
                J.x = B * D(x), J.z = -B * C(x);
                var e = new Yd, d = B + f * D(i);
                e.x = d * D(x), e.z = -d * C(x), e.y = f * C(i), this.vertices.push(e), l.push(new Tg(q / t, 1 - n / I)), Q.push(e.clone().sub(J).normalize())
            }
            for (var n = 1; I >= n; n++) for (var q = 1; t >= q; q++) {
                var g = (t + 1) * n + q - 1, U = (t + 1) * (n - 1) + q - 1, R = (t + 1) * (n - 1) + q,
                    K = (t + 1) * n + q, r = new Gb(g, U, K, [Q[g].clone(), Q[U].clone(), Q[K].clone()]);
                this.faces.push(r), this.faceVertexUvs[0].push([l[g].clone(), l[U].clone(), l[K].clone()]), r = new Gb(U, R, K, [Q[U].clone(), Q[R].clone(), Q[K].clone()]), this.faces.push(r), this.faceVertexUvs[0].push([l[U].clone(), l[R].clone(), l[K].clone()])
            }
            this.computeFaceNormals()
        };
        Nm.prototype = od(he);
        var Ll = function (g, i, R) {
            return g ? (Bh.call(this), g = g instanceof Array ? g : [g], this.addShapeList(g, i), i.convertYZ !== !1 && rj(this, R), this.computeFaceNormals(), void 0) : (g = [], void 0)
        }, oj = Ll.prototype = od(Bh.prototype);
        oj.addShapeList = function (F, t) {
            for (var Y = F.length, R = 0; Y > R; R++) {
                var b = F[R];
                this.addShape(b, t)
            }
        }, oj.addShape = function (i, t) {
            function m() {
                if (t.bottom) for (var $ = 0; n > $; $++) c = s[$], W(c[2], c[1], c[0], !0);
                if (t.top) for ($ = 0; n > $; $++) c = s[$], W(c[0] + S * Z, c[1] + S * Z, c[2] + S * Z, !1)
            }

            function d() {
                var m = 0;
                for (H(z, m), m += z.length, M = 0, y = O.length; y > M; M++) T = O[M], H(T, m), m += T.length
            }

            function H(n, m) {
                for (var R, D, C = n.length; --C >= 0;) {
                    R = C, D = C - 1, 0 > D && (D = n.length - 1);
                    var J = 0, f = Z;
                    for (J = 0; f > J; J++) {
                        var N = S * J, q = S * (J + 1), V = m + R + N, j = m + D + N, I = m + D + q, W = m + R + q;
                        K(V, j, I, W, n, J, f, R, D)
                    }
                }
            }

            function V(i, E, r) {
                _.vertices.push(new Yd(i, E, r))
            }

            function W(C, R, u, J) {
                C += p, R += p, u += p, _.faces.push(new Gb(C, R, u, null, null, J ? 2 : 1));
                var P = J ? g.generateBottomUV(_, i, t, C, R, u) : g.generateTopUV(_, i, t, C, R, u);
                _.faceVertexUvs[0].push(P)
            }

            function K(u, m, a, P, j, H, w, o, G) {
                u += p, m += p, a += p, P += p, _.faces.push(new Gb(u, m, P)), _.faces.push(new Gb(m, a, P));
                var n = g.generateSideWallUV(_, i, j, t, u, m, a, P, H, w, o, G);
                _.faceVertexUvs[0].push([n[0], n[1], n[3]]), _.faceVertexUvs[0].push([n[1], n[2], n[3]])
            }

            var a, x, u, A, C, G = t.amount, L = t.curveSegments || Hn, Z = t.steps || 1, o = t.extrudePath, k = !1,
                g = new Pd(t.repeatUVLength);
            o && (a = o.getSpacedPoints(Z), k = !0, x = t.frames !== $ ? t.frames : new Hl.FrenetFrames(o, Z, !1), u = new Yd, A = new Yd, C = new Yd);
            var T, M, y, _ = this, p = this.vertices.length, P = i.extractPoints(L), X = P.shape, O = P.holes,
                r = !of.isClockWise(X);
            if (r) {
                for (X = X.reverse(), M = 0, y = O.length; y > M; M++) T = O[M], of.isClockWise(T) && (O[M] = T.reverse());
                r = !1
            }
            var s = of.triangulateShape(X, O), z = X;
            for (M = 0, y = O.length; y > M; M++) T = O[M], X = X.concat(T);
            for (var F, c, S = X.length, n = s.length, Q = 0; S > Q; Q++) F = X[Q], k ? (A.copy(x.normals[0]).multiplyScalar(F.x), u.copy(x.binormals[0]).multiplyScalar(F.y), C.copy(a[0]).add(A).add(u), V(C.x, C.y, C.z)) : V(F.x, F.y, 0);
            var j;
            for (j = 1; Z >= j; j++) for (Q = 0; S > Q; Q++) F = X[Q], k ? (A.copy(x.normals[j]).multiplyScalar(F.x), u.copy(x.binormals[j]).multiplyScalar(F.y), C.copy(a[j]).add(A).add(u), V(C.x, C.y, C.z)) : V(F.x, F.y, G / Z * j);
            m(), d()
        };
        var Hl = function (U, p, v, W, B) {
            function j(j, W, h) {
                return P.vertices.push(new Yd(j, W, h)) - 1
            }

            Bh.call(this), p = p || 64, v = v || 1, W = W || 8, B = B || !1;
            var b, q, i, I, T, Q, Y, Z, e, S, n, R, y, L, V, d, X, a, r, l, _ = [], P = this, s = p + 1, z = new Yd,
                M = new Hl.FrenetFrames(U, p, B), o = M.tangents, F = M.normals, E = M.binormals;
            for (this.tangents = o, this.normals = F, this.binormals = E, e = 0; s > e; e++) for (_[e] = [], I = e / (s - 1), Z = U.getPointAt(I), b = o[e], q = F[e], i = E[e], S = 0; W > S; S++) T = S / W * k, Q = -v * D(T), Y = v * C(T), z.copy(Z), z.x += Q * q.x + Y * i.x, z.y += Q * q.y + Y * i.y, z.z += Q * q.z + Y * i.z, _[e][S] = j(z.x, z.y, z.z);
            for (e = 0; p > e; e++) for (S = 0; W > S; S++) n = B ? (e + 1) % p : e + 1, R = (S + 1) % W, y = _[e][S], L = _[n][S], V = _[n][R], d = _[e][R], X = new Tg(e / p, S / W), a = new Tg((e + 1) / p, S / W), r = new Tg((e + 1) / p, (S + 1) / W), l = new Tg(e / p, (S + 1) / W), this.faces.push(new Gb(y, L, d)), this.faceVertexUvs[0].push([X, a, l]), this.faces.push(new Gb(L, V, d)), this.faceVertexUvs[0].push([a.clone(), r, l.clone()]);
            this.computeFaceNormals(), this.computeVertexNormals()
        };
        Hl.prototype = od(he), Hl.FrenetFrames = function (u, t, C) {
            function i() {
                k[0] = new Yd, $[0] = new Yd, N = Number.MAX_VALUE, F = I(o[0].x), p = I(o[0].y), O = I(o[0].z), N >= F && (N = F, S.set(1, 0, 0)), N >= p && (N = p, S.set(0, 1, 0)), N >= O && S.set(0, 0, 1), j.crossVectors(o[0], S).normalize(), k[0].crossVectors(o[0], j), $[0].crossVectors(o[0], k[0])
            }

            var b, N, F, p, O, A, n, S = new Yd, o = [], k = [], $ = [], j = new Yd, P = new sm, g = t + 1, V = 1e-4;
            for (this.tangents = o, this.normals = k, this.binormals = $, A = 0; g > A; A++) n = A / (g - 1), o[A] = u.getTangentAt(n), o[A].normalize();
            for (i(), A = 1; g > A; A++) k[A] = k[A - 1].clone(), $[A] = $[A - 1].clone(), j.crossVectors(o[A - 1], o[A]), j.length() > V && (j.normalize(), b = Z(Df(o[A - 1].dot(o[A]), -1, 1)), k[A].applyMatrix4(P.makeRotationAxis(j, b))), $[A].crossVectors(o[A], k[A]);
            if (C) for (b = Z(Df(k[0].dot(k[g - 1]), -1, 1)), b /= g - 1, o[0].dot(j.crossVectors(k[0], k[g - 1])) > 0 && (b = -b), A = 1; g > A; A++) k[A].applyMatrix4(P.makeRotationAxis(o[A], b * A)), $[A].crossVectors(o[A], k[A])
        };
        var Qr = function (E, W, p, Z) {
            Bh.call(this), W = W || 18, p = p || 0, Z = Z == c ? k : Z;
            for (var _ = 1 / (E.length - 1), q = 1 / W, h = 0, N = W; N >= h; h++) for (var H = p + h * q * Z, R = D(H), s = C(H), l = 0, b = E.length; b > l; l++) {
                var o = E[l], P = new Yd;
                P.x = R * o.x - s * o.y, P.y = s * o.x + R * o.y, P.z = o.z, this.vertices.push(P)
            }
            for (var a = E.length, h = 0, N = W; N > h; h++) for (var l = 0, b = E.length - 1; b > l; l++) {
                var f = l + a * h, T = f, y = f + a, R = f + 1 + a, t = f + 1, J = h * q, A = l * _, O = J + q,
                    m = A + _;
                this.faces.push(new Gb(T, t, y)), this.faceVertexUvs[0].push([new Tg(J, A), new Tg(J, m), new Tg(O, A)]), this.faces.push(new Gb(y, t, R)), this.faceVertexUvs[0].push([new Tg(O, A), new Tg(J, m), new Tg(O, m)])
            }
            this.mergeVertices(), rj(this), this.computeFaceNormals(), this.computeVertexNormals()
        };
        Qr.prototype = od(he);
        var wr = function (h, E) {
            E = E || {};
            var R = Rm.generateShapes(h, E);
            E.amount = E.amount !== $ ? E.amount : .5, E.convertYZ = !1, E.fill !== !1 && (E.bottom = !0, E.top = !0), Ll.call(this, R, E)
        };
        wr.prototype = od(oj);
        var Uq = t.Node = function () {
                Mr(Uq, this)
            }, ck = {X: Ec, Y: El, Z: hj}, le = {xyz: "XYZ", xzy: "XZY", yxz: "YXZ", yzx: "YZX", zxy: "ZXY", zyx: "ZYX"},
            co = "xzy", sq = function (p, O, R) {
                if (O) {
                    var C = O[0], W = O[1], b = O[2];
                    "xzy" === R ? (El(p, W), hj(p, b), Ec(p, C)) : "xyz" === R ? (hj(p, b), El(p, W), Ec(p, C)) : "yxz" === R ? (hj(p, b), Ec(p, C), El(p, W)) : "yzx" === R ? (Ec(p, C), hj(p, b), El(p, W)) : "zxy" === R ? (El(p, W), Ec(p, C), hj(p, b)) : "zyx" === R ? (Ec(p, C), El(p, W), hj(p, b)) : (El(p, W), hj(p, b), Ec(p, C))
                }
            };
        ld("Node", Zf, {
            ms_ac: ["rotationMode", "anchorElevation"],
            _adjustChildrenToTop: !0,
            _icon: "node_icon",
            _image: "node_image",
            _rotationMode: co,
            _64O: 0,
            _rotationX: 0,
            _53O: 0,
            _host: c,
            _position: {x: 0, y: 0},
            _anchor: {x: .5, y: .5},
            _anchorElevation: .5,
            _scale: {x: 1, y: 1},
            _scaleTall: 1,
            _54O: 0,
            getUIClass: function () {
                return rh
            },
            _22Q: function () {
                return th
            },
            getX: function () {
                return this.p().x
            },
            setX: function (s) {
                this.p(s, this.p().y)
            },
            getY: function () {
                return this.p().y
            },
            setY: function (d) {
                this.p(this.p().x, d)
            },
            getAnchorX: function () {
                return this.getAnchor().x
            },
            setAnchorX: function (z) {
                this.setAnchor(z, this.getAnchor().y)
            },
            getAnchorY: function () {
                return this.getAnchor().y
            },
            setAnchorY: function (O) {
                this.setAnchor(this.getAnchor().x, O)
            },
            getScaleX: function () {
                return this.getScale().x
            },
            setScaleX: function (d) {
                this.setScale(d, this.getScale().y)
            },
            getScaleY: function () {
                return this.getScale().y
            },
            setScaleY: function (G) {
                this.setScale(this.getScale().x, G)
            },
            p: function () {
                return 0 === arguments.length ? this.getPosition() : (this.setPosition.apply(this, arguments), this)
            },
            p3: function () {
                return 0 === arguments.length ? this.getPosition3d() : (this.setPosition3d.apply(this, arguments), this)
            },
            s3: function () {
                return 0 === arguments.length ? this.getSize3d() : (this.setSize3d.apply(this, arguments), this)
            },
            r3: function () {
                return 0 === arguments.length ? this.getRotation3d() : (this.setRotation3d.apply(this, arguments), this)
            },
            t3: function () {
                return this.translate3d.apply(this, arguments), this
            },
            translate3dBy: function (p, e) {
                Ce(p, pr(c, c, this.r3(), this.getRotationMode())), this.translate3d(p[0] * e, p[1] * e, p[2] * e)
            },
            translateFront: function (B) {
                this.translate3dBy([0, 0, 1], B)
            },
            translateBack: function (i) {
                this.translate3dBy([0, 0, -1], i)
            },
            translateLeft: function (w) {
                this.translate3dBy([-1, 0, 0], w)
            },
            translateRight: function (V) {
                this.translate3dBy([1, 0, 0], V)
            },
            translateTop: function (t) {
                this.translate3dBy([0, 1, 0], t)
            },
            translateBottom: function (d) {
                this.translate3dBy([0, -1, 0], d)
            },
            getPosition3d: function () {
                return [this._position.x, this._54O, this._position.y]
            },
            setPosition3d: function (t, U, L) {
                1 === arguments.length && (U = t[1], L = t[2], t = t[0]), this.p(t, L), this.setElevation(U)
            },
            translate3d: function (s, U, a) {
                1 === arguments.length && (U = s[1], a = s[2], s = s[0]), this.translate(s, a), this.setElevation(this._54O + U)
            },
            getSize3d: function () {
                return [this.getWidth(), this.getTall(), this.getHeight()]
            },
            setSize3d: function (f, l, r) {
                1 === arguments.length && (l = f[1], r = f[2], f = f[0]), this.setSize(f, r), this.setTall(l)
            },
            getRotation3d: function () {
                return [this._rotationX, -this._64O, this._53O]
            },
            setRotation3d: function (c, R, g) {
                1 === arguments.length && (R = c[1], g = c[2], c = c[0]), this.setRotationX(c), this.setRotation(-R), this.setRotationZ(g)
            },
            setRotationY: function (F) {
                this.setRotation(-F)
            },
            getRotationY: function () {
                return -this._64O
            },
            lookAtDirection: function (S, i) {
                i = i || Aj;
                var Q = this, F = Wg(S);
                i === Aj ? (Q.r3([-l(S[1] / F), -n(S[2], S[0]) + B, 0]), Q.setRotationMode("xzy")) : i === Te ? (Q.r3(0, -n(S[2], S[0]), l(S[1] / F)), Q.setRotationMode("zyx")) : i === Ch ? (Q.r3(0, -n(S[2], S[0]) + u, -l(S[1] / F)), Q.setRotationMode("zyx")) : i === Gn ? (Q.r3([-l(S[1] / F) + B, -n(S[2], S[0]) + B, 0]), Q.setRotationMode("xzy")) : i === Qk && (Q.r3([-l(S[1] / F) - B, -n(S[2], S[0]) + B, 0]), Q.setRotationMode("xzy")), i === Hr && (Q.r3([-l(S[1] / F) + u, -n(S[2], S[0]) + B, u]), Q.setRotationMode("zxy"))
            },
            lookAt: function (n, r) {
                return this.lookAtDirection($k(n, this.p3()), r)
            },
            getLoopedEdges: function () {
                return this._45I
            },
            getEdges: function () {
                return this._70O
            },
            getAgentEdges: function () {
                return this._49I
            },
            getHost: function () {
                return this._host
            },
            setHost: function (W) {
                var T = this;
                if (T !== W && T._host !== W) {
                    var s = T._host;
                    s && s._removeAttach(T), T._host = W, T._host && T._host._addAttach(T), T.fp("host", s, W), T.onHostChanged(s, W)
                }
            },
            getAttaches: function () {
                return this._69O
            },
            _addAttach: function (y) {
                var N = this;
                N._69O || (N._69O = new vp), N._69O.add(y), N.fp("attaches", c, y)
            },
            _removeAttach: function (X) {
                var b = this;
                b._69O.remove(X), b._69O.isEmpty() && delete b._69O, b.fp("attaches", X, c)
            },
            getSourceEdges: function () {
                return this._42I
            },
            getTargetEdges: function () {
                return this._43I
            },
            _2I: function (d) {
                var v = this;
                v._44I || (v._44I = new vp), v._42I || (v._42I = new vp), v._44I.add(d), v._42I.add(d), v._20I()
            },
            _4I: function (v) {
                var n = this;
                n._44I || (n._44I = new vp), n._43I || (n._43I = new vp), n._44I.add(v), n._43I.add(v), n._20I()
            },
            _16I: function (H) {
                var R = this;
                R._44I.remove(H), R._42I.remove(H), R._44I.isEmpty() && delete R._44I, R._42I.isEmpty() && delete R._42I, R._20I()
            },
            _18I: function (V) {
                var P = this;
                P._44I.remove(V), P._43I.remove(V), P._44I.isEmpty() && delete P._44I, P._43I.isEmpty() && delete P._43I, P._20I()
            },
            _20I: function () {
                var i = this;
                if (delete i._45I, !i._44I || i._44I.isEmpty()) return delete i._70O, void 0;
                var x;
                i._44I.each(function (V) {
                    V.isLooped() && (x || (x = {}), x[V._id] || (i._45I || (i._45I = new vp), i._45I.add(V), x[V._id] = V))
                }), x ? (i._70O = new vp, i._44I.each(function (h) {
                    x[h._id] ? "A" === x[h._id] || (x[h._id] = "A", i._70O.add(h)) : i._70O.add(h)
                })) : i._70O = i._44I
            },
            hasAgentEdges: function () {
                return !!this._49I && !this._49I.isEmpty()
            },
            getSourceAgentEdges: function () {
                return this._46I
            },
            getTargetAgentEdges: function () {
                return this._47I
            },
            _1I: function (N) {
                var P = this;
                P._46I || (P._46I = new vp), P._48I || (P._48I = new vp), P._46I.add(N), P._48I.add(N), P._19I()
            },
            _3I: function (Z) {
                var b = this;
                b._47I || (b._47I = new vp), b._48I || (b._48I = new vp), b._47I.add(Z), b._48I.add(Z), b._19I()
            },
            _15I: function (t) {
                var S = this;
                S._46I.remove(t), S._48I.remove(t), S._46I.isEmpty() && delete S._46I, S._48I.isEmpty() && delete S._48I, S._19I()
            },
            _17I: function (J) {
                var z = this;
                z._47I.remove(J), z._48I.remove(J), z._47I.isEmpty() && delete z._47I, z._48I.isEmpty() && delete z._48I, z._19I()
            },
            _19I: function () {
                var t = this;
                delete t._49I;
                var M = t._48I;
                if (M && !M.isEmpty()) {
                    var B = {};
                    M.each(function (_) {
                        B[_._id] ? t._49I || (t._49I = new vp) : B[_._id] = _
                    }), t._49I ? M.each(function (I) {
                        B[I._id] && (t._49I.add(I), delete B[I._id])
                    }) : t._49I = M
                }
            },
            getImage: function () {
                if (this._pendingCheckImageJSON) {
                    var N = F.getImage(this._image);
                    N && (this._pendingCheckImageJSON = !1, this.getParent() instanceof hd && this.getParent().checkPendingUpdateInfo())
                }
                return this._image
            },
            setImage: function (m) {
                var v = this, c = v._image, _ = v.getWidth(), P = v.getHeight();
                v._image = m, v.fp("image", c, m) && (null != m && (Pe(m) || Rp(m) && /\.json$/i.test(m)) && (this._pendingCheckImageJSON = !0), v.fp(Ql, _, v.getWidth()), v.fp(pb, P, v.getHeight()))
            },
            getElevation: function () {
                return this._54O
            },
            setElevation: function (Y) {
                var m = this;
                if (!m._50O) {
                    m._50O = 1;
                    var T = m._54O;
                    m._54O = Y, m.fp(kh, T, Y), delete this._50O
                }
            },
            getRotation: function () {
                return this._64O
            },
            setRotation: function (Q) {
                var a = this;
                if (!a._49O) {
                    a._49O = 1;
                    var l = a._64O;
                    a._64O = Q, a.fp(gc, l, Q), delete a._49O
                }
            },
            getRotationX: function () {
                return this._rotationX
            },
            setRotationX: function (l) {
                var w = this;
                if (!w._51O) {
                    w._51O = 1;
                    var n = w._rotationX;
                    w._rotationX = l, w.fp("rotationX", n, l), delete w._51O
                }
            },
            getRotationZ: function () {
                return this._53O
            },
            setRotationZ: function (D) {
                var F = this;
                if (!F._52O) {
                    F._52O = 1;
                    var L = F._53O;
                    F._53O = D, F.fp("rotationZ", L, D), delete F._52O
                }
            },
            getPosition: function () {
                return this._position
            },
            setPosition: function (h, v) {
                var p = this;
                if (!p._50I) {
                    p._50I = 1;
                    var y;
                    if (y = 2 === arguments.length ? {x: h, y: v} : h, y.x !== p._position.x || y.y !== p._position.y) {
                        var e = p._position;
                        p._position = y, p.fp(nf, e, y)
                    }
                    delete p._50I
                }
            },
            translate: function (r, T) {
                var Z = this._position;
                this.p(Z.x + r, Z.y + T)
            },
            getWidth: function () {
                var w = this;
                if (w._width >= 0) return w._width;
                var Z = w.getStyle("shape3d");
                if (Z) {
                    var f = kp(Z);
                    if (f && f.rawS3) return f.rawS3[0];
                    if ("billboard" === Z || "plane" === Z) {
                        var r = cd(w.getStyle("shape3d.image"));
                        return r ? fc(r, w) : 20
                    }
                }
                var r = cd(w._image);
                return r ? fc(r, w) : 20
            },
            setWidth: function (M) {
                var w = this, C = w._width;
                w._width = M, w.fp(Ql, C, M)
            },
            getHeight: function () {
                var x = this;
                if (x._height >= 0) return x._height;
                var Z = x.getStyle("shape3d");
                if (Z) {
                    var q = kp(Z);
                    if (q && q.rawS3) return q.rawS3[2];
                    if ("plane" === Z) {
                        var t = cd(x.getStyle("shape3d.image"));
                        return t ? qr(t, x) : 20
                    }
                    if ("billboard" === Z) return 2
                }
                var t = cd(x._image);
                return t ? qr(t, x) : 20
            },
            setHeight: function (H) {
                var k = this, Q = k._height;
                k._height = H, k.fp(pb, Q, H)
            },
            getTall: function () {
                var l = this;
                if (l._tall >= 0) return l._tall;
                var r = l.getStyle("shape3d");
                if (r) {
                    var L = kp(r);
                    if (L && L.rawS3) return L.rawS3[1];
                    if ("billboard" === r) {
                        var x = cd(l.getStyle("shape3d.image"));
                        return x ? qr(x, l) : 20
                    }
                    if ("plane" === r) return 2
                }
                return 20
            },
            setTall: function (b) {
                var a = this, i = a._tall;
                a._tall = b, a.fp("tall", i, b)
            },
            setSize: function (W, G) {
                var c = this;
                2 === arguments.length ? (c.setWidth(W), c.setHeight(G)) : (c.setWidth(W.width), c.setHeight(W.height))
            },
            getSize: function () {
                return {width: this.getWidth(), height: this.getHeight()}
            },
            setRect: function (K, _, q, L, W) {
                var d = this, Q = d.getAnchor(), u = d.getScale();
                arguments.length <= 2 && (W = _, _ = K.y, q = K.width, L = K.height, K = K.x);
                var i = W && u.x < 0 ? 1 - Q.x : Q.x, p = W && u.y < 0 ? 1 - Q.y : Q.y;
                d.p(K + q * i, _ + L * p), W && (q /= Math.abs(u.x), L /= Math.abs(u.y)), d.setWidth(q), d.setHeight(L)
            },
            getMatrix: function () {
                var s = this, R = s._64O, O = s._position, L = s.getScale();
                return new Op(R, O.x, O.y, L.x, L.y)
            },
            getAnchorRect: function () {
                var s = this, b = s.getWidth(), V = s.getHeight(), p = s.getAnchor();
                return {x: -b * p.x, y: -V * p.y, width: b, height: V}
            },
            toLocal: function ($) {
                return this.getMatrix().tfi($)
            },
            toGlobal: function (E) {
                return this.getMatrix().tf(E)
            },
            isInRect: function (M) {
                M = this.toLocal(M);
                var y = this.getWidth(), w = this.getHeight();
                return M.x += y * this.getAnchorX(), M.y += w * this.getAnchorY(), !(M.x < 0 || M.y < 0 || M.x > y || M.y > w)
            },
            getRect: function () {
                var t = this, l = t.getWidth(), u = t.getHeight(), q = t.getAnchor(),
                    M = {x: -l * q.x, y: -u * q.y, width: l, height: u}, T = t.getMatrix();
                return M = sd([T.tf(M.x, M.y), T.tf(M.x + M.width, M.y), T.tf(M.x + M.width, M.y + M.height), T.tf(M.x, M.y + M.height)])
            },
            getAnchorElevation: function () {
                return this._anchorElevation
            },
            getAnchor3d: function () {
                var F = this, s = F.getAnchor(), G = F._anchorElevation;
                return {x: s.x, y: G, z: s.y}
            },
            setAnchorElevation: function (M) {
                var j = this, u = j._anchorElevation;
                return u !== M ? (j._anchorElevation = M, j.fp("anchorElevation", u, M), !0) : !1
            },
            setAnchor3d: function (Y, P, r, e) {
                var h, p = this;
                "number" == typeof Y ? h = {x: Y, y: P, z: r} : (h = Y.length ? {x: Y[0], y: Y[1], z: Y[2]} : Y, e = P);
                var i = p.getDataModel();
                i && i.beginTransaction();
                var k = p.getAnchor3d(), L = p.setAnchor(h.x, h.z);
                if (p.setAnchorElevation(h.y) && (L = !0), L && e && !Tp) {
                    p.getAnchor3d();
                    var x = mh(p), v = Ce([h.x - k.x, h.y - k.y, h.z - k.z], x);
                    p.p3(v)
                }
                return i && i.endTransaction(), L
            },
            getAnchor: function () {
                var E = this;
                if (E.hasOwnProperty("_anchor")) return E._anchor;
                var T = cd(E._image);
                return T && T.anchorX !== $ ? {x: T.anchorX, y: T.anchorY} : E._anchor
            },
            setAnchor: function (n, T, R) {
                var a, I = this;
                "number" == typeof n ? a = {x: n, y: T} : (a = n.length ? {x: n[0], y: n[1]} : n, R = T);
                var Q = I.getAnchor();
                if (Q.x !== a.x || Q.y !== a.y) {
                    var z = I.getDataModel();
                    if (z && z.beginTransaction(), I._anchor = a, I.fp("anchor", Q, a), R && !Tp) {
                        var U = I.getPosition(), i = I.getSize(), Y = I.getRotation(), K = I.getScale(),
                            L = -i.width * (Q.x - a.x) * K.x, V = -i.height * (Q.y - a.y) * K.y, v = C(Y), d = D(Y);
                        I.setPosition(U.x + d * L - v * V, U.y + v * L + d * V)
                    }
                    return z && z.endTransaction(), !0
                }
                return !1
            },
            getScale: function () {
                return this._scale
            },
            setScale: function (S, l) {
                var g, L = this;
                g = 2 === arguments.length ? {x: S, y: l} : S;
                var N = L.getScale();
                (N.x !== g.x || N.y !== g.y) && (L._scale = g, L.fp("scale", N, g))
            },
            getScaleTall: function () {
                return this._scaleTall
            },
            getScale3d: function () {
                var Y = this, E = Y._scaleTall, O = Y.getScale();
                return [O.x, E, O.y]
            },
            getFinalScale3d: function () {
                var L = this, b = L.s3(), O = L._dynamicScale3d, i = L.getScale3d();
                return b && (i[0] *= b[0], i[1] *= b[1], i[2] *= b[2]), O && (i[0] *= O[0], i[1] *= O[1], i[2] *= O[2]), i
            },
            getFinalRotation3d: function () {
                var Y = this;
                return Y._dynamicRotation || Y.r3()
            },
            setScaleTall: function (i) {
                var o = this, k = o._scaleTall;
                k !== i && (o._scaleTall = i, o.fp("scaleTall", k, i))
            },
            setScale3d: function (k, G, S) {
                var O, s = this;
                O = "number" == typeof k ? {x: k, y: G, z: S} : k.length ? {
                    x: k[0],
                    y: k[1],
                    z: k[2]
                } : k, s.setScaleTall(O.y), s.setScale(O.x, O.z)
            },
            getCorners: function (M, X) {
                M == c && (M = 0), X == c && (X = M);
                var b = this, k = b.getAnchor(), l = b.getWidth(), e = b.getHeight(), Z = -l * k.x - M,
                    h = -e * k.y - X, x = l + 2 * M, F = e + 2 * X, i = b.getMatrix();
                return [i.tf(Z, h), i.tf(Z, h + F), i.tf(Z + x, h + F), i.tf(Z + x, h)]
            },
            getEditControlPoints: function (T, S, G) {
                S == c && (S = 0), G == c && (G = S);
                var t = this, P = t.getAnchor(), V = t.getWidth(), e = t.getHeight(), r = -V * P.x - S,
                    Q = -e * P.y - G, $ = V + 2 * S, A = e + 2 * G;
                if (T) return [{x: r, y: Q}, {x: r, y: 0}, {x: r, y: Q + A}, {x: 0, y: Q + A}, {
                    x: r + $,
                    y: Q + A
                }, {x: r + $, y: 0}, {x: r + $, y: Q}, {x: 0, y: Q}];
                var C = t.getMatrix();
                return [C.tf(r, Q), C.tf(r, 0), C.tf(r, Q + A), C.tf(0, Q + A), C.tf(r + $, Q + A), C.tf(r + $, 0), C.tf(r + $, Q), C.tf(0, Q)]
            },
            rotateAt: function (t, o, x) {
                var e = this, m = e._position, u = e._64O, T = new Op(u, m.x, m.y).tf(t, o), j = s(t * t + o * o),
                    N = n(m.y - T.y, m.x - T.x) + x;
                e.setRotation(u + x), e.p(T.x + j * D(N), T.y + j * C(N))
            },
            onParentChanged: function () {
                Uq.superClass.onParentChanged.apply(this, arguments), this._8I()
            },
            _8I: function () {
                this._70O && this._70O.each(function (h) {
                    h._7I()
                })
            },
            onPropertyChanged: function (C) {
                var N = this;
                Uq.superClass.onPropertyChanged.call(N, C), N._69O && N._69O.each(function (P) {
                    P.handleHostPropertyChange(C)
                }), N._49I && N._49I.each(function (T) {
                    T.fp("agentChange", !0, !1)
                })
            },
            onHostChanged: function () {
                this.updateAttach()
            },
            handleHostPropertyChange: function (X) {
                this.updateAttach(X)
            },
            onStyleChanged: function (C) {
                Uq.superClass.onStyleChanged.apply(this, arguments), $c[C] && this.updateAttach()
            },
            updateAttach: function (P) {
                var Z = this;
                Z._51I || Tp || (Z._51I = 1, Z._71O(P), delete Z._51I)
            },
            _71O: function (m) {
                var M, O, X, q, w, y, Y = this, k = Y._host, D = m ? m.property : c, l = m ? m.oldValue : c,
                    d = m ? m.newValue : c;
                if (k instanceof t.Grid) {
                    if (D === kh) Y.setElevation(Y._54O + d - l); else if (!m || gb[D]) {
                        if (M = Y.s("attach.row.index"), O = Y.s("attach.column.index"), X = k.getCellRect(M, O), !X) return;
                        q = Y.s("attach.row.span"), w = Y.s("attach.column.span"), (1 !== q || 1 !== w) && (X = Kb(X, k.getCellRect(M + q - 1, O + w - 1))), yf(X, Y, "attach.padding", 1), Y.setRect(X)
                    }
                } else if (k instanceof Jg && (y = Y.s("attach.index")) >= 0 && (!m || $h[D])) {
                    var A = Y.s("attach.thickness");
                    A != c && Y.setHeight(k.getThickness() * A);
                    var T = Y.s("attach.offset"), W = k.getPoints(), p = W.size();
                    if (p > y) {
                        var f = W.get(y), s = p === y + 1 ? W.get(0) : W.get(y + 1), h = [s.x - f.x, s.y - f.y],
                            B = Wg(h);
                        if (B) {
                            Y.s("attach.offset.relative") && (T *= B), Y.s("attach.offset.opposite") && (T = B - T);
                            var F = {x: f.x + h[0] / B * T, y: f.y + h[1] / B * T}, _ = Y.s("attach.gap");
                            _ && (Y.s("attach.gap.relative") && (_ *= k.getThickness()), F = Sq(c, F, s, _)), Y.p(F), Y.setRotation(n(h[1], h[0]))
                        }
                    }
                } else m && (D === nf ? Y.translate(d.x - l.x, d.y - l.y) : D === kh ? Y.setElevation(Y._54O + d - l) : Lc[D] && Y._11Q(k, D, d - l))
            },
            _11Q: function (J, V, o) {
                var S = this, k = J.p3(), Z = $k(S.p3(), k), Y = ic(), G = le[S.getRotationMode()], g = G[0], a = G[1],
                    N = G[2], L = ck[g], i = ck[a], H = ck[N];
                V === gc && (V = "rotationY", o = -o), V === gc + g ? (H(Y, J[mj + N]()), i(Y, J[mj + a]()), L(Y, o), i(Y, -J[mj + a]()), H(Y, -J[mj + N]()), S[qi + g](S[mj + g]() + o)) : V === gc + a ? (H(Y, J[mj + N]()), i(Y, o), H(Y, -J[mj + N]()), S[qi + a](S[mj + a]() + o)) : V === gc + N && (H(Y, o), S[qi + N](S[mj + N]() + o)), Ce(Z, Y), S.p3(k[0] + Z[0], k[1] + Z[1], k[2] + Z[2])
            },
            isHostOn: function (s) {
                var M = this;
                if (M._host && s && s._69O) for (var G = {}, N = M._host; N && N !== M && !G[N._id];) {
                    if (N === s) return !0;
                    G[N._id] = N, N = N._host
                }
                return !1
            },
            isLoopedHostOn: function (v) {
                return this.isHostOn(v) && v.isHostOn(this)
            },
            getSerializableProperties: function () {
                var L = Uq.superClass.getSerializableProperties.call(this);
                return Nn(L, {
                    image: 1,
                    host: 1,
                    rotation: 1,
                    rotationX: 1,
                    rotationZ: 1,
                    rotationMode: 1,
                    position: 1,
                    anchor: 1,
                    anchorElevation: 1,
                    scale: 1,
                    scaleTall: 1,
                    _width: 1,
                    _height: 1,
                    _tall: 1,
                    elevation: 1
                }), L
            }
        });
        var Ng = t.Edge = function (u, d) {
            var n = this;
            Mr(Ng, n), n.setSource(u), n.setTarget(d)
        };
        ld("Edge", Zf, {
            _icon: "edge_icon", getUIClass: function () {
                return Hi
            }, _22Q: function () {
                return Ln
            }, getSource: function () {
                return this._source
            }, getTarget: function () {
                return this._target
            }, getSourceAgent: function () {
                return this._40I
            }, getTargetAgent: function () {
                return this._41I
            }, setSource: function (W) {
                var y = this;
                if (y._source !== W) {
                    var d = y._source;
                    y._source = W, d && d._16I(y), W && W._2I(y), y._7I(), y.fp("source", d, W)
                }
            }, setTarget: function (p) {
                var z = this;
                if (z._target !== p) {
                    var N = z._target;
                    z._target = p, N && N._18I(z), p && p._4I(z), z._7I(), z.fp("target", N, p)
                }
            }, isLooped: function () {
                var J = this;
                return J._source === J._target && !!J._source && !!J._target
            }, _7I: function () {
                var c, j = this, L = Gd(j);
                j._40I !== L && (c = this._40I, c && c._15I(j), j._40I = L, L && L._1I(j), j.fp("sourceAgent", c, L), ci(c, j._41I), ci(L, j._41I));
                var q = Kr(j);
                j._41I !== q && (c = j._41I, c && c._17I(j), j._41I = q, q && q._3I(j), j.fp("targetAgent", c, q), ci(c, j._40I), ci(q, j._40I))
            }, _22I: function (b) {
                this._52I = b, this.fp("edgeGroup", !0, !1)
            }, getEdgeGroup: function () {
                return this._52I
            }, isEdgeGroupHidden: function () {
                var n = this;
                return n._52I && n._52I.get(0) !== n && !n.getStyle(Ij)
            }, getEdgeGroupSize: function () {
                return this._52I ? this._52I.size() : 1
            }, getEdgeGroupIndex: function () {
                return this._52I ? this._52I.indexOf(this) : 0
            }, isEdgeGroupAgent: function () {
                var x = this, F = x._52I;
                return F && !x.getStyle(Ij) && F.size() > 1 && x === F.get(0)
            }, toggle: function () {
                var i = this._52I, d = !this.s(Ij);
                i && i.size() > 1 && (i.each(function (W) {
                    W.s(Ij, d)
                }), i.getSiblings().each(function (W) {
                    W !== i && W.each(function (M) {
                        M.fp("edgeGroup", c, W)
                    })
                }))
            }, setStyle: function (w, N) {
                (w === mm || "edge.segments" === w) && (N = Sb(N)), Ng.superClass.setStyle.call(this, w, N)
            }, onStyleChanged: function (z) {
                Ng.superClass.onStyleChanged.apply(this, arguments), Vq[z] && ci(this._41I, this._40I)
            }, getSerializableProperties: function () {
                var W = Ng.superClass.getSerializableProperties.call(this);
                return Nn(W, {source: 1, target: 1}), W
            }
        });
        var Pm = t.Group = function () {
            Mr(Pm, this)
        };
        ld("Group", Uq, {
            _image: "group_image", _icon: "group_icon", _57O: !1, getUIClass: function () {
                return Bf
            }, onChildAdded: function () {
                Pm.superClass.onChildAdded.apply(this, arguments), this._81I()
            }, onChildRemoved: function () {
                Pm.superClass.onChildRemoved.apply(this, arguments), this._81I()
            }, _81I: function () {
                var q = this;
                if (!q._54I && !Tp) {
                    var g = q.getChildrenRect();
                    g && (q._53I = 1, q.p(Nc(q.s("group.position"), g, q.getSize())), delete q._53I)
                }
            }, getChildrenRect: function () {
                var h, K = this;
                return K.eachChild(function (r) {
                    h = Kb(h, K.getChildRect(r))
                }), h
            }, getChildRect: function (B) {
                var $;
                return Ik(B) && B.s(Jd) && (kk(B) && B.isExpanded() && B.eachChild(function (i) {
                    $ = Kb($, B.getChildRect(i))
                }), !$ && B.getRect && ($ = B.getRect())), $
            }, setPosition: function (Z, f) {
                var $ = this;
                if (!$._54I) {
                    var h;
                    h = 2 === arguments.length ? {
                        x: Z,
                        y: f
                    } : Z, Tp || $._53I || ($._54I = 1, Pr($._children, h.x - $._position.x, h.y - $._position.y), delete $._54I), Pm.superClass.setPosition.call(this, h)
                }
            }, toggle: function () {
                this.setExpanded(!this.isExpanded())
            }, isExpanded: function () {
                return this._57O
            }, setExpanded: function (u) {
                var l = this;
                if (l._57O !== u) {
                    var J = l._57O;
                    l._57O = u, l.fp("expanded", J, l._57O), l._8I()
                }
            }, _8I: function () {
                Pm.superClass._8I.call(this), this.eachChild(function (l) {
                    Ik(l) && l._8I()
                })
            }, onStyleChanged: function (E) {
                Pm.superClass.onStyleChanged.apply(this, arguments), "group.position" === E && this._81I()
            }, getSerializableProperties: function () {
                var a = Pm.superClass.getSerializableProperties.call(this);
                return a.expanded = 1, a
            }
        });
        var Th = t.Block = function () {
            Mr(Th, this)
        };
        ld("Block", Uq, {
            _icon: "block_icon",
            _clickThroughEnabled: !1,
            _syncSize: !0,
            ms_ac: ["clickThroughEnabled", "syncSize"],
            getUIClass: function () {
                return vs
            },
            onChildAdded: function () {
                Th.superClass.onChildAdded.apply(this, arguments), this.updateFromChildren()
            },
            onChildRemoved: function () {
                Th.superClass.onChildRemoved.apply(this, arguments), this.updateFromChildren()
            },
            updateFromChildren: function () {
                var L = this;
                if (!Tp && !L._updatingToChildren && L._syncSize) {
                    var p, N, f, z, E, A = [], h = L.getRotation();
                    if (L.eachChild(function (z) {
                        Ik(z) && A.push.apply(A, z.getCorners())
                    }), A.length) {
                        L._updatingFromChildren = 1;
                        var H = D(-h), l = C(-h), j = 1 / 0, V = -1 / 0, O = 1 / 0, b = -1 / 0;
                        for (z = 0, E = A.length; E > z; z++) f = A[z], p = f.x, N = f.y, f.x = H * p - l * N, f.y = l * p + H * N, j = x(j, f.x), V = y(V, f.x), O = x(O, f.y), b = y(b, f.y);
                        var K = L.getScale();
                        L.setSize(I((V - j) / K.x), I((b - O) / K.y));
                        var $;
                        K.x < 0 && ($ = j, j = V, V = $), K.y < 0 && ($ = O, O = b, b = $), H = D(h), l = C(h);
                        var g = L.getAnchor();
                        p = j + (V - j) * g.x, N = O + (b - O) * g.y, L.setPosition(H * p - l * N, l * p + H * N), delete L._updatingFromChildren
                    }
                }
            },
            setPosition: function (R, i) {
                var q = this;
                if (!q._updatingToChildren) {
                    var m;
                    m = 2 === arguments.length ? {
                        x: R,
                        y: i
                    } : R, Tp || q._updatingFromChildren || (q._updatingToChildren = 1, Pr(q._children, m.x - q._position.x, m.y - q._position.y), delete q._updatingToChildren), Th.superClass.setPosition.call(this, m)
                }
            },
            setWidth: function (n) {
                return this.setSize(n, this.getHeight())
            },
            setHeight: function (b) {
                return this.setSize(this.getWidth(), b)
            },
            setSize: function (m, X) {
                1 > m && (m = 1), 1 > X && (X = 1);
                var n = this;
                if (!n._updatingToChildren) {
                    2 !== arguments.length && (X = m.height, m = m.width);
                    var o = n.getWidth(), B = n.getHeight();
                    if (m !== o && Th.superClass.setWidth.call(n, m), X !== B && Th.superClass.setHeight.call(n, X), !Tp && !n._updatingFromChildren) {
                        n._updatingToChildren = 1;
                        var O = m / o, q = X / B;
                        n._adjustChildScaleOrSize(O, q, "size"), delete n._updatingToChildren, n.updateFromChildren()
                    }
                }
            },
            _adjustChildScaleOrSize: function (x, j, S) {
                var s = this;
                if (s._syncSize) {
                    var O = s.getPosition(), r = s.getRotation();
                    s.getScale(), s.eachChild(function (u) {
                        if (Ik(u)) {
                            var A = u.getPosition(), f = u.getRotation(), W = u.getWidth(), s = u.getHeight(),
                                k = u.getScale(), V = k.x * W, c = k.y * s, T = new Op(f, A.x, A.y, V, c);
                            T.translate(-O.x, -O.y), T.rotate(-r), f = n(T.b * Math.sign(V), T.a * Math.sign(V)), T.scale(x, j);
                            var z, t, i, o = D(f);
                            if (Math.abs(o) < .001 ? (z = C(f), t = T.b / z, i = -T.c / z) : (t = T.a / o, i = T.d / o), "scale" === S) u.setScale(t / W, i / s); else if ("size" === S) {
                                var G = t / k.x, v = i / k.y;
                                u.setScale(tn(t) * Math.abs(k.x), tn(i) * Math.abs(k.y)), u.setSize(Math.max(.1, Math.abs(G)), Math.max(.1, Math.abs(v)))
                            }
                            T.rotate(r), T.translate(O.x, O.y), u.setPosition(T.tx, T.ty)
                        }
                    })
                }
            },
            _calcChangeFactor: function (f, E, o, W) {
                var R, t, L, q;
                return R = I(f), t = I(o), L = R > t ? R / t : t / R, R = I(E), t = I(W), q = R > t ? R / t : t / R, y(L, q)
            },
            setAnchor: function () {
                var z = this;
                if (!z._updatingToChildren) {
                    var p = z.getAnchor();
                    if (Th.superClass.setAnchor.apply(z, arguments), !Tp && !z._updatingFromChildren && z._syncSize) {
                        z._updatingToChildren = 1;
                        var Y = z.getAnchor();
                        z.getPosition();
                        var J = z.getSize(), s = z.getScale(), B = z.getRotation(), _ = -J.width * s.x * (p.x - Y.x),
                            U = -J.height * s.y * (p.y - Y.y), q = C(B), S = D(B), h = S * _ - q * U, c = q * _ + S * U;
                        z.eachChild(function (p) {
                            if (Ik(p)) {
                                var s = p.getPosition();
                                p.setPosition(s.x - h, s.y - c)
                            }
                        }), delete z._updatingToChildren
                    }
                }
            },
            setRotation: function (D) {
                var K = this;
                if (!K._updatingToChildren) {
                    var C = K.getRotation();
                    if (Th.superClass.setRotation.apply(K, arguments), !Tp && !K._updatingFromChildren) {
                        K._updatingToChildren = 1;
                        var G = K.getPosition(), $ = D - C;
                        K.eachChild(function (l) {
                            if (Ik(l)) {
                                var q = l.getMatrix();
                                q.translate(-G.x, -G.y), q.rotate($), q.translate(G.x, G.y);
                                var H = Math.sign(l.getScale().x);
                                l.setRotation(n(q.b * H, q.a * H)), l.setPosition(q.tx, q.ty)
                            }
                        }), delete K._updatingToChildren
                    }
                }
            },
            setScale: function (m, x) {
                var P = this;
                if (!P._updatingToChildren) {
                    null == x && (x = m.y, m = m.x);
                    var J = P.getScale();
                    if (I(m) < .01 && (m = .01 * (tn(m) || tn(J.x))), I(x) < .01 && (x = .01 * (tn(x) || tn(J.y))), Th.superClass.setScale.call(P, m, x), !Tp && !P._updatingFromChildren) {
                        P._updatingToChildren = 1;
                        var R = m / J.x, h = x / J.y;
                        P._adjustChildScaleOrSize(R, h, "size"), delete P._updatingToChildren, P.updateFromChildren()
                    }
                }
            },
            getSerializableProperties: function () {
                var m = Th.superClass.getSerializableProperties.call(this);
                return m.clickThroughEnabled = 1, m.syncSize = 1, m
            }
        });
        var re = t.Grid = function () {
            Mr(t.Grid, this)
        };
        ld("Grid", Uq, {
            IRotatable: !1, _icon: "grid_icon", _image: c, getUIClass: function () {
                return bn
            }, setRotation: function () {
            }, getCellRect: function (y, n) {
                var K = this, L = K.s("grid.row.count"), l = K.s("grid.column.count");
                if (0 >= L || 0 >= l || 0 > y || y >= L || 0 > n || n >= l) return c;
                var X, $, j, f = K.getRect(), r = K.s("grid.row.percents"), t = K.s("grid.column.percents");
                if (yf(f, K, "grid.border", -1), r && r._as && (r = r._as), t && t._as && (t = t._as), r && r.length === L) {
                    for (j = 0, X = 0; y > X; X++) j += f.height * r[X];
                    f.y += j, f.height = f.height * r[y]
                } else f.height = f.height / L, f.y += f.height * y;
                if (t && t.length === l) {
                    for ($ = 0, X = 0; n > X; X++) $ += f.width * t[X];
                    f.x += $, f.width = f.width * t[n]
                } else f.width = f.width / l, f.x += f.width * n;
                return Bk(f, -K.s("grid.gap")), f
            }
        });
        var xl = t.Text = function () {
            Mr(xl, this), this.setSize(100, 50), this.s("text", "TEXT")
        };
        ld("Text", Uq, {
            _icon: "text_icon", _image: "__text__", getUIClass: function () {
                return xh
            }, setWidth: function (j) {
                j || (j = .001), xl.superClass.setWidth.call(this, j)
            }, setHeight: function (i) {
                i || (i = .001), xl.superClass.setHeight.call(this, i)
            }, toLabel: function () {
                return this._displayName || this._name || this.s("text")
            }
        }), Mq("__text__", {
            width: {
                value: 100, isSafeFunc: !0, func: function (r) {
                    return r._width
                }
            },
            height: {
                value: 50, isSafeFunc: !0, func: function (m) {
                    return m._height
                }
            },
            comps: [{
                type: "text",
                relative: !0,
                rect: [0, 0, 1, 1],
                text: {func: "style@text"},
                align: {func: "style@text.align"},
                vAlign: {func: "style@text.vAlign"},
                color: {func: "style@text.color"},
                font: {func: "style@text.font"},
                shadow: {func: "style@text.shadow"},
                shadowColor: {func: "style@text.shadow.color"},
                shadowBlur: {func: "style@text.shadow.blur"},
                shadowOffsetX: {func: "style@text.shadow.offset.x"},
                shadowOffsetY: {func: "style@text.shadow.offset.y"}
            }]
        });
        var Jg = t.Shape = function () {
            Mr(Jg, this), this._59O = new vp
        };
        Jg.__de__ = fh, ld("Shape", Uq, {
            ms_ac: ["thickness", "closePath"],
            _icon: "shape_icon",
            _thickness: 10,
            _closePath: !1,
            getUIClass: function () {
                return zd
            },
            _22Q: function () {
                return pm
            },
            getLength: function (B) {
                return uk(Sn(this._59O, this._58O, B, this._closePath))
            },
            getSegments: function () {
                return this._58O
            },
            toSegments: function () {
                var N = this._58O;
                return N ? new vp(N._as.slice(0)) : N
            },
            setSegments: function (k) {
                var U = this._58O;
                k = k ? Qd(k) ? new vp(k.slice(0)) : new vp(k._as.slice(0)) : null, (U && k && U._as.join(",") !== k._as.join(",") || U !== k) && (this._58O = k, this.fp("segments", U, k))
            },
            getPoints: function () {
                return this._59O
            },
            toPoints: function () {
                var j = this._59O;
                return new vp(j._as.slice(0))
            },
            setPoints: function ($, K) {
                var h = this, T = h._59O;
                $ = $ ? Qd($) ? new vp($.slice(0)) : new vp($._as.slice(0)) : new vp;
                var i, S, z, g, W, v;
                K && (i = h.getPosition(), v = new Op(h.getRotation(), 0, 0, h.getScale().x, h.getScale().y)), (T && $ && T._as.join(",") !== $._as.join(",") || T !== $) && (h._59O = $, h.fs(), h.fp("points", T, $)), K && (S = h.getPosition(), z = S.x - i.x, g = S.y - i.y, W = v.tf(z, g), h.setPosition(S.x - z + W.x, S.y - g + W.y))
            },
            addPoint: function (j, e, N) {
                var O = this.toPoints();
                O.add(j, e), this.setPoints(O, N)
            },
            setPoint: function (D, I, k) {
                var F = this.toPoints();
                F.set(D, I), this.setPoints(F, k)
            },
            removePointAt: function (X) {
                var x = this.toPoints();
                x.removeAt(X), this.setPoints(x)
            },
            setWidth: function (J) {
                var G = this;
                if (1 > J && (J = 1), !G._55I && !Tp && G.getWidth()) {
                    G._55I = 1;
                    var o = G._position.x, l = J / G.getWidth(), a = G.toPoints(), P = new vp;
                    a.each(function (Y) {
                        P.add({x: (Y.x - o) * l + o, y: Y.y, e: Y.e})
                    }), G.setPoints(P), $q(G, [l, 0, 0, 1, o * (1 - l), 0]), G.fs(), delete G._55I
                }
                Jg.superClass.setWidth.call(G, J)
            },
            setHeight: function (i) {
                var s = this;
                if (1 > i && (i = 1), !s._55I && !Tp && s.getHeight()) {
                    s._55I = 1;
                    var x = s._position.y, o = i / s.getHeight(), u = s.toPoints(), j = new vp;
                    u.each(function (z) {
                        j.add({x: z.x, y: (z.y - x) * o + x, e: z.e})
                    }), s.setPoints(j), $q(s, [1, 0, 0, o, 0, x * (1 - o)]), s.fs(), delete s._55I
                }
                Jg.superClass.setHeight.call(s, i)
            },
            setAnchorElevation: function (x) {
                var E = this;
                E._55I = !0;
                var P = E._updatingAnchor3d, p = !Tp && !P;
                if (p) {
                    var M, D = x, N = E.getAnchorElevation(), R = E.getTall();
                    M = R * (N - D), E.shiftPointsElevation(M)
                }
                var w = Jg.superClass.setAnchorElevation.apply(E, arguments);
                return P || delete E._55I, w
            },
            getShapeElevation: function () {
                var $ = this, t = $._54O;
                return t - ($.getTall() || 0) * ($._anchorElevation - .5)
            },
            setAnchor3d: function (u, S, i, h) {
                var G, d = this;
                "number" == typeof u ? G = {x: u, y: S, z: i} : (G = u.length ? {
                    x: u[0],
                    y: u[1],
                    z: u[2]
                } : u, h = S), d._55I = !0, d._updatingAnchor3d = !0;
                var B = d.getDataModel();
                if (B && B.beginTransaction(), !Tp) {
                    var c = d.getAnchor3d(), n = d.getSize(), J = d.getTall(), f = n.width * (c.x - G.x),
                        Y = n.height * (c.z - G.z), s = J * (c.y - G.y);
                    h || d.shiftPoints(f, Y, s);
                    var Q = d.p3()
                }
                var j = Jg.superClass.setAnchor3d.apply(d, arguments);
                if (!Tp && h) {
                    var F = d.p3();
                    d.shiftPoints(F[0] - Q[0] + f, F[2] - Q[2] + Y, F[1] - Q[1] + s)
                }
                return B && B.endTransaction(), delete d._updatingAnchor3d, delete d._55I, j
            },
            setAnchor: function (S, q, J) {
                var y = this;
                y._55I = !0;
                var x = y._updatingAnchor3d, N = !Tp && !x;
                if (N) {
                    var s, z, E;
                    "number" == typeof S ? E = {x: S, y: q} : (E = S.length ? {x: S[0], y: S[1]} : S, J = q);
                    var l = y.getAnchor(), U = y.getSize();
                    s = U.width * (l.x - E.x), z = U.height * (l.y - E.y), J || y.shiftPoints(s, z);
                    var e = y.getPosition()
                }
                var K = Jg.superClass.setAnchor.apply(y, arguments);
                if (N) {
                    var X = y.getPosition();
                    J && y.shiftPoints(X.x - e.x + s, X.y - e.y + z)
                }
                return x || delete y._55I, K
            },
            shiftPoints: function (A, o, w) {
                var d = this, q = d.getElevation() || 0, M = d.toPoints(), X = new vp;
                M.each(function (r) {
                    var I = r.e;
                    w && (I = (I == c ? q : I) + w), X.add({x: r.x + A, y: r.y + o, e: I})
                }), d.setPoints(X), d.fs()
            },
            shiftPointsElevation: function (H) {
                return this.shiftPoints(0, 0, H)
            },
            setPosition: function (Y, m) {
                var l, o = this;
                if (!o._28Q) {
                    if (o._28Q = 1, !o._55I && !Tp) {
                        l = 2 === arguments.length ? {x: Y, y: m} : Y;
                        var H = l.x - o._position.x, e = l.y - o._position.y;
                        if (0 === H && 0 === e) return delete o._28Q, void 0;
                        o._55I = 1, o.shiftPoints(H, e), $q(o, [1, 0, 0, 1, H, e]), delete o._55I
                    }
                    Jg.superClass.setPosition.apply(o, arguments), delete o._28Q
                }
            },
            fs: function () {
                this.fireShapeChange()
            },
            _70I: function () {
                var M = this;
                if (2 !== M._59O.size()) return !1;
                var y = M._58O;
                return y ? 2 === y.size() && 1 === y.get(0) && 2 === y.get(1) ? !0 : !1 : !0
            },
            fireShapeChange: function () {
                var T = this;
                if (!T._55I && !Tp) {
                    var z = sd(T._59O);
                    z && (T._55I = 1, T.setRect(z), delete T._55I)
                }
                T.fp(ng, !1, !0)
            },
            getSerializableProperties: function () {
                var v = Jg.superClass.getSerializableProperties.call(this);
                return v.segments = 1, v.points = 1, v.thickness = 1, v.closePath = 1, v
            }
        });
        var Tb = t.Polyline = function () {
            Mr(Tb, this), this.s({"shape.background": null, "shape.border.width": 2})
        };
        ld("Polyline", Jg, {
            _icon: "polyline_icon", _22Q: function () {
                return Nj
            }, getUIClass: function () {
                return ji
            }, setClosePath: function () {
            }, setTall: function (p) {
                var l = this;
                if (!l._55I && !l._24Q && !Tp && l.getTall()) {
                    l._24Q = 1;
                    var g = l._54O, C = p / l.getTall();
                    l._59O.each(function (A) {
                        A.e = A.e == c ? g : (A.e - g) * C + g
                    }), l.fs(), delete l._24Q
                }
                Tb.superClass.setTall.call(l, p)
            }, setElevation: function (d) {
                var P = this;
                if (!P._55I && !P._24Q && !Tp) {
                    P._24Q = 1;
                    var H = d - P._54O;
                    P._59O.each(function (S) {
                        S.e == c ? S.e = d : S.e += H
                    }), P.fs(), delete P._24Q
                }
                Tb.superClass.setElevation.apply(P, arguments)
            }, fireShapeChange: function () {
                var J = this, t = J._59O;
                if (!J._55I && !J._24Q && !Tp) {
                    var L = t.size();
                    if (L) {
                        var E = 1, S = t.get(0), e = J._54O;
                        S.e == c && (S.e = e);
                        for (var n = S.e, d = 0; L > E; E++) {
                            S = t.get(E), S.e == c && (S.e = e);
                            var b = x(n, S.e), p = y(n + d, S.e);
                            n = b, d = p - b
                        }
                        J._24Q = 1, J.setTall(d), J.setElevation(n + d * J._anchorElevation), delete J._24Q
                    }
                }
                Tb.superClass.fireShapeChange.apply(J, arguments)
            }
        });
        var Wm = t.SubGraph = function () {
            Mr(Wm, this)
        };
        ld("SubGraph", Uq, {
            ISubGraph: 1, _image: "subGraph_image", _icon: "subGraph_icon", _8I: function () {
                Wm.superClass._8I.call(this), this.eachChild(function (t) {
                    Ik(t) && t._8I()
                })
            }
        }), F.loadingRefGraph = 0;
        var hd = t.RefGraph = function () {
            Mr(hd, this)
        };
        ld("RefGraph", Th, {
            _icon: "refGraph_icon", getRef: function () {
                return this._ref
            }, setRef: function (q) {
                var g = this._ref;
                this._ref = q, this.fp("ref", g, q), this.updateRef()
            }, _21I: function () {
                hd.superClass._21I.apply(this, arguments), this.updateRef()
            }, updateRef: function () {
                var P = this;
                if (F.loadingRefGraph++, P.clearChildrenFromDataModel(), F.loadingRefGraph--, P._ref && P._dataModel) {
                    P._xhrLoadHandler && (P._xhrLoadHandler.cancel = !0);
                    var C = Tp, b = P._xhrLoadHandler = function ($) {
                        if ($ && P._dataModel) {
                            F.loadingRefGraph++;
                            var c = P._pendingUpdateInfo = {needToRestore: C};
                            C && (c.position = P.p(), c.width = P.getWidth(), c.height = P.getHeight(), c.rotation = P.getRotation(), c.anchor = P.getAnchor(), c.scale = P.getScale()), P.p(0, 0), P.setAnchor(.5, .5), P.setRotation(0), P.setScale(1, 1);
                            var l = F.parse($), T = P._dataModel.deserialize(l, P, {justDatas: !0});
                            T.each(function (G) {
                                G._refGraph = P
                            }), P.checkPendingUpdateInfo(), F.loadingRefGraph--, F.handleRefGraphLoaded(P, T, l)
                        }
                    };
                    b.xhrLoadCalled = !1, F.load(P._ref, function (s) {
                        b.cancel || (b.xhrLoadCalled ? b(s) : Np(function () {
                            b(s)
                        }))
                    }), b.xhrLoadCalled = !0
                }
            }, checkPendingUpdateInfo: function () {
                var t = this, A = t._pendingUpdateInfo;
                if (!A) return t.onPendingUpdated && (F.loadingRefGraph++, t.onPendingUpdated(), F.loadingRefGraph--), void 0;
                var M = !0;
                this.eachChild(function (f) {
                    (f._pendingCheckImageJSON || f._pendingUpdateInfo) && (M = !1)
                }), M && (F.loadingRefGraph++, t._pendingUpdateInfo = null, t.updateFromChildren(), A.needToRestore && (t.setSize(A.width, A.height), t.setAnchor(A.anchor), t.setRotation(A.rotation), t.setScale(A.scale), t.p(A.position)), this.getParent() instanceof hd && this.getParent().checkPendingUpdateInfo(), t.onPendingUpdated && t.onPendingUpdated(), F.loadingRefGraph--)
            }, getSerializableProperties: function () {
                var x = hd.superClass.getSerializableProperties.call(this);
                return x.ref = 1, x
            }
        }), t.EdgeGroup = function (S, G) {
            this._70O = S, this._siblings = G;
            for (var X, E, R = 0, Q = S.size(), W = j[Ij]; Q > R; R++) if (X = S.get(R).getStyle(Ij, !1), X != c) {
                W = X;
                break
            }
            W == c && (W = !0);
            var v = F.edgeGroupAgentFunc;
            for (v && (E = v(S), E && E !== S.get(0) && (S.remove(E), S.add(E, 0))), R = 0; Q > R; R++) S.get(R).s(Ij, W)
        }, ld("EdgeGroup", v, {
            getEdges: function () {
                return this._70O
            }, size: function () {
                return this._70O.size()
            }, get: function (U) {
                return this._70O.get(U)
            }, indexOf: function (K) {
                return this._70O.indexOf(K)
            }, each: function (W, e) {
                this._70O.each(W, e)
            }, getSiblings: function () {
                return this._siblings
            }, eachSiblingEdge: function (B, V) {
                this._siblings.each(function (w) {
                    w._70O.each(B, V)
                })
            }
        });
        var dq = function (o, c, F) {
            var n = qm[o] = {type: o, action: c};
            if (F) for (var K in F) n[K] = F[K]
        };
        dq("host", function (U, P, y) {
            y && P.setHost(y)
        }, {
            "delete": {
                visible: function (V, c) {
                    return c.getHost()
                }, action: function (H, L) {
                    L.setHost(null)
                }
            }
        }), dq("parent", function (k, N, X) {
            X && N.setParent(X)
        }, {
            "delete": {
                visible: function (U, C) {
                    return C.getParent()
                }, action: function (q, B) {
                    B.setParent(null)
                }
            }
        }), dq("copySize", function (y, t, H) {
            if (H) {
                var l = H.getSize();
                t.setSize(l)
            }
        }), dq("copyRotation", function (R, H, i) {
            if (i) {
                var K = i.getRotation();
                H.setRotation(K)
            }
        }), dq("edge", function (Z, U, u) {
            if (u) {
                var Q = new t.Edge(U, u);
                U.dm().add(Q)
            }
        }), Nn(F, {
            setConnectAction: dq, getConnectAction: function (X, D) {
                return D = D || X.getCurrentConnectActionType(), qm[D]
            }, doConnectAction: function (u, Z, t, h) {
                h = h || u.getCurrentConnectActionType();
                var W = qm[h];
                if (!W) return !1;
                var L = W.action;
                return L ? (L.call(null, u, Z, t), !0) : !1
            }, doDeleteConnectionAction: function (S, i, n) {
                n = n || S.getCurrentConnectActionType();
                var m = qm[n];
                if (!m || !m.delete) return !1;
                var z = m.delete.action;
                return z ? (z.call(null, S, i), !0) : !1
            }
        });
        var ri = t.JSONSerializer = function (w, u) {
            this.dm = this._dataModel = w, this._hierarchical = F.forceHierarchicalSerialization ? !0 : u == c ? w.isHierarchicalRendering() : u
        };
        ld("JSONSerializer", v, {
            ms_ac: ["hierarchical"], serialize: function (c) {
                return F.stringify(this.toJSON(), c)
            }, toJSON: function () {
                var z = this, P = z.dm, V = P.getRoots(), o = z.json = {v: F.getVersion(), p: {}, a: {}, d: []},
                    n = P.getSerializableAttrs();
                P.getInit() && (o.init = P.getInit()), P.getName() && (o.p.name = P.getName()), P.getBackground() && (o.p.background = P.getBackground()), P.getLayers() && (o.p.layers = P.getLayers()), o.p.autoAdjustIndex = P.isAutoAdjustIndex(), o.p.hierarchicalRendering = P.isHierarchicalRendering();
                for (var Y in n) {
                    var h = P.a(Y);
                    h !== $ && z[lf](Y, h, o.a)
                }
                return jk(o.a) && delete o.a, z._hierarchical ? V.each(z.serializeData, this) : P.each(function (l) {
                    z.serializeData(l)
                }), o
            }, isSerializable: function () {
                return !0
            }, getProperties: function (h) {
                return h.getSerializableProperties()
            }, getStyles: function (L) {
                return L.getSerializableStyles()
            }, getAttrs: function (g) {
                return g.getSerializableAttrs()
            }, serializeData: function (q) {
                var _ = this;
                if (_.isSerializable(q) && !q._refGraph) {
                    var s, M, G, k, P = qn(q.getClassName()) || q.getClass(), m = new P,
                        u = {c: q.getClassName(), i: q.getId(), p: {}, s: {}, a: {}};
                    _.json.d.push(u), s = _.getProperties(q);
                    for (M in s) /^_/.test(M) ? (G = q[M], G !== m[M] && _[lf](M.substr(1), G, u.p)) : (k = cg(M), q[k] && (G = q[k](), G !== m[k]() && _[lf](M, G, u.p)));
                    s = _.getStyles(q);
                    for (M in s) G = q.s(M), G !== m.s(M) && _[lf](M, G, u.s);
                    s = _.getAttrs(q);
                    for (M in s) G = q.a(M), G !== m.a(M) && _[lf](M, G, u.a);
                    jk(u.p) && delete u.p, jk(u.s) && delete u.s, jk(u.a) && delete u.a
                }
                _._hierarchical && q.getChildren().each(_.serializeData, _)
            }, serializeValue: function (z, m, Y) {
                $b(m) ? m = {__a: m._as} : m instanceof Zf && (m = {__i: m.getId()}), Y[z] = m
            }, deserialize: function (E, D, H) {
                var S = this, m = S.dm;
                m.beginTransaction(), Tp++, H = Dl(H) ? {setId: H} : H || {}, E = S.json = Rp(E) ? F.parse(E) : E, S._82I = {};
                var p = new vp, b = new vp, $ = 0, N = E.d.length;
                if (H.justDatas || ($d(E.init) && E.init(m), m.setInit(E.init)), !H.justDatas) {
                    for (var k in E.a) m.a(k, S[Ji](E.a[k]));
                    for (var X in E.p) m[as(X)](E.p[X])
                }
                for (; N > $; $++) {
                    var n = E.d[$], Z = qn(n.c), A = new Z, u = n.i;
                    H.setId && u != c && (A._id = u), S._82I[u] = A, p.add(A), b.add(n)
                }
                for ($ = 0; N > $; $++) S.deserializeData(p.get($), b.get($));
                return p.each(function (I) {
                    D && !I.getParent() && I.setParent(D), m.add(I)
                }), Tp--, m.endTransaction(), p
            }, deserializeData: function (G, I) {
                for (var C in I.p) G[as(C)](this[Ji](I.p[C]));
                for (C in I.s) G.s(C, this[Ji](I.s[C]));
                for (C in I.a) G.a(C, this[Ji](I.a[C]))
            }, deserializeValue: function (T) {
                if (Pe(T)) {
                    var h = T.__i;
                    if (h != c) return this._82I[h];
                    if (h = T.__a, Qd(h)) return new vp(h)
                }
                return T
            }
        }), Nn(ek, {
            serialize: function (A, M) {
                return new ri(this, M).serialize(A)
            }, toJSON: function (H) {
                return new ri(this, H).toJSON()
            }, deserialize: function (T, j, M) {
                return new ri(this).deserialize(T, j, M)
            }
        });
        var Rh = t.OverlappingBox = function (c) {
            this.gv = c, this.boxes = {}
        };
        ld("OverlappingBox", v, {
            clear: function () {
                var j, Q, C = this.boxes;
                for (j in C) Q = C[j], Q.length = 0
            }, isOverlapping: function (m, e) {
                var v, k, b = this, I = b.boxes, R = I[m];
                R ? (v = R.rects, k = R.length) : R = I[m] = {rects: v = [], length: k = 0};
                var a, r, e;
                for (a = 0; k > a; a++) if (r = v[a], r.x < e.x + e.w && r.x + r.w > e.x && r.y < e.y + e.h && r.h + r.y > e.y) return !0;
                return v.length <= k ? (v.push(e), R.length++) : v[R.length++] = e, !1
            }
        }), rg.GraphView = function (n) {
            var b = this;
            b._24I = {}, b._34I = new vp, b._25I = {}, b._56I = {}, b._view = ts(1, b), b._canvas = Jm(b._view), b.dm(n ? n : new ek), this._coreInteractor = new Pn(this), b.setEditable(!1), b.setScrollBarVisible(F.graphViewScrollBarVisible)
        }, Wb("GraphView", v, {
            ms_v: 1,
            ms_gv: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_dm: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            _52o: 1,
            _51o: 1,
            ms_ac: [fm, Go, rn, Fk, "resettable", "editInteractor", _b, "pannable", "rectSelectable", "autoScrollZone", en, "movableFunc", "editableFunc", "pointEditableFunc", "rectEditableFunc", "rotationEditableFunc", "anchorEditableFunc", "rectSelectBackground", "rectSelectBorderColor", "editPointSize", "editPointBorderColor", "editPointBackground", "hoverDelay"],
            _resettable: F.graphViewResettable,
            _pannable: F.graphViewPannable,
            _rectSelectable: F.graphViewRectSelectable,
            _autoScrollZone: F.graphViewAutoScrollZone,
            _rectSelectBackground: F.graphViewRectSelectBackground,
            _rectSelectBorderColor: F.graphViewRectSelectBorderColor,
            _editPointSize: F.graphViewEditPointSize,
            _editPointBorderColor: F.graphViewEditPointBorderColor,
            _editPointBackground: F.graphViewEditPointBackground,
            _scrollBarColor: fn,
            _scrollBarSize: fd,
            _autoHideScrollBar: Ym,
            _autoMakeVisible: Yp,
            _currentActionType: "host",
            getCoreInteractor: function () {
                return this._coreInteractor
            },
            getLayers: function () {
                return this._dataModel.getLayers()
            },
            setLayers: function (e) {
                this._dataModel.setLayers(e)
            },
            setEditable: function (D) {
                var K = this, A = K.__interactorMap__;
                if (!A) {
                    var $ = rg.XEditInteractor;
                    A = K.__interactorMap__ = {
                        scrollBar: new rm(K),
                        select: new Oe(K),
                        edit: $ ? new $(K) : new zb(K),
                        move: new _g(K),
                        "default": new oi(K),
                        touch: new Gc(K, {editable: !1})
                    }
                }
                D ? (K._uieditable = !0, K.setInteractors([A.scrollBar, A.select, A.edit, A.move, A.default, A.touch])) : (K._uieditable = !1, K.setInteractors([A.scrollBar, A.select, A.move, A.default, A.touch]))
            },
            getCanvas: function () {
                return this._canvas
            },
            _33I: function (o) {
                var z = o.getUIClass();
                return z ? new z(this, o) : c
            },
            getDataUI: function (Z) {
                var E = this, v = E._25I[Z._id];
                return v === $ && (v = E._33I(Z), E._25I[Z._id] = v), v
            },
            getNodeRect: function (x) {
                return F.getNodeRect(this, x)
            },
            getEdgeInfo: function (b) {
                var c = this.getDataUI(b);
                return c ? (c._79o(), c._78o) : null
            },
            getEdgeSourcePosition: function (f) {
                var J = this, c = J.getDataUI(f), n = c.s, y = c._data._40I;
                return ag(J, y, n("edge.source.position"), n("edge.source.offset.x"), n("edge.source.offset.y"), n("edge.source.anchor.x"), n("edge.source.anchor.y"))
            },
            getEdgeTargetPosition: function (v) {
                var J = this, a = J.getDataUI(v), X = a.s, V = a._data._41I;
                return ag(J, V, X("edge.target.position"), X("edge.target.offset.x"), X("edge.target.offset.y"), X("edge.target.anchor.x"), X("edge.target.anchor.y"))
            },
            invalidateAll: function (R) {
                var n = this;
                if (R) {
                    for (var y in n._25I) {
                        var P = n._25I[y];
                        P && P.dispose()
                    }
                    n._25I = {}, n._56I = {}, n._24I = {}, n._34I.clear(), n.redraw()
                } else n.dm().each(function (P) {
                    n.invalidateData(P)
                })
            },
            invalidateSelection: function () {
                var f = this;
                f.sm().each(function (h) {
                    f.invalidateData(h)
                })
            },
            invalidateData: function (h) {
                var f = this;
                f._24I[h._id] = h, f._21Q(h), f.iv()
            },
            _21Q: function (O) {
                var E = this, M = E._24I;
                if (gs(O) && rp[O.s(ms)]) {
                    var y = O.getSourceAgent();
                    y && y.getAgentEdges().each(function (G) {
                        M[G._id] = G
                    }), y = O.getTargetAgent(), y && y.getAgentEdges().each(function (I) {
                        M[I._id] = I
                    }), E.iv()
                }
            },
            redraw: function (k) {
                var r = this;
                r._32I || (k ? r._34I.add(k) : (r._32I = 1, r._34I.clear()), r.iv())
            },
            each: function (x, m) {
                var E, D, v, K = 0, V = this.getLayers(), N = this._dataModel, B = N._datas._as, h = B.length;
                if (V) {
                    for (var q = V.length; q > K; K++) if (v = V[K], Pe(v) && (v = v.name), N.isHierarchicalRendering()) {
                        var F = function (d) {
                            return d._layer === v ? m ? x.call(m, d) : x(d) : void 0
                        };
                        if (this._dataModel.eachByHierarchical(F) === !1) return
                    } else for (var U = 0; h > U; U++) if (E = B[U], E._layer === v && (D = m ? x.call(m, E) : x(E), D === !1)) return
                } else if (N.isHierarchicalRendering()) this._dataModel.eachByHierarchical(x, null, m); else for (; h > K; K++) if (E = B[K], D = m ? x.call(m, E) : x(E), D === !1) return
            },
            reverseEach: function (l, y) {
                var X, C, a, k, N = this._dataModel, f = N._layers, E = N._datas._as, Y = E.length;
                if (f) {
                    for (X = f.length - 1; X >= 0; X--) if (k = f[X], Pe(k) && (k = k.name), N.isHierarchicalRendering()) {
                        var s = function (o) {
                            return o._layer === k ? y ? l.call(y, o) : l(o) : void 0
                        };
                        if (N.reverseEachByHierarchical(s) === !1) return
                    } else for (var w = Y - 1; w >= 0; w--) if (C = E[w], C._layer === k && (a = y ? l.call(y, C) : l(C), a === !1)) return
                } else if (N.isHierarchicalRendering()) N.reverseEachByHierarchical(l, null, y); else for (X = Y - 1; X >= 0; X--) if (C = E[X], a = y ? l.call(y, C) : l(C), a === !1) return
            },
            getViewRect: function () {
                return this._29I
            },
            getContentRect: function () {
                var U = this, X = U._84I;
                if (!X) {
                    var N = this.dm().a("width"), L = this.dm().a("height");
                    N > 0 && L > 0 ? U._84I = {x: 0, y: 0, width: N, height: L} : (U.each(function (e) {
                        U.isVisible(e) && (X = Kb(X, U.getDataUIBounds(e)))
                    }), U._84I = X ? X : Wo)
                }
                return U._84I
            },
            getScrollRect: function () {
                return Kb(this.getContentRect(), this._29I)
            },
            makeCenter: function (V, b, i) {
                var f = this;
                if (!f.getWidth() || !f.getHeight()) return i || Np(f.centerData, f, [V, b, !0], 500), void 0;
                f.makeVisible(V), f.validate();
                var u = f.getDataUIBounds(V);
                if (u) {
                    var L = f.getWidth(), h = f.getHeight(), P = u.x + u.width / 2, Z = u.y + u.height / 2,
                        H = -P * f._zoom + L / 2, e = -Z * f._zoom + h / 2;
                    f.setTranslate(H, e, b)
                }
            },
            fitData: function (X, C, M, Z, h) {
                var R = this;
                if (!R.getWidth() || !R.getHeight()) return h || Np(R.fitData, R, [X, C, M, Z, !0], 500), void 0;
                var P = function () {
                    R.makeVisible(X), R.validate();
                    var B = R.getDataUIBounds(X);
                    B && (B = hh(B), Bk(B, M == c ? 20 : M), R.fitRect(B, C, Z))
                };
                C ? F.callWhenLoaded(P) : P()
            },
            fitContent: function (G, b, H, I) {
                var t = this;
                if (!t.getWidth() || !t.getHeight()) return I || Np(t.fitContent, t, [G, b, H, !0], 500), void 0;
                var U = function () {
                    t.validate();
                    var W = hh(t.getContentRect());
                    Bk(W, b == c ? 20 : b), t.fitRect(W, G, H)
                };
                G ? F.callWhenLoaded(U) : U()
            },
            fitRect: function (R, P, Q) {
                var w = this, I = w.getWidth(), p = w.getHeight(), h = R.x + R.width / 2, k = R.y + R.height / 2,
                    j = x(I / R.width, p / R.height), d = w._zoom, a = -h * d + I / 2, e = -k * d + p / 2;
                0 === j || isNaN(j) || (Q && (j = x(1, j)), P ? w.setTranslate(a, e, {
                    finishFunc: function () {
                        w.setZoom(j, P)
                    }
                }) : (w.setTranslate(a, e), w.setZoom(j)))
            },
            toCanvas: function (O, T) {
                T = T || this._zoom, this.validateImpl();
                var M = this, I = M.getContentRect();
                I.width || (I.width = 10), I.height || (I.height = 10);
                var Q = Jm(), U = I.x * T, G = I.y * T, l = I.width * T, z = I.height * T;
                Sd(Q, l, z, 1);
                var e = fk(Q);
                return O = O || this._dataModel.getBackground(), O && Ui(e, 0, 0, l, z, O), xe(e, -U, -G), e.scale(T, T), M._42(e), e.restore(), Q
            },
            toDataURL: function (v, w, u) {
                return this.toCanvas(v, u).toDataURL(w || "image/png", 1)
            },
            getClipBounds: function () {
                return this._74O
            },
            _42: function (G, T) {
                var _, M, Z = this;
                Z._93db(G, T), Z.each(function (b) {
                    Z._56I[b._id] && (_ = Z.getDataUI(b), _ && (M = _._79o(), t.HtmlNode && b instanceof t.HtmlNode ? _._42(G) : (!T || _r(T, M)) && _._42(G)))
                }), Z._92db(G, T)
            },
            validateImpl: function () {
                var g, z, L, b, G, u = this, l = u.tx(), f = u.ty(), q = u._zoom, Y = u._canvas, P = this.getWidth(),
                    A = this.getHeight(), F = u._29I, j = {x: -l / q, y: -f / q, width: P / q, height: A / q}, C = {},
                    U = u._34I, k = u._24I, J = u._32I, K = u._23I;
                u._24I = {}, (P !== Y.clientWidth || A !== Y.clientHeight) && (Sd(Y, P, A), J = 1), J || Ab(j, F) || (J = 1), u._29I = j, u.each(function (b) {
                    z = b._id;
                    var Y = C[z] = u.isVisible(b);
                    Y !== u._56I[z] && (k[z] = b, L = u.getDataUI(k[z]), L && L._84o(Y), u._84o(b, Y))
                }, u);
                for (z in k) L = u.getDataUI(k[z]), L && (!J && u._56I[z] && (G = L._79o(), G && U.add(G)), L.invalidate()), u._83I = 1;
                if (u._56I = C, !J) for (z in k) C[z] && (L = u.getDataUI(k[z]), L && (G = L._79o(), G && U.add(G)));
                if (J ? b = j : (U.each(function (l) {
                    _r(j, l) && (b = Kb(b, l))
                }), b && (Bk(b, y(1, 1 / q)), b.x = Q(b.x * q) / q, b.y = Q(b.y * q) / q, b.width = E(b.width * q) / q, b.height = E(b.height * q) / q, b = ch(j, b))), u._74O = b, b) {
                    g = fk(Y);
                    var N = b.x, n = b.y, W = b.width, v = b.height;
                    N = Math.floor((N * q + l) * ur), n = Math.floor((n * q + f) * ur), W = Math.ceil(W * q * ur) + 1, v = Math.ceil(v * q * ur) + 1, g.beginPath(), g.rect(N, n, W, v), g.clip(), g.clearRect(N, n, W, v), Vm(g, l, f, q), u._42(g, b), g.restore(), delete u._74O
                }
                if (U.clear(), delete u._32I, K && P > 0 && A > 0) {
                    var L = u.getDataUI(K);
                    if (L) {
                        var G = L._79o(), o = u._29I, T = o.x, t = o.y, D = o.width, V = o.height, q = u._zoom;
                        G && !_r(G, o) && (G.x + G.width < T && u.tx(-G.x * q), G.x > T + D && u.tx(-(G.x + G.width - D) * q), G.y + G.height < t && u.ty(-G.y * q), G.y > t + V && u.ty(-(G.y + G.height - V) * q))
                    }
                    delete u._23I
                }
                u._83I && (delete u._83I, delete u._84I), u._98O(), jk(u._24I) || Np(u.iv, u)
            },
            isScrollBarVisible: function () {
                return !!this._79O
            },
            setScrollBarVisible: function (c) {
                var $ = this;
                c !== $.isScrollBarVisible() && (c ? (Vo($._view, $._79O = Gl()), Vo($._79O, $._27I = Gl()), Vo($._79O, $._28I = Gl())) : (zm($._79O), delete $._79O, delete $._27I, delete $._28I), $.fp("scrollBarVisible", !c, c))
            },
            showScrollBar: function () {
                var s = this;
                s._79O && (s._85I || (g(function () {
                    s._86I()
                }, Ir), s.iv()), s._85I = new Date)
            },
            _86I: function () {
                var x = this;
                if (x._85I) {
                    var Q = new Date, z = Q.getTime();
                    z - x._85I.getTime() >= Ir ? (delete x._85I, x.iv()) : g(function () {
                        x._86I()
                    }, Ir)
                }
            },
            getVScrollBar: function () {
                return this._27I
            },
            getHScrollBar: function () {
                return this._28I
            },
            _98O: function () {
                var g = this, E = this._27I, i = this._28I;
                if (g._79O) {
                    if (g._autoHideScrollBar && !g._85I) return E.style.visibility = oh, i.style.visibility = oh, void 0;
                    var k = g.getScrollBarColor(), c = g._zoom, n = g.getScrollBarSize(), M = g.getViewRect(),
                        G = g.getScrollRect(), y = M.height * c, L = G.height * c, s = M.width * c - n - 2,
                        W = y * ((M.y - G.y) * c / L), d = y * (y / L), Z = E.style;
                    L - .5 > y ? (go > d && (W = W + d / 2 - go / 2, 0 > W && (W = 0), W + go > y && (W = y - go), d = go), Ee(E, s, W, n, d), Z.visibility = dr, Z.background = k, Z.borderRadius = n / 2 + hr) : Z.visibility = oh;
                    var z = M.width * c, w = G.width * c, W = M.height * c - n - 2, s = z * ((M.x - G.x) * c / w),
                        K = z * (z / w), Z = i.style;
                    w - .5 > z ? (go > K && (s = s + K / 2 - go / 2, 0 > s && (s = 0), s + go > z && (s = z - go), K = go), Ee(i, s, W, K, n), Z.visibility = dr, Z.background = k, Z.borderRadius = n / 2 + hr) : Z.visibility = oh
                }
            },
            setDataModel: function (D) {
                var y = this, S = y._dataModel, I = y._selectionModel;
                S !== D && (S && (S.ump(y.handleDataModelPropertyChange, y), S.umm(y.handleDataModelChange, y), S.umd(y.handleDataPropertyChange, y), S.removeIndexChangeListener(y._75O, y), S.removeHierarchyChangeListener(y.handleHierarchyChange, y), I || S.sm().ums(y.handleSelectionChange, y)), y._dataModel = D, D.mp(y.handleDataModelPropertyChange, y), D.mm(y.handleDataModelChange, y), D.md(y.handleDataPropertyChange, y), D.addIndexChangeListener(y._75O, y), D.addHierarchyChangeListener(y.handleHierarchyChange, y), I ? I._21I(D) : D.sm().ms(y.handleSelectionChange, y), y.invalidateAll(!0), y.fp(kg, S, D), y._canvas.style.background = D.getBackground() || "")
            },
            getLayersInfo: function () {
                if (this._layersInfo === $) {
                    var c = this.getLayers();
                    c ? (this._layersInfo = {}, c.forEach(function (x) {
                        var Q = Pe(x) ? x.name : x;
                        this._layersInfo[Q] = x
                    }, this)) : this._layersInfo = null
                }
                return this._layersInfo
            },
            updateLayers: function () {
                this._layersInfo = $, this.invalidateSelection(), this.redraw()
            },
            handleDataModelPropertyChange: function (b) {
                if ("background" === b.property) {
                    var j = this._canvas.style.background, o = b.newValue || "";
                    this._canvas.style.background = o, this.fp("canvasBackground", j, o)
                } else "a:width" === b.property || "a:height" === b.property ? (this._83I = 1, this.redraw()) : "layers" === b.property ? this.updateLayers() : "hierarchicalRendering" === b.property && this.redraw()
            },
            handleDataPropertyChange: function (D) {
                this.dm().isHierarchicalRendering() && "parent" === D.property && D.data.hasChildren() && this.redraw(), this.invalidateData(D.data)
            },
            onPropertyChanged: function (z) {
                var j = this, w = z.property;
                if (j.redraw(), "zoom" === w) {
                    var b = j.sm().getSelection();
                    b.size() && b.each(function (h) {
                        h.invalidate()
                    })
                }
                _m[w] ? j.showScrollBar() : w === _b && j.onCurrentSubGraphChanged(z)
            },
            onCurrentSubGraphChanged: function () {
                this.sm().cs(), this.reset()
            },
            handleDataModelChange: function (d) {
                var y = this, x = d.kind, J = d.data;
                if (y._83I = 1, "add" === x) y.invalidateData(J), gs(J) && J.getEdgeGroup() && J.getEdgeGroup().eachSiblingEdge(y.invalidateData, y); else if (x === de) {
                    y._21Q(J);
                    var H = J._id, w = y._25I[H];
                    if (w) {
                        if (y._56I[H]) {
                            var $ = w._79o();
                            $ && y.redraw($)
                        }
                        w.dispose(), delete y._25I[H], delete y._24I[H], delete y._56I[H]
                    }
                    J === y._currentSubGraph && y.setCurrentSubGraph(c)
                } else x === Lg && (y.invalidateAll(!0), y.setCurrentSubGraph(c))
            },
            _75O: function (q) {
                this.invalidateData(q.data)
            },
            handleHierarchyChange: function (K) {
                this.dm().isHierarchicalRendering() && K.data.hasChildren() && this.redraw(), this.invalidateData(K.data)
            },
            adjustIndex: function (o) {
                var I = this;
                if (I.isVisible(o)) {
                    I.dm().beginTransaction();
                    for (var z = o; z._parent && I.isVisible(z._parent);) z = z._parent;
                    z && z !== o && I._dataModel.adjustIndex(z), I._dataModel.adjustIndex(o), I.dm().endTransaction()
                }
            },
            getImage: function (e) {
                return e.getImage ? e.getImage() : $
            },
            getSelectWidth: function (a) {
                var G = cd(this.getImage(a));
                return G && eq(G.disableSelectedBorder, a, this) ? 0 : a.s("select.width")
            },
            getSelectColor: function (R) {
                return R.s("select.color")
            },
            isSelectable: function (N) {
                if (!this._clickThroughChecking && N.getParent() instanceof Th && N.getParent().isSyncSize()) return !1;
                var U = this.getLayersInfo();
                if (U) {
                    var I = U[N._layer];
                    if (I && I.selectable === !1) return !1
                }
                return N.s("2d.selectable") && this.sm().isSelectable(N)
            },
            isMovable: function (j) {
                var e = this;
                if (gs(j) && j.getStyle(ms) !== ik) return !1;
                var X = this.getLayersInfo();
                if (X) {
                    var $ = X[j._layer];
                    if ($ && $.movable === !1) return !1
                }
                return j.s("2d.movable") ? e._movableFunc ? e._movableFunc(j) : !0 : !1
            },
            isEditable: function (T) {
                var J = this;
                if (t._uiSerializing) return J._uieditable;
                if (!J._editInteractor || !J.isSelected(T)) return !1;
                if (kk(T)) {
                    var d = J.getDataUI(T);
                    if (!d || d._88I) return !1
                }
                if (gs(T) && T.getStyle(ms) !== ik) return !1;
                var p = this.getLayersInfo();
                if (p) {
                    var m = p[T._layer];
                    if (m && m.editable === !1) return !1
                }
                return T.s("2d.editable") ? J._editableFunc ? J._editableFunc(T) : !0 : !1
            },
            handleDelete: function () {
                this._editInteractor && (this._editInteractor.handleDelete ? this._editInteractor.handleDelete() : this.removeSelection())
            },
            isPointEditable: function (R) {
                return Ik(R) && 0 !== R.getRotation() ? !1 : this._pointEditableFunc ? this._pointEditableFunc(R) : !0
            },
            isRectEditable: function (H) {
                return this._rectEditableFunc ? this._rectEditableFunc(H) : !0
            },
            isAnchorEditable: function (y) {
                return this._anchorEditableFunc ? this._anchorEditableFunc(y) : !0
            },
            isRotationEditable: function (f) {
                return f.setRotation && f.IRotatable !== !1 ? this._rotationEditableFunc ? this._rotationEditableFunc(f) : !0 : !1
            },
            getRotationPoint: function (d) {
                var G = d.getAnchor(), S = d.getScale(), O = this._zoom,
                    A = Yq(d.getRotation(), 0, -d.getHeight() * S.y * G.y - (S.y < 0 ? -1 : 1) * (jp ? 32 : 16) / O),
                    N = d.p();
                return A.x += N.x, A.y += N.y, A
            },
            getLogicalPoint: function (c) {
                var T = this;
                return xk(c, T._canvas, T.tx(), T.ty(), T._zoom, T._zoom)
            },
            getSelectedDataAt: function (p) {
                var v = this;
                return this.getDataAt(p, function (j) {
                    return v.isSelected(j)
                })
            },
            getDataInfoAt: function (X, U, g) {
                var Z, A = this.lp(X), v = this.getDataAt(A, U, g);
                if (v) {
                    var F = this.getDataUI(v);
                    Z = {data: v, ui: F, point: A};
                    var J = F._38o;
                    if (J) {
                        var M = J.icons;
                        for (var I in M) {
                            var x = M[I], K = J.rects[I];
                            if (K) for (var l = eq(x.names, v, this), t = l ? l.length : 0, o = K.rotation, f = t - 1; f >= 0; f--) {
                                var y = l[f], s = K[f];
                                if (Jj(s, A, o)) return Z.part = "icons", Z.name = I, Z.icon = y, Z.rect = s, Z.index = f, Z.rotation = o, Z
                            }
                        }
                    }
                    if (this.isNoteVisible(v)) {
                        if (F.note2Info && Jj(F.note2Info.clickRect, A, c, F.note2Info.scale)) return Z.part = "note2", Z;
                        if (F.noteInfo && Jj(F.noteInfo.clickRect, A, c, F.noteInfo.scale)) return Z.part = "note", Z
                    }
                    if (this.isLabelVisible(v)) {
                        if (F.label2Info && Jj(F.label2Info.rect, A, F.label2Info.rotation, F.label2Info.scale)) return Z.part = "label2", Z;
                        if (F.labelInfo && Jj(F.labelInfo.rect, A, F.labelInfo.rotation, F.labelInfo.scale)) return Z.part = "label", Z
                    }
                    if (v.isInRect && v.isInRect(A)) return Z.part = "body", Z
                }
                return Z
            },
            getDataAt: function (x, d, F) {
                x.target && (x = this.lp(x));
                var v, G = this._zoom;
                return this.reverseEach(function ($) {
                    return (d ? d($) : this.isSelectable($)) && this.rectIntersects($, Wn(x.x, x.y, F, G)) ? (v = $, !1) : void 0
                }, this), v
            },
            getIconInfoAt: function (W, b) {
                var t = this;
                if (W.target && (W = t.lp(W)), b || (b = t.getDataAt(W)), b) {
                    var N = t.getDataUI(b);
                    if (N && N._38o) {
                        var Y, f = N._38o, s = new vp;
                        for (Y in f.icons) s.add(Y);
                        for (var n = s.size() - 1; n >= 0; n--) {
                            Y = s.get(n);
                            for (var S = f.rects[Y], Z = S.rotation, $ = S.length - 1; $ >= 0; $--) {
                                var U = S[$], H = U.width, u = U.height,
                                    G = {x: W.x - U.x - H / 2, y: W.y - U.y - u / 2};
                                Z != c && (G = Yq(-Z, G.x, G.y));
                                var U = {x: -H / 2, y: -u / 2, width: H, height: u};
                                if (Jj(U, G)) return {
                                    key: Y,
                                    index: $,
                                    name: f.icons[Y].names[$],
                                    rect: S[$],
                                    point: W,
                                    rotation: Z,
                                    relativeRect: U,
                                    relativePoint: G,
                                    data: b
                                }
                            }
                        }
                    }
                }
                return c
            },
            getDatasInRect: function (w, c, k) {
                k === $ && (k = 1);
                var h = this, U = new vp;
                return h.reverseEach(function (l) {
                    k && !h.isSelectable(l) || (c ? h.rectIntersects(l, w) : h.rectContains(l, w)) && U.add(l)
                }), U
            },
            moveSelection: function (j, C) {
                var e = this;
                e.dm().beginTransaction(), Pr(e.sm().toSelection(e.isMovable, e), j, C), e.dm().endTransaction()
            },
            moveDatas: function (O, I, v) {
                var X = this;
                X.dm().beginTransaction(), O instanceof vp || (O = new vp(O)), Pr(O, I, v), X.dm().endTransaction()
            },
            getDataUIBounds: function (q) {
                var M = this.getDataUI(q);
                return M ? M._79o() : c
            },
            drawData: function (M, C) {
                var T = this.getDataUI(C);
                T && (T._79o(), T._42(M)), C instanceof t.Block && C.eachChild(function (u) {
                    this.drawData(M, u)
                }, this)
            },
            getBoundsForGroup: function (k) {
                return k.s(Jd) ? this.getDataUIBounds(k) : c
            },
            rectIntersects: function ($, t) {
                this.validate();
                var G = c;
                if (this._56I[$._id]) {
                    var H = this._25I[$._id];
                    if (H) {
                        var D = H._79o();
                        if (ql(t, D)) G = !0; else if ((t = ch(t, D)) && (H.rectIntersects && (G = H.rectIntersects(t)), G == c)) {
                            if (!$.s("pixelPerfect")) return !0;
                            var y = t.x, i = t.y, z = t.width, A = t.height, O = this._zoom, o = F.hitMaxArea,
                                j = z * A * O * O;
                            if (j > o) {
                                var g = Math.sqrt(o / j);
                                O *= g
                            }
                            z *= O, A *= O, 2 > z && (z = 2), 2 > A && (A = 2), y *= O, i *= O;
                            var U = Zk(z, A);
                            xe(U, -y, -i), U.scale(O, O), this._drawForChecking = !0, this.drawData(U, $), this._drawForChecking = !1;
                            try {
                                for (var X = 0, W = U.getImageData(0, 0, z, A).data; X < W.length; X += 4) if (0 !== W[X + 3]) {
                                    G = !0;
                                    break
                                }
                                U.restore()
                            } catch (V) {
                                vm = c, G = !1
                            }
                        }
                    }
                }
                return G ? !0 : !1
            },
            rectContains: function (m, E) {
                if (this._56I[m._id]) {
                    var H = this._25I[m._id];
                    if (H) return ql(E, H._79o())
                }
                return !1
            },
            reset: function () {
                this.setZoom(1), this.setTranslate(0, 0)
            },
            handleKeyDown: function (a) {
                if (!F.isInput(a.target)) {
                    var n = this, q = n._focusData, A = q && n._25I[q._id], i = 0, x = n._dataModel._datas;
                    if (!(q && q._enabled && q._editable && A && A.onKeyDown && A.onKeyDown(a) === !0)) if (9 === a.keyCode && (q && (i = x.indexOf(q), Mp(a) ? -1 === --i && (i = 0) : ++i === x.size() && (i = 0)), n._focusData = q = x.get(i), n.sm().setSelection(q)), Am(a) ? n.selectAll() : Bq(a) && n.isResettable() && n.reset(), n.sm().isEmpty()) {
                        if (n._editing) return;
                        var r = n.tx(), y = n.ty(), m = !1, Z = Mp() ? 100 : 10;
                        xr(a) && (r -= Z, m = !0), Mj(a) && (y -= Z, m = !0), po(a) && (r += Z, m = !0), qc(a) && (y += Z, m = !0), m && n.setTranslate(r, y)
                    } else {
                        sj(a) && n.handleDelete(a);
                        var Y = Mp() ? 10 : 1;
                        xr(a) && (n.moveSelection(-Y, 0), n.fi({kind: "moveLeft"})), Mj(a) && (n.moveSelection(0, -Y), n.fi({kind: "moveUp"})), po(a) && (n.moveSelection(Y, 0), n.fi({kind: "moveRight"})), qc(a) && (n.moveSelection(0, Y), n.fi({kind: "moveDown"}))
                    }
                }
            },
            handleScroll: function (q, L) {
                mq(q);
                var v = this.lp(q);
                L > 0 ? this.scrollZoomIn(v) : 0 > L && this.scrollZoomOut(v)
            },
            handlePinch: function (g, K, B) {
                this._68I || (K > B ? this.pinchZoomIn(g) : this.pinchZoomOut(g))
            },
            checkDoubleClickOnNote: function (P, O) {
                var I = this, d = I.lp(P), y = I.getDataUI(O), T = y.note2Info;
                return T && O.s("note2.toggleable") && Jj(T.clickRect, d) ? (O.s(Tl, !O.s(Tl)), I.fi({
                    kind: "toggleNote2",
                    event: P,
                    data: O
                }), !0) : (T = y.noteInfo, T && O.s("note.toggleable") && Jj(T.clickRect, d) ? (O.s(ok, !O.s(ok)), I.fi({
                    kind: "toggleNote",
                    event: P,
                    data: O
                }), !0) : !1)
            },
            _84o: function () {
            },
            isNoteVisible: function () {
                return this._zoom > .15
            },
            isLabelVisible: function () {
                return this._zoom > .15
            },
            isEditVisible: function () {
                return this._zoom > .15
            },
            autoScroll: function (h, Q) {
                var w = this, b = w.getAutoScrollZone(), J = b / w.getZoom(), W = b / 4, x = w._29I, N = w.lp(h),
                    p = {x: w.tx(), y: w.ty()};
                return N && b > 0 && x && (N.x - x.x < J ? w.translate(W, 0) : x.x + x.width - N.x < J && w.translate(-W, 0), N.y - x.y < J ? w.translate(0, W) : x.y + x.height - N.y < J && w.translate(0, -W)), p.x = w.tx() - p.x, p.y = w.ty() - p.y, Q && (Q.x += p.x, Q.y += p.y), p
            },
            getMoveMode: function (R, _) {
                var r = _.s("2d.move.mode");
                return r ? r : Xh["88"] ? "x" : Xh["89"] ? "y" : "xy"
            },
            getSerializableProperties: function () {
                return {
                    scrollBarColor: 1,
                    scrollBarSize: 1,
                    autoMakeVisible: 1,
                    autoHideScrollBar: 1,
                    editable: 1,
                    resettable: 1,
                    pannable: 1,
                    rectSelectable: 1,
                    autoScrollZone: 1,
                    visibleFunc: 1,
                    movableFunc: 1,
                    editableFunc: 1,
                    pointEditableFunc: 1,
                    rectEditableFunc: 1,
                    anchorEditableFunc: 1,
                    rotationEditableFunc: 1,
                    rectSelectBackground: 1,
                    rectSelectBorderColor: 1,
                    editPointSize: 1,
                    editPointBorderColor: 1,
                    editPointBackground: 1,
                    hoverDelay: 1,
                    dataModel: 1,
                    selectionModel: 1,
                    currentSubGraph: 1,
                    zoom: 1,
                    translateX: 1,
                    translateY: 1
                }
            },
            serializeProperty: function (D, s, m) {
                var F = this;
                return "currentSubGraph" === s ? {__i: D.getId()} : m.serializeProperty(D, s, F)
            },
            deserializeProperty: function (U, f, k) {
                var H = this;
                if ("currentSubGraph" === f) {
                    var W = H.dm(), i = W.__idMap;
                    return i[U.__i]
                }
                return k.deserializeProperty(U, f, H)
            },
            setDefaultCursor: function (W, Q) {
                this._defaultCursor = W, Q !== !1 && this.setCursor(W)
            },
            setCursor: function (O) {
                "default" === O && (O = this._defaultCursor || O);
                var l = this.getView().style;
                l.cursor = O, l.cursor = "-webkit-" + O, l.cursor = "-moz-" + O
            },
            getCurrentConnectActionType: function () {
                return this._currentActionType
            },
            setCurrentConnectActionType: function (x) {
                return F.getConnectAction(null, x) ? (this._currentActionType = x, !0) : !1
            },
            isInteractive: function (v) {
                return v.s("interactive")
            }
        });
        var ne = function (I, V) {
            var J = this;
            J.gv = I, J.s = function (Y) {
                return V.getStyle(Y)
            }, J._data = V, J._87I = new vp
        };
        fs(ne, v, {
            _6I: c, ms_icons: 1, _84o: function () {
            }, dispose: function () {
            }, isShadowed: function () {
                return this.s("shadow") || this.gv.isSelected(this._data) && "shadow" === this.s("select.type")
            }, getSelectWidth: function () {
                var k = this, m = k.gv.isSelected(k._data);
                return !m || k.isShadowed() ? 0 : k.gv.getSelectWidth(k._data)
            }, getSelectColor: function () {
                return this.gv.getSelectColor(this._data)
            }, getBodyColor: function (_) {
                var p = this._data, Z = this.gv.getBodyColor(p);
                return Z ? Z : _ ? p.getStyle(_) : c
            }, _2Q: function (b) {
                return this.s(b)
            }, _1Q: function (e, j, L, R) {
                var Y = this.s, Q = Y(j + ".dash.color");
                e.strokeStyle = Q, e.lineWidth = L, e.stroke(), Y(j + ".dash.3d") && Tq(e, Q, Y(j + ".dash.3d.color"), L, this.gv._zoom, Y(j + ".dash.3d.accuracy")), bo(e, R)
            }, invalidate: function () {
                this._6I = c
            }, _79o: function () {
                var Z = this;
                if (!Z._6I) {
                    var U = Z._data, h = Z.gv;
                    Z.labelInfo = Z.label2Info = Z.noteInfo = Z.note2Info = Z._38o = c, Z._87I.clear(), Z.interactiveInfo = h.isInteractive(U) ? {} : c, Z._3O(), Z._55O = h.isEditable(U) ? {
                        _42O: h.isRectEditable(U),
                        _43O: h.isPointEditable(U),
                        _56O: h.isRotationEditable(U)
                    } : c, Z._6I = Z._81o()
                }
                return Z._6I
            }, _3O: function () {
            }, getPosition: function () {
                return Wo
            }, _68o: function (e, k) {
                e && this._87I.add(ln(e, k))
            }, _81o: function () {
                var l = this, P = l.s;
                l._24O(hg, "getLabel"), l._24O($g, "getLabel2"), l._26O(Sl, "getNote"), l._26O(oe, "getNote2"), l._15O(), l._55O && l._48O();
                var y;
                if (l._87I.each(function (s) {
                    y = Kb(y, s)
                }), y && l.isShadowed()) {
                    var h = hh(y);
                    h.x += P("shadow.offset.x"), h.y += P("shadow.offset.y"), Bk(h, P("shadow.blur")), y = Kb(y, h)
                }
                return l._87I.clear(), y
            }, _42: function (n) {
                var Z = this, U = Z._data, s = Z.gv, I = Z.s, u = I("opacity"), H = this.isShadowed();
                if (H) {
                    var m = n.shadowOffsetX, _ = n.shadowOffsetY, W = n.shadowBlur, h = n.shadowColor, d = s.getZoom();
                    n.shadowOffsetX = I("shadow.offset.x") * d, n.shadowOffsetY = I("shadow.offset.y") * d, n.shadowBlur = I("shadow.blur") * d, n.shadowColor = Z.getSelectColor()
                }
                if (u != c) {
                    var a = n.globalAlpha;
                    n.globalAlpha = u
                }
                Z._80o(n), s.isLabelVisible(U) && ((!s._drawForChecking || I("label.selectable")) && zs(n, Z.labelInfo), (!s._drawForChecking || I("label2.selectable")) && zs(n, Z.label2Info)), s.isNoteVisible(U) && (Ih(n, Z.noteInfo), Ih(n, Z.note2Info)), Z._99O(n), u != c && (n.globalAlpha = a), H && (n.shadowOffsetX = m, n.shadowOffsetY = _, n.shadowBlur = W, n.shadowColor = h)
            }, _80o: function () {
            }, _47O: function () {
            }, _24O: function (V, H) {
                var y = this, n = y._data, K = y.gv, s = y.s, D = K[H](n);
                if (D != c) {
                    var w = s(V + ".scale"), Q = s(V + ".max"), _ = s(V + ".position"), a = y[V + "Info"] = {
                        label: D,
                        scale: w,
                        color: K[H + "Color"](n),
                        font: s(V + ".font"),
                        opacity: s(V + ".opacity"),
                        align: s(V + ".align"),
                        rotation: y.getRotation(s(V + ".rotation"), !1, _),
                        background: K[H + "Background"](n)
                    }, W = wk(a, D);
                    Q > 0 && Q < W.width && (a.labelWidth = W.width, W.width = Q), 1 !== w && (W.width *= w, W.height *= w);
                    var I = y.getPosition(_, s(V + ".offset.x"), s(V + ".offset.y"), W, s(V + ".position.fixed"));
                    if (W.x = I.x - W.width / 2, W.y = I.y - W.height / 2, y._68o(a.rect = W, a.rotation), 1 !== w) {
                        var O = W.width / w, A = W.height / w;
                        a.rect = {x: I.x - O / 2, y: I.y - A / 2, width: O, height: A}
                    }
                }
            }, _26O: function (m, j) {
                var k = this, C = k.gv, g = k._data, F = k.s, V = C[j](g);
                if (V != c) {
                    var w, L, n = F(m + ".scale"), b = k[m + "Info"] = {
                        note: V,
                        scale: n,
                        data: g,
                        view: C,
                        expanded: F(m + ".expanded"),
                        font: F(m + ".font"),
                        color: F(m + ".color"),
                        opacity: F(m + ".opacity"),
                        align: F(m + ".align"),
                        icon: F(m + ".icon"),
                        backgroundImage: F(m + ".backgroundImage"),
                        borderWidth: F(m + ".border.width"),
                        borderColor: F(m + ".border.color"),
                        background: C[j + "Background"](g)
                    }, P = k.getPosition(F(m + ".position"), F(m + ".offset.x"), F(m + ".offset.y")), a = P.x, t = P.y;
                    if (b.expanded) {
                        var o, U = F(m + ".max"), f = F(m + ".backgroundImage");
                        f ? (f = cd(f), o = {
                            width: fc(f, g),
                            height: qr(f, g)
                        }) : o = wk(b, V), o.width += 6, o.height += 2, U > 0 && U < o.width && (b.labelWidth = o.width, o.width = U), w = o.width, L = o.height + 8, b.clickRect = {
                            x: a - w * n / 2,
                            y: t - L * n,
                            width: w * n,
                            height: L * n * o.height / L
                        }
                    } else {
                        var W = F(m + ".icon");
                        W ? (W = cd(W), w = fc(W, g), L = qr(W, g)) : (w = 12, L = 18), b.clickRect = {
                            x: a - w * n / 2,
                            y: t - L * n,
                            width: w * n,
                            height: L * n
                        }
                    }
                    b.rect = {x: a - w / 2, y: t - L * n / 2 - L / 2, width: w, height: L};
                    var x = E(b.borderWidth / 2) * n;
                    k._68o({x: a - w * n / 2 - x, y: t - L * n - x, width: w * n + 2 * x, height: L * n + 2 * x})
                }
            }, _48O: function () {
            }, _99O: function (R) {
                var D = this, o = D._38o;
                if (o) {
                    var a = D.gv, $ = D._data, K = o.icons, v = D.interactiveInfo;
                    v && (v._38o = {});
                    for (var L in K) {
                        var A = K[L], q = o.rects[L];
                        if (q) {
                            v && (v._38o[L] = []);
                            var x = eq(A.opacity, $, a), p = eq(A.names, $, a), M = p ? p.length : 0, B = q.rotation;
                            if (x != c) {
                                var g = R.globalAlpha;
                                R.globalAlpha *= x
                            }
                            for (var Y = 0; M > Y; Y++) {
                                var O = p[Y], Z = cd(O), m = q[Y];
                                if (B) {
                                    var _ = m.x + m.width / 2, r = m.y + m.height / 2;
                                    R.save(), xe(R, _, r), Jb(R, B), xe(R, -_, -r)
                                }
                                v && v._38o[L].push(R.interactiveInfo = {
                                    compInfos: [],
                                    matrix: B ? new rr(B, _, r).appendTranslate(-_, -r) : new rr
                                }), pq(R, Z, eq(A.stretch, $, a), m.x, m.y, m.width, m.height, D._data, D.gv), R.interactiveInfo = c, B && R.restore()
                            }
                            x != c && (R.globalAlpha = g)
                        }
                    }
                }
            }
        });
        var rh = function (O, H) {
            Mr(rh, this, [O, H])
        };
        fs(rh, ne, {
            _checkEmptyRect: !0, _40O: function (B, C) {
                var Y = this, Q = Y.s, H = B.rect;
                (B.borderColor = Y.gv.getBorderColor(Y._data)) && (B.borderType = Q("border.type"), B.borderWidth = Q("border.width"), B.borderPadding = Q("border.padding"), C = y(C, B.borderPadding + B.borderWidth / 2));
                var X = Y._data.getScale(), j = y(1, y(I(X.x), I(X.y)));
                if (B.selectWidth = Y.getSelectWidth()) {
                    var T = Y.gv._zoom;
                    B.selectType = Q("select.type"), B._97o = Y.getSelectColor(), B.selectPadding = Q("select.padding"), C = y(C, (B.selectPadding + B.selectWidth / 2 / T) / j)
                }
                C > 0 && (C *= j, H = hh(H), Bk(H, C)), Y._68o(H)
            }, _39O: function (G, A) {
                var L, O = this, w = A.rect;
                if (A.borderWidth > 0 && (L = A.borderPadding, G.strokeStyle = A.borderColor, G.lineWidth = A.borderWidth, wh(G, A.borderType, {
                    x: w.x - L,
                    y: w.y - L,
                    width: w.width + 2 * L,
                    height: w.height + 2 * L
                }), G.stroke()), A.selectWidth > 0) {
                    var q = O.gv._zoom;
                    if (L = A.selectPadding, G.strokeStyle = A._97o, G.lineWidth = A.selectWidth / q, A.rotation != c) {
                        G.save(), G.translate(A.position.x, A.position.y), G.rotate(A.rotation);
                        var t = O._data, W = t.getWidth(), j = t.getHeight(), x = A.scale, I = A.anchor;
                        w = {x: x.x * -W * I.x, y: x.y * -j * I.y, width: x.x * W, height: x.y * j}
                    }
                    wh(G, A.selectType, {
                        x: w.x - L,
                        y: w.y - L,
                        width: w.width + 2 * L,
                        height: w.height + 2 * L
                    }), A.rotation != c && G.restore(), G.stroke()
                }
            }, _3O: function () {
                var $ = this, e = $.s, G = $._data, z = G.getStyle(ng), _ = $.getBodyColor(), u = $._83o = z ? {
                    shape: z,
                    _53o: $.getBodyColor("shape.background"),
                    _27Q: cd(e("shape.repeat.image"), _),
                    shapeGradientPack: e("shape.gradient.pack"),
                    _54o: e("shape.border.width"),
                    _55o: e("shape.border.color"),
                    _56o: e("shape.border.3d"),
                    _57o: e("shape.border.3d.color"),
                    _58o: e("shape.border.3d.accuracy"),
                    shapeGradient: e("shape.gradient"),
                    _59o: e("shape.gradient.color"),
                    _60o: e("shape.border.pattern"),
                    _61o: e("shape.border.cap"),
                    _62o: e("shape.border.join"),
                    bodyColor: _
                } : {img: cd($.gv.getImage(G), _), bodyColor: _, stretch: e("image.stretch")};
                if (V && !L) ; else {
                    u.rect = G.getRect(), u.position = G.p(), u.scale = G.getScale(), u.anchor = G.getAnchor(), u.rotation = G.getRotation(), z === Wj && (u._63o = e("shape.depth"));
                    var E = 0;
                    if (z) E = Qo(c, u._54o / 2, u._62o), $.s("shape.dash") && (E = y(E, ($.s("shape.dash.width") || u._54o) / 2)); else if (u.img && u.img.boundExtend) if (E = eq(u.img.boundExtend, G, $.gv), u.img.boundExtendAbsolute) {
                        var R = G.getScale();
                        E /= $.gv._zoom * y(1, y(I(R.x), I(R.y)))
                    } else if (!eq(u.img.fitSize, G, $.gv)) {
                        var J = eq(u.img.width, G, $.gv), M = eq(u.img.height, G, $.gv);
                        E *= y(G.getWidth() / J, G.getHeight() / M)
                    }
                    $._40O(u, E);
                    var r = e("clip.percentage");
                    if (1 > r && (0 > r && (r = 0), u.clipRect = Oh(G.getAnchorRect(), e("clip.direction"), r)), z) {
                        var k = e("shape.fill.clip.percentage");
                        1 > k && (0 > k && (k = 0), u.shapeClipRect = Oh(G.getAnchorRect(), e("shape.fill.clip.direction"), k))
                    }
                }
            }, getPosition: function (K, W, h, d) {
                var P = Nc(K, this._83o.rect, d);
                return P.x += W, P.y += h, P
            }, _80o: function (w) {
                var T = this, V = T.s, B = T.gv, h = T._data, s = T._83o, v = s.rect, Z = s.position, b = s.rotation,
                    M = s.anchor, z = s.scale, K = s.shape, N = s.clipRect;
                if (!T._checkEmptyRect || v.width > 0 && v.height > 0) {
                    var C = h.getSize();
                    if (C.x = -C.width * M.x, C.y = -C.height * M.y, w.save(), xe(w, Z.x, Z.y), Jb(w, b), tp(w, z.x, z.y), N && (w.beginPath(), w.rect(N.x, N.y, N.width, N.height), w.clip()), T.freeDraw) T.freeDraw(w, C, s); else if (K) {
                        var y, r, E, H, O = s._60o, m = lh(w, O), J = s._53o, D = s._27Q, X = s._54o, F = s._55o,
                            G = s.shapeGradientPack, k = w.lineJoin, n = w.lineCap;
                        if ("roundRect" === K ? y = V("shape.corner.radius") : "polygon" === K ? y = V("shape.polygon.side") : "arc" === K && (y = V("shape.arc.from"), r = V("shape.arc.to"), E = V("shape.arc.close"), H = V("shape.arc.oval")), w.lineJoin = s._62o, w.lineCap = s._61o, V("shape.background2") && (wh(w, K, C, y, r, E, H), td(w, V("shape.background2"), V("shape.gradient2"), V("shape.gradient2.color"), C), w.fill()), J || D || G) {
                            var a = s.shapeClipRect;
                            a && (w.save(), w.beginPath(), w.rect(a.x, a.y, a.width, a.height), w.clip()), wh(w, K, C, y, r, E, H), G ? xf(w, G) : D ? rb(w, D, s.bodyColor, null, h, B) : td(w, J, s.shapeGradient, s._59o, C), w.fill(), a && w.restore(), G && w.restore(), w !== m && wh(m, K, C, y, r, E, H)
                        } else wh(m, K, C, y, r, E, H);
                        if (X > 0) {
                            var S = V("shape.border.width.absolute");
                            S && (w.save(), w.setTransform(1, 0, 0, 1, 0, 0)), w.lineWidth = X, w.strokeStyle = F, w.stroke(), S && w.restore(), s._56o && Tq(w, F, s._57o, X, B._zoom, s._58o)
                        }
                        if (bo(w, O), V("shape.dash")) {
                            var f = V("shape.dash.width") || X;
                            if (f > 0) {
                                O = V("shape.dash.pattern");
                                var m = lh(w, O, T._2Q("shape.dash.offset"));
                                m !== w && wh(m, K, C, y, r, E, H), T._1Q(w, "shape", f, O)
                            }
                        }
                        pp(w, J, s._63o, C), w.lineJoin = k, w.lineCap = n
                    } else {
                        var A = T.interactiveInfo;
                        A && (w.interactiveInfo = A.bodyInfo = {
                            compInfos: [],
                            matrix: new rr(b, Z.x, Z.y, z.x, z.y)
                        }), pq(w, s.img, s.stretch, C.x, C.y, C.width, C.height, h, B, s.bodyColor), w.interactiveInfo = c
                    }
                    w.restore()
                }
                T._39O(w, s)
            }, _48O: function () {
            }, _47O: function () {
            }
        });
        var Hi = function (X, P) {
            Mr(Hi, this, [X, P])
        }, Dc = function (v, g, P, M) {
            var o = Wg(v, g);
            return P = M ? x(P, o) : kc(P, o), o ? P /= o : P = 0, {x: v.x + (g.x - v.x) * P, y: v.y + (g.y - v.y) * P}
        };
        fs(Hi, ne, {
            _3O: function () {
                var r, W = this, k = W._data, R = W.gv, E = W.s, v = E(ms), b = k.isLooped(), L = E("edge.width"),
                    Y = E("edge.center"), i = E("edge.offset"), T = R.getBorderColor(k), C = T ? E("border.width") : 0,
                    h = W.getSelectWidth(), J = k._40I, j = k._41I, B = W._78o = J && j ? {
                        looped: b,
                        type: v,
                        width: L,
                        center: Y,
                        color: W.getBodyColor("edge.color"),
                        borderColor: T,
                        borderWidth: C,
                        _97o: h ? W.getSelectColor() : c,
                        selectWidth: h,
                        pattern: E("edge.pattern"),
                        cap: E("edge.cap"),
                        join: E("edge.join"),
                        is3d: E("edge.3d"),
                        _67o: E("edge.3d.color"),
                        _66o: E("edge.3d.accuracy")
                    } : c;
                if (B) {
                    var X = F.getEdgeType(v);
                    if (X) {
                        var S = X(k, Jp(W, R, k, b, v), R, W._19Q);
                        S.points && S.points.size() > 1 ? (B.edgeTypeInfo = S, r = sd(B.edgeTypeInfo.points)) : S[nk] && S.rect && (B.edgeTypeInfo = S, r = S.rect)
                    } else {
                        var I = E("edge.source.anchor.x"), m = E("edge.source.anchor.y"), e = E("edge.target.anchor.x"),
                            N = E("edge.target.anchor.y"),
                            w = ag(R, J, E("edge.source.position"), E("edge.source.offset.x"), E("edge.source.offset.y"), I, m),
                            H = ag(R, j, E("edge.target.position"), E("edge.target.offset.x"), E("edge.target.offset.y"), e, N);
                        if (v === ik) {
                            var s = B.points = E(mm) || Ah, M = s.size();
                            B.segments = E("edge.segments");
                            var g = I !== $ || m !== $, _ = e !== $ || N !== $;
                            if (!Y) if (i) g || (w = Dc(w, M ? s.get(0) : H, i, M)), _ || (H = Dc(H, M ? s.get(M - 1) : w, i, M)); else {
                                var V;
                                g || (V = qg(w, M ? s.get(0) : H, Bm(R, J)), V && (w = {
                                    x: V[0],
                                    y: V[1]
                                })), _ || (V = qg(M ? s.get(M - 1) : w, H, Bm(R, j)), V && (H = {x: V[0], y: V[1]}))
                            }
                            r = Kb(sd(B.points), sd(w, H))
                        } else {
                            var G = Jp(W, R, k, b, v);
                            if (W._19Q || (G = -G), b) w = hh(w), w.x = R.getNodeRect(J).x, B.radius = G, r = {
                                x: w.x - G,
                                y: w.y - G,
                                width: 2 * G,
                                height: 2 * G
                            }; else {
                                var q = Wg(w, H), f = kc(i, q), U = {x: f, y: G}, l = {x: q - f, y: G},
                                    O = n(H.y - w.y, H.x - w.x), d = B.mat = new Op(O);
                                if (B.orienAngle = O, B.angle = H.x < w.x ? O + u : O, B.rect = {
                                    x: U.x,
                                    y: U.y,
                                    width: l.x - U.x,
                                    height: 0
                                }, B.origin = w, U = d.tf(U), U.x += w.x, U.y += w.y, l = d.tf(l), l.x += w.x, l.y += w.y, Y) {
                                    var P = {x: q, y: 0};
                                    P = d.tf(P), P.x += w.x, P.y += w.y, r = sd([w, U, l, P]), B.c1 = w, B.c2 = P
                                } else r = sd(U, l);
                                w = U, H = l
                            }
                        }
                        B.sourcePoint = w, B.targetPoint = H, k._lastSourcePoint = w, k._lastTargetPoint = H
                    }
                    var z = 0;
                    E("edge.dash") && (z = E("edge.dash.width") || L);
                    var p = "square" === B.cap ? .71 : .5;
                    Qo(r, y(z * p, L * p + C + h), B.join), W._68o(r)
                }
            }, getRotation: function (b, q, Q) {
                b = b || 0;
                var $ = this._78o;
                if ($) {
                    var j, e = $.angle, l = $.points, D = $.edgeTypeInfo;
                    if (e != c) return q ? $.orienAngle + b : e + b;
                    if (D && D[nk]) return D.getRotation ? D.getRotation(this, b, q, Q) : 0;
                    if (D && D.points) {
                        var O = D.points;
                        return j = O.size(), no[Q] ? j && 0 === j % 2 ? Eo(O.get(j / 2 - 1), O.get(j / 2), q, b) : b : wb[Q] ? Eo(O.get(0), O.get(1), q, b) : Eo(O.get(j - 2), O.get(j - 1), q, b)
                    }
                    if (l) return j = l.size(), no[Q] ? j && 0 === j % 2 ? Eo(l.get(j / 2 - 1), l.get(j / 2), q, b) : b : wb[Q] ? Eo($.sourcePoint, j ? l.get(0) : $.targetPoint, q, b) : Eo(j ? l.get(j - 1) : $.sourcePoint, $.targetPoint, q, b)
                }
                return b
            }, getPosition: function (W, f, L, $, c) {
                var T = this._78o;
                if (T) {
                    var t, s = T.type, r = T.points, P = T.edgeTypeInfo, i = T.sourcePoint, o = T.targetPoint;
                    if (!s) return T.looped ? {
                        x: i.x - T.radius + f,
                        y: i.y + L
                    } : (c && i && o && (i.x > o.x || i.x === o.x && i.y > o.y) && (W = Fr[W], L = -L), t = Nc(W, T.rect, $), t.x += f, t.y += L, t = T.mat.tf(t), t.x += T.origin.x, t.y += T.origin.y, t);
                    if (P && P[nk]) return P.getPosition ? P.getPosition(this, W, f, L, $, c) : {
                        x: (i.x + o.x) / 2,
                        y: (i.y + o.y) / 2
                    };
                    if (r) {
                        var t, E = r.size();
                        if (no[W]) {
                            if (E) {
                                var u = E % 2;
                                if (0 === u) return mi(r.get(E / 2 - 1), r.get(E / 2), W, f, L, $, c);
                                t = r.get((E - u) / 2)
                            } else t = {x: (i.x + o.x) / 2, y: (i.y + o.y) / 2};
                            return t = Nc(W, {x: t.x, y: t.y, width: 0, height: 0}, $), t.x += f, t.y += L, t
                        }
                        return wb[W] ? mi(i, E ? r.get(0) : o, W, f, L, $, c) : mi(E ? r.get(E - 1) : i, o, W, f, L, $, c)
                    }
                    if (P) {
                        var V = P.points, E = V.size();
                        if (no[W]) {
                            var u = E % 2;
                            return 0 === u ? mi(V.get(E / 2 - 1), V.get(E / 2), W, f, L, $, c) : (t = V.get((E - u) / 2), t = Nc(W, {
                                x: t.x,
                                y: t.y,
                                width: 0,
                                height: 0
                            }, $), t.x += f, t.y += L, t)
                        }
                        return wb[W] ? mi(V.get(0), V.get(1), W, f, L, $, c) : mi(V.get(E - 2), V.get(E - 1), W, f, L, $, c)
                    }
                }
                return Wo
            }, _42: function (O) {
                this._78o && Hi.superClass._42.call(this, O)
            }, drawPath: function (e, E) {
                e.beginPath();
                var z = E.type, M = E.points, p = E.segments, Z = E.edgeTypeInfo;
                if (!z || M) {
                    var u = E.sourcePoint, q = u.x, I = u.y, l = E.targetPoint, c = l.x, o = l.y;
                    if (z) if (p) {
                        var C = new vp({x: q, y: I});
                        C.addAll(M), C.add({x: c, y: o}), Qe(e, C, p)
                    } else e.moveTo(q, I), M.each(function (W) {
                        e.lineTo(W.x, W.y)
                    }), e.lineTo(c, o); else E.looped ? e.arc(q, I, E.radius, 0, k, !0) : E.center ? (e.moveTo(E.c1.x, E.c1.y), e.lineTo(q, I), e.lineTo(c, o), e.lineTo(E.c2.x, E.c2.y)) : (e.moveTo(q, I), e.lineTo(c, o))
                } else Z && (Z.points ? Qe(e, Z.points, Z.segments) : Z[nk] && Z[nk](e, Z))
            }, _80o: function (Q) {
                var K = this, w = K.s, U = K._78o, u = U.width, v = U.selectWidth, G = U.borderWidth, s = U.color,
                    D = Q.lineJoin, p = Q.lineCap, V = U.pattern;
                Q.lineJoin = U.join, Q.lineCap = U.cap, K.drawPath(lh(Q, V), U);
                var q = w("edge.width.absolute");
                if (q && (Q.save(), Q.setTransform(1, 0, 0, 1, 0, 0)), v && (Q.strokeStyle = U._97o, Q.lineWidth = u + 2 * (G + v), Q.stroke()), G && (Q.strokeStyle = U.borderColor, Q.lineWidth = u + 2 * G, Q.stroke()), Q.strokeStyle = s, Q.lineWidth = u, Q.stroke(), U.is3d && Tq(Q, s, U._67o, u, K.gv._zoom, U._66o), q && Q.restore(), bo(Q, V), w("edge.dash")) {
                    V = w("edge.dash.pattern");
                    var S = lh(Q, V, K._2Q("edge.dash.offset"));
                    S !== Q && K.drawPath(S, U), K._1Q(Q, "edge", w("edge.dash.width") || u, V)
                }
                Q.lineJoin = D, Q.lineCap = p
            }, _48O: function () {
            }, _47O: function () {
            }, _71o: function (w, J) {
                var j = this, X = j._data;
                if (j._19Q = !0, !X.getEdgeGroup()) return w ? X.s("edge.gap") : 0;
                var S, F = 0, x = 0, r = 0;
                if (X.getEdgeGroup().getSiblings().each(function (i) {
                    i.each(function (g) {
                        if (j.gv.isVisible(g) && g.s(ms) == J) {
                            var b = g.s("edge.gap");
                            S ? (x += r / 2 + b / 2, r = b) : (S = g, r = b), g === X && (F = x)
                        }
                    })
                }), w) return x - F + r;
                var A = F - x / 2;
                return S && X._40I !== S._40I && (j._19Q = !1), A
            }
        });
        var Bf = function (D, v) {
            Mr(Bf, this, [D, v])
        };
        fs(Bf, rh, {
            _3O: function () {
                var g, X, J = this, z = J.s, k = J._data, u = J.gv;
                if (J._88I = c, k.isExpanded() && k.eachChild(function (m) {
                    var i = u.getBoundsForGroup(m);
                    i && (X || (X = []), X.push(i), g = Kb(g, i))
                }), g) {
                    var M = u.getLabel(k), y = z("group.type");
                    g = We(y, X, g), yf(g, k, "group.padding", 1);
                    var x = J._88I = {type: y, rect: g, _64o: g};
                    if (!y && M != c) {
                        var i, s = J.labelInfo = {
                            label: M,
                            color: z("group.title.color"),
                            font: z("group.title.font"),
                            align: z("group.title.align")
                        }, q = wk(s, M), R = q.width, $ = q.height, w = z("group.title.align");
                        R > g.width && (g.width = R), s.rect = {
                            y: g.y - $,
                            width: q.width,
                            height: $
                        }, i = w === Ch ? g.x : w === Te ? g.x + g.width - R : g.x + g.width / 2 - R / 2, s.rect.x = i, x.titleRect = {
                            x: g.x,
                            y: g.y - $,
                            width: g.width,
                            height: $ + 1
                        }, x.rect = {x: g.x, y: g.y - $, width: g.width, height: g.height + $}
                    }
                    J._40O(x, z("group.border.width") / 2)
                } else Bf.superClass._3O.call(J)
            }, getPosition: function (A, G, T, Z) {
                var o = this._88I;
                if (o) {
                    var M = Nc(A, o.rect, Z);
                    return M.x += G, M.y += T, M
                }
                return Bf.superClass.getPosition.apply(this, arguments)
            }, _24O: function (I, l) {
                var W = this._88I;
                (!W || W.type || "label2" === I) && Bf.superClass._24O.call(this, I, l)
            }, _80o: function (e) {
                var T = this, A = T._88I;
                if (A) {
                    var _ = T._data, Z = T.s, a = T.gv, U = A.type, r = A.rect, W = A._64o, O = A.titleRect,
                        C = T.getBodyColor(), b = cd(Z("group.image"), C), y = Z("group.image.stretch"),
                        F = T.getBodyColor("group.background"), q = cd(Z("group.repeat.image"), C),
                        l = Z("group.gradient.pack"), B = Z("group.gradient"), i = Z("group.gradient.color"),
                        v = Z("group.depth");
                    if (U) {
                        var P = Z("group.border.pattern"), g = Z("group.border.width"), H = e.lineJoin, j = e.lineCap;
                        if (e.lineJoin = Z("group.border.join"), e.lineCap = Z("group.border.cap"), b) {
                            if (e.save(), wh(e, U, r), e.clip(), pq(e, b, y, r.x, r.y, r.width, r.height, _, a, C), e.restore(), g > 0) {
                                var N = lh(e, P);
                                wh(N, U, r), e.lineWidth = g, e.strokeStyle = Z("group.border.color"), e.stroke(), bo(e, P)
                            }
                        } else {
                            var N = lh(e, P);
                            F || q || l ? (wh(e, U, r), l ? xf(e, l) : q ? rb(e, q, C, null, _, a) : td(e, F, B, i, r), e.fill(), l && e.restore(), e !== N && wh(N, U, r)) : wh(N, U, r), g > 0 && (e.lineWidth = g, e.strokeStyle = Z("group.border.color"), e.stroke()), bo(e, P), U === Wj && pp(e, F, v, r)
                        }
                        e.lineJoin = H, e.lineCap = j
                    } else if (b ? pq(e, b, y, W.x, W.y, W.width, W.height, _, a, T.getBodyColor()) : (F || q) && (q ? rb(e, q, C, null, _, a) : td(e, F, B, i, W), wh(e, Wj, W), e.fill(), pp(e, F, v, W)), O) {
                        var u = Z("group.title.background");
                        Ui(e, O.x, O.y, O.width, O.height, u), pp(e, u, v, O)
                    }
                    T._39O(e, A)
                } else Bf.superClass._80o.call(T, e)
            }
        });
        var vs = function (L, n) {
            Mr(vs, this, [L, n])
        };
        fs(vs, rh, {
            _80o: function ($) {
                this._39O($, this._83o)
            }
        });
        var zd = function (P, K) {
            Mr(zd, this, [P, K])
        };
        fs(zd, rh, {
            _3O: function () {
                var g = this, F = g._data, $ = g.s, i = g.gv, H = F.getPoints(), K = i.getBorderColor(F),
                    k = K ? $("border.width") : 0, A = g.getSelectWidth(), B = $("shape.border.width"), e = F.getRect(),
                    L = i.getBodyColor(F), Q = g._99o = H.isEmpty() ? c : {
                        rect: e,
                        rotation: F.getRotation(),
                        fillRule: $("shape.fill.rule"),
                        scale: F.getScale(),
                        position: F.p(),
                        points: H,
                        segments: F.getSegments(),
                        bodyColor: L,
                        borderColor: K,
                        borderWidth: k,
                        _94o: $("shape.border.3d"),
                        _95o: $("shape.border.3d.color"),
                        _96o: $("shape.border.3d.accuracy"),
                        _97o: A ? g.getSelectColor() : c,
                        selectWidth: A,
                        _53o: $("shape.background"),
                        _27Q: cd($("shape.repeat.image"), L),
                        shapeGradientPack: $("shape.gradient.pack"),
                        _54o: B,
                        _55o: $("shape.border.color"),
                        shapeGradient: $("shape.gradient"),
                        _59o: $("shape.gradient.color"),
                        _60o: $("shape.border.pattern"),
                        _61o: $("shape.border.cap"),
                        _62o: $("shape.border.join")
                    };
                if (Q) {
                    var h = F.getScale(), U = y(1, y(I(h.x), I(h.y)));
                    $("shape.dash") && $("shape.dash.width") > B && (B = $("shape.dash.width"));
                    var o = B * ("square" === Q._61o ? .71 : .5) + k + A / g.gv._zoom / U;
                    o && (o *= U, e = hh(e), Qo(e, o, Q._62o)), g._68o(e);
                    var f = $("clip.percentage");
                    1 > f && (0 > f && (f = 0), Q.clipRect = Oh(F.getAnchorRect(), $("clip.direction"), f));
                    var t = $("shape.fill.clip.percentage");
                    1 > t && (0 > t && (t = 0), Q.shapeClipRect = Oh(F.getAnchorRect(), $("shape.fill.clip.direction"), t))
                }
            }, getPosition: function (M, w, O, p) {
                var q = this._99o;
                if (q) {
                    var $ = Nc(M, q.rect, p);
                    return $.x += w, $.y += O, $
                }
                return Wo
            }, _42: function (m) {
                this._99o && zd.superClass._42.call(this, m)
            }, _80o: function (C) {
                var Q, k = this, s = k.s, m = k._99o, n = m.position, j = m.scale, u = m.rotation, v = m.bodyColor,
                    i = m.borderWidth, o = m.selectWidth, F = m._53o, N = m._27Q, g = m.shapeGradientPack, t = m._54o,
                    S = m.clipRect, J = m.shapeClipRect, U = m.points, E = m.segments, f = k._data.isClosePath(),
                    K = m.fillRule, Y = F || N || g;
                C.save(), xe(C, n.x, n.y), Jb(C, u), tp(C, j.x, j.y), s("shape.background2") && (xe(C, -n.x, -n.y), Qe(C, U, E, f), td(C, s("shape.background2"), s("shape.gradient2"), s("shape.gradient2.color"), m.rect), C.fill(), xe(C, n.x, n.y)), S && (C.beginPath(), C.rect(S.x, S.y, S.width, S.height), C.clip()), Y && J && (C.save(), C.beginPath(), C.rect(J.x, J.y, J.width, J.height), C.clip()), xe(C, -n.x, -n.y);
                var D = m._60o, H = lh(C, D), I = C.lineJoin, R = C.lineCap;
                C.lineJoin = m._62o, C.lineCap = m._61o, Y ? (Qe(C, U, E, f), g ? xf(C, g) : N ? rb(C, N, v, null, k._data, k.gv) : (Q = v ? v : F, td(C, Q, m.shapeGradient, m._59o, m.rect)), C.fill(K), J && (C.restore(), xe(C, -n.x, -n.y)), g && C.restore(), H !== C && Qe(H, U, E, f)) : Qe(H, U, E, f);
                var z = s("shape.border.width.absolute");
                if (z && (C.save(), C.setTransform(1, 0, 0, 1, 0, 0)), o && (C.strokeStyle = m._97o, C.lineWidth = t + 2 * (i + o), C.stroke()), i && (C.strokeStyle = m.borderColor, C.lineWidth = t + 2 * i, C.stroke()), t && (Q = m._55o, !F && v && (Q = v), C.strokeStyle = Q, C.lineWidth = t, C.stroke(), m._94o && Tq(C, Q, m._95o, t, k.gv._zoom, m._96o)), z && C.restore(), bo(C, D), s("shape.dash")) {
                    var c = s("shape.dash.width") || t;
                    if (c > 0) {
                        D = s("shape.dash.pattern");
                        var H = lh(C, D, k._2Q("shape.dash.offset"));
                        H !== C && Qe(H, U, E, f), k._1Q(C, "shape", c, D)
                    }
                }
                C.lineJoin = I, C.lineCap = R, C.restore()
            }, _48O: function () {
            }, _47O: function () {
            }
        });
        var ji = function (g, h) {
            Mr(ji, this, [g, h])
        };
        fs(ji, zd, {
            getRotation: function (w, E, S) {
                w = w || 0;
                var K = this._data.getPoints(), b = K.size();
                return b > 1 ? no[S] ? b && 0 === b % 2 ? Eo(K.get(b / 2 - 1), K.get(b / 2), E, w) : w : wb[S] ? Eo(K.get(0), K.get(1), E, w) : Eo(K.get(b - 2), K.get(b - 1), E, w) : w
            }, getPosition: function (N, i, C, Z, k) {
                var g = this._data.getPoints(), Q = g.size();
                if (Q > 1) {
                    if (no[N]) {
                        var R = Q % 2;
                        if (0 === R) return mi(g.get(Q / 2 - 1), g.get(Q / 2), N, i, C, Z, k);
                        var X = g.get((Q - R) / 2), t = {x: X.x, y: X.y, width: 0, height: 0};
                        return X = Nc(N, t, Z), X.x += i, X.y += C, X
                    }
                    return wb[N] ? mi(g.get(0), g.get(1), N, i, C, Z, k) : mi(g.get(Q - 2), g.get(Q - 1), N, i, C, Z, k)
                }
                return Wo
            }
        });
        var bn = function (J, K) {
            Mr(bn, this, [J, K])
        };
        fs(bn, rh, {
            _3O: function () {
                var Z = this;
                bn.superClass._3O.call(Z);
                var e = Z.s, m = Z._83o;
                Z._82o = m.img || m.shape ? c : {
                    background: Z.getBodyColor("grid.background"),
                    depth: e("grid.depth"),
                    rect: m.rect,
                    _88o: e("grid.cell.depth"),
                    cellBorderColor: e("grid.cell.border.color"),
                    _89o: e("grid.row.count"),
                    _90o: e("grid.column.count"),
                    block: e("grid.block"),
                    _91o: e("grid.block.color"),
                    _92o: e("grid.block.padding"),
                    _93o: e("grid.block.width")
                }
            }, _80o: function (T) {
                var z = this, w = z._82o;
                if (!w) return bn.superClass._80o.call(z, T), void 0;
                var r, t, u = z._data, Y = w.background, f = w.rect, x = w.block, v = w._91o, h = w._92o, M = w._93o,
                    q = w._88o, l = w.cellBorderColor, K = w._89o, s = w._90o;
                if (Y) if (Ui(T, f.x, f.y, f.width, f.height, Y), pp(T, Y, w.depth, f), q) for (r = 0; K > r; r++) for (t = 0; s > t; t++) f = u.getCellRect(r, t), f && pp(T, Y, q, f); else if (l) {
                    for (T.beginPath(), r = 0; K > r; r++) for (t = 0; s > t; t++) f = u.getCellRect(r, t), f && T.rect(f.x, f.y, f.width, f.height);
                    T.strokeStyle = l, T.lineWidth = 1, T.stroke()
                }
                if ("h" === x) for (r = 0; K > r; r++) f = Kb(u.getCellRect(r, 0), u.getCellRect(r, s - 1)), Bk(f, h), Qg(T, v, f.x, f.y, f.width, f.height, M); else if ("v" === x) for (t = 0; s > t; t++) f = Kb(u.getCellRect(0, t), u.getCellRect(K - 1, t)), Bk(f, h), Qg(T, v, f.x, f.y, f.width, f.height, M);
                z._39O(T, z._83o)
            }
        });
        var xh = function (c, o) {
            Mr(xh, this, [c, o])
        };
        fs(xh, rh, {
            _checkEmptyRect: !1, _81o: function () {
                var D = this._data, O = xh.superClass._81o.call(this), N = D.s("text");
                if (N != c) {
                    var K, n, y = D.s("text.font"), E = D.s("text.align"), o = D.s("text.vAlign"), L = Tr(y, N),
                        V = L.width, x = L.height, Z = D.getAnchor(), m = D.getWidth(), $ = D.getHeight();
                    "left" === E ? K = -m * Z.x : "center" === E ? K = -m * Z.x + (m - V) / 2 : "right" === E && (K = m * (1 - Z.x) - L.width), "top" === o ? n = -$ * Z.y : "middle" === o ? n = -$ * Z.y + ($ - x) / 2 : "bottom" === o && (n = $ * (1 - Z.y) - L.height);
                    var U, s = D.getMatrix();
                    if (U = sd([s.tf(K, n), s.tf(K + V, n), s.tf(K + V, n + x), s.tf(K, n + x)]), O = Kb(O, U), O && D.s("text.shadow")) {
                        var w = hh(O);
                        w.x += D.s("text.shadow.offset.x"), w.y += D.s("text.shadow.offset.y"), Bk(w, D.s("text.shadow.blur")), O = Kb(O, w)
                    }
                }
                return O
            }
        });
        var Re = rg.Interactor = function (f) {
            this.gv = this._graphView = f
        };
        Wb("Interactor", v, {
            ms_listener: 1, getView: function () {
                return this.gv.getView()
            }, setUp: function () {
                this.addListeners()
            }, tearDown: function () {
                this.removeListeners(), this.clear()
            }, clear: function () {
            }, fi: function (H) {
                this.gv.fi(H)
            }, setCursor: function (V) {
                jp || this.gv.setCursor(V)
            }, startDragging: function (s) {
                var H = this;
                H._lastClientPoint = cc(s), H._lastLogicalPoint = H.gv.lp(s), oc(H, s)
            }, clearDragging: function () {
                var t = this;
                t._lastClientPoint = t._lastLogicalPoint = t._logicalPoint = c
            }, autoScroll: function (k) {
                return this.gv.autoScroll(k, this._lastClientPoint)
            }
        });
        var Pn = function (r) {
            var O = this;
            O.gv = r, O._is2d = r instanceof rg.GraphView, O._is2d && (O.filter = function (c) {
                return r.isSelectable(c) && r.isInteractive(c)
            }), r.getView(), ["mousedown", "mousemove", "touchstart", "touchmove"].forEach(function (V) {
                O.addListener(V)
            }), m.addEventListener(lm, function (w) {
                fj(w) && O.handleWindowMove(w)
            }, !1), m.addEventListener(qb, function (p) {
                fj(p) && O.handleWindowUp(p)
            }, !1), m.addEventListener(Yg, function (P) {
                fj(P) && O.handleWindowMove(P)
            }, !1), m.addEventListener(Wk, function (Y) {
                fj(Y) && O.handleWindowUp(Y)
            }, !1), O.initImageResource()
        };
        fs(Pn, Re, {
            enableVR: function (U) {
                var t = this;
                if (!!t._vrEnable !== U) if (t._vrEnable = U, U) t.gv.vr.mp(t.onVRControllerChange, t); else if (t.gv.vr.ump(t.onVRControllerChange, t), t._vrRayPolyline) {
                    var a = t.gv.dm();
                    a.remove(t._vrRayPolyline), a.remove(t._vrRayHitPoint), t._vrRayPolyline = $, t._vrRayHitPoint = $
                }
            }, onVRControllerChange: function (m) {
                var a = this, u = m.property, d = m.newValue, s = a.gv.vr.getController(d.id), W = s.getRay();
                W && ("gamepad.button.trigger" === u ? "down" === d._62O ? a.handle_mousedown(W) : a.handleWindowUp(W) : "gamepad.pose" === u && (a.handle_mousemove(W), a.handleWindowMove(W)))
            }, drawVRRay: function (l, w, L) {
                var W, q = this, o = q.gv, v = q._vrRayPolyline, y = !1;
                if (v) W = q._vrRayHitPoint; else {
                    var N = o.dm();
                    q._vrRayPolyline = v = new t.Polyline, q._vrRayHitPoint = W = new t.Node, W.s({
                        shape3d: "billboard",
                        "shape3d.transparent": !0,
                        "shape3d.texture.scale": 10,
                        "shape3d.image": "coreInteractorRayHitImage"
                    }), W.setAnchor3d(.5, .5, .499);
                    var u = .08 / o.vr.measureOflength;
                    W.s3(u, u, u), N.add(v), N.add(W), y = !0
                }
                if (w) {
                    var $ = L.world, e = L.worldNormal, g = $.x, j = $.y, Z = $.z;
                    v.s("shape.border.color", "red"), v.setPoints([{x: l.origin.x, y: l.origin.z, e: l.origin.y}, {
                        x: g,
                        y: Z,
                        e: j
                    }]), W.s("3d.visible", !0), W.p3(g, j, Z), W.lookAtDirection([e.x, e.y, e.z], "front")
                } else {
                    v.s("shape.border.color", "blue");
                    var D = new t.Math.Vector3;
                    D.copy(l.direction).setLength(1e3 / q.gv.vr.measureOflength).add(l.origin), v.setPoints([{
                        x: l.origin.x,
                        y: l.origin.z,
                        e: l.origin.y
                    }, {x: D.x, y: D.z, e: D.y}]), W.s("3d.visible", !1)
                }
                o.fi({kind: "vrRayIntersect", ray: l, data: w, intersect: L, polyline: v, hitNode: W, begin: y})
            }, addListener: function (J) {
                var b = this;
                b.gv.getView().addEventListener(J, function (r) {
                    F.preventDefault(r), fj(r) && !b.disabled && b["handle_" + J](r)
                }, !1)
            }, handle_touchstart: function (K) {
                this.handle_mousedown(K)
            }, handle_touchmove: function (W) {
                this.handle("onMove", W)
            }, handleWindowMove: function (Z) {
                this.downInfo && (this.isDragging ? this.handleDownInfo("onDrag", Z) : (this.handleDownInfo("onBeginDrag", Z), this.isDragging = !0))
            }, handleWindowUp: function (o) {
                if (this.isDragging && (this.handleDownInfo("onEndDrag", o), this.isDragging = !1), this.downInfo) {
                    var j = this.handle("onUp", o);
                    j && j.data === this.downInfo.data ? this.handleMissingUp(o) : this.handleDownInfo("onUp", o), this.downInfo = c
                }
            }, handle_mousedown: function (I) {
                this.isDragging && (this.handleDownInfo("onEndDrag", I), this.isDragging = !1), this.downInfo = this.handle("onDown", I)
            }, handle_mousemove: function (T) {
                var o = this, J = o.gv;
                o._hoverTimer && (R(o._hoverTimer), delete o._hoverTimer);
                var r, N, h, H = o.handle("onMove", T), u = this.currentInfo ? this.currentInfo.data : c,
                    B = this.currentInfo ? this.currentInfo.hits : c;
                if (H && (N = H.data, h = H.hits, o._hoverTimer = g(function () {
                    R(o._hoverTimer), delete o._hoverTimer, o.handle("onHover", T, H)
                }, J.getHoverDelay() || F.hoverDelay)), N !== u) {
                    if (N && N.s("onEnter") && N.s("onEnter")(T, N, J), u && u.s("onLeave") && u.s("onLeave")(T, u, J), B) for (r in B) B[r].target.onLeave && this.handleLeave(T, r);
                    if (h) for (r in h) h[r].target.onEnter && h[r].target.onEnter(T, N, J, h[r].point, h[r].width, h[r].height)
                } else {
                    if (B) for (r in B) h && h[r] || B[r].target.onLeave && this.handleLeave(T, r);
                    if (h) for (r in h) B && B[r] || h[r].target.onEnter && h[r].target.onEnter(T, N, J, h[r].point, h[r].width, h[r].height)
                }
                this.currentInfo = H
            }, handle: function (J, n, N) {
                var q, h = this, b = h.gv;
                if (h._is2d) {
                    if (N = N || b.getDataInfoAt(n, this.filter), !N) return;
                    if (q = N.ui.interactiveInfo) {
                        var Y, Q = N.data;
                        if (Q.s(J) && Q.s(J)(n, Q, b), "body" === N.part && q.bodyInfo) Y = "body", N.hits = this.handleImage(Y, b.getImage(Q), J, n, Q, N.point, q.bodyInfo); else if ("icons" === N.part && q._38o) {
                            var c = q._38o[N.name];
                            c && c[N.index] && (Y = "icons|" + N.name + "|" + N.index, N.hits = this.handleImage(Y, N.icon, J, n, Q, N.point, c[N.index]))
                        }
                    }
                    return N
                }
                var Q, G, $, f, V = 1 / 0;
                if (!N) if (n && n instanceof t.Math.Ray) {
                    if (b.dm().each(function (X) {
                        if (!X.isController && X !== h._vrRayPolyline && X !== h._vrRayHitPoint) {
                            var T = b.getData3dUI(X);
                            q = T.interactiveInfo, q && ($ = b.intersectObject(n, X), $ && (f = n.origin.distanceToSquared($.world), V > f && (Q = X, G = $, V = f)))
                        }
                    }), h.drawVRRay(n, Q, G), !Q) return;
                    N = {data: Q, part: G.part, ui: T}
                } else {
                    if (N = b.getDataInfoAt(n), !N) return;
                    N && (N = {data: N.data, part: N.part})
                }
                if (!G) {
                    Q = N.data;
                    var T = b.getData3dUI(Q);
                    if (N.ui = T, q = T.interactiveInfo, !q) return N;
                    if (G = b.intersectObject(n, Q), !G) return
                }
                Q.s(J) && Q.s(J)(n, Q, b);
                var m, k = G.part;
                return "body" !== k && (m = Q.s(k + ".image") || Q.s("shape3d." + k + ".image")), m || (m = Q.s("all.image") || Q.s("shape3d.image")), (q = q[m]) ? (N.part = "body", N.interactiveInfo = q, N.point = G.uv.multiply({
                    x: q.bodyInfo.rect.width,
                    y: q.bodyInfo.rect.height
                }), N.image = m, N.hits = this.handleImage("body", m, J, n, Q, N.point, q.bodyInfo), N) : void 0
            }, _handleLeaveOrMissing: function (o, y, N) {
                var F = "leave" === o ? this.currentInfo : this.downInfo;
                if (F) {
                    var c = F.interactiveInfo || F.ui.interactiveInfo;
                    if (c) {
                        var B, h, Y = F.data;
                        if (this._is2d) {
                            if (h = this.gv.lp(y), "body" === F.part && c.bodyInfo) B = "body", "leave" === o ? this.handleLeaveImage(N, B, this.gv.getImage(Y), y, Y, h, c.bodyInfo) : this.handleMissingUpImage(B, this.gv.getImage(Y), y, Y, h, c.bodyInfo); else if ("icons" === F.part && c._38o) {
                                var $ = c._38o[F.name];
                                $ && $[F.index] && (B = "icons|" + F.name + "|" + F.index, "leave" === o ? this.handleLeaveImage(N, B, F.icon, y, Y, h, $[F.index]) : this.handleMissingUpImage(B, F.icon, y, Y, h, $[F.index]))
                            }
                        } else {
                            var M = this.gv.intersectObject(y, Y);
                            h = M ? M.uv.multiply({x: c.bodyInfo.rect.width, y: c.bodyInfo.rect.height}) : {
                                x: 1 / 0,
                                y: 1 / 0
                            }, "leave" === o ? this.handleLeaveImage(N, "body", F.image, y, Y, h, c.bodyInfo) : this.handleMissingUpImage("body", F.image, y, Y, h, c.bodyInfo)
                        }
                    }
                }
            }, handleDownInfo: function (m, Y) {
                if (this.downInfo) {
                    var P = this.downInfo, D = P.interactiveInfo || P.ui.interactiveInfo;
                    if (D) {
                        var E, g = P.data;
                        if (g.s(m) && g.s(m)(Y, g, this.gv), this._is2d) {
                            var i = this.gv.lp(Y);
                            if ("body" === P.part && D.bodyInfo) E = "body", this.handleDownInfoImage(E, this.gv.getImage(g), m, Y, g, i, D.bodyInfo); else if ("icons" === P.part && D._38o) {
                                var H = D._38o[P.name];
                                H && H[P.index] && (E = "icons|" + P.name + "|" + P.index, this.handleDownInfoImage(E, P.icon, m, Y, g, i, H[P.index]))
                            }
                        } else {
                            var J = this.gv.intersectObject(Y, g);
                            if (!J) return;
                            i = J.uv.multiply({
                                x: D.bodyInfo.rect.width,
                                y: D.bodyInfo.rect.height
                            }), this.handleDownInfoImage("body", P.image, m, Y, g, i, D.bodyInfo)
                        }
                    }
                }
            }, handleImage: function (T, n, y, s, W, V, g) {
                var i = {};
                if (n && (n = cd(n))) {
                    var Y = this.gv, l = g.rect, q = this.convertPoint(V, g);
                    q.inRect && (n[y] && n[y](s, W, Y, q, l.width, l.height), i[T + "|image"] = {
                        target: n,
                        point: q,
                        width: l.width,
                        height: l.height
                    });
                    for (var b = g.compInfos, z = n, B = b.length - 1; B >= 0; B--) {
                        var e = b[B], d = e.comp;
                        q = this.convertPoint(V, e, z, d, Y, W), q.inRect && (l = e.rect, d[y] && d[y](s, W, Y, q, l.width, l.height), (n = l.image) && n[y] && n[y](s, W, Y, q, l.width, l.height), i[T + "|" + B] = {
                            target: d,
                            point: q,
                            width: l.width,
                            height: l.height
                        }, n && (i[T + "|" + B + "|image"] = {target: n, point: q, width: l.width, height: l.height}))
                    }
                }
                return i
            }, handleLeave: function (X, D) {
                return this._handleLeaveOrMissing("leave", X, D)
            }, handleMissingUp: function (A) {
                return this._handleLeaveOrMissing("missing", A)
            }, handleLeaveImage: function (_, c, R, b, P, g, e) {
                if (R && (R = cd(R))) {
                    var D = this.gv, E = e.rect, s = this.convertPoint(g, e);
                    _ === c + "|image" && R.onLeave && R.onLeave(b, P, D, s, E.width, E.height);
                    for (var S = e.compInfos, T = R, d = S.length - 1; d >= 0; d--) {
                        var F = S[d], w = F.comp;
                        s = this.convertPoint(g, F, T, w, D, P), E = F.rect, w.onLeave && _ === c + "|" + d && w.onLeave(b, P, D, s, E.width, E.height), (R = E.image) && R.onLeave && _ === c + "|" + d + "|image" && R.onLeave(b, P, D, s, E.width, E.height)
                    }
                }
            }, handleMissingUpImage: function (g, y, T, n, E, U) {
                var j = "onUp", Z = this.downInfo.hits;
                if (Z && y && (y = cd(y))) {
                    var H = U.rect, V = this.convertPoint(E, U);
                    !V.inRect && Z[g + "|image"] && y[j] && y[j](T, n, this.gv, V, H.width, H.height);
                    for (var p = U.compInfos, A = y, F = p.length - 1; F >= 0; F--) {
                        var B = p[F], P = B.comp;
                        V = this.convertPoint(E, B, A, P, this.gv, n), V.inRect || (H = B.rect, P[j] && Z[g + "|" + F] && P[j](T, n, this.gv, V, H.width, H.height), (y = H.image) && y[j] && Z[g + "|" + F + "|image"] && y[j](T, n, this.gv, V, H.width, H.height))
                    }
                }
            }, handleDownInfoImage: function (h, t, z, w, x, K, I) {
                var b = this.downInfo.hits;
                if (b && t && (t = cd(t))) {
                    var g = this.gv, k = I.rect, V = this.convertPoint(K, I);
                    b[h + "|image"] && t[z] && t[z](w, x, g, V, k.width, k.height);
                    for (var a = I.compInfos, L = t, M = a.length - 1; M >= 0; M--) {
                        var r = a[M], U = r.comp;
                        V = this.convertPoint(K, r, L, U, g, x), k = r.rect, U[z] && b[h + "|" + M] && U[z](w, x, g, V, k.width, k.height), (t = k.image) && t[z] && b[h + "|" + M + "|image"] && t[z](w, x, g, V, k.width, k.height)
                    }
                }
            }, initImageResource: function () {
                F.setImage("coreInteractorRayHitImage", {
                    width: 16,
                    height: 16,
                    comps: [{
                        type: "oval",
                        background: "rgb(255,0,0)",
                        borderWidth: 1,
                        borderColor: "rgb(250,120,120)",
                        opacity: .3,
                        rotation: -1.593,
                        rect: [.73315, .6933, 14.5337, 14.61341]
                    }, {
                        type: "oval",
                        background: "rgb(255,0,0)",
                        borderWidth: 1,
                        borderColor: "rgb(250,120,120)",
                        rotation: -1.593,
                        rect: [3.56695, 3.75073, 8.8661, 8.49856]
                    }]
                })
            }, convertPoint: function (v, j, J, o, L, W) {
                var s = j.rect, d = j.matrix.applyInverse(v).sub(s),
                    I = d.x >= 0 && d.y >= 0 && d.x <= s.width && d.y <= s.height;
                if (!I) return d;
                if (o && o.pixelPerfect) {
                    var s, B = 1;
                    this._is2d ? (B = L.getZoom(), s = Wn(v.x, v.y, $, B)) : s = Wn(v.x, v.y);
                    var Q = !1, l = s.x, e = s.y, x = s.width, P = s.height, y = F.hitMaxArea, O = x * P * B * B;
                    if (O > y) {
                        var t = Math.sqrt(y / O);
                        B *= t
                    }
                    x *= B, P *= B, 2 > x && (x = 2), 2 > P && (P = 2), l *= B, e *= B;
                    var K = Zk(x, P), M = new rr(0, -l, -e, B, B);
                    M.append(j.matrix), L._drawForChecking = !0, o.transform = M;
                    var b = J.comps;
                    J.comps = [o], sp(K, J, 0, 0, x, P, W, self), J.comps = b, delete o.transform, L._drawForChecking = !1;
                    try {
                        for (var g = 0, U = K.getImageData(0, 0, x, P).data; g < U.length; g += 4) if (0 !== U[g + 3]) {
                            Q = !0;
                            break
                        }
                        K.restore()
                    } catch (m) {
                        vm = c, Q = !1
                    }
                    d.inRect = Q
                } else d.inRect = !0;
                return d
            }
        });
        var oi = rg.DefaultInteractor = function (k) {
            Mr(oi, this, [k])
        };
        Wb("DefaultInteractor", Re, {
            handle_mousedown: function (x) {
                mq(x);
                var l = this, P = l.gv, M = P.getDataAt(x);
                !P.setFocus(x) || P._editing || P._scrolling || (Ei(x) ? P.handleDoubleClick(x, M) : P.handleClick(x, M), !Bq() && M && (P.isMovable(M) || P.isInteractive(M)) || !P.isPannable() || !fj(x) || Ag(x) || (l._tx = P.tx(), l._ty = P.ty(), l.startDragging(x)))
            }, handleWindowMouseUp: function (z) {
                var C = this, V = C.gv;
                V._panning && (delete V._panning, V.onPanEnded(), C.fi({
                    kind: "endPan",
                    event: z
                })), delete C._tx, delete C._ty, C.clearDragging()
            }, handle_mousemove: function (O) {
                var a = this, S = a.gv;
                a._hoverTimer && (R(a._hoverTimer), delete a._hoverTimer), a._hoverTimer = g(function () {
                    a.fi({kind: "hover", event: O}), R(a._hoverTimer), delete a._hoverTimer
                }, S.getHoverDelay() || F.hoverDelay)
            }, handle_touchmove: function (n) {
                this.handle_mousemove(n)
            }, handleWindowMouseMove: function ($) {
                var n = this, J = n.gv, G = n._lastClientPoint;
                n.fi({
                    kind: J._panning ? "betweenPan" : "beginPan",
                    event: $
                }), J._panning = 1, J.setTranslate(n._tx + $.clientX - G.x, n._ty + $.clientY - G.y)
            }, handle_mousewheel: function (e) {
                this.gv.handleScroll(e, e.wheelDelta)
            }, handle_DOMMouseScroll: function (v) {
                2 === v.axis && this.gv.handleScroll(v, -v.detail)
            }, handle_keydown: function (T) {
                this.gv.handleKeyDown(T)
            }
        });
        var Oe = rg.SelectInteractor = function (j) {
            Mr(Oe, this, [j])
        };
        Wb("SelectInteractor", Re, {
            _42: function () {
                var i = this, n = i.gv, G = n.getZoom(), f = i.mark, O = i.div;
                O || (O = i.div = Gl(), Vo(i.getView(), O));
                var x = {};
                x.x = f.x * G + n.tx(), x.y = f.y * G + n.ty(), x.width = f.width * G, x.height = f.height * G, Ee(O, x), this.intersects() ? (O.style.border = "", O.style.background = n.getRectSelectBackground()) : (O.style.background = "", O.style.border = "1px solid " + n.getRectSelectBorderColor())
            }, handle_mousedown: function (W) {
                var R = this, x = R.gv;
                if (R._57I = c, !(x._editing || x._scrolling || Bq())) {
                    var $ = x.getDataAt(W), O = x.sm();
                    if ($) if (Ag(W)) O.co($) ? O.rs($) : O.as($); else if (O.co($)) {
                        if (Ei(W) && $ instanceof Th && $.isClickThroughEnabled()) {
                            var Y = x.getDataAt(W, function (L) {
                                x._clickThroughChecking = !0;
                                var P = L.getParent() === $ && x.isSelectable(L);
                                return delete x._clickThroughChecking, P
                            });
                            Y && (W.clickThrough = !0, O.ss(Y))
                        }
                    } else O.ss($); else Ag(W) || !x.isPannable() ? fj(W) && (Ag(W) || O.cs(), x.isRectSelectable() && (R.startDragging(W), x._77O = 1)) : fj(W) && (R._57I = cc(W))
                }
            }, handle_mouseup: function (B) {
                var Z = this, H = Z._57I;
                H && (Wg(H, cc(B)) <= 1 && Z.gv.sm().cs(), Z._57I = c)
            }, handleWindowMouseUp: function (t) {
                this.clear(t)
            }, handleWindowMouseMove: function (H) {
                var X = this, D = X.gv;
                X._logicalPoint = D.lp(H), X.mark ? (X.fi({
                    kind: "betweenRectSelect",
                    event: H
                }), D.isPannable() && X.autoScroll(H), X.redraw()) : X.fi({
                    kind: "beginRectSelect",
                    event: H
                }), X.mark = sd(X._lastLogicalPoint, X._logicalPoint), X.redraw()
            }, intersects: function () {
                var g = this, Z = g._lastLogicalPoint, e = g._logicalPoint;
                return Z.x > e.x || Z.y > e.y
            }, clear: function (Z) {
                var X = this, r = X.gv, x = X.mark;
                if (X._57I = c, X._lastLogicalPoint) {
                    if (x) {
                        if (0 !== x.width && 0 !== x.height) {
                            var U = r.getDatasInRect(x, X.intersects());
                            if (!U.isEmpty()) {
                                var I = r.sm(), Y = I.toSelection();
                                U.each(function (k) {
                                    I.co(k) ? Y.remove(k) : Y.add(k)
                                }), I.ss(Y)
                            }
                        }
                        zm(X.div), delete X.div, delete X.mark, X.redraw(), X.fi({
                            kind: "endRectSelect",
                            event: Z
                        }), r.onRectSelectEnded()
                    }
                    X.clearDragging(), delete r._77O
                }
            }, redraw: function () {
                var P = this;
                P._draw || (P._draw = 1, g(function () {
                    P.mark && P._42(), delete P._draw
                }, 16))
            }
        });
        var _g = rg.MoveInteractor = function (F) {
            Mr(_g, this, [F])
        };
        Wb("MoveInteractor", Re, {
            handle_mousedown: function (K) {
                var H = this, m = H.gv;
                if (fj(K) && !m._editing && !m._scrolling && !Bq()) {
                    var I = m.getSelectedDataAt(K);
                    I ? (H._data = I, m.handleMouseDown && m.handleMouseDown(K, I), H.startDragging(K), m.isMovable(I) && (m._moving = 1)) : m._focusData = c
                }
            }, handleWindowMouseUp: function (b) {
                var j = this, I = j.gv;
                I.handleMouseUp && I.handleMouseUp(b, j._data), j.clear(b)
            }, handleWindowMouseMove: function (O) {
                var B = this, p = B._data, h = B.gv;
                if ((!h._93O || !h._93O(O, p)) && h._moving) {
                    B._logicalPoint || B.fi({kind: "prepareMove", event: O});
                    var m = B._logicalPoint ? "betweenMove" : "beginMove", K = {kind: m, event: O},
                        c = B._logicalPoint = h.lp(O);
                    "beginMove" !== m || B._alreadyBeginTransaction || (B._alreadyBeginTransaction = !0, h.getDataModel().beginTransaction());
                    var b = B._calcShift(m, O), T = b.x, y = b.y, g = B.gv.getMoveMode(O, p);
                    g && ("x" === g ? y = 0 : "y" === g ? T = 0 : "xy" !== g && (T = y = 0)), h.moveSelection(T, y), B._lastLogicalPoint = c, B.autoScroll(O), B.fi(K)
                }
            }, _calcShift: function () {
                var A = this, g = A._logicalPoint, D = A._lastLogicalPoint, h = g.x - D.x, d = g.y - D.y;
                return {x: h, y: d}
            }, clear: function (o) {
                var X = this, J = X.gv;
                X._lastLogicalPoint && (X._lastLogicalPoint = X._data = J._moving = c, X._logicalPoint && (X.fi({
                    kind: "endMove",
                    event: o
                }), J.onMoveEnded()), X.clearDragging()), X._alreadyBeginTransaction && (X._alreadyBeginTransaction = !1, J.getDataModel().endTransaction())
            }
        });
        var rm = rg.ScrollBarInteractor = function (N) {
            Mr(rm, this, [N])
        };
        Wb("ScrollBarInteractor", Re, {
            _41o: function () {
                return this.gv.getViewRect().height < this.gv.getScrollRect().height
            }, _40o: function () {
                return this.gv.getViewRect().width < this.gv.getScrollRect().width
            }, isV: function (a) {
                var z = this.gv.getViewRect();
                return this._41o() && (z.x + z.width - this.gv.lp(a).x) * this.gv.getZoom() < Ib
            }, isH: function (R) {
                var B = this.gv.getViewRect();
                return this._40o() && (B.y + B.height - this.gv.lp(R).y) * this.gv.getZoom() < Ib
            }, handle_mousemove: function (P) {
                this.handle_touchmove(P)
            }, handle_touchmove: function (l) {
                if (!bc && fj(l) && this.gv.isScrollBarVisible()) {
                    var r = this, I = r.isV(l), k = r.isH(l);
                    (I || k) && r.gv.showScrollBar(), r.gv._scrolling = I || k
                }
            }, handleWindowMouseUp: function ($) {
                this.handleWindowTouchEnd($)
            }, handleWindowTouchEnd: function (W) {
                this._state = this._cp = this._tx = this._ty = this.gv._scrolling = c, this.fi({
                    kind: "endScroll",
                    event: W
                })
            }, handle_mousedown: function (h) {
                this.handle_touchstart(h)
            }, handle_touchstart: function (d) {
                var L = this;
                if (L.gv.setFocus(d), mq(d), L.handle_touchmove(d), !(tb(d) > 1) && L.gv._scrolling && L.gv.isScrollBarVisible()) {
                    L._cp = cc(d), L._tx = L.gv.tx(), L._ty = L.gv.ty();
                    var m = L.isV(d);
                    L._state = m ? "vScroll" : "hScroll", oc(L, d), L.fi({kind: "beginScroll", event: d})
                }
            }, handleWindowMouseMove: function (g) {
                this.handleWindowTouchMove(g)
            }, handleWindowTouchMove: function (h) {
                var d = cc(h), z = this.gv.getViewRect(), t = this.gv.getScrollRect();
                "vScroll" === this._state ? this.gv.ty(this._ty + (this._cp.y - d.y) * t.height / z.height) : "hScroll" === this._state && this.gv.tx(this._tx + (this._cp.x - d.x) * t.width / z.width), this.fi({
                    kind: "betweenScroll",
                    event: h
                })
            }
        });
        var Gc = rg.TouchInteractor = function (O, F) {
            F = F || {}, F.selectable === $ && (F.selectable = !0), F.movable === $ && (F.movable = !0), F.pannable === $ && (F.pannable = !0), F.pinchable === $ && (F.pinchable = !0), F.editable === $ && (F.editable = !0), this.params = F, Mr(Gc, this, [O])
        };
        Wb("TouchInteractor", Re, {
            ms_edit: 1, setUp: function () {
                var g = this;
                Gc.superClass.setUp.call(g), jp && g.params.editable && g.gv.setEditInteractor(g)
            }, tearDown: function () {
                var F = this;
                Gc.superClass.tearDown.call(F), jp && F.params.editable && F.gv.setEditInteractor(c)
            }, clear: function (P) {
                var h = this, $ = h.gv;
                $._moving && (h.fi({
                    kind: "endMove",
                    event: P
                }), delete $._moving, $.onMoveEnded(), $.dm().endTransaction()), $._panning && (h.fi({
                    kind: "endPan",
                    event: P
                }), delete $._panning, $.onPanEnded()), $._pinching && (h.fi({
                    kind: "endPinch",
                    event: P
                }), delete $._pinching, $.onPinchEnded()), $._editing && (h._46O(P), h._77I = h._node = h._edge = h._shape = h._rect = h._89I = h._index = $._editing = c), h._moving = h._panning = h._pinching = h._editing = h._57I = h._data = h._beginHistory = c, h.clearDragging()
            }, handle_touchstart: function (Q) {
                var t = this;
                if (!t.gv._editing) {
                    mq(Q), t._57I = c;
                    var i = t.params, f = t.gv, w = f.sm(), K = f.getDataAt(Q), z = tb(Q);
                    if (1 === z) {
                        if (Ei(Q)) return f.handleDoubleClick(Q, K), void 0;
                        f.handleClick(Q, K), K && (f.handleMouseDown && f.handleMouseDown(Q, K), t._data = K), i.selectable || (K = c), K ? (w.co(K) || w.ss(K), i.editable && f.isEditable(K) && t._79I(Q, K, !0) ? (t._editing = 1, t.startDragging(Q)) : i.movable && f.isMovable(K) && (t._moving = 1, t.startDragging(Q))) : (t._57I = cc(Q), i.pannable && f.isPannable() && (t._panning = 1, t.startDragging(Q), t._translate = {
                            x: f.tx(),
                            y: f.ty()
                        }))
                    } else if (i.pinchable && 2 === z) {
                        t._pinching = 1, t.startDragging(Q);
                        var E = f.getView(), r = f.getZoom(), H = E.getBoundingClientRect(), D = Q.touches[0],
                            T = Q.touches[1],
                            y = {x: (D.clientX + T.clientX) / 2 - H.left, y: (D.clientY + T.clientY) / 2 - H.top};
                        y.x -= f.tx(), y.y -= f.ty(), y.x /= r, y.y /= r, t._p = y, t._d = fp(Q)
                    }
                }
            }, handle_touchend: function (Z) {
                var d = this, U = d.gv, p = d._57I, Q = d._data;
                p && (Wg(p, cc(Z)) <= 1 && U.sm().cs(), d._57I = c), Q && U.handleMouseUp && U.handleMouseUp(Z, Q)
            }, handleWindowTouchEnd: function (v) {
                this.clear(v)
            }, handleWindowTouchMove: function (I) {
                var g = this, _ = g.gv, T = tb(I);
                if (1 === T) {
                    if (g._editing && (g._beginHistory || (g._beginHistory = 1, _.dm().beginTransaction()), _._editing = 1, g._78I(I)), g._moving) g._beginHistory || (g._beginHistory = 1, _.dm().beginTransaction()), g.handleMove(I); else if (g._panning) {
                        var z = cc(I);
                        _.setTranslate(g._translate.x + z.x - g._lastClientPoint.x, g._translate.y + z.y - g._lastClientPoint.y), g.fi({
                            kind: _._panning ? "betweenPan" : "beginPan",
                            event: I
                        }), _._panning = 1
                    }
                } else if (2 === T && g._pinching) {
                    var J = fp(I);
                    _.handlePinch(g._p, J, g._d), g._d = J, g.fi({
                        kind: _._pinching ? "betweenPinch" : "beginPinch",
                        event: I
                    }), _._pinching = 1
                }
            }, handleMove: function (Y) {
                var N = this, q = N.gv, C = q.lp(Y);
                q._93O && q._93O(Y, N._data) || (q.moveSelection(C.x - N._lastLogicalPoint.x, C.y - N._lastLogicalPoint.y), N._lastLogicalPoint = C, N.autoScroll(Y), N.fi({
                    kind: q._moving ? "betweenMove" : "beginMove",
                    event: Y
                }), q._moving = 1)
            }
        });
        var t = m.ht, Le = t.graph._editor = {Math: t.Math, Guide: {}};
        Le.getStyle = function (T) {
            var j, u = Le.StyleMap;
            return u && (j = u[T], j !== $) ? j : Le.DefaultStyleMap[T]
        }, Le.setStyle = function (K, J) {
            var z = Le.StyleMap;
            z || (z = Le.StyleMap = {}), z[K] = J
        }, Le.inEdit = function (l) {
            return l._inXEdit === !0
        }, Le.startEdit = function (n) {
            n._inXEdit = !0, Le.Inject.doInject(n)
        }, Le._46O = function (S) {
            S._inXEdit = !1, Le.Inject.undoInject(S)
        }, Le.toScreenPosition = function (u, m) {
            var g = u.tx(), N = u.ty(), x = u._zoom;
            return new Le.Math.Vector2(m.x * x + g, m.y * x + N)
        }, Le.checkHit = function (G, d, x) {
            return G.distanceTo(d) < x ? !0 : !1
        }, Le.toWorldPosition = function (n, T) {
            var Q = n.tx(), D = n.ty(), E = n._zoom;
            return {x: (T.x - Q) / E, y: (T.y - D) / E}
        }, Le.setAntialias = function (f, c) {
            for (var i, O = ["imageSmoothingEnabled", "webkitImageSmoothingEnabled", "mozImageSmoothingEnabled", "oImageSmoothingEnabled", "msImageSmoothingEnabled"], z = 0, u = O.length; u > z && (i = O[z], !(i in f)); z++) ;
            f[i], f[i] = c
        }, Le.getTargetCornersOnScreen = function (P, g) {
            if (!g) return null;
            var S, w = [];
            if (bg(g, P)) {
                var o = Bm(P, g);
                S = [{x: o.x, y: o.y}, {x: o.x + o.width, y: o.y}, {x: o.x + o.width, y: o.y + o.height}, {
                    x: o.x,
                    y: o.y + o.height
                }]
            } else {
                if (!g.getCorners) return null;
                S = g.getCorners()
            }
            return S.forEach(function (J) {
                var f = Le.toScreenPosition(P, J);
                w.push(f.x, f.y)
            }), w
        }, Le.log = function () {
        };
        var gp = Le.Inject = {_modules: []};
        gp.registAsModule = function (V, W) {
            var c = {}, i = {};
            for (var v in V) {
                var Z = W.prototype[v];
                c[v] = Z
            }
            V.getBackup = function ($) {
                return c[$]
            }, V.getBackups = function () {
                return c
            }, i.doInject = function () {
                for (var $ in V) "getBackup" !== $ && (W.prototype[$] = V[$])
            }, i.undoInject = function () {
                for (var X in V) "getBackup" !== X && (W.prototype[X] = c[X])
            }, gp._modules.push(i)
        }, gp.doInject = function (F) {
            for (var b, M = gp._modules, P = 0, R = M.length; R > P; P++) b = M[P], b.doInject(F)
        }, gp.undoInject = function (N) {
            for (var C, x = gp._modules, G = 0, y = x.length; y > G; G++) C = x[G], C.undoInject(N)
        };
        var Re = t.graph.EditInteractor = function (U) {
            var e = this, n = S.createElement("canvas");
            n.className = "editCanvas", n.style.position = "absolute", e._styleMap = {}, e._canvas = n, e._context = n.getContext("2d"), Re.superClass.constructor.call(e, U), Le.setAntialias(e._context, !1), e._subModules = [new Le.Anchor(e), new Le.Rect(e), new Le.Curve(e), new Le.MoveHelper(e)], e._gridGuide = new Le.Guide.Grid(e), e._rectGuide = new Le.Guide.Rect(e)
        }, zb = Re;
        t.Default.def(Re, t.graph.Interactor, {
            ms_edit: 1,
            ms_fire: 1
        }), v.defineProperties(Re.prototype, {
            editDetail: {
                get: function () {
                    var V = !!this._editDetail;
                    return V
                }, set: function (T) {
                    var s = this, S = s._editDetail;
                    S !== T && (s._editDetail = T, s.gv._editing = T, s.fp("editDetail", S, T), s.fp("pointsEditingMode", S, T), s.fi({kind: T ? "beginEditPoints" : "endEditPoints"}))
                }
            }, gvEditing: {
                get: function () {
                    return this.gv._editing
                }, set: function (P) {
                    (!this._editDetail || P) && (this.gv._editing = P, P || (this.editDetail = !1))
                }
            }, editing: {
                get: function () {
                    return this._editing
                }, set: function (E) {
                    this._editing = E, this.gvEditing = E
                }
            }, pointsEditingMode: {
                get: function () {
                    return this.editDetail
                }, set: function (G) {
                    var S = this;
                    S.editDetail !== G && (G ? S._tryEnterEditDetailMode() : S._tryQuitEditDetailMode())
                }
            }, gridEnabled: {
                get: function () {
                    var j = this._gridEnabled;
                    if (!j) return !1;
                    var Y = this.gv;
                    return Y ? !0 : !0
                }, set: function (a) {
                    a !== this._gridEnabled && (this._gridEnabled = a, this._42())
                }
            }, alignmentGuideEnabled: {
                get: function () {
                    return this._agEnabled
                }, set: function (o) {
                    o !== this._agEnabled && (this._agEnabled = o, this._42())
                }
            }, gridGuide: {
                get: function () {
                    return this._gridGuide
                }
            }, rectGuide: {
                get: function () {
                    return this._rectGuide
                }
            }
        }), Re.prototype.getSubModule = function (J) {
            var z, g, P, y = this._subModules;
            for (g = 0, P = y.length; P > g; g++) if (z = y[g], z.catalog === J) return z
        }, Re.prototype.invokeSubModule = function (f, H) {
            var K = this, D = K._subModules;
            if (D) for (var y, n, w, G = Array.prototype.slice.call(arguments, 2), O = 0, Y = D.length; Y > O; O++) if (y = D[O], n = y[f], n && (w = n.apply(y, G), w != $ && H)) return y
        }, Re.prototype.invokeSubModuleInverse = function (H, G) {
            var K = this, Q = K._subModules;
            if (Q) for (var x, U, g, B = Array.prototype.slice.call(arguments, 2), j = Q.length - 1; j >= 0; j--) if (x = Q[j], U = x[H], U && (g = U.apply(x, B), g != $ && G)) return x
        }, Re.prototype.setUp = function () {
            Le.log("setUp");
            var N = this, H = N.gv, z = H.getView(), u = N._canvas;
            Re.superClass.setUp.call(N), H.setEditInteractor(N), H._79O ? z.insertBefore(u, H._79O) : z.appendChild(u), Le.startEdit(H), N.invokeSubModule("setUp"), H.dm().mm(N._onDataModelChanged, N), H.dm().md(N._onDataPropertyChanged, N)
        }, Re.prototype.tearDown = function () {
            Le.log("tearDown");
            var Z = this, f = Z.gv, v = f.getView();
            Z._resetCustomCursorStyle(), Re.superClass.tearDown.call(Z), f.dm().umm(Z._onDataModelChanged, Z), f.dm().umd(Z._onDataPropertyChanged, Z), f.setEditInteractor(null), v.removeChild(Z._canvas), Z._drawTimer && (R(Z._drawTimer), Z._drawTimer = null), Le._46O(f), Z.invokeSubModule("tearDown")
        }, Re.prototype._onDataModelChanged = function (L) {
            var B = this;
            ("clear" === L.kind || "remove" === L.kind && B.editDetail && L.data === B.getSubModule("Curve").target) && (B.editDetail = !1, B._42())
        }, Re.prototype._onDataPropertyChanged = function (L) {
            var Y = this;
            if (Y.editDetail) {
                var S = Y.getSubModule("Curve"), k = L.data;
                k === S.target && (k._writing || S._handleDataChanged())
            }
        }, Re.prototype.clear = function () {
            Le.log("clear")
        }, Re.prototype.redraw = function () {
            this._42()
        }, Re.prototype._42 = function () {
            var _ = this;
            _._drawTimer || (_._drawTimer = g(function () {
                _._drawTimer = null, _.drawImpl()
            }, 0))
        }, Re.prototype.drawImpl = function () {
            var V;
            for (V in{_42: !0}) break;
            return function () {
                var i = this, I = i._canvas, p = i.gv, a = p.getWidth(), F = p.getHeight(), $ = i._context,
                    M = t.Default.getInternal();
                (I.width !== a || I.height !== F) && M.setCanvas(I, a, F), $.clearRect(0, 0, I.width, I.height);
                var Q = i._getValidSelection();
                $.save();
                var B = t.Default.devicePixelRatio;
                $.scale(B, B), i._gridGuide._42(), i.invokeSubModuleInverse(V, !1, $, p, Q), i._rectGuide._42(), $.restore()
            }
        }(), Re.prototype._getValidSelection = function () {
            var W = this, S = W.gv, q = S.sm().getSelection(), r = [];
            return q.each(function (W) {
                S.isVisible(W) && S.isEditable(W) && r.push(W)
            }), r
        }, Re.prototype.handle_touchmove = function (B) {
            return this.handle_mousemove(B)
        }, Re.prototype.handle_mousemove = function (e) {
            if (!t.Default.isDragging()) {
                var B = this;
                (B.editDetail || !Bq()) && (B.gvEditing = !1, B._checkEdit(e) && (B.gvEditing = !0))
            }
        }, Re.prototype.handle_touchstart = function (E) {
            return this.handle_mousedown(E)
        }, Re.prototype.handle_mousedown = function (s) {
            mq(s);
            var $ = this;
            if ($.editDetail || !Bq()) {
                if (Ei(s) && !s.clickThrough) {
                    if ($.editDetail) {
                        if ($._tryQuitEditDetailMode(s)) return
                    } else if ($._tryEnterEditDetailMode()) return;
                    $.gv.dm().beginTransaction();
                    var c = $.invokeSubModule("handleDoubleClick", !0, s);
                    if ($.gv.dm().endTransaction(), c) return
                }
                var T = $._checkEdit(s);
                T && ($._downPosition = $._getLogicalPoint(s), $.gv.dm().beginTransaction(), T.startEdit($, s), $.editing = !0)
            }
        }, Re.prototype._checkEdit = function (H) {
            var s = this, P = s.gv, S = s._getLogicalPoint(H), N = s.invokeSubModule("check", !0, P, H, S) || null;
            return s._editMod = N, N
        }, Re.prototype.handleWindowTouchMove = function (A) {
            return this.handleWindowMouseMove(A)
        }, Re.prototype.handleWindowMouseMove = function (H) {
            var r = this, c = r._downPosition;
            if (c) {
                var l = r._getLogicalPoint(H);
                if (l.distanceTo(c) < r.getStyle("moveSensitivity")) return;
                delete r._downPosition
            }
            var B = r._editMod;
            B && B.handleEdit(r.gv, H)
        }, Re.prototype._getLogicalPoint = function (O) {
            var P = this, f = t.Default.getLogicalPoint(O, P._canvas);
            return new Le.Math.Vector2(f)
        }, Re.prototype.handleWindowTouchEnd = function (f) {
            return this.handleWindowMouseUp(f)
        }, Re.prototype.handleWindowMouseUp = function () {
            var o;
            for (o in{_46O: !0}) break;
            return function (N) {
                var c = this;
                c.editing = !1, c.setCursor("default"), c.invokeSubModule(o, !1, N), c._42(), c.gv.dm().endTransaction()
            }
        }(), Re.prototype.handle_mousewheel = function (N) {
            var P = this;
            mq(N), P.invokeSubModule("preHandleScroll", !0) || P.gv.handleScroll(N, N.wheelDelta)
        }, Re.prototype.handleDelete = function () {
            var E = this;
            if (!E.editDetail) {
                E.gv.dm().beginTransaction();
                var f = E.invokeSubModule("handleNormalStateDelete", !0);
                return E.gv.dm().endTransaction(), f || E.gv.removeSelection(), void 0
            }
            E.gv.dm().beginTransaction(), E.invokeSubModule("handleDelete", !0), E.gv.dm().endTransaction(), E._42()
        }, Re.prototype.handle_keydown = function (t) {
            var Y = this;
            if ((t.metaKey || t.ctrlKey) && Y._42(), Bq(t) && !Y.editing) return Y.gvEditing = !1, Y.setCursor("default"), Y._42(), void 0;
            var X = Mk(t);
            return Y.editDetail ? ((X || fb(t)) && (Y.editDetail = !1, Y._42()), Y.gv.dm().beginTransaction(), Y.invokeSubModule("handle_keydown", !0, t), Y.gv.dm().endTransaction(), void 0) : (Y.gv.dm().beginTransaction(), Y.invokeSubModule("handleNormalStateKeyDown", !0, t), Y.gv.dm().endTransaction(), X && Y._tryEnterEditDetailMode(), void 0)
        }, Re.prototype.handle_keyup = function (p) {
            this.gv.dm().beginTransaction(), this.invokeSubModule("handle_keyup", !0, p), this.gv.dm().endTransaction()
        }, Re.prototype._tryEnterEditDetailMode = function () {
            var l = this;
            return !l.editDetail && l.invokeSubModule("canEnterEditDetailMode", !0) && 1 === l._getValidSelection().length ? (l.editDetail = !0, l._42(), !0) : void 0
        }, Re.prototype._tryQuitEditDetailMode = function (R) {
            var F = this;
            if (F.editDetail) {
                var _ = F.gv, p = F.getSubModule("Curve").target;
                return R && _.getDataAt(R) === p ? void 0 : (F.editDetail = !1, F._42(), !0)
            }
        }, Re.prototype.setStyle = function (S, W, b) {
            var a = this;
            b ? Le.setStyle(S, W) : a._styleMap[S] = W, a.fp("styleChanged", null, {key: S, value: W, base: b}), a._42()
        }, Re.prototype.getStyle = function (S) {
            var W = this, L = W._styleMap[S];
            return L !== $ ? L : Le.getStyle(S)
        }, Re.prototype.setCursor = function (K) {
            this._resetCustomCursorStyle(), t.graph.EditInteractor.superClass.setCursor.call(this, K)
        }, Re.prototype._resetCustomCursorStyle = function () {
            var i = this;
            if (i._customStyle) {
                var J = this.gv.getView();
                J.classList && J.classList.remove && J.classList.remove(i._customStyle), i._customStyle = null
            }
        }, Re.prototype._setRotateCursor = function (y) {
            var Z = this, F = Z._cursorFactory;
            F || (F = Z._cursorFactory = new Le.CursorFactory(Z));
            var B = F.getRotateCursor(y), I = Z.gv.getView();
            Z._resetCustomCursorStyle(), Z._customStyle = B, I.classList && I.classList.add && I.classList.add(B)
        };
        var dj = Le.Group = function (_) {
            var b = this;
            b._entities = _, b._64O = 0, b._position = {x: 0, y: 0}, b._scale = {x: 1, y: 1}, b._anchor = {
                x: .5,
                y: .5
            }, b._anchor2 = {x: .5, y: .5}
        };
        dj.prototype = {}, dj.prototype.constructor = dj;
        var rd = null;
        dj.findOrCreateGroup = function (w) {
            if (rd && rd.checkIsMe(w)) return rd;
            var L = new Le.Group(w);
            return L.getKeyOb() ? (rd = L, L) : void 0
        }, dj.prototype.checkIsMe = function (Y) {
            var y = this._entities;
            if (y.length !== Y.length) return !1;
            var q, J = {}, K = Y.length;
            for (q = 0; K > q; q++) J[Y[q]._id] = !0;
            for (q = 0; K > q; q++) if (!J[y[q]._id]) return !1;
            return !0
        }, dj.prototype.getRotation = function () {
            return this._64O
        }, dj.prototype.getPosition = function () {
            return this._position
        }, dj.prototype.getAnchor = function () {
            return this._anchor
        }, dj.prototype.getWidth = function () {
            return this._width
        }, dj.prototype.getScale = function () {
            return this._scale
        }, dj.prototype.getSize = function () {
            return {width: this._width, height: this._height}
        }, dj.prototype.getHeight = function () {
            return this._height
        }, dj.prototype.getKeyOb = function () {
            for (var i = this._entities, r = i.length - 1; r >= 0; r--) {
                var h = i[r];
                if (this.isNode(h)) return h
            }
        }, dj.prototype.getAnchor2 = function () {
            var q = this, p = q.rotateCenter;
            if (p) return p;
            var R = q.getKeyOb();
            if (!R) return q._anchor;
            var u = q._anchor2, j = R.getMatrix();
            return j.tf({x: R.getWidth() * (u.x - R.getAnchor().x), y: R.getHeight() * (u.y - R.getAnchor().y)})
        }, dj.prototype.setAnchor2 = function (M, z) {
            var U = this, k = U.getKeyOb();
            if (k) {
                var G, b = k.getMatrix();
                G = "number" == typeof M ? {x: M, y: z} : M;
                var f = b.tfi(G);
                U._anchor2 = {x: k.getAnchor().x + f.x / k.getWidth(), y: k.getAnchor().y + f.y / k.getHeight()}
            }
        }, dj.prototype.setRotation = function () {
        }, dj.prototype.beginRotate = function (h) {
            this.rotateCenter = h.pos, this.rotateMode = h.groupRotateMode
        }, dj.prototype.endRotate = function () {
            delete this.rotateCenter, delete this.rotateMode
        }, dj.prototype.addRotation = function (e, C) {
            return "batch" === C ? this._addRotationInBatchMode(e) : "block" === C ? this._addRotationInBlockMode(e) : void 0
        }, dj.prototype._addRotationInBlockMode = function (g) {
            var t = this, R = t.rotateCenter || t.getPosition();
            t._entities.forEach(function (G) {
                if (t.isNode(G)) {
                    var P = G.getMatrix();
                    P.translate(-R.x, -R.y), P.rotate(g), P.translate(R.x, R.y);
                    var W = Math.sign(G.getScale().x);
                    G.setRotation(n(P.b * W, P.a * W)), G.setPosition(P.tx, P.ty)
                }
            })
        }, dj.prototype._addRotationInBatchMode = function (u) {
            var M = this, I = M._anchor2;
            M._entities.forEach(function (d) {
                if (M.isNode(d)) {
                    var m = d.getAnchor(), O = d.getMatrix(),
                        E = O.tf({x: d.getWidth() * (I.x - m.x), y: d.getHeight() * (I.y - m.y)}),
                        r = new Le.Math.Matrix2d;
                    r.set(O.a, O.b, O.c, O.d, O.tx, O.ty), r.translate(-E.x, -E.y), r.rotate(u), r.translate(E.x, E.y);
                    var y = Math.sign(d.getScale().x);
                    d.setRotation(n(r.b * y, r.a * y)), d.setPosition(r.tx, r.ty)
                }
            })
        }, dj.prototype.setPosition = function (I) {
            var R, d, K, X, V = this, h = V._position, b = I.x - h.x, Q = I.y - h.y, p = V._entities;
            for (d = 0, K = p.length; K > d; d++) R = p[d], Ik(R) && (X = R.getPosition(), R.setPosition(X.x + b, X.y + Q));
            V._position = I
        }, dj.prototype.setScale = function (X, h) {
            var k = this, T = X / k._scale.x, v = h / k._scale.y;
            k._adjustChildScaleOrSize(T, v, "size"), k._scale = {x: X, y: h}
        }, dj.prototype.getRect = function () {
            var t = this, V = t._position, j = t._width, H = t._height;
            return {x: V.x - j / 2, y: V.y - H / 2, width: j, height: H}
        }, dj.prototype.setSize = function (N, r) {
            var x = this, N = Math.max(1, N), r = Math.max(1, r), W = N / x._width, Y = r / x._height;
            x._adjustChildScaleOrSize(W, Y, "size"), x._width = N, x._height = r
        }, dj.prototype._adjustChildScaleOrSize = function (Z, A, q) {
            var J, N, r, x, S, V, L, i, W, O, Q, y, E, l, c = this, C = c._position, g = c._entities,
                m = new Le.Math.Matrix2d;
            for (N = 0, r = g.length; r > N; N++) if (J = g[N], c.isNode(J)) {
                if (x = J.getPosition(), S = J.getRotation(), V = J.getWidth(), L = J.getHeight(), i = J.getScale(), Q = i.x * V, y = i.y * L, m.identity().scale(Q, y).rotate(S).translate(x.x, x.y).translate(-C.x, -C.y).rotate(-c._64O), S = n(m.b * Math.sign(Q), m.a * Math.sign(Q)), m.scale(Z, A), W = Math.cos(S), O = Math.sin(S), Math.abs(W) < .001 ? (E = m.b / O, l = -m.c / O) : (E = m.a / W, l = m.d / W), "scale" === q) J.setScale(E / V, l / L); else if ("size" === q) {
                    var F = E / i.x, D = l / i.y;
                    J.setScale(tn(E) * Math.abs(i.x), tn(l) * Math.abs(i.y)), J.setSize(Math.max(.1, Math.abs(F)), Math.max(.1, Math.abs(D)))
                }
                m.rotate(c._64O).translate(C.x, C.y), J.setPosition(m.tx, m.ty)
            }
        }, dj.prototype.getMatrix = function () {
            var h = this, Y = h._position, j = t.Default.getInternal(), z = h._scale;
            return new j.Mat(h._64O, Y.x, Y.y, z.x, z.y)
        }, dj.prototype.getCorners = function () {
            var l = this, C = l._width, z = l._height, _ = l._anchor, m = -C * _.x, g = -z * _.y, S = l.getMatrix();
            return [S.tf(m, g), S.tf(m, g + z), S.tf(m + C, g + z), S.tf(m + C, g)]
        }, dj.prototype.calcInfo = function () {
            var L, V, D, e, q, M, a = this, n = [], F = a._entities, R = a._64O;
            for (e = 0, q = F.length; q > e; e++) M = F[e], a.isNode(M) && M.getCorners && n.push.apply(n, M.getCorners());
            if (n.length) {
                var s = Math.cos(-R), z = Math.sin(-R), P = 1 / 0, K = -1 / 0, w = 1 / 0, m = -1 / 0;
                for (e = 0, q = n.length; q > e; e++) D = n[e], L = D.x, V = D.y, D.x = s * L - z * V, D.y = z * L + s * V, P = Math.min(P, D.x), K = Math.max(K, D.x), w = Math.min(w, D.y), m = Math.max(m, D.y);
                a._width = (K - P) / a._scale.x, a._height = (m - w) / a._scale.y, s = Math.cos(R), z = Math.sin(R);
                var Y = a._anchor;
                L = P + (K - P) * Y.x, V = w + (m - w) * Y.y, a._position = {x: s * L - z * V, y: z * L + s * V}
            }
        }, dj.prototype.isNode = function (U) {
            return Ik(U) ? bg(U) ? !1 : !0 : !1
        }, dj.prototype._42 = function (Y, G, K) {
            var _, s, R, S, U, F, J, V, u = this, r = u._entities, o = u.rotateMode;
            for ("batch" === o && (V = u.getKeyOb()), _ = 0, s = r.length; s > _; _++) R = r[_], u.isNode(R) && (F = R.getRect(), S = Le.toScreenPosition(K, {
                x: F.x,
                y: F.y
            }), U = Le.toScreenPosition(K, {x: F.x + F.width, y: F.y + F.height}), J = {
                min: S,
                max: U
            }, R === V && (J.isKeyOb = !0), Le.Icons.DrawIcon(Y, G, Le.Icons.GroupSubEntityRect, J))
        };
        var Qq = Le.CurveActiving = function (s, k) {
            this._curve = s, this._interactor = s._interactor;
            for (var d in k) this[d] = k[d]
        };
        Qq.prototype = {}, Qq.prototype.constructor = Qq, v.defineProperties(Qq.prototype, {
            point: {
                get: function () {
                    return this._point
                }, set: function (M) {
                    var R = this;
                    R._point = M, R.editingCtrl || R._firePointChange()
                }
            }, pairs: {
                get: function () {
                    return this._pairs
                }, set: function (z) {
                    var E = this;
                    E._pairs = z, E.editingCtrl && E._firePointChange()
                }
            }
        }), Qq.prototype._firePointChange = function () {
            var X = this, I = X.getCurrentEditingPoint();
            if (!I) return d.fi({kind: "selectPoint"}), void 0;
            var d = X._interactor, w = this._curve.target;
            if (w) {
                var f = Le.getDataMatrix(w).invert(), G = I.e;
                I = f.apply(Le.toWorldPosition(d.gv, I)), I.e = G;
                var W = X._lastFirePoint;
                W && Math.abs(I.x - W.x) < 1e-5 && Math.abs(I.y - W.y) < 1e-5 && (I.e == $ && W.e == $ || Math.abs(I.e - W.e) < 1e-5) || (X._lastFirePoint = I, d.fi({
                    kind: "selectPoint",
                    x: I.x,
                    y: I.y,
                    e: I.e
                }))
            }
        }, Qq.prototype.dispose = function () {
            this._interactor.fi({kind: "selectPoint"})
        }, Qq.prototype.getCurrentEditingPoint = function () {
            var f = this, U = f.editingCtrl;
            if (U) {
                var B = f.pairs;
                if (B) {
                    var s = B[U.pairId], T = s[U.type];
                    if (T) return T
                }
            }
            return f._point
        };
        var fe = Le.CursorFactory = function (u) {
            var X = this;
            X._interactor = u, X._rotateCursorStyles = {}
        };
        fe.prototype = {}, fe.prototype.constructor = fe, fe.prototype.getRotateCursor = function (r) {
            var $ = this;
            0 > r && (r += 2 * Math.PI);
            var a = $._interactor, E = a.getStyle("rotateCursorSize"), e = a.getStyle("rotateCursorRound"),
                s = Math.round(180 * (r / Math.PI) / e);
            s * e >= 360 && (s = 0);
            var U = $._rotateCursorStyles, F = "htCustomRotateStyle_" + E + "_" + e + "_" + s;
            return U[F] || ($._produceRotateCursor(F, E, e, s), U[F] = !0), F
        }, fe.prototype._produceRotateCursor = function (Z, K, g, N) {
            var m = this;
            m._interactor;
            var T = m._canvas;
            T || (T = m._canvas = S.createElement("canvas")), T.width = T.height = K * devicePixelRatio, T.style.width = T.style.height = K + " px";
            var o = T.getContext("2d");
            Le.setAntialias(o, !1), o.scale(devicePixelRatio, devicePixelRatio);
            var H, q, Y, d, V, j = Math.round(K / 2), s = "" + j + " " + j + ",auto !important;";
            H = Math.PI / 180 * N * g, o.clearRect(0, 0, K, K), o.save(), o.scale(K / 32, K / 32), o.translate(16, 16), o.rotate(H + Math.PI / 2), o.beginPath(), o.moveTo(-8, 0), o.lineTo(-8, 3), o.lineTo(-5, 3), o.moveTo(8, 0), o.lineTo(8, 3), o.lineTo(5, 3), o.moveTo(-8, 3), o.quadraticCurveTo(0, -6, 8, 3), o.restore(), o.strokeStyle = "white", o.lineWidth = 4, o.stroke(), o.strokeStyle = "black", o.lineWidth = 2, o.stroke(), q = JSON.stringify(T.toDataURL()), d = "cursor:url(" + q + ")" + s, 1 !== devicePixelRatio && (Y = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="' + K + 'px" height="' + K + 'px"><image xlink:href=' + q + ' width="' + K + '" height="' + K + '"/></svg>', d += "cursor:url(data:image/svg+xml;base64," + btoa(Y) + ")" + s, d += "cursor:-webkit-image-set(url(" + q + ")" + devicePixelRatio + "x,url(" + q + ")1x)" + s), V = S.createElement("style"), V.textContent = "body." + Z + " *, ." + Z + "{" + d + "}", S.head.appendChild(V)
        };
        var re = Le.Guide.Grid = function (q) {
            var Q = this;
            Q._interactor = q, Q._alignmentGuideId = 0, Q._xAlignmentGuide = [], Q._yAlignmentGuide = []
        };
        re.prototype = {}, re.prototype.constructor = re, v.defineProperties(re.prototype, {
            gridBlockSize: {
                get: function () {
                    var $ = this;
                    return $._gridBlockSize || $._interactor.getStyle("gridBlockSize")
                }, set: function (x) {
                    this._gridBlockSize = x, this._interactor._42()
                }
            }, gridThickLinesEvery: {
                get: function () {
                    var W = this;
                    return W._gridThickLinesEvery || W._interactor.getStyle("gridThickLinesEvery")
                }, set: function (m) {
                    this._gridThickLinesEvery = m, this._interactor._42()
                }
            }, gridEnabled: {
                get: function () {
                    var J = this, I = J._interactor;
                    return I.gridEnabled && J.isValidGrid()
                }
            }
        }), re.prototype._42 = function () {
            var H = this, O = H._interactor;
            H.gridEnabled && H.drawGrid(), O.alignmentGuideEnabled && H.drawAlignmentGuide()
        }, re.prototype.makeMatrix = function () {
            var x = this, P = x._interactor.getStyle("gridAngle"), J = x._interactor.getStyle("gridRotation"),
                g = new Le.Math.Matrix2d, v = Math.sin(P), O = Math.cos(P);
            return g.set(1, 0, O, v, 0, 0), g.rotate(J), g
        }, re.prototype.isValidGrid = function () {
            var J = this, Q = Math.PI, b = J._interactor, M = b.gv;
            if (M._zoom < b.getStyle("gridZoomThreshold")) return !1;
            var e = b.getStyle("gridAngle"), A = Math.abs(180 * (e % Q / Q)), f = 1 - 1e-8;
            return f > A || A > 180 - f ? !1 : !0
        }, re.prototype.drawAlignmentGuide = function () {
            var s = this, B = s._interactor, o = B.gv, $ = B._canvas, W = B._context, U = $.width, L = $.height,
                h = o.tx(), J = o.ty(), t = o._zoom;
            W.beginPath(), W.strokeStyle = B.getStyle("gridAlignmentGuideColor"), W.lineWidth = 1, s._xAlignmentGuide.forEach(function (y) {
                var P = y.p * t + h;
                W.moveTo(P, 0), W.lineTo(P, L)
            }), s._yAlignmentGuide.forEach(function (N) {
                var Q = N.p * t + J;
                W.moveTo(0, Q), W.lineTo(U, Q)
            }), W.stroke()
        }, re.prototype.drawGrid = function () {
            function V(O, Q, U, n) {
                var x = Le.toScreenPosition(Z, K.apply({x: O, y: Q})),
                    N = Le.toScreenPosition(Z, K.apply({x: U, y: n}));
                H.moveTo(x.x, x.y), H.lineTo(N.x, N.y)
            }

            var b = this, B = b._interactor, e = b.gridBlockSize, q = b.gridThickLinesEvery,
                S = B.getStyle("gridThickColor"), r = B.getStyle("gridLightColor"), Z = B.gv, T = B._canvas,
                H = B._context, m = T.width, D = T.height, K = b.makeMatrix(),
                E = K.applyInverse(Le.toWorldPosition(Z, {x: 0, y: 0})),
                h = K.applyInverse(Le.toWorldPosition(Z, {x: m, y: 0})),
                P = K.applyInverse(Le.toWorldPosition(Z, {x: 0, y: D})),
                k = K.applyInverse(Le.toWorldPosition(Z, {x: m, y: D})), O = Math.min(E.x, h.x, P.x, k.x),
                t = Math.max(E.x, h.x, P.x, k.x), f = Math.min(E.y, h.y, P.y, k.y), v = Math.max(E.y, h.y, P.y, k.y);
            m = t - O, D = v - f;
            var J = Math.ceil(O / e), N = Math.floor(t / e), g = Math.ceil(f / e), _ = Math.floor(v / e);
            Z.tx(), Z.ty(), Z._zoom;
            var u, W, Q;
            for (H.save(), H.lineWidth = 1, H.beginPath(), H.strokeStyle = S, Q = Math.ceil(J / q) * q; N >= Q; Q += q) u = Q * e, V(u, f, u, v);
            for (Q = Math.ceil(g / q) * q; _ >= Q; Q += q) W = Q * e, V(O, W, t, W);
            for (H.stroke(), H.beginPath(), H.strokeStyle = r, Q = J; N >= Q; Q++) 0 !== Q % q && (u = Q * e, V(u, f, u, v));
            for (Q = g; _ >= Q; Q++) 0 !== Q % q && (W = Q * e, V(O, W, t, W));
            H.stroke(), H.restore()
        }, re.prototype.getAlignmentGuides = function () {
            var A = this;
            return {x: A._xAlignmentGuide, y: A._yAlignmentGuide}
        }, re.prototype.addAlignmentGuide = function (w, J, S) {
            var v = this, L = "x" === w ? v._xAlignmentGuide : v._yAlignmentGuide, S = S ? S : ++v._alignmentGuideId,
                n = {p: J, id: S};
            if (L.length) {
                var U = v._findClosestAlignmentGuide(n.p, L);
                U.dis < 0 ? L.splice(U.index + 1, 0, n) : L.splice(U.index, 0, n)
            } else L.push(n);
            return v._interactor._42(), S
        }, re.prototype.findClosest = function (W, Z, r) {
            var h = this, s = h._interactor, T = s.gv;
            r && (W = Le.toWorldPosition(T, W));
            var Y, t, U, m = 1 / 0, i = 1 / 0, S = W.x, g = W.y;
            if (h.gridEnabled) {
                var x = h.gridBlockSize, z = h.makeMatrix(), L = z.applyInverse(W);
                L = z.apply({x: Math.round(L.x / x) * x, y: Math.round(L.y / x) * x}), m = L.x - S, i = L.y - g, U = !0
            }
            if (s.alignmentGuideEnabled && (Y = h._findClosestAlignmentGuide(S, h._xAlignmentGuide).dis, t = h._findClosestAlignmentGuide(g, h._yAlignmentGuide).dis, Math.abs(Y) < Math.abs(m) && (m = Y, U = !0), Math.abs(t) < Math.abs(i) && (i = t, U = !0)), U) {
                U = !1;
                var p = T._zoom, B = s.getStyle("smartGuideSensitivity") / p, F = {};
                if (Math.abs(m) < B && "y" !== Z && (F.x = r ? m * p : m, U = !0), Math.abs(i) < B && "x" !== Z && (F.y = r ? i * p : i, U = !0), U) return F
            }
        }, re.prototype._findClosestAlignmentGuide = function (_, g) {
            if (!g.length) return {dis: 1 / 0};
            for (var N, l = 0, D = g.length - 1; D - l > 1;) N = Math.floor((l + D) / 2), g[N].p < _ ? l = N : D = N;
            var b = g[l].p - _, j = g[D].p - _;
            return Math.abs(b) <= Math.abs(j) ? {line: g[l], dis: b, index: l} : {line: g[D], dis: j, index: D}
        }, re.prototype.removeAllAlignmentGuide = function (r) {
            var m = this;
            "y" !== r && (m._xAlignmentGuide = []), "x" !== r && (m._yAlignmentGuide = []), m._interactor._42()
        }, re.prototype.removeAlignmentGuide = function (U) {
            for (var O, d, $, c = this, h = c._xAlignmentGuide, r = 0; 2 > r; r++) for (h = 0 === r ? c._xAlignmentGuide : c._yAlignmentGuide, O = 0, d = h.length; d > O; O++) if ($ = h[O], $.id === U) return h.splice(O, 1), c._interactor._42(), {
                axis: 0 === r ? "x" : "y",
                position: $.p
            };
            return !1
        }, re.prototype.adjustAlignmentGuide = function (z, Y) {
            var o = this, u = o.removeAlignmentGuide(z);
            return u ? (o.addAlignmentGuide(u.axis, Y, z), !0) : !1
        };
        var nj = Le.Guide.Rect = function (K) {
            var p = this;
            p._interactor = K
        };
        nj.prototype = {}, nj.prototype.constructor = nj, nj.prototype.gatherRects = function () {
            var N, j, T, o, h = this, V = h._interactor.gv, d = [], W = [], R = {x: d, y: W}, S = {},
                z = V.getDataModel(), X = z.a("width"), s = z.a("height");
            X && s && (N = 0, j = 0, T = X, o = s, d.push({node: z, type: 0, p: N}, {
                node: z,
                type: 1,
                p: N + T / 2
            }, {node: z, type: 2, p: N + T}), W.push({node: z, type: 0, p: j}, {
                node: z,
                type: 1,
                p: j + o / 2
            }, {node: z, type: 2, p: j + o}), S[z._id || 0] = {x: N, y: j, width: T, height: o}), z.each(function (l) {
                if (Ik(l) && !V.isSelected(l) && V.isVisible(l)) {
                    var B = !1;
                    if (V.sm().getSelection().each(function (f) {
                        B || (l.isHostOn(f) ? B = !0 : l.isDescendantOf(f) && (B = !0))
                    }), !B) {
                        var i = l.getRect();
                        N = i.x, j = i.y, T = i.width, o = i.height, d.push({node: l, type: 0, p: N}, {
                            node: l,
                            type: 1,
                            p: N + T / 2
                        }, {node: l, type: 2, p: N + T}), W.push({node: l, type: 0, p: j}, {
                            node: l,
                            type: 1,
                            p: j + o / 2
                        }, {node: l, type: 2, p: j + o}), S[l._id] = i
                    }
                }
            }), d.sort(function (B, K) {
                return B.p - K.p
            }), W.sort(function (V, h) {
                return V.p - h.p
            }), h._grid = R, h._87I = S
        }, nj.prototype.gatherLines = function (W, X, M) {
            var N, y, m, b, r, L, P, x, V, q, $, T, l = this, t = [l.findClosest({x: W.x, y: W.y}, X), l.findClosest({
                x: W.x + W.w / 2,
                y: W.y + W.h / 2
            }, X), l.findClosest({x: W.x + W.w, y: W.y + W.h}, X)], A = {}, Q = l._87I;
            M = M || 255;
            var i, O;
            for (l._guideLine = [], N = 0; 2 > N; N++) for (A = {}, 0 === N ? (b = "y", x = W.x, V = x + W.w) : (b = "x", x = W.y, V = x + W.h), y = 0; 3 > y; y++) r = t[y], r && isFinite(r[b]) && (i = 1 << 3 * N + y, M & i && (L = r[b + "Line"], P = L.node, O = P._id || 0, A[O] || (A[O] = !0, T = Q[O], "y" === b ? (q = T.x, $ = T.x + T.width) : (q = T.y, $ = T.y + T.height), m = L.p, l._guideLine.push({
                type: b,
                a: x,
                b: V,
                c: q,
                d: $,
                p: m,
                center: 1 === L.type
            }))))
        }, nj.prototype._binarySearchClosest = function (A, H) {
            if (!H.length) return {dis: 1 / 0};
            for (var Y, i = 0, k = H.length - 1; k - i > 1;) Y = Math.floor((i + k) / 2), H[Y].p < A ? i = Y : k = Y;
            var x = H[i].p - A, e = H[k].p - A;
            return Math.abs(x) <= Math.abs(e) ? {line: H[i], dis: x} : {line: H[k], dis: e}
        }, nj.prototype.findClosest = function (L, z, I) {
            var T = this, r = T._interactor, m = r.gv, M = T._grid;
            I && (L = Le.toWorldPosition(m, L));
            var f, S = T._binarySearchClosest(L.x, M.x), s = T._binarySearchClosest(L.y, M.y), l = S.dis, a = s.dis,
                Y = m._zoom, K = r.getStyle("smartGuideSensitivity") / Y, V = {};
            return Math.abs(l) < K && "y" !== z && (V.x = I ? l * Y : l, V.xLine = S.line, f = !0), Math.abs(a) < K && "x" !== z && (V.y = I ? a * Y : a, V.yLine = s.line, f = !0), f ? V : void 0
        }, nj.prototype._42 = function () {
            var L = this, q = L._guideLine;
            if (q && !t.Default.isCtrlDown()) {
                var Y, o, O, F, Z, z, I, l, X, M, B, k, S, b, K, $, y, U = L._interactor, A = U.gv, N = U._context,
                    j = A.tx(), T = A.ty(), R = A._zoom, C = U.getStyle("guideLineTextSpacing");
                for (Y = 0, o = q.length; o > Y; Y++) O = q[Y], l = O.type, X = O.p, M = O.a, B = O.b, k = O.c, S = O.d, b = Math.min(M, k), K = Math.max(B, S), "x" === l ? (F = X * R + j, Z = b * R + T, z = F, I = K * R + T) : (F = b * R + j, Z = X * R + T, z = K * R + j, I = Z), Le.Icons.DrawIcon(U, N, Le.Icons.MoveLineGuide, {
                    rect: [F, Z, z, I],
                    center: O.center
                }), S >= M && B >= k || (b = M > S ? S : B, K = M > S ? M : k, y = K - b, "x" === l ? (O.center2center || (F -= C, z = F), Z = b * R + T, I = K * R + T, $ = Le.Icons.MoveLineGuideDistanceV) : "y" === l && (O.center2center || (Z -= C, I = Z), F = b * R + j, z = K * R + j, $ = Le.Icons.MoveLineGuideDistanceH), Le.Icons.DrawIcon(U, N, $, {
                    x0: F,
                    y0: Z,
                    x1: z,
                    y1: I,
                    dis: y
                }))
            }
        }, nj.prototype.clear = function () {
            this._guideLine = null
        }, Le.DefaultStyleMap = {
            pointSize: [24, 9],
            checkSize: 7,
            rotateCheckSize: 10,
            moveSensitivity: 10,
            rotateRound: Math.PI / 2,
            rotateSensitivity: Math.PI / 60,
            shiftRotateRound: Math.PI / 12,
            shiftLineRotateRound: Math.PI / 4,
            anchorMovable: !0,
            anchorVisible: !0,
            anchorHideThreshold: 25,
            anchorOutsideVisibleThreshold: .25,
            anchorRound: .25,
            anchorSensitivity: .02,
            smartGuideSensitivity: 8,
            curveIntersectSize: 5,
            curvePointIntersectSize: 8,
            edgeHostDetectPerFrame: !0,
            guideLineTextSpacing: 0,
            gridBlockSize: 40,
            gridThickLinesEvery: 10,
            gridThickColor: "#5d5d5d",
            gridLightColor: "#d0d0d0",
            gridZoomThreshold: .25,
            gridAlignmentGuideColor: "#ff0000",
            gridAngle: Math.PI / 2,
            gridRotation: 0,
            groupRotateModeDefault: "block",
            groupRotateModeKey: ["ctrlKey", "metaKey"],
            rotateCursorSize: 32,
            rotateCursorRound: 45,
            tipTextColor: "#ffffff",
            tipBackground: "#333333",
            curveHighlightColor: "#30599e",
            rectPointBackground: "white",
            rectPointBorderColor: "#666666",
            rectPointShadowColor: "rgba(0,0,0,0.35)",
            shapeCtrlPointBackground: "white",
            shapeCtrlPointBorderColor: null,
            shapeCtrlPointHighlightBorder: null,
            shapeHighlighPointBackground: "#30599e",
            curveElevationVisible: !0,
            curveElevationIntersectSize: 8,
            curveElevationGuideShift: [20, 0],
            connectGuideVisible: !0,
            connectGuideShift: [1, .25, 8, 0],
            connectGuideIntersectSize: 8,
            connectGuideGarbageIntersectsize: 25,
            connectGuideGarbageShift: [1, 1, -48, -48]
        };
        var Hq = Le.Icons = {}, Ld = 1e4, qf = null, Qn = "rgb(51,153,255)", nr = "rgb(183,232,135)",
            Uj = "rgb(255,204,153)", jl = 6;
        t.Default.setImage("Icons.RectPoint", {
            width: jl,
            height: jl,
            comps: [{
                type: "rect",
                background: "rgb(247,247,247)",
                borderWidth: 1,
                borderColor: Qn,
                rect: [0, 0, jl, jl]
            }]
        });
        var Oo = "#e000e0";
        Hq.GroupSubEntityRect = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var n = Hq.GroupSubEntityRect.data;
                        if (!n) return [];
                        var U = n.min, r = n.max;
                        return [U.x, U.y, U.x, r.y, r.x, r.y, r.x, U.y]
                    }
                }, segments: [1, 2, 2, 2, 5], background: null, borderWidth: 1, borderColor: {
                    func: function () {
                        return Hq.GroupSubEntityRect.data.isKeyOb ? Oo : "#666666"
                    }
                }
            }]
        }, Hq.Line = {
            comps: [{
                type: "image", name: "Icons.RectPoint", rect: {
                    func: function () {
                        return [[Hq.Line.data.P1.x, Hq.Line.data.P1.y], jl, jl]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rect: {
                    func: function () {
                        return [[Hq.Line.data.P2.x, Hq.Line.data.P2.y], jl, jl]
                    }
                }
            }]
        }, Hq.NodeHoverGuide = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        return Hq.NodeHoverGuide.data
                    }
                }, segments: [1, 2, 2, 2, 5], background: null, borderWidth: 1, borderColor: "#3399FF"
            }]
        }, Hq.Rect = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var Q = Hq.Rect.data;
                        if (!Q) return [];
                        var v = Q.LT, l = Q.LB, J = Q.RB, L = Q.RT;
                        return [v.x, v.y, l.x, l.y, J.x, J.y, L.x, L.y]
                    }
                }, segments: [1, 2, 2, 2, 5], background: null, borderWidth: 1, borderColor: Qn
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return Hq.Rect.data.rotation
                    }
                }, rect: {
                    func: function () {
                        return [[Hq.Rect.data.LT.x, Hq.Rect.data.LT.y], jl, jl]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return Hq.Rect.data.rotation
                    }
                }, rect: {
                    func: function () {
                        return [[Hq.Rect.data.LB.x, Hq.Rect.data.LB.y], jl, jl]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return Hq.Rect.data.rotation
                    }
                }, rect: {
                    func: function () {
                        return [[Hq.Rect.data.RB.x, Hq.Rect.data.RB.y], jl, jl]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return Hq.Rect.data.rotation
                    }
                }, rect: {
                    func: function () {
                        return [[Hq.Rect.data.RT.x, Hq.Rect.data.RT.y], jl, jl]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return Hq.Rect.data.rotation
                    }
                }, visible: {
                    func: function () {
                        return Hq.Rect.data.L ? !0 : !1
                    }
                }, rect: {
                    func: function () {
                        return [[Hq.Rect.data.L.x, Hq.Rect.data.L.y], jl, jl]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return Hq.Rect.data.rotation
                    }
                }, visible: {
                    func: function () {
                        return Hq.Rect.data.R ? !0 : !1
                    }
                }, rect: {
                    func: function () {
                        return [[Hq.Rect.data.R.x, Hq.Rect.data.R.y], jl, jl]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return Hq.Rect.data.rotation
                    }
                }, visible: {
                    func: function () {
                        return Hq.Rect.data.T ? !0 : !1
                    }
                }, rect: {
                    func: function () {
                        return [[Hq.Rect.data.T.x, Hq.Rect.data.T.y], jl, jl]
                    }
                }
            }, {
                type: "image", name: "Icons.RectPoint", rotation: {
                    func: function () {
                        return Hq.Rect.data.rotation
                    }
                }, visible: {
                    func: function () {
                        return Hq.Rect.data.B ? !0 : !1
                    }
                }, rect: {
                    func: function () {
                        return [[Hq.Rect.data.B.x, Hq.Rect.data.B.y], jl, jl]
                    }
                }
            }]
        };
        var Ud = 16;
        t.Default.setImage("Icons.Anchor", {
            width: 12,
            height: 12,
            comps: [{
                type: "shape",
                borderWidth: 1,
                borderColor: Qn,
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [.50928, 6, 11.49072, 6, 6, 6, 6, .50928, 6, 11.49072]
            }, {
                type: "circle",
                borderWidth: 1,
                borderColor: Qn,
                shadowColor: "#1ABC9C",
                rect: [2.84391, 2.84391, 6.53697, 6.53697]
            }]
        }), Hq.Anchor = {
            comps: [{
                type: "image", name: "Icons.Anchor", rect: {
                    func: function () {
                        return [[Hq.Anchor.data.POS.x, Hq.Anchor.data.POS.y], Ud, Ud]
                    }
                }
            }]
        }, Hq.TipShiftX = 12, Hq.TipShiftY = 12;
        var Ti = [8, 28];
        Hq.TipHelper = {
            comps: [{
                type: "roundRect", rect: {
                    func: function () {
                        return [Hq.TipHelper.data.helperPos.x, Hq.TipHelper.data.helperPos.y, Ti[0] * Hq.TipHelper.data.size, Ti[1]]
                    }
                }, background: {
                    func: function () {
                        return qf.getStyle("tipBackground")
                    }
                }, opacity: .6
            }, {
                type: "text", text: {
                    func: function () {
                        return Hq.TipHelper.data.text
                    }
                }, rect: {
                    func: function () {
                        return [Hq.TipHelper.data.helperPos.x, Hq.TipHelper.data.helperPos.y, Ti[0] * Hq.TipHelper.data.size, Ti[1]]
                    }
                }, color: {
                    func: function () {
                        return qf.getStyle("tipTextColor")
                    }
                }, font: "bold 12px Arial", align: "center"
            }]
        };
        var _c = 7;
        Hq.ShapePoint = {
            comps: [{
                type: "circle", rect: {
                    func: function () {
                        var k = Hq.ShapePoint.data;
                        return [k, _c, _c]
                    }
                }, background: "#ffffff", borderWidth: 1, borderColor: Qn
            }]
        }, Hq.ShapeBgCurve = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        return Hq.ShapeBgCurve.data.P
                    }
                }, segments: {
                    func: function () {
                        return Hq.ShapeBgCurve.data.S
                    }
                }, background: null, borderWidth: 1, borderColor: Qn
            }]
        };
        var Dr = 8;
        Hq.ShapeHighlighPoint = {
            comps: [{
                type: "circle", rect: {
                    func: function () {
                        var o = Hq.ShapeHighlighPoint.data;
                        return [[o.x, o.y], Dr, Dr]
                    }
                }, background: {
                    func: function () {
                        return qf.getStyle("shapeHighlighPointBackground")
                    }
                }, borderWidth: 0
            }]
        };
        var xg = 10;
        Hq.ShapeHighlighRealPoint = {
            comps: [{
                type: "circle", rect: {
                    func: function () {
                        var S = Hq.ShapeHighlighRealPoint.data;
                        return [[S.x, S.y], xg, xg]
                    }
                }, background: "#ffffff", borderWidth: 2, borderColor: Qn
            }]
        };
        var Gr = 8;
        Hq.ShapeHighlighCtrlPoint = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var N = Hq.ShapeHighlighCtrlPoint.data, f = N.x, d = N.y, T = Gr / 2;
                        return [f - T, d - T, f - T, d + T, f + T, d + T, f + T, d - T]
                    }
                }, segments: [1, 2, 2, 2, 5], borderWidth: 2, background: {
                    func: function () {
                        return qf.getStyle("shapeCtrlPointBackground")
                    }
                }, borderColor: {
                    func: function () {
                        return qf.getStyle("shapeCtrlPointBorderColor") || Qn
                    }
                }
            }]
        };
        var Em = 3;
        Hq.ShapeHighlightCurve = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        return Hq.ShapeHighlightCurve.data
                    }
                }, segments: [1, 4], background: null, borderWidth: Em, borderColor: {
                    func: function () {
                        return qf.getStyle("curveHighlightColor")
                    }
                }
            }]
        }, Hq.ShapeGuideLine = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        return Hq.ShapeGuideLine.data
                    }
                }, background: null, borderWidth: 1, borderColor: "rgb(255,204,153)"
            }]
        }, Hq.MoveLineGuide = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        return Hq.MoveLineGuide.data.rect
                    }
                }, background: null, borderWidth: 1, borderColor: {
                    func: function () {
                        return Hq.MoveLineGuide.data.center ? nr : Uj
                    }
                }
            }]
        };
        var Lm = 5;
        Hq.MoveLineGuideDistanceH = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var u = Hq.MoveLineGuideDistanceH.data, R = u.x0, Z = u.y0;
                        return [R, Z - Lm, R, Z + Lm]
                    }
                }, rotation: -Math.PI / 4, segments: [1, 2], background: null, borderWidth: 1, borderColor: Uj
            }, {
                type: "shape", points: {
                    func: function () {
                        var z = Hq.MoveLineGuideDistanceH.data, q = z.x1, i = z.y1;
                        return [q, i - Lm, q, i + Lm]
                    }
                }, rotation: -Math.PI / 4, segments: [1, 2], background: null, borderWidth: 1, borderColor: Uj
            }, {
                type: "text", text: {
                    func: function () {
                        return Math.round(Hq.MoveLineGuideDistanceH.data.dis)
                    }
                }, rect: {
                    func: function () {
                        var l = Hq.MoveLineGuideDistanceH.data;
                        return [[(l.x0 + l.x1) / 2, l.y0 - 10], 20, 20]
                    }
                }, color: Uj, font: "12px Arial", align: "center"
            }]
        }, Hq.MoveLineGuideDistanceV = {
            comps: [{
                type: "shape", points: {
                    func: function () {
                        var u = Hq.MoveLineGuideDistanceV.data, e = u.x0, C = u.y0;
                        return [e - Lm, C, e + Lm, C]
                    }
                }, rotation: Math.PI / 4, segments: [1, 2], background: null, borderWidth: 1, borderColor: Uj
            }, {
                type: "shape", points: {
                    func: function () {
                        var C = Hq.MoveLineGuideDistanceV.data, U = C.x1, p = C.y1;
                        return [U - Lm, p, U + Lm, p]
                    }
                }, rotation: Math.PI / 4, segments: [1, 2], background: null, borderWidth: 1, borderColor: Uj
            }, {
                type: "text", text: {
                    func: function () {
                        return Math.round(Hq.MoveLineGuideDistanceV.data.dis)
                    }
                }, rect: {
                    func: function () {
                        var M = Hq.MoveLineGuideDistanceV.data;
                        return [[M.x0 - 10, (M.y0 + M.y1) / 2], 20, 20]
                    }
                }, color: Uj, font: "12px Arial", align: "center"
            }]
        }, t.Default.setImage("Icons.EdgeElevationGuideImage", {
            width: 16,
            height: 16,
            comps: [{
                type: "oval",
                background: "rgb(255,255,255)",
                borderWidth: 1,
                borderColor: "rgb(138,138,138)",
                rect: [.5, .5, 15, 15]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(44,44,44)",
                borderCap: "round",
                points: [4, 8, 8, 4, 12, 8, 8, 4, 8, 13],
                segments: [1, 2, 2, 1, 2]
            }]
        }), Hq.EdgeElevationGuide = {
            comps: [{
                type: "image",
                name: "Icons.EdgeElevationGuideImage",
                rect: {
                    func: function () {
                        var B = Hq.EdgeElevationGuide.data, A = B.x, Z = B.y,
                            V = qf.getStyle("curveElevationIntersectSize"), U = qf.getStyle("curveElevationGuideShift");
                        return A += U[0], Z += U[1], [A - V, Z - V, 2 * V, 2 * V]
                    }
                }
            }]
        }, t.Default.setImage("Icons.ConnectGuideBgImage", {
            width: 12,
            height: 12,
            comps: [{
                type: "shape",
                background: "#3399ff",
                fillRule: "evenodd",
                shadowColor: "#1ABC9C",
                rotation: 3.14159,
                points: [6.00001, 11.99999, 6.00001, 11.99999, 2.6863, 11.99999, 1e-5, 9.30695, 1e-5, 5.99999, 1e-5, 5.99999, 1e-5, 2.68628, 2.69305, -1e-5, 6.00001, -1e-5, 12.00001, -1e-5, 11.99998, 12.00001, 6.00001, 11.99999],
                segments: [1, 2, 4, 2, 4, 2, 2, 2]
            }]
        }), t.Default.setImage("Icons.ConnectGuideHeaderImage", {
            width: 12,
            height: 12,
            comps: [{
                type: "oval",
                background: "#3399FF",
                borderColor: "#3399FF",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 12, 12]
            }, {
                type: "shape",
                borderWidth: 1,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [4.76, 2.56, 8.2, 5.98, 4.76, 9.44]
            }]
        }), Hq.ConnectGuide = {
            comps: [{
                type: "image", name: "Icons.ConnectGuideBgImage", rotation: {
                    func: function () {
                        return Hq.ConnectGuide.data.rotation
                    }
                }, rect: {
                    func: function () {
                        var n = Hq.ConnectGuide.data.connect;
                        n.x, n.y;
                        var C = qf.getStyle("connectGuideIntersectSize");
                        return [[n.x, n.y], 2 * C, 2 * C]
                    }
                }
            }, {
                type: "image", name: "Icons.ConnectGuideHeaderImage", rect: {
                    func: function () {
                        var z = Hq.ConnectGuide.data.cursorPos || Hq.ConnectGuide.data.connect,
                            c = qf.getStyle("connectGuideIntersectSize");
                        return [[z.x, z.y], 2 * c - 2, 2 * c - 2]
                    }
                }
            }, {
                type: "shape",
                background: null,
                borderColor: "#3399ff",
                borderWidth: 2,
                segments: [1, 4],
                points: {
                    func: function () {
                        var z = Hq.ConnectGuide.data.connect, l = Hq.ConnectGuide.data.cursorPos || z;
                        return [z.x, z.y, z.x + .5 * (l.x - z.x), z.y, l.x + .5 * (z.x - l.x), l.y, l.x, l.y]
                    }
                }
            }]
        }, t.Default.setImage("Icons.ConnectGuideGarbageImage", {
            width: 48,
            height: 48,
            comps: [{
                type: "oval",
                background: "rgba(0,0,0,0.1)",
                borderColor: "#979797",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 48, 48]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [19.84721, 19.69091, 19.84721, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [24.10371, 19.69091, 24.10371, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [28.15279, 19.69091, 28.15279, 32.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [11.23055, 15.22377, 36.76945, 15.189, 19.12302, 15.17121, 20.94722, 11.5228, 26.41985, 11.5228, 28.24406, 15.17121]
            }, {
                type: "rect",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                shadowColor: "#1ABC9C",
                rect: [15.48702, 15.22377, 17.02595, 21.25344]
            }]
        }), t.Default.setImage("Icons.ConnectGuideDeletingImage", {
            width: 56,
            height: 56,
            comps: [{
                type: "oval",
                background: "rgba(232,0,0,0.75)",
                borderColor: "#979797",
                shadowColor: "#1ABC9C",
                rect: [0, 0, 56, 56]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [22.67939, 27.69091, 22.67939, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [26.93588, 27.69091, 26.93588, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                points: [30.98497, 27.69091, 30.98497, 40.25123]
            }, {
                type: "shape",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                borderCap: "round",
                shadowColor: "#1ABC9C",
                anchorX: 0,
                anchorY: 1,
                rotation: 5.65062,
                points: [14.06272, 23.22377, 39.60163, 23.189, 21.9552, 23.17121, 23.7794, 19.5228, 29.25203, 19.5228, 31.07623, 23.17121]
            }, {
                type: "rect",
                borderWidth: 2,
                borderColor: "rgb(255,255,255)",
                shadowColor: "#1ABC9C",
                rect: [18.3192, 23.22377, 17.02595, 21.25344]
            }]
        }), Hq.ConnectGuideGarbage = {
            comps: [{
                type: "image", name: {
                    func: function () {
                        var D = Hq.ConnectGuideGarbage.data.hover;
                        return D ? "Icons.ConnectGuideDeletingImage" : "Icons.ConnectGuideGarbageImage"
                    }
                }, rect: {
                    func: function () {
                        var Q = Hq.ConnectGuideGarbage.data, R = qf.getStyle("connectGuideGarbageIntersectsize");
                        return Q.hover && (R += 5), [[Q.x, Q.y], 2 * R, 2 * R]
                    }
                }
            }]
        };
        var tm = 6;
        Hq.ShapeActivingCtrl = {
            comps: [{
                type: "shape", visible: {
                    func: function () {
                        return Hq.ShapeActivingCtrl.data.c1 ? !0 : !1
                    }
                }, points: {
                    func: function () {
                        var $ = Hq.ShapeActivingCtrl.data;
                        return [$.point.x, $.point.y, $.c1.x, $.c1.y]
                    }
                }, segments: [1, 2], background: null, borderWidth: 1, borderColor: Qn
            }, {
                type: "shape", visible: {
                    func: function () {
                        return Hq.ShapeActivingCtrl.data.c2 ? !0 : !1
                    }
                }, points: {
                    func: function () {
                        var e = Hq.ShapeActivingCtrl.data;
                        return [e.point.x, e.point.y, e.c2.x, e.c2.y]
                    }
                }, segments: [1, 2], background: null, borderWidth: 1, borderColor: Qn
            }, {
                type: "shape", visible: {
                    func: function () {
                        return Hq.ShapeActivingCtrl.data.c1 ? !0 : !1
                    }
                }, points: {
                    func: function () {
                        var p = Hq.ShapeActivingCtrl.data.c1, r = p.x, E = p.y, z = tm / 2;
                        return "c1" === Hq.ShapeActivingCtrl.data.hl && (z += .5), [r - z, E - z, r - z, E + z, r + z, E + z, r + z, E - z]
                    }
                }, segments: [1, 2, 2, 2, 5], borderWidth: 2, background: {
                    func: function () {
                        return qf.getStyle("shapeCtrlPointBackground")
                    }
                }, borderColor: {
                    func: function () {
                        return "c1" === Hq.ShapeActivingCtrl.data.hl ? qf.getStyle("shapeCtrlPointHighlightBorder") || Qn : qf.getStyle("shapeCtrlPointBorderColor") || Qn
                    }
                }
            }, {
                type: "shape", visible: {
                    func: function () {
                        return Hq.ShapeActivingCtrl.data.c2 ? !0 : !1
                    }
                }, points: {
                    func: function () {
                        var e = Hq.ShapeActivingCtrl.data.c2, i = e.x, E = e.y, o = tm / 2;
                        return "c2" === Hq.ShapeActivingCtrl.data.hl && (o += .5), [i - o, E - o, i - o, E + o, i + o, E + o, i + o, E - o]
                    }
                }, segments: [1, 2, 2, 2, 5], borderWidth: 2, background: {
                    func: function () {
                        return qf.getStyle("shapeCtrlPointBackground")
                    }
                }, borderColor: {
                    func: function () {
                        return "c2" === Hq.ShapeActivingCtrl.data.hl ? qf.getStyle("shapeCtrlPointHighlightBorder") || Qn : qf.getStyle("shapeCtrlPointBorderColor") || Qn
                    }
                }
            }]
        }, Le.Icons.DrawIcon = function (r, e, $, y) {
            $.width = $.height = Ld, $.data = y, qf = r, t.Default.drawImage(e, $, 0, 0, Ld, Ld)
        }, Le.Icons.MapPoints = function (_, I) {
            for (var z = 0, u = _.length; u > z; z++) _[z] /= I
        }, Le.roundTo = function (p, E, g) {
            var O = Math.abs(p % E);
            return g > O || g > E - O ? E * Math.round(p / E) : p
        }, Le.toFixed = function (z) {
            return Math.round(100 * z) / 100
        }, Le.getDataMatrix = function (p) {
            if (p instanceof t.Shape) {
                var P = new t.Math.Matrix2d, Y = p.getPosition();
                return P.translate(-Y.x, -Y.y).scale(p.getScale().x, p.getScale().y).rotate(p.getRotation()).translate(Y.x, Y.y), P
            }
            return p.getMatrix ? p.getMatrix() : new t.Math.Matrix2d
        };
        var ks = Le.Math.Curve = function () {
            this._curves = []
        };
        ks.prototype = {}, ks.prototype.constructor = ks, ks.prototype.createFromHtShape = function (U, L, n) {
            L instanceof t.List && (L = L.toArray());
            var M, _, j, G, f, D, T, m = this, r = null, k = null, h = 0, C = Le.Math.Vector2, i = Le.Math.CubicBezier,
                l = function (J) {
                    return new C(U[J], U[J + 1], n ? n[J / 2] : $)
                };
            for (_ = 0, j = L.length; j > _; _++) {
                switch (G = L[_], f = null, G) {
                    case 1:
                        k = l(h), r = k, h += 2;
                        break;
                    case 2:
                        M = l(h), h += 2, f = new i(k, k.clone(), M.clone(), M), k = M;
                        break;
                    case 3:
                        D = l(h), M = l(h + 2), h += 4, f = new i(k, D.clone().sub(k).multiplyScalar(2 / 3).add(k), D.clone().sub(M).multiplyScalar(2 / 3).add(M), M), k = M;
                        break;
                    case 4:
                        D = l(h), T = l(h + 2), M = l(h + 4), h += 6, f = new i(k, D, T, M), k = M;
                        break;
                    case 5:
                        if (!r) break;
                        f = new i(k, k.clone(), r.clone(), r), k = null, r = null
                }
                f && (f._index = m._curves.length, m._curves.push(f))
            }
        }, ks.prototype.checkPoint = function (T, X) {
            var v, L, q, S, D, P = this, V = P._curves;
            for (v = 0, L = V.length; L > v; v++) if (S = V[v], D = S.intersectRect(T, X, X), D.length) return q = 0, D.forEach(function (N) {
                q += N.t
            }), q /= D.length, T = S.getPointAt(q), T.t = q, {bezier: S, intersection: T}
        }, ks.prototype.insertKnot = function (y, K) {
            var p = y.insertKnot(K), N = this, Z = N._curves;
            Z.splice(y._index, 1, p[0], p[1])
        }, ks.prototype._isCloseEnough = function (I, R) {
            return Math.abs(I.x - R.x) < 1e-6 && Math.abs(I.y - R.y) < 1e-6
        }, ks.prototype._isSamePoint = function (C, T) {
            return C === T
        }, ks.prototype.moveRealPoint = function (R, Q) {
            var C = this, M = C._curves, E = Q.clone().sub(R);
            M.forEach(function (V) {
                var v = V._p1;
                V._p2, V._p3;
                var n = V._p4;
                C._isSamePoint(v, R) && (V._p2.add(E), V._p1 = Q), C._isSamePoint(n, R) && (V._p3.add(E), V._p4 = Q)
            })
        }, ks.prototype.moveCtrlDueToRealPointMovement = function (j, l) {
            var E = this, W = E._curves, y = function (I) {
                I.add(l), I.e && l.e && (I.e += l.e)
            };
            W.forEach(function (f) {
                var K = f._p1;
                f._p2, f._p3;
                var w = f._p4;
                E._isSamePoint(K, j) && y(f._p2), E._isSamePoint(w, j) && y(f._p3)
            })
        }, ks.prototype.moveCtrlPoint = function (j, k, T) {
            var U = j[T];
            if (U) {
                U.e !== $ && (k.e = U.e);
                var P = this, c = P._curves;
                k.clone().sub(U), c.forEach(function (w) {
                    var n;
                    "c2" === T ? n = "_p2" : "c1" === T && (n = "_p3"), P._isSamePoint(w[n], U) && (w[n] = k)
                }), j[T] = k
            }
        }, ks.prototype.deleteRealPoint = function (W, j) {
            var U, r, B, d, x, M, $, a = this, u = a._curves, Z = {}, z = [], E = Le.Math.CubicBezier;
            for (r = 0, B = u.length; B > r; r++) U = u[r], d = U._p1, x = U._p2, M = U._p3, $ = U._p4, (Z[r] || !a._isSamePoint(d, W)) && (a._isSamePoint($, W) ? B > r + 1 && a._isSamePoint(u[r + 1]._p1, W) && (j || z.push(new E(d, x, u[r + 1]._p3, u[r + 1]._p4))) : z.push(U));
            a._curves = z
        }, ks.prototype.findPairs = function (d, F) {
            var $, o, O, B, c, C, S, m, t = this, R = t._curves, G = {}, Z = [];
            for (o = 0, O = R.length; O > o; o++) $ = R[o], B = $._p1, c = $._p2, C = $._p3, S = $._p4, !G[o] && t._isSamePoint(B, d) && (F ? Z.push({
                point: B,
                r2: S
            }) : Z.push({point: B, c2: c})), t._isSamePoint(S, d) && (m = F ? {point: S, r1: B} : {
                point: S,
                c1: C
            }, O > o + 1 && t._isSamePoint(R[o + 1]._p1, d) && (F ? m.r2 = R[o + 1]._p4 : m.c2 = R[o + 1]._p2, G[o + 1] = !0), Z.push(m));
            return Z
        }, ks.prototype.toHtShape = function () {
            var p = this, V = p._curves, o = [], D = [], G = {x: 1 / 0, y: 1 / 0};
            return V.forEach(function (e) {
                var c = e._p1, b = e._p2, W = e._p3, M = e._p4;
                return p._isCloseEnough(c, G) || (o.push(1), D.push(c.clone())), G = M, p._isCloseEnough(c, b) && p._isCloseEnough(W, M) ? (o.push(2), D.push(M.clone()), void 0) : (o.push(4), D.push(b.clone(), W.clone(), M.clone()), void 0)
            }), {segments: o, points: D}
        };
        var gj = Le.Math.CubicBezier = function (A, F, f, h) {
            var n = this;
            n._id = Le.Math.CubicBezier._globalId++, n._p1 = A, n._p2 = F, n._p3 = f, n._p4 = h
        };
        gj._globalId = 1, gj.prototype = {}, gj.prototype.constructor = gj, gj.prototype.toString = function () {
            return this._id
        }, gj.prototype.intersectRect = function (k, Q, l) {
            var R = Q / 2, H = l / 2, w = k.x, d = k.y, A = Le.Math.Vector2, K = new A(-R + w, -H + d),
                n = new A(R + w, H + d), b = new A(n.x, K.y), p = new A(K.x, n.y), _ = this, N = _.intersectLine(K, b),
                J = _.intersectLine(b, n), h = _.intersectLine(n, p), g = _.intersectLine(p, K),
                i = N.concat(J).concat(h).concat(g);
            return i
        }, gj.prototype.intersectLine = function (n, W) {
            var O, s, Y, X, J, V, w, v, l, L, t, B, e, E = this, j = n.clone().min(W), k = n.clone().max(W);
            X = E._p1, J = E._p2, V = E._p3, w = E._p4, O = X.clone().multiplyScalar(-1), s = J.clone().multiplyScalar(3), Y = V.clone().multiplyScalar(-3), t = O.add(s).add(Y).add(w), O = X.clone().multiplyScalar(3), s = J.clone().multiplyScalar(-6), Y = V.clone().multiplyScalar(3), L = O.add(s).add(Y), O = X.clone().multiplyScalar(-3), s = J.clone().multiplyScalar(3), l = O.add(s), v = X.clone(), e = new Le.Math.Vector2(n.y - W.y, W.x - n.x), B = n.x * W.y - W.x * n.y;
            for (var R = E.getRoots(e.dot(t), e.dot(L), e.dot(l), e.dot(v) + B), T = new Array, M = 0, m = R.length; m > M; M++) {
                var y = R[M];
                if (!(0 > y || y > 1)) {
                    var H = X.clone().lerp(J, y), C = J.clone().lerp(V, y), $ = V.clone().lerp(w, y), i = H.lerp(C, y),
                        d = C.lerp($, y), D = i.lerp(d, y);
                    D.t = y, n.x == W.x ? j.y <= D.y && D.y <= k.y && T.push(D) : n.y == W.y ? j.x <= D.x && D.x <= k.x && T.push(D) : D.x >= j.x && D.y >= j.y && D.x <= k.x && D.y <= k.y && T.push(D)
                }
            }
            return T
        }, gj.prototype.solveTForPoint = function (X) {
            var p, v, M, Y, c = this;
            p = c._p1.x - X.x, v = c._p2.x - X.x, M = c._p3.x - X.x, Y = c._p4.x - X.x;
            for (var y = c.getRoots(Y - 3 * M + 3 * v - p, 3 * M - 6 * v + 3 * p, 3 * v - 3 * p, p), k = $, f = 1 / 0, V = 0, A = y.length; A > V; V++) {
                var C = y[V];
                if (!(0 > C || C > 1)) {
                    var Z = c._p1.clone().lerp(c._p2, C), Q = c._p2.clone().lerp(c._p3, C),
                        T = c._p3.clone().lerp(c._p4, C), D = Z.lerp(Q, C), b = Q.lerp(T, C), O = D.lerp(b, C);
                    O.t = C;
                    var h = Math.abs(O.y - X.y);
                    f > h && (f = h, k = O)
                }
            }
            return k
        }, gj.prototype.getPointAt = function (s) {
            var $ = this, T = $._p1, N = $._p2, q = $._p3, C = $._p4, d = T.clone().lerp(N, s),
                L = N.clone().lerp(q, s), w = q.clone().lerp(C, s), z = d.lerp(L, s), Q = L.lerp(w, s);
            return z.lerp(Q, s)
        }, gj.prototype.getRoots = function (b, o, K, T) {
            var a, W, M, I, F, u = new Array;
            if (Math.abs(b) < 1e-6) {
                var a = o, W = K / a, M = T / a, I = W * W - 4 * M;
                if (I > 0) {
                    var F = Math.sqrt(I);
                    u.push(.5 * (-W + F)), u.push(.5 * (-W - F))
                } else 0 == I && u.push(.5 * -W)
            }
            o /= b, K /= b, T /= b, a = (3 * K - o * o) / 3, W = (2 * o * o * o - 9 * K * o + 27 * T) / 27;
            var C = o / 3, _ = W * W / 4 + a * a * a / 27, t = W / 2;
            if (Math.abs(_) <= 1e-6 && (_ = 0), _ > 0) {
                var Q, S, F = Math.sqrt(_);
                Q = -t + F, S = Q >= 0 ? Math.pow(Q, 1 / 3) : -Math.pow(-Q, 1 / 3), Q = -t - F, Q >= 0 ? S += Math.pow(Q, 1 / 3) : S -= Math.pow(-Q, 1 / 3), u.push(S - C)
            } else if (0 > _) {
                var h = Math.sqrt(-a / 3), s = Math.atan2(Math.sqrt(-_), -t) / 3, E = Math.cos(s), J = Math.sin(s),
                    d = Math.sqrt(3);
                u.push(2 * h * E - C), u.push(-h * (E + d * J) - C), u.push(-h * (E - d * J) - C)
            } else {
                var Q;
                Q = t >= 0 ? -Math.pow(t, 1 / 3) : Math.pow(-t, 1 / 3), u.push(2 * Q - C), u.push(-Q - C)
            }
            return u
        }, gj.prototype._70I = function () {
            var N = this;
            return N._p1.distanceToSquared(N._p2) < 1e-10 && N._p3.distanceToSquared(N._p4) < 1e-10
        }, gj.prototype.insertKnot = function (M) {
            var j = this, o = j._p1, K = j._p2, C = j._p3, $ = j._p4, V = o.clone().lerp(K, M),
                F = K.clone().lerp(C, M), D = C.clone().lerp($, M), u = V.clone().lerp(F, M), y = F.clone().lerp(D, M),
                r = u.clone().lerp(y, M);
            return j._70I() ? (o.clone().lerp($, M), [new Le.Math.CubicBezier(o, o.clone(), r.clone(), r), new Le.Math.CubicBezier(r, r.clone(), $.clone(), $)]) : [new Le.Math.CubicBezier(o, V, u, r), new Le.Math.CubicBezier(r, y, D, $)]
        };
        var Hi = t.Default.getInternal().ui().EdgeUI, Pq = {
            _47O: function (H) {
                var P = this, g = Pq.getBackups()._47O;
                Le.inEdit(P.gv) || g.call(P, H)
            }
        };
        Le.Inject.registAsModule(Pq, Hi);
        var rh = t.Default.getInternal().ui().NodeUI, kr = {
            _47O: function (o) {
                var S = this, m = kr.getBackups()._47O;
                Le.inEdit(S.gv) || m.call(S, o)
            }, getSelectWidth: function () {
                var X = this, D = X.gv, V = X._data;
                if (D.isEditable(V) && Le.inEdit(D)) return 0;
                var h = kr.getBackup("getSelectWidth");
                return h.call(X)
            }
        };
        Le.Inject.registAsModule(kr, rh);
        var wj = t.graph.GraphView, un = {
            _editPointSize: function () {
                var G = t.Default.isTouchable, L = Le.getStyle("pointSize");
                return L[G ? 0 : 1]
            }(), isPointEditable: function (m) {
                var j = this;
                if (Le.inEdit(j)) return j._pointEditableFunc ? j._pointEditableFunc(m) : !0;
                var t = un.getBackup("isPointEditable");
                t.call(j, m)
            }, isEditable: function (J) {
                var c, R = this, q = un.getBackup("isEditable");
                if (c = J instanceof Le.Group ? !0 : q.call(R, J), !Le.inEdit(R)) return c;
                if (!(J instanceof t.Edge)) return c;
                if (!J.s("2d.editable")) return !1;
                var x = R.getEditableFunc();
                return x ? x(J) : !0
            }, _42: function (K, k) {
                var H = this, L = un.getBackups()._42;
                if (L.call(H, K, k), Le.inEdit(H)) {
                    var s = H.getEditInteractor();
                    s.drawImpl()
                }
            }
        };
        Le.Inject.registAsModule(un, wj);
        var zd = t.Default.getInternal().ui().ShapeUI, pn = {
            _47O: function (u) {
                var O = this, C = pn.getBackups()._47O;
                Le.inEdit(O.gv) || C.call(O, u)
            }
        };
        Le.Inject.registAsModule(pn, zd);
        var oi = t.graph.DefaultInteractor, og = {
            handle_mousewheel: function (T) {
                var e = this, o = og.getBackup("handle_mousewheel");
                Le.inEdit(e.gv) || o.call(e, T)
            }
        };
        Le.Inject.registAsModule(og, oi);
        var _g = t.graph.MoveInteractor, qk = {
            _calcShift: function (c, s) {
                var W = this, $ = qk.getBackup("_calcShift"), k = W.gv;
                if (!Le.inEdit(k)) return $.call(W, c, s);
                var q = k.getEditInteractor(), f = q.getSubModule("Move").calcShift(c, s, W);
                return f || $.call(W, c, s)
            }, clear: function (M) {
                var T = this, k = qk.getBackup("clear");
                k.call(T, M);
                var o = T.gv;
                if (Le.inEdit(o)) {
                    var V = o.getEditInteractor();
                    V.getSubModule("Move").clear(M)
                }
            }
        };
        Le.Inject.registAsModule(qk, _g);
        var nj = Le.Rect = function (x) {
            this.catalog = "Rect", this._interactor = x
        };
        nj.prototype = {}, nj.prototype.constructor = nj, nj.prototype.gatherInfo = function (r, D) {
            var V = this;
            if (1 === D.length) {
                var B = D[0];
                return B instanceof t.Shape && B._70I() ? V.gatherLine(r, B) : bg(B, r) ? !1 : V.gatherSingleTarget(r, B)
            }
            return D.length > 1 ? V.gatherMultiTargets(r, D) : !1
        }, nj.prototype.gatherSingleTarget = function (s, n) {
            if (n.getCorners) {
                var J, A = this, p = A.info;
                A.target = n, J = A.screenInfo = {};
                var d = n.getCorners();
                p.LT = new Le.Math.Vector2(d[0]), p.LB = new Le.Math.Vector2(d[1]), p.RB = new Le.Math.Vector2(d[2]), p.RT = new Le.Math.Vector2(d[3]), p.T = p.LT.clone().add(p.RT).divideScalar(2), p.B = p.LB.clone().add(p.RB).divideScalar(2), p.L = p.LT.clone().add(p.LB).divideScalar(2), p.R = p.RT.clone().add(p.RB).divideScalar(2);
                for (var R in p) J[R] = Le.toScreenPosition(s, p[R]);
                var D = A._interactor, I = D.getStyle("checkSize"), F = function (Q, B, O) {
                    var U = B.clone().sub(Q).setLength(-I), F = O.clone().sub(Q).setLength(-I), Y = U.add(F).add(Q);
                    return Y
                };
                return J.rotLT = F(J.LT, J.RT, J.LB), J.rotLB = F(J.LB, J.LT, J.RB), J.rotRB = F(J.RB, J.LB, J.RT), J.rotRT = F(J.RT, J.LT, J.RB), J.rotT = J.rotLT.clone().add(J.rotRT).divideScalar(2), J.rotB = J.rotLB.clone().add(J.rotRB).divideScalar(2), J.rotL = J.rotLT.clone().add(J.rotLB).divideScalar(2), J.rotR = J.rotRT.clone().add(J.rotRB).divideScalar(2), J.rotation = n.getRotation(), A.gatherConnectInfo(), !0
            }
        }, nj.prototype.gatherConnectInfo = function () {
            var X = this, q = X.target, A = X._interactor, Z = X.screenInfo, n = A.gv;
            if (q instanceof t.Node && A.getStyle("connectGuideVisible")) {
                var U = q.s("connectGuideShift") || A.getStyle("connectGuideShift"), l = q.getAnchor(), c = q.getSize(),
                    o = q.toGlobal({x: c.width * (U[0] - l.x), y: c.height * (U[1] - l.y)});
                o = Le.toScreenPosition(n, o), Z.P1 ? o.add(Z.P2.clone().sub(Z.P1).setLength(U[2])) : (o.add(Z.RT.clone().sub(Z.LT).setLength(U[2])), o.add(Z.LB.clone().sub(Z.LT).setLength(U[3]))), Z.connect = o
            }
        }, nj.prototype.gatherMultiTargets = function (s, u) {
            var k = Le.Group.findOrCreateGroup(u);
            if (!k) return !1;
            var X = this;
            return X.editing && "rotate" !== X.editing.mode || k.calcInfo(), X.gatherSingleTarget(s, k)
        }, nj.prototype.gatherLine = function (m, i) {
            this.target = i;
            var A = this.screenInfo = {}, I = i.getPoints(), h = Le.getDataMatrix(i);
            return A.P1 = Le.toScreenPosition(m, h.apply(I.get(0))), A.P2 = Le.toScreenPosition(m, h.apply(I.get(1))), this.gatherConnectInfo(), !0
        }, nj.ResizeKeys = ["LT", "RB", "LB", "RT", "L", "R", "B", "T"], nj.ResizeDirection = [{x: -1, y: -1}, {
            x: 1,
            y: 1
        }, {x: -1, y: 1}, {x: 1, y: -1}, {x: -1, y: 0}, {x: 1, y: 0}, {x: 0, y: 1}, {
            x: 0,
            y: -1
        }], nj.RotateKeys = ["rotLT", "rotRB", "rotLB", "rotRT", "rotL", "rotR", "rotB", "rotT"], nj.prototype.check = function (O, q, _) {
            if (t.Default.isLeftButton(q)) {
                var W = this;
                if (W.editing = null, W.tipInfo = null, W.screenInfo) {
                    var P = W.target, Y = O.isEditable(P), w = W.screenInfo;
                    if (Y && w.connect) {
                        var i = W._checkConnect(_);
                        if (i) return i
                    }
                    if (w.P1) return W._checkLine(_);
                    var x, N, c, M = null, X = W._interactor, o = X.getStyle("checkSize");
                    if (Y && O.isRectEditable(P)) for (N = 0; N < Le.Rect.ResizeKeys.length; N++) if (c = Le.Rect.ResizeKeys[N], Le.checkHit(_, w[c], o)) {
                        M = c, x = "resize";
                        break
                    }
                    if (!M && Y && O.isRotationEditable(P)) {
                        var J = X.getStyle("rotateCheckSize");
                        for (N = 0; N < Le.Rect.RotateKeys.length; N++) if (c = Le.Rect.RotateKeys[N], Le.checkHit(_, w[c], J)) {
                            M = c, x = "rotate";
                            break
                        }
                    }
                    if (!M) return X.setCursor("default"), void 0;
                    if ("rotate" === x) {
                        var f, H = O.lp(q);
                        if (P instanceof Le.Group) {
                            var D = X.getStyle("groupRotateModeKey");
                            "string" == typeof D && (D = [D]);
                            for (var T = !1, S = 0, z = D.length; z > S; S++) if (q[D[S]]) {
                                T = !0;
                                break
                            }
                            var A = X.getStyle("groupRotateModeDefault");
                            f = T ? "batch" === A ? "block" : "batch" : A
                        }
                        var s = "batch" === f ? P.getAnchor2() : P.getPosition(), y = Math.atan2(H.y - s.y, H.x - s.x);
                        X._setRotateCursor(y), W.editing = {
                            mode: x,
                            key: M,
                            pos: s,
                            flipY: P.getScale().y < 0,
                            rotation: P.getRotation(),
                            hitRot: y
                        }, f && (W.editing.groupRotateMode = f)
                    } else {
                        var K = Le.Rect.ResizeKeys.indexOf(M), n = Le.Rect.ResizeDirection[K],
                            r = Math.cos(P.getRotation()), F = Math.sin(P.getRotation()),
                            Z = n.x * Math.sign(P.getScale().x), B = n.y * Math.sign(P.getScale().y),
                            g = Math.atan2(-F * Z - r * B, r * Z - F * B), R = (Math.round(g / (Math.PI / 4)) + 8) % 8,
                            d = ["ew-resize", "nesw-resize", "ns-resize", "nwse-resize", "ew-resize", "nesw-resize", "ns-resize", "nwse-resize"][R];
                        this._interactor.setCursor(d);
                        var L = P.getWidth(), p = P.getHeight(), C = P.getAnchor();
                        W.editing = {
                            mode: x,
                            key: M,
                            rect: {x: -L * C.x, y: -p * C.y, width: L, height: p},
                            anchor: C,
                            matrix: P.getMatrix()
                        }
                    }
                    return M
                }
            }
        }, nj.prototype._checkLine = function (p) {
            var z = this;
            z.screenInfo;
            var y, F = z._interactor.getStyle("checkSize");
            if (Le.checkHit(p, z.screenInfo.P1, F)) y = "P1"; else {
                if (!Le.checkHit(p, z.screenInfo.P2, F)) return this._interactor.setCursor("default"), void 0;
                y = "P2"
            }
            return z.editing = {mode: "line", key: y}, y
        }, nj.prototype._checkConnect = function (B) {
            var M = this, W = M.screenInfo, T = M._interactor, v = T.getStyle("connectGuideIntersectSize"),
                I = W.connect, V = B.x, r = I.x;
            if (r > V && v > r - V && Math.abs(I.y - B.y) < v || V >= r && Le.checkHit(B, I, v)) {
                var k = "connect", C = F.getConnectAction(T.gv);
                return M.editing = {mode: k}, C && C.delete && C.delete.visible.call(null, T.gv, M.target) && (M.editing.hasDeleteAction = !0), T.setCursor("default"), k
            }
        }, nj.prototype._fireEditEvent = function (R, Y) {
            var r = this._interactor, t = this.editing;
            if (t) {
                var c = t.mode;
                c = "rotate" === c ? "Rotation" : "connect" === c ? "Connection" : c[0].toUpperCase() + c.slice(1), r.fi({
                    kind: R + "Edit" + c,
                    event: Y
                })
            }
        }, nj.prototype.startEdit = function (D, t) {
            D.startDragging(t);
            var l = this;
            l._interactor.fi({kind: "prepareEdit", event: t});
            var s = l.editing, g = l.target;
            if (s) {
                if (l._fireEditEvent("begin", t), "rotate" === s.mode) return s.groupRotateMode && g.beginRotate(s), void 0;
                if ("connect" !== s.mode) ("line" === s.mode || g && 0 === g.getRotation()) && (l._inSmartGuide = !0, l._interactor.rectGuide.gatherRects()); else if (s.hasDeleteAction) {
                    var n = D.gv, j = l._interactor.getStyle("connectGuideGarbageShift");
                    s.garbageInfo = {
                        x: n.getWidth() * j[0] + j[2],
                        y: n.getHeight() * j[1] + j[3],
                        size: l._interactor.getStyle("connectGuideGarbageIntersectsize")
                    }, D._42()
                }
            }
        }, nj.prototype._46O = function (K) {
            var z, W = this, T = W.editing;
            if (T) {
                if ("connect" === T.mode && !T.canceled && !T.deleted) try {
                    T.garbageInfo && T.garbageInfo.hover ? F.doDeleteConnectionAction(W._interactor.gv, W.target) : F.doConnectAction(W._interactor.gv, W.target, T.target)
                } catch (r) {
                    console.error(r)
                }
                z = W.editing.groupRotateMode, W._fireEditEvent("end", K), W.editing = null
            }
            W.tipInfo = null, W._inSmartGuide && (W._interactor.rectGuide.clear(), W._inSmartGuide = !1), z && W.target && W.target.endRotate()
        }, nj.prototype.handleNormalStateDelete = function () {
            var A = this, z = A.editing;
            if (z && "connect" === z.mode && !z.canceled && !z.deleted) {
                if (z.garbageInfo) {
                    try {
                        F.doDeleteConnectionAction(A._interactor.gv, A.target)
                    } catch (s) {
                        console.error(s)
                    }
                    z.garbageInfo = null
                }
                return z.cursorPos = null, z.targetCorners = null, z.deleted = !0, A._interactor._42(), !0
            }
        }, nj.prototype.handleNormalStateKeyDown = function ($) {
            var e = this, q = e.editing;
            return !q || "connect" !== q.mode || q.canceled || q.deleted ? void 0 : t.Default.isEsc($) ? (q.cursorPos = null, q.targetCorners = null, q.canceled = !0, e._interactor._42(), !0) : void 0
        }, nj.prototype.handleEdit = function (F, f) {
            var I = this, O = I.editing;
            if (O) {
                var s, K, a, k, V, R = I.target, p = O.key, H = O.mode, w = F.lp(f), v = I._interactor;
                if ("connect" === H) {
                    if (O.canceled) return;
                    if (O.deleted) return;
                    O.cursorPos = v._getLogicalPoint(f);
                    var Z = O.garbageInfo;
                    return Z && Le.checkHit(O.cursorPos, Z, Z.size) ? (Z.hover = !0, O.target = null, O.targetCorners = null) : (Z && (Z.hover = !1), O.target = F.getDataAt(w, function (Z) {
                        return F.isSelectable(Z) ? Ik(Z) ? !0 : !1 : !1
                    }) || null, O.targetCorners = Le.getTargetCornersOnScreen(F, O.target)), v._42(), void 0
                }
                if ("rotate" === H) {
                    var m, A, $ = O.pos, B = Math.atan2(w.y - $.y, w.x - $.x);
                    if (O.groupRotateMode ? A = B - O.hitRot : (m = B - O.hitRot, A = O.rotation + m), A %= 2 * Math.PI, 0 > A && (A += 2 * Math.PI), !t.Default.isCtrlDown(f)) {
                        var d, x;
                        Mp(f) ? (d = v.getStyle("shiftRotateRound"), x = d / 2) : (d = v.getStyle("rotateRound"), x = v.getStyle("rotateSensitivity")), A = Le.roundTo(A, d, x)
                    }
                    O.groupRotateMode ? (m = A - (O.lastRotation || 0), 0 !== m && (R.addRotation(m, O.groupRotateMode), O.lastRotation = A)) : R.setRotation(A), v._setRotateCursor(B), A > Math.PI && (A -= 2 * Math.PI);
                    var M = 180 * (A / Math.PI);
                    M = M.toFixed(2), s = "" + M + ""
                } else if ("resize" === H) {
                    var h = O.rect;
                    a = h.x, k = h.y;
                    var J, c = h.width, S = h.height, g = O.anchor, N = O.matrix, i = Mp(f), W = I._unionPointMode1,
                        n = I._unionPointMode2;
                    if (I._inSmartGuide && !t.Default.isCtrlDown(f) && !i) {
                        var j;
                        "L" === p || "R" === p ? j = "x" : ("T" === p || "B" === p) && (j = "y"), I._adsorbedToClosest(w, j), V = !0
                    }
                    J = N.tfi(w);
                    var u;
                    "LT" === p ? (h = W(J, {x: a + c, y: k + S}, c, S, i), u = 9) : "T" === p ? (h = n({
                        x: a,
                        y: J.y
                    }, {x: a + c, y: k + S}, c, S, i, "v"), u = 1) : "RT" === p ? (h = W(J, {
                        x: a,
                        y: k + S
                    }, c, S, i), u = 33) : "L" === p ? (h = n({x: J.x, y: k}, {
                        x: a + c,
                        y: k + S
                    }, c, S, i, "h"), u = 8) : "R" === p ? (h = n({x: a, y: k}, {
                        x: J.x,
                        y: k + S
                    }, c, S, i, "h"), u = 32) : "LB" === p ? (h = W(J, {
                        x: a + c,
                        y: k
                    }, c, S, i), u = 12) : "B" === p ? (h = n({x: a, y: k}, {
                        x: a + c,
                        y: J.y
                    }, c, S, i, "v"), u = 4) : "RB" === p && (h = W(J, {x: a, y: k}, c, S, i), u = 36);
                    var P = N.tf(h.x + h.width * g.x, h.y + h.height * g.y);
                    R.setPosition(P), R.setSize(h.width, h.height), V && (K = R.getRect(), v.rectGuide.gatherLines({
                        node: R,
                        x: K.x,
                        y: K.y,
                        w: K.width,
                        h: K.height
                    }, j, u)), s = "" + Math.round(h.width) + " * " + Math.round(h.height)
                } else if ("line" === H) {
                    if (Mp(f)) {
                        var b = R.getPoints(), L = "P1" === p ? b.get(1) : b.get(0), U = {x: w.x - L.x, y: w.y - L.y},
                            l = v.getStyle("shiftLineRotateRound"), r = I._shiftDirList;
                        if (!r || I._shiftRotateRound !== l) {
                            I._shiftRotateRound = l, I._shiftDirList = r = [];
                            for (var Y = 0; Y < Math.PI; Y += l) r.push({x: C(Y), y: D(Y)})
                        }
                        for (var X, T = 0, E = 0, q = r.length; q > E; E++) {
                            var _ = r[E], G = _.x * U.x + _.y * U.y;
                            Math.abs(G) > Math.abs(T) && (T = G, X = _)
                        }
                        w = {x: L.x + X.x * T, y: L.y + X.y * T}, v.rectGuide.clear()
                    } else I._inSmartGuide && !t.Default.isCtrlDown(f) && (I._adsorbedToClosest(w), V = !0);
                    var z = Le.getDataMatrix(R).applyInverse(w);
                    R.setPoint("P1" === p ? 0 : 1, z, !0);
                    var y = R.getPoints(), o = y.get(0), Q = y.get(1);
                    a = o.x - Q.x, k = o.y - Q.y, s = " " + Math.round(Math.sqrt(a * a + k * k)) + " ", V && (K = R.getRect(), v.rectGuide.gatherLines({
                        node: R,
                        x: K.x,
                        y: K.y,
                        w: K.width,
                        h: K.height
                    }))
                }
                if (s) {
                    var e = t.Default.getLogicalPoint(f, v._canvas);
                    e.x += Le.Icons.TipShiftX, e.y += Le.Icons.TipShiftY, I.tipInfo = {
                        helperPos: e,
                        text: s,
                        size: s.length
                    }
                }
                I._fireEditEvent("between", f)
            }
        }, nj.prototype._unionPointMode1 = function (u, i, S, _, L) {
            if (L && S && _) {
                var Q = u.x - i.x, I = u.y - i.y;
                Math.abs(Q * _) < Math.abs(I * S) ? (I = Math.sign(I) * Math.abs(Q * _ / S), u.y = i.y + I) : (Q = Math.sign(Q) * Math.abs(I * S / _), u.x = i.x + Q)
            }
            return t.Default.unionPoint(u, i)
        }, nj.prototype._unionPointMode2 = function (E, H, D, x, d, X) {
            var m = t.Default.unionPoint(E, H);
            if (d && D && x) {
                var o;
                "v" === X ? (o = m.x + m.width / 2, m.width = D * m.height / x, m.x = o - m.width / 2) : (o = m.y + m.height / 2, m.height = x * m.width / D, m.y = o - m.height / 2)
            }
            return m
        }, nj.prototype._adsorbedToClosest = function (v, u) {
            var b = this, f = b._interactor, X = f.rectGuide.findClosest(v, u), U = f.gridGuide.findClosest(v, u),
                x = 1 / 0, O = 1 / 0;
            X && (isFinite(X.x) && (x = X.x), isFinite(X.y) && (O = X.y)), U && (isFinite(U.x) && Math.abs(U.x) < Math.abs(x) && (x = U.x), isFinite(U.y) && Math.abs(U.y) < Math.abs(O) && (O = U.y)), isFinite(x) && (v.x += x), isFinite(O) && (v.y += O)
        }, nj.prototype._42 = function (j, c, A) {
            var J = this;
            J.info = {}, J.screenInfo = null;
            var U = J._interactor;
            if (!U.editDetail && J.gatherInfo(c, A)) {
                var w = J.editing, R = w ? w.groupRotateMode : null, i = J.screenInfo;
                "block" !== R && (i.P1 ? Le.Icons.DrawIcon(U, j, Le.Icons.Line, i) : Le.Icons.DrawIcon(U, j, Le.Icons.Rect, i), i.connect && (Le.Icons.DrawIcon(U, j, Le.Icons.ConnectGuide, {
                    rotation: i.rotation,
                    connect: i.connect,
                    cursorPos: w ? w.cursorPos : null
                }), w && (w.targetCorners && Le.Icons.DrawIcon(U, j, Le.Icons.NodeHoverGuide, w.targetCorners), w.garbageInfo && Le.Icons.DrawIcon(U, j, Le.Icons.ConnectGuideGarbage, w.garbageInfo))), J.tipInfo && Le.Icons.DrawIcon(U, j, Le.Icons.TipHelper, J.tipInfo)), J.target instanceof Le.Group && J.target._42(U, j, c)
            }
        };
        var wi = Le.Anchor = function (w) {
            this.catalog = "Anchor", this._interactor = w
        };
        wi.prototype = {}, wi.prototype.constructor = wi, wi.prototype.gatherInfo = function (V, B) {
            var e = this;
            if (1 === B.length) {
                var K = B[0];
                if (!K.getAnchor) return;
                if (K instanceof t.Shape && K._70I()) return;
                if (bg(K, V)) return;
                return e.gatherSingleTarget(V, B[0])
            }
            return B.length > 1 ? e.gatherMultiTargets(V, B) : !1
        }, wi.prototype.gatherSingleTarget = function (w, _) {
            var u = this;
            return u.info.POS = _.getPosition(), u.screenInfo.POS = Le.toScreenPosition(w, u.info.POS), u.target = _, !0
        }, wi.prototype.gatherMultiTargets = function (H, u) {
            var V = this, _ = Le.Group.findOrCreateGroup(u);
            return _ ? (V.screenInfo.POS = Le.toScreenPosition(H, _.getAnchor2()), V.target = _, !0) : !1
        }, wi.prototype.isVisible = function () {
            var r = this, W = r._interactor;
            if (W.getStyle("anchorVisible") === !1) return !1;
            var _ = r.target;
            if (_) {
                if (this.editing) return !0;
                var J = _.getAnchor(), i = W.getStyle("anchorOutsideVisibleThreshold");
                if (J.x < -i || J.x > 1 + i || J.y < -i || J.y > 1 + i) return !0;
                var g = _.getSize(), G = _.getScale(), t = Math.min(Math.abs(g.width * G.x), Math.abs(g.height * G.y));
                if (t * W.gv._zoom < W.getStyle("anchorHideThreshold")) return !1
            }
            return !0
        }, wi.prototype.check = function (M, x, N) {
            if (t.Default.isLeftButton(x)) {
                var K = this, I = K._interactor;
                if (K.isVisible() && I.getStyle("anchorMovable") !== !1) {
                    K.editing = null, K.tipInfo = null;
                    var A = K.target;
                    if (A && M.isAnchorEditable(A) && M.isEditable(A)) {
                        var R;
                        if (K.screenInfo && (R = K.screenInfo.POS) && Le.checkHit(N, new Le.Math.Vector2(R), I.getStyle("checkSize"))) {
                            if (A instanceof Le.Group) return K.editing = {}, !0;
                            var W = A.getWidth(), $ = A.getHeight(), E = A.getAnchor();
                            return K.editing = {
                                rect: {x: -W * E.x, y: -$ * E.y, width: W, height: $},
                                anchor: E,
                                matrix: A.getMatrix()
                            }, !0
                        }
                    }
                }
            }
        }, wi.prototype.startEdit = function (E, m) {
            E.startDragging(m), E.fi({kind: "beginEditAnchor", event: m})
        }, wi.prototype._46O = function (x) {
            var Q = this;
            Q.editing && (Q.editing = null, Q._interactor.fi({kind: "endEditAnchor", event: x})), Q.tipInfo = null
        }, wi.prototype.handleEdit = function (c, F) {
            var A = this, E = A.target;
            if (E) {
                var K = A.editing;
                if (K) {
                    var j = c.lp(F), y = A._interactor;
                    if (E instanceof Le.Group) return E.setAnchor2(j), y._42(), void 0;
                    var D = K.matrix, P = D.tfi(j), o = K.rect, s = (P.x - o.x) / o.width, Z = (P.y - o.y) / o.height;
                    if (!t.Default.isCtrlDown(F)) {
                        var q = y.getStyle("anchorRound"), G = y.getStyle("anchorSensitivity");
                        s = Le.roundTo(s, q, G), Z = Le.roundTo(Z, q, G)
                    }
                    E.setAnchor(s, Z, !0);
                    var W = t.Default.getLogicalPoint(F, y._canvas);
                    W.x += Le.Icons.TipShiftX, W.y += Le.Icons.TipShiftY;
                    var k = "" + s.toFixed(2) + ", " + Z.toFixed(2);
                    A.tipInfo = {helperPos: W, text: k, size: k.length}, y.fi({kind: "betweenEditAnchor", event: F})
                }
            }
        }, wi.prototype._42 = function (V, K, b) {
            var m = this;
            m.info = {}, m.screenInfo = {};
            var g = m._interactor;
            g.editDetail || m.gatherInfo(K, b) && m.isVisible() && (Le.Icons.DrawIcon(g, V, Le.Icons.Anchor, m.screenInfo), m.tipInfo && Le.Icons.DrawIcon(g, V, Le.Icons.TipHelper, m.tipInfo))
        };
        var ks = Le.Curve = function (S) {
            this.catalog = "Curve", this._interactor = S
        };
        ks.prototype = {}, ks.prototype.constructor = ks, v.defineProperties(ks.prototype, {
            activing: {
                get: function () {
                    return this._activing
                }, set: function (t) {
                    var s = this;
                    if (t) s._activing = new Le.CurveActiving(this, t); else {
                        var K = s._activing;
                        K && K.dispose(), s._activing = null
                    }
                }
            }
        }), ks.PointType = {
            Mirrored: 0,
            Straight: 1,
            Disconnected: 2,
            Asymmetric: 3
        }, ks.prototype.setUp = function () {
            var H = this, j = H._interactor;
            j && j.gv.mp(H._onGraphviewPropertyChanged, H)
        }, ks.prototype._onGraphviewPropertyChanged = function (l) {
            ("zoom" === l.property || "translateX" === l.property || "translateY" === l.property) && this._handleDataChanged()
        }, ks.prototype.tearDown = function () {
            var Q = this, C = Q._interactor;
            C && C.gv.ump(Q._onGraphviewPropertyChanged, Q)
        }, ks.prototype.canEnterEditDetailMode = function () {
            var G = this, M = G._interactor, E = M._getValidSelection();
            if (1 === E.length) {
                var v = E[0], j = v instanceof t.Edge;
                if (v instanceof t.Shape || j) {
                    if (j) {
                        var p = v.s("edge.type");
                        if (p && "points" !== p) return
                    }
                    var O = M.gv;
                    if (O.isPointEditable(v) && O.isEditable(v)) return G.target = v, !0
                }
            }
        }, ks.prototype.preHandleScroll = function () {
            var f = this.editing;
            return f && f.inEdit ? !0 : void 0
        }, ks.prototype.getCurrentSelectintStatus = function () {
            var B = this;
            if (B.activing && !B.activing.selections) {
                if (B.activing.status != $) return B.activing.status;
                var u = function (W) {
                    var c = B.activing.status;
                    B.activing.status = W, B._interactor.fp("shapePointStatus", c, W)
                }, c = Le.Curve.PointType, r = B.activing.point, M = B.activing.pairs;
                if (!M || 1 !== M.length) return u(c.Mirrored);
                var U = M[0], m = U.c1 && U.c1.isNearEnough(r), l = U.c2 && U.c2.isNearEnough(r);
                if (!U.c1 || !U.c2) return m || l ? u(c.Straight) : u(c.Disconnected);
                if (m && l) return u(c.Straight);
                if (m || l) return u(c.Asymmetric);
                var J = U.c1.clone().sub(r), g = U.c2.clone().sub(r);
                return Math.abs(J.x * g.y - J.y * g.x) > 1e-5 || J.x * g.x > 0 ? u(c.Disconnected) : Math.abs(J.length() - g.length()) > 1e-5 ? u(c.Asymmetric) : u(c.Mirrored)
            }
        }, ks.prototype.handle_keydown = function (E) {
            var T = this;
            if (T._interactor.editDetail) {
                var O = Le.Curve.PointType;
                "1" === E.key ? T._setCurrentSelectionStatus(O.Straight) : "2" === E.key ? T._setCurrentSelectionStatus(O.Mirrored) : "3" === E.key ? T._setCurrentSelectionStatus(O.Disconnected) : "4" === E.key && T._setCurrentSelectionStatus(O.Asymmetric)
            }
        }, ks.prototype.setCurrentSelectionStatus = function (h) {
            var s = this, L = s._interactor;
            if (L) {
                var Q = L.gv;
                Q.dm().beginTransaction(), this._setCurrentSelectionStatus(h), Q.dm().endTransaction()
            }
        }, ks.prototype._setCurrentSelectionStatus = function (S) {
            var G = this, F = G.activing;
            if (F) {
                var i = G.getCurrentSelectintStatus();
                if (null !== i && i !== S) {
                    F.status = S;
                    var N = G.activing.point, o = G.activing.pairs;
                    if (o && 1 === o.length) {
                        var U = o[0], J = G.screenInfo.curve, Y = Le.Curve.PointType, L = function () {
                            G._writeToHt(), G._interactor.fp("shapePointStatus", i, S)
                        };
                        if (S === Y.Straight) return J.moveCtrlPoint(U, N, "c1"), J.moveCtrlPoint(U, N, "c2"), L(), void 0;
                        if (i === Y.Straight) {
                            var n = J.findPairs(N, !0), Z = n[0], B = Z.r1 || N, g = Z.r2 || N,
                                t = g.clone().sub(B).multiplyScalar(.25);
                            return J.moveCtrlPoint(U, N.clone().sub(t), "c1"), J.moveCtrlPoint(U, N.clone().add(t), "c2"), L(), void 0
                        }
                        var l = U.c1, E = U.c2;
                        if (l && E) {
                            if (S === Y.Mirrored) return J.moveCtrlPoint(U, N.clone().multiplyScalar(2).sub(E), "c1"), L(), void 0;
                            if (S === Y.Asymmetric && i === Y.Disconnected) {
                                var b = l.clone().sub(N).length(), t = N.clone().sub(E).setLength(b).add(N);
                                return J.moveCtrlPoint(U, t, "c1"), L(), void 0
                            }
                        }
                        F._firePointChange(), G._interactor.fp("shapePointStatus", i, S)
                    }
                }
            }
        }, ks.prototype._handleDataChanged = function (Y) {
            var V = this;
            if (V.screenInfo && V.target) {
                var S = V._interactor;
                V.gatherSingleTarget(S.gv, V.target, !0), V.check(S.gv, null, Y ? S._getLogicalPoint(Y) : new Le.Math.Vector2(S._lastClientPoint)), S._42()
            }
        }, ks.prototype.gatherSingleTarget = function (A, U, d) {
            var X, D, Y = this;
            Y.screenInfo && Y.screenInfo.curve && (D = Y.screenInfo.curve._curves);
            var J = Y.editing;
            X = J ? Y.screenInfo : Y.screenInfo = {};
            var M, F, h = U instanceof t.Edge;
            h ? (M = U.s("edge.segments"), F = U.s("edge.points") || new t.List) : (M = U._58O, F = U._59O), X.S = M;
            var L, N = X.P = [], j = Le.getDataMatrix(U);
            if (U instanceof t.Polyline && (L = U.getElevation() || 0, X.E = []), F.each(function (u) {
                X.E && X.E.push(u.e || L), u = j.apply(u);
                var f = Le.toScreenPosition(A, u);
                N.push(f.x, f.y)
            }), h) {
                var Z = Le.toScreenPosition(A, U._lastSourcePoint), O = Le.toScreenPosition(A, U._lastTargetPoint);
                N.splice(0, 0, Z.x, Z.y), N.push(O.x, O.y)
            }
            if (!X.S || !X.S.size()) {
                X.S = new t.List, X.S.add(1);
                for (var c = 0; c < N.length / 2 - 1; c++) X.S.add(2)
            }
            if ((!J || d) && Y.convertToCubicBezier(D), Y.activing && (d || !Y.editing || "realPoint" === Y.editing.type)) {
                var S = X.curve.findPairs(Y.activing.point);
                Y.activing.pairs = S
            }
            h && "points" !== U.s("edge.type") && Y._writeToHt()
        }, ks.prototype._convertToNewPoint = function (K, q, L) {
            var t, x, F;
            for (t = 0, x = q.length; x > t; t++) {
                if (F = q[t], F._p1.isNearEnough(K)) return F._p1;
                if (F._p4.isNearEnough(K)) return F._p4
            }
            if (L) for (t = 0, x = Math.min(L.length, x); x > t; t++) {
                if (F = L[t], F._p1 === K) return q[t]._p1;
                if (F._p4 === K) return q[t]._p4
            }
        }, ks.prototype.convertToCubicBezier = function (A) {
            var L, N, e = this, I = new Le.Math.Curve, b = e.screenInfo;
            if (I.createFromHtShape(b.P, b.S, b.E), b.curve = I, e.activing) {
                var V = I._curves;
                if (L = e.activing.point, N = e._convertToNewPoint(L, V, A), N && (e.activing.point = N), e.activing.selections) {
                    var p = -1, Z = e.activing.selections;
                    Z.forEach(function (Q) {
                        p++, N = e._convertToNewPoint(Q, V, A), N && (Z[p] = N)
                    })
                }
            }
        }, ks.prototype.check = function (J, A, _) {
            if (!A || t.Default.isLeftButton(A)) {
                var V = this;
                if (V._interactor.setCursor("default"), V.editing = null, V.highlight = null, V.tipInfo = null, V.screenInfo) {
                    if (Bq()) return V._interactor._42(), !0;
                    if (V._checkEditCtrlPoint(_)) return V._interactor._42(), !0;
                    if (V._checkEditRealPoint(_)) return V._interactor._42(), !0;
                    if (V._checkEditElevation(_)) return V._interactor._42(), !0;
                    var b = V.screenInfo.curve, q = b.checkPoint(_, V._interactor.getStyle("curveIntersectSize"));
                    if (q) {
                        var w = V.highlight = {};
                        w.type = "insertKnot", w.bezier = q.bezier, w.point = q.intersection
                    }
                    return V._interactor._42(), !0
                }
            }
        }, ks.prototype._checkEditRealPoint = function (G) {
            var N, v, C, R, T, Q, E = this, A = E.screenInfo.curve._curves,
                V = E._interactor.getStyle("curvePointIntersectSize"), J = 1 / 0;
            for (V *= V, C = 0, R = A.length; R > C; C++) N = A[C], T = N._p1, Q = G.distanceToSquared(T), J > Q && (J = Q, v = T), T = N._p4, Q = G.distanceToSquared(T), J > Q && (J = Q, v = T);
            if (J > V) return !1;
            var d = E.highlight = {};
            return d.type = "changeRealPoint", d.point = v, E.editing = {
                type: "realPoint",
                point: v,
                shiftGuide: {point: v.clone(), dir: "x", limit: 0}
            }, E._interactor.setCursor("crosshair"), !0
        }, ks.prototype._checkEditElevation = function (f) {
            var i = this;
            if (!i._interactor.getStyle("curveElevationVisible")) return !1;
            var e = i.activing;
            if (!e) return !1;
            var x = e.getCurrentEditingPoint();
            if (!x) return !1;
            var T = i._interactor, D = T.getStyle("curveElevationGuideShift"),
                K = T.getStyle("curveElevationIntersectSize"), P = f.distanceToSquared({x: x.x + D[0], y: x.y + D[1]});
            if (!(P > K * K)) {
                var r = i.highlight = {};
                r.type = "elevation";
                var h = new Le.Math.Vector2(f.x, f.y, x.e);
                return i.editing = {type: "elevation", startPoint: h}, i._interactor.setCursor("crosshair"), !0
            }
        }, ks.prototype._checkEditCtrlPoint = function (V) {
            var g = this;
            if (g.activing && !g.activing.selections) {
                var c = g.getCurrentSelectintStatus();
                if (c !== Le.Curve.PointType.Straight) {
                    var Z = g.activing.pairs;
                    if (Z) {
                        var F = g._interactor.getStyle("curvePointIntersectSize");
                        F *= F;
                        var R, K, q, h, Q, J, G, P, T, O = 1 / 0;
                        for (G = 0, T = Z.length; T > G; G++) for (h = Z[G], P = 0; 2 > P; P++) Q = 0 === P ? "c1" : "c2", h[Q] && (J = V.distanceToSquared(h[Q]), O > J && (O = J, R = h, K = G, q = Q));
                        if (O > F) return !1;
                        g.activing.hlpair = R, g.activing.hltype = q;
                        var H = g.highlight = {};
                        return H.type = "changeCtrlPoint", H.point = R[q], g.editing = {
                            type: "ctrlPoint",
                            pair: R,
                            pairId: K,
                            ctrlType: q,
                            direction: R[q].clone().sub(g.activing.point).normalize()
                        }, g._interactor.setCursor("crosshair"), !0
                    }
                }
            }
        }, ks.prototype.startEdit = function (E, L) {
            E.startDragging(L);
            var I = this;
            I.highlight && "insertKnot" === I.highlight.type && (I.insertKnot(), I.gatherSingleTarget(I._interactor.gv, I.target), I.activing = null, I._checkEditRealPoint(I._interactor._getLogicalPoint(L)));
            var X = I._activing;
            if (X) {
                var T = I.editing ? I.editing.type : null;
                "ctrlPoint" === T ? X.editingCtrl = {
                    pairId: I.editing.pairId,
                    type: X.hltype
                } : "realPoint" === T && (X.editingCtrl = !1)
            }
            var x = I.highlight, i = t.Default.isCtrlDown(L);
            if (!x || Bq()) {
                var w = I._interactor.gv;
                if (!w.setFocus(L) || w._scrolling) return;
                return w.isPannable() && fj(L) && !i && (I._pan = {tx: w.tx(), ty: w.ty()}, E.fi({
                    kind: "beginPan",
                    event: L
                })), void 0
            }
            if ("changeRealPoint" === x.type) {
                var v, u = I.activing ? I.activing.point : null, R = I.activing ? I.activing.selections : null;
                if (i && I.activing) u === x.point ? (R ? (I.activing = {point: R[0]}, R.length > 1 && (R.splice(0, 1), I.activing.selections = R)) : I.activing = null, I.editing = null) : R && (v = R.indexOf(x.point)) >= 0 ? (R.length > 1 ? R.splice(v, 1) : delete I.activing.selections, I.editing = null) : R ? (R.push(u), I.activing = {
                    point: x.point,
                    selections: R
                }) : I.activing = {
                    point: x.point,
                    selections: [u]
                }; else if (R) u === x.point || ((v = R.indexOf(x.point)) >= 0 ? (R.splice(v, 1, u), I.activing = {
                    point: x.point,
                    selections: R
                }) : I.activing = {point: x.point}); else {
                    var F;
                    u === x.point && (F = I.activing.status), I.activing = {point: x.point}, F && (I.activing.status = F)
                }
                E.fi({kind: "beginEditPoint", event: L})
            }
        }, ks.prototype.insertKnot = function () {
            var _ = this, x = _.highlight, j = _.screenInfo.curve;
            j.insertKnot(x.bezier, x.point.t), _._writeToHt()
        }, ks.prototype._writeToHt = function () {
            var Z, B, Y, J, w = this, T = w.screenInfo.curve, U = T.toHtShape(), x = U.points, z = [], o = U.segments,
                n = w._interactor.gv, A = w.target, V = A instanceof t.Edge, D = Le.getDataMatrix(A).invert();
            J = A instanceof t.Polyline, J && (Y = A.getElevation());
            for (var u = 0, c = x.length; c > u; u++) Z = x[u], B = Le.toWorldPosition(n, Z), B = D.apply(B), Z.e != $ && Z.e !== Y && (B.e = Z.e), z.push(B);
            if (A._writing = !0, V) {
                A.s("edge.type", "points"), A.setStyle("edge.segments", o), A.setStyle("edge.points", z.slice(1, z.length - 1)), A.setStyle("edge.source.offset.x", 0), A.setStyle("edge.source.offset.y", 0), A.setStyle("edge.target.offset.x", 0), A.setStyle("edge.target.offset.y", 0);
                var O = w._nextChangeEdgeHost;
                delete w._nextChangeEdgeHost, O && ("source" === O.type ? A.setSource(O.host) : A.setTarget(O.host)), w._writeEdgeHostAnchor("source", z[0]), w._writeEdgeHostAnchor("target", z[z.length - 1])
            } else z.length ? (A.setSegments(o), A.setPoints(z, !0)) : A.removeFromDataModel();
            delete A._writing
        }, ks.prototype._writeEdgeHostAnchor = function (M, x) {
            var G = this, n = G.target, o = G._calcHostAnchor(n, M, x);
            n.s("edge." + M + ".anchor.x", o.x), n.s("edge." + M + ".anchor.y", o.y)
        }, ks.prototype._calcHostAnchor = function (L, l, C, Z) {
            Z || (Z = "source" === l ? L.getSource() : L.getTarget());
            var j = Z.getRotation(), D = Z.getAnchor(), X = this._interactor.gv;
            if (bg(Z, X) && (j = 0), j) {
                var f = Z.getMatrix(), n = f.tfi(C), d = Z.getSize();
                return {x: n.x / d.width + D.x, y: n.y / d.height + D.y}
            }
            var $ = Bm(X, Z), G = {x: (C.x - $.x) / $.width, y: (C.y - $.y) / $.height};
            return G
        }, ks.prototype._handlePanning = function (q) {
            var C = this, s = C._pan;
            if (s) {
                s.started = !0;
                var f = C._interactor, x = f.gv, g = f._lastClientPoint, W = cc(q);
                x.setTranslate(s.tx + W.x - g.x, s.ty + W.y - g.y), C.gatherSingleTarget(f.gv, C.target), f._42(), f.fi({
                    kind: "betweenPan",
                    event: q
                })
            }
        }, ks.prototype.handleEdit = function (I, P) {
            var y = this, A = y.editing;
            if (y._pan) return y._handlePanning(P), void 0;
            if (A) {
                A.inEdit = !0;
                var h, i, g, B = y._interactor._getLogicalPoint(P), z = t.Default.isCtrlDown(P),
                    u = t.Default.isShiftDown(P), r = A.type, o = y.activing;
                if (y._guideInfo = null, "ctrlPoint" === r && u) {
                    var q = y.editing.direction.clone();
                    h = o.point;
                    var M = q.dot(B.clone().sub(h));
                    B = q.setLength(M).add(h)
                } else if ("ctrlPoint" === r || "realPoint" === r) {
                    var q;
                    if ("realPoint" === r && u) {
                        var N = y.editing.shiftGuide;
                        i = N.point;
                        var w = Math.abs(B.x - i.x), C = Math.abs(B.y - i.y);
                        w > C && w > N.limit && "y" === N.dir && (N.dir = "x"), C > w && C > N.limit && "x" === N.dir && (N.dir = "y"), q = N.dir, "x" === q ? (B.y = i.y, N.limit = Math.max(N.limit, w)) : "y" === q && (B.x = i.x, N.limit = Math.max(N.limit, C))
                    }
                    var m = y._isEditEdgeSourceTarget();
                    if (m) {
                        var j = y._editEdgeSourceTarget(m, B, z);
                        j && (g = j.tipText)
                    } else if (!z) {
                        var D = y._guidingToEdit(B, q),
                            W = "realPoint" === r ? y._interactor.gridGuide.findClosest(B, q, !0) : null, H = 1 / 0,
                            X = 1 / 0;
                        W && (W.x && (H = W.x), W.y && (X = W.y));
                        var k = !1;
                        D && (D.xList && (Math.abs(D.x) <= Math.abs(H) ? (k = !0, H = D.x) : delete D.xList), D.yList && (Math.abs(D.y) <= Math.abs(X) ? (k = !0, X = D.y) : delete D.yList), k && (y._guideInfo = D)), isFinite(H) && (B.x += H), isFinite(X) && (B.y += X), k && (D.v = B)
                    }
                }
                var e = y.screenInfo.curve;
                if ("realPoint" === A.type) {
                    h = A.point, h.e !== $ && (B.e = h.e), e.moveRealPoint(h, B), A.point = B, y.highlight.point = B;
                    var Q = o.status, U = o.selections;
                    if (y.activing = {point: B, status: Q}, U) {
                        var Z = B.clone().sub(h), f = 0;
                        U.forEach(function (Y) {
                            var H = Y.clone().add(Z);
                            e.moveRealPoint(Y, H), U[f++] = H
                        }), y.activing.selections = U
                    }
                } else if ("ctrlPoint" === A.type) {
                    var c = o.pairs, s = c[A.pairId];
                    e.moveCtrlPoint(s, B, A.ctrlType);
                    var S = o.status, G = Le.Curve.PointType;
                    if ((S === G.Mirrored || S === G.Asymmetric) && s.c1 && s.c2) {
                        var h = new Le.Math.Vector2(o.point), V = "c1" === A.ctrlType ? "c2" : "c1";
                        if (S === Le.Curve.PointType.Mirrored) e.moveCtrlPoint(s, h.clone().multiplyScalar(2).sub(B), V); else if (S === G.Asymmetric) {
                            var M = s[V].clone().sub(h).length(), p = h.clone().sub(s[A.ctrlType]).setLength(M).add(h);
                            isNaN(p.x) || e.moveCtrlPoint(s, p, V)
                        }
                    }
                    o._firePointChange()
                } else if ("elevation" === A.type) {
                    i = A.startPoint;
                    var x = i.e + (i.y - B.y) / I._zoom;
                    y._setCurrentPointImpl("e", x), o._firePointChange(), g = "E: " + Le.toFixed(x)
                }
                var l = t.Default.getLogicalPoint(P, y._interactor._canvas);
                if (l.x += Le.Icons.TipShiftX, l.y += Le.Icons.TipShiftY, !g) {
                    var L = Le.toWorldPosition(I, B);
                    g = "" + Le.toFixed(L.x) + ", " + Le.toFixed(L.y)
                }
                y.tipInfo = {
                    helperPos: l,
                    text: g,
                    size: g.length
                }, y._writeToHt(), y._interactor.fi({kind: "betweenEditPoint", event: P})
            }
        }, ks.prototype._setCurrentPointImpl = function (_, q) {
            var J = this, F = J._activing;
            if (!F) return !1;
            var D = J.target;
            if (!D) return !1;
            var b = F.getCurrentEditingPoint();
            if (!b) return !1;
            var w = F.editingCtrl;
            if (!w) var z = b.clone();
            if ("e" === _) b.e = q; else {
                var P;
                if ("x" === _ || "y" === _) {
                    var B = F._lastFirePoint;
                    P = "x" === _ ? {x: q, y: B ? B.y : 0} : {x: B ? B.x : 0, y: q}
                } else "object" == typeof _ ? (P = _, _.e !== $ && (b.e = _.e)) : (P = {
                    x: arguments[0],
                    y: arguments[1]
                }, arguments[2] !== $ && (b.e = arguments[2]));
                var m = Le.getDataMatrix(D);
                P = Le.toScreenPosition(J._interactor.gv, m.apply(P)), b.x = P.x, b.y = P.y
            }
            if (!w) {
                var I = z.multiplyScalar(-1).add(b);
                b.e && z.e && (I.e = b.e - z.e), J.screenInfo.curve.moveCtrlDueToRealPointMovement(b, I)
            }
            return !0
        }, ks.prototype.setCurrentPoint = function (J, F) {
            return this._setCurrentPointImpl(J, F) ? (this._writeToHt(), !0) : !1
        }, ks.prototype._isEditEdgeSourceTarget = function () {
            var S = this, x = S.target;
            if (!(x instanceof t.Edge)) return !1;
            var F = S.editing.point, Z = S.screenInfo.curve._curves;
            return F === Z[0]._p1 ? "source" : F === Z[Z.length - 1]._p4 ? "target" : !1
        }, ks.prototype._editEdgeSourceTarget = function (J, V, E) {
            var y, T = this, j = T.target;
            if (y = "source" === J ? j.getSource() : j.getTarget()) {
                var K = T._interactor.gv, p = Le.toWorldPosition(K, V), Q = T._calcHostAnchor(j, J, p, y);
                if (!E) {
                    var t = T._interactor.getStyle("anchorRound"), k = T._interactor.getStyle("anchorSensitivity");
                    Q.x = Le.roundTo(Q.x, t, k), Q.y = Le.roundTo(Q.y, t, k)
                }
                if (T._interactor.getStyle("edgeHostDetectPerFrame") || Q.x < 0 || Q.x > 1 || Q.y < 0 || Q.y > 1) {
                    var b = K.getDataAt(p, function (s) {
                        return K.isSelectable(s) ? Ik(s) ? !0 : !1 : !1
                    });
                    if (b) {
                        var l = T._calcHostAnchor(j, J, p, b);
                        y = b, T._nextChangeEdgeHost = {
                            type: J,
                            host: b
                        }, Q = l, E || (Q.x = Le.roundTo(Q.x, t, k), Q.y = Le.roundTo(Q.y, t, k))
                    }
                }
                if (!E) {
                    var X = ag(K, y, 0, 0, 0, Q.x, Q.y), r = Le.toScreenPosition(K, X);
                    V.x = r.x, V.y = r.y
                }
                return T._edgeHostGuideInfo = Le.getTargetCornersOnScreen(K, y), {
                    host: y,
                    anchor: Q,
                    tipText: "" + Q.x.toFixed(2) + ", " + Q.y.toFixed(2)
                }
            }
        }, ks.prototype._guidingToEdit = function (e, t) {
            var q, n, W = this;
            if (q = W.screenInfo.curve) {
                n = q._curves;
                var X, A, b, v, _, g, k, m, f = 1 / 0, z = 1 / 0, L = [];
                for (W.editing && "realPoint" === W.editing.type && (m = W.editing.point), _ = 0, g = 2 * n.length; g > _; _++) k = n[Math.floor(_ / 2)][_ % 2 ? "_p4" : "_p1"], L.indexOf(k) >= 0 || (L.push(k), m && m === k || (b = k.x - e.x, v = k.y - e.y, Math.abs(b) < Math.abs(f) ? (f = b, X = [k]) : b === f && X.push(k), Math.abs(v) < Math.abs(z) ? (z = v, A = [k]) : v === z && A.push(k)));
                var s = W._interactor.getStyle("smartGuideSensitivity");
                if ((Math.abs(f) > s || "y" === t) && (X = null), (Math.abs(z) > s || "x" === t) && (A = null), X || A) {
                    var y = !1, Z = {};
                    if (X && (y = !0, Z.xList = X, Z.x = f), A && (y = !0, Z.yList = A, Z.y = z), y) return Z
                }
            }
        }, ks.prototype._46O = function (Q) {
            var W = this;
            W.editing && (W.editing = null, W._interactor.fi({
                kind: "endEditPoint",
                event: Q
            })), W._guideInfo = null, W._edgeHostGuideInfo = null, W._pan && (W._pan = null, W._interactor.fi({
                kind: "endPan",
                event: Q
            })), W.tipInfo = null
        }, ks.prototype._canDeletePoint = function (l, E) {
            var I = this.target;
            if (!(I instanceof t.Edge)) return !0;
            var $ = l._curves[0], B = l._curves[l._curves.length - 1];
            return $._p1 === E || B._p4 === E ? !1 : !0
        }, ks.prototype.handleDelete = function () {
            var _ = this;
            if (_.activing && _.screenInfo) {
                var Y = t.Default.isShiftDown(), Q = _.screenInfo.curve;
                _._canDeletePoint(Q, _.activing.point) && Q.deleteRealPoint(_.activing.point, Y), _.activing.selections && _.activing.selections.forEach(function (K) {
                    _._canDeletePoint(Q, K) && Q.deleteRealPoint(K, Y)
                }), _.activing = null, delete _.editing, delete _.tipInfo, delete _._pan, _._writeToHt(), _._interactor.fp("deleteShapePoint", !1, !0)
            }
        }, ks.prototype.handleDoubleClick = function (k) {
            var S = this, h = S._interactor._getLogicalPoint(k);
            if (S.screenInfo && S._checkEditRealPoint(h)) {
                var Y = S.getCurrentSelectintStatus(), L = Le.Curve.PointType;
                return Y = Y === L.Mirrored ? L.Straight : L.Mirrored, S._setCurrentSelectionStatus(Y), S._interactor._42(), !0
            }
        }, ks.prototype._drawHighlight = function (k) {
            var z = this, u = z.highlight;
            if (u) {
                var J = u.bezier, r = z._interactor;
                J && Le.Icons.DrawIcon(r, k, Le.Icons.ShapeHighlightCurve, [J._p1.x, J._p1.y, J._p2.x, J._p2.y, J._p3.x, J._p3.y, J._p4.x, J._p4.y]);
                var L = u.point;
                L && "insertKnot" === u.type && Le.Icons.DrawIcon(r, k, Le.Icons.ShapeHighlighPoint, L)
            }
        }, ks.prototype._drawGuide = function (c) {
            var T = this, o = T._guideInfo;
            if (o) {
                var d, B, U, J, X = o.v;
                for (d = 0; 2 > d; d++) if (J = 0 === d ? o.xList : o.yList) for (B = 0, U = J.length; U > B; B++) Le.Icons.DrawIcon(T._interactor, c, Le.Icons.ShapeGuideLine, [X.x, X.y, J[B].x, J[B].y])
            }
        }, ks.prototype._drawCurrentPoint = function (A) {
            var w = this;
            if (w.activing) {
                var m = w.activing, R = w.getCurrentSelectintStatus(), U = w._interactor;
                if (R !== Le.Curve.PointType.Straight) {
                    var Q = m.pairs;
                    m.hlpair, m.hltype;
                    var F = m.selections, C = m.editingCtrl;
                    if (Q && !F) {
                        var J, a, i;
                        for (a = 0, i = Q.length; i > a; a++) J = Q[a], C && a === C.pairId && J[C.type] ? Le.Icons.DrawIcon(U, A, Le.Icons.ShapeActivingCtrl, {
                            point: J.point,
                            c1: J.c1,
                            c2: J.c2,
                            hl: C.type
                        }) : Le.Icons.DrawIcon(U, A, Le.Icons.ShapeActivingCtrl, J)
                    }
                }
                Le.Icons.DrawIcon(U, A, Le.Icons.ShapeHighlighRealPoint, w.activing.point), F && F.forEach(function (j) {
                    Le.Icons.DrawIcon(U, A, Le.Icons.ShapeHighlighRealPoint, j)
                })
            }
        }, ks.prototype.clear = function () {
            var F = this;
            F.editing = null, F._guideInfo = null, F.activing = null, F.highlight = null
        }, ks.prototype._42 = function (E) {
            var Y = this;
            Y.info = {}, Y.editing || (Y.screenInfo = null);
            var O = Y._interactor;
            if (!O.editDetail) return Y.clear(), void 0;
            if (!Y.target || !Y._interactor.gv.isSelected(Y.target) || !Y._interactor.gv.isVisible(Y.target)) return O.editDetail = !1, Y.clear(), void 0;
            if (Y.gatherSingleTarget(O.gv, Y.target), Le.Icons.DrawIcon(O, E, Le.Icons.ShapeBgCurve, Y.screenInfo), Y._drawHighlight(E), Y._drawCurrentPoint(E), Y._getRealPoint().forEach(function (l) {
                Le.Icons.DrawIcon(O, E, Le.Icons.ShapePoint, l)
            }), Y._drawGuide(E), Y.tipInfo && Le.Icons.DrawIcon(O, E, Le.Icons.TipHelper, Y.tipInfo), Y._edgeHostGuideInfo && Le.Icons.DrawIcon(O, E, Le.Icons.NodeHoverGuide, Y._edgeHostGuideInfo), Y._interactor.getStyle("curveElevationVisible") && Y.target instanceof t.Polyline && Y.activing) {
                var i = Y.activing.getCurrentEditingPoint();
                i && Le.Icons.DrawIcon(O, E, Le.Icons.EdgeElevationGuide, i)
            }
        }, ks.prototype._getRealPoint = function () {
            var o = this.screenInfo, C = o.P, $ = o.S, w = -1, E = [];
            return $.each(function (B) {
                var p = 1;
                if (3 === B) p = 2; else if (4 === B) p = 3; else if (5 === B) return;
                w += p, E.push({x: C[2 * w], y: C[2 * w + 1]})
            }), E
        };
        var hc = Le.MoveHelper = function ($) {
            var p = this;
            p.catalog = "Move", p._interactor = $
        };
        hc.prototype = {}, hc.prototype.constructor = hc, hc.prototype.calcShift = function (U, C, A) {
            var k, E, L = this, q = L._interactor.gv, K = q.lp(C);
            if ("beginMove" === U && L._gatherGridInfo(A._lastLogicalPoint || K), k = L._target) {
                var G = k.downPosition;
                if (G) {
                    var F = L._interactor.getStyle("moveSensitivity") / q._zoom;
                    if (G.distanceTo(K) < F) return {x: 0, y: 0};
                    delete k.downPosition
                }
                var f;
                E = t.Default.isShiftDown(C), E && (K = L._dealShiftDown(K), f = k.shiftGuide.dir);
                var o, y = k.rawPos = {x: k.pos.x + K.x - k.lp.x, y: k.pos.y + K.y - k.lp.y};
                if (t.Default.isCtrlDown(C)) {
                    if (o = L._calcShiftByAddon(), L._target.node instanceof Le.Group) {
                        var N = L._target.node;
                        N._position.x += o.x, N._position.y += o.y
                    }
                    return o
                }
                for (var S, I = k.x + y.x, X = k.y + y.y, B = {x: I, y: X}, V = {
                    x: I + k.w / 2,
                    y: X + k.h / 2
                }, Y = {
                    x: I + k.w,
                    y: X + k.h
                }, c = L._interactor.rectGuide, w = L._interactor.gridGuide, r = [c.findClosest(B, f), c.findClosest(V, f), c.findClosest(Y, f), w.findClosest(B, f), w.findClosest(V, f), w.findClosest(Y, f)], s = 1 / 0, n = 1 / 0, D = 0, Z = r.length; Z > D; D++) S = r[D], S && (I = S.x, X = S.y, isFinite(I) && Math.abs(I) < Math.abs(s) && (s = I), isFinite(X) && Math.abs(X) < Math.abs(n) && (n = X));
                if (isFinite(s) || (s = 0), isFinite(n) || (n = 0), o = L._calcShiftByAddon(s, n), L._target.node instanceof Le.Group) {
                    var N = L._target.node;
                    N._position.x += o.x, N._position.y += o.y
                }
                var v = k.node;
                if (!bg(v, q)) {
                    var u = y.x + s, i = y.y + n;
                    L._interactor.rectGuide.gatherLines({node: v, x: k.x + u, y: k.y + i, w: k.w, h: k.h}, f)
                }
                return o
            }
        }, hc.prototype._calcShiftByAddon = function (P, l) {
            var W = this._target, m = W.rawPos, B = W.node.getPosition();
            return P = P || 0, l = l || 0, {x: m.x - B.x + P, y: m.y - B.y + l}
        }, hc.prototype._dealShiftDown = function (J) {
            var A = this, l = A._target.shiftGuide, d = A._target.lp, f = Math.abs(J.x - d.x), $ = Math.abs(J.y - d.y);
            f > $ && f > l.limit && "y" === l.dir && (l.dir = "x"), $ > f && $ > l.limit && "x" === l.dir && (l.dir = "y");
            var g = l.dir;
            return "x" === g ? (J.y = d.y, l.limit = Math.max(l.limit, f)) : "y" === g && (J.x = d.x, l.limit = Math.max(l.limit, $)), J
        }, hc.prototype._gatherGridInfo = function (d) {
            var l, f = this, b = f._interactor, X = b._getValidSelection();
            if (1 === X.length) {
                if (l = X[0], !l.getRect) return f._target = null, void 0
            } else if (l = Le.Group.findOrCreateGroup(X), !l) return f._target = null, void 0;
            var S = l.getPosition(), p = l.getRect();
            f._target = {
                node: l,
                x: p.x - S.x,
                y: p.y - S.y,
                w: p.width,
                h: p.height,
                lp: {x: d.x, y: d.y},
                pos: {x: S.x, y: S.y},
                shiftGuide: {dir: "x", limit: 0},
                downPosition: new Le.Math.Vector2(d)
            }, b.rectGuide.gatherRects()
        }, hc.prototype.clear = function () {
            var O = this;
            O._interactor.rectGuide.clear(), O._interactor._42()
        };
        var ui = "directional", yl = "point", ir = "spot", bk = "light.color", bp = function (X, S) {
            Rp(S) && yg.test(S) ? gm(X, S) : Pe(S) && S.modelType ? Ci(X, S) : rl[X] = S
        }, kp = function (U) {
            if (Pe(U)) return U;
            var o = rl[U];
            return U && o === $ && yg.test(U) && (Pi && Pi[U] || gm(U, U)), o
        };
        Nn(F, {
            graph3dViewAttributes: c,
            graph3dViewFirstPersonMode: !1,
            graph3dViewMouseRoamable: !0,
            graph3dViewMoveStep: 15,
            graph3dViewRotateStep: u / 60,
            graph3dViewEditHelperDisabled: !1,
            graph3dViewPannable: !0,
            graph3dViewRotatable: !0,
            graph3dViewWalkable: !0,
            graph3dViewResettable: !0,
            graph3dViewZoomable: !0,
            graph3dViewRectSelectable: !0,
            graph3dViewRectSelectBackground: Fg,
            graph3dViewGridVisible: !1,
            graph3dViewGridSize: 50,
            graph3dViewGridGap: 50,
            graph3dViewGridColor: [.4, .75, .85, 1],
            graph3dViewOriginAxisVisible: !1,
            graph3dViewCenterAxisVisible: !1,
            graph3dViewAxisXColor: [1, 0, 0, 1],
            graph3dViewAxisYColor: [0, 1, 0, 1],
            graph3dViewAxisZColor: [0, 0, 1, 1],
            graph3dViewEditSizeColor: [1, 1, 0, 1],
            graph3dViewOrtho: !1,
            graph3dViewOrthoWidth: 2e3,
            graph3dViewFovy: u / 4,
            graph3dViewNear: 10,
            graph3dViewFar: 1e4,
            graph3dViewEye: [0, 300, 1e3],
            graph3dViewCenter: [0, 0, 0],
            graph3dViewUp: [0, 1, -1e-7],
            graph3dViewHeadlightRange: 0,
            graph3dViewHeadlightColor: [1, 1, 1, 1],
            graph3dViewHeadlightIntensity: 1,
            graph3dViewHeadlightDisabled: !1,
            graph3dViewFogDisabled: !0,
            graph3dViewFogColor: "white",
            graph3dViewFogNear: 1,
            graph3dViewFogFar: 2e3,
            graph3dViewDashDisabled: !0,
            graph3dViewBatchBlendDisabled: !0,
            graph3dViewBatchBrightnessDisabled: !0,
            graph3dViewBatchColorDisabled: !1,
            setShape3dModel: bp,
            getShape3dModel: kp,
            createMatrix: function (r, p) {
                Qd(r) || (r = [r]);
                for (var L = r.length - 1; L >= 0; L--) {
                    var I = r[L];
                    p = pr(I.mat, I.s3, I.r3, I.rotationMode, I.t3, p)
                }
                return p
            },
            transformVec: function (P, V) {
                return Ce(P, V)
            },
            createBoxModel: function () {
                return {vs: Bi, ns: Nl, uv: Se, is: Pf}
            },
            createRoundRectModel: function (e, z) {
                return cb.roundRect(e, z)
            },
            createStarModel: function (Q, X) {
                return cb.star(Q, X)
            },
            createRectModel: function (b, D) {
                return cb.rect(b, D)
            },
            createTriangleModel: function (F, h) {
                return cb.triangle(F, h)
            },
            createRightTriangleModel: function (j, w) {
                return cb.rightTriangle(j, w)
            },
            createParallelogramModel: function (E, z) {
                return cb.parallelogram(E, z)
            },
            createTrapezoidModel: function (H, y) {
                return cb.trapezoid(H, y)
            },
            createSmoothSphereModel: function (z, t, V, q, N, y, i) {
                return Hj(new Ii(z, t, V, q, N, y, i))
            },
            createSphereModel: function (Z, D, J, z, l, X) {
                return Z ? If(Z, D, J, z, l, X) : F.createSmoothSphereModel()
            },
            createSmoothConeModel: function (d, V, W, p, r) {
                return Vd(d, V, W, p, r)
            },
            createConeModel: function (g, W, $, P, p, f) {
                return g ? ei(g, W, $, P, p, f) : Vd(f)
            },
            createSmoothCylinderModel: function (q, i, m, M, r, k, w, B) {
                return Hj(new Sf(q, i, m, M, r, k, w, B))
            },
            createCylinderModel: function (E, M, i, p, A, h, f) {
                return E ? xo(E, M, i, p, A, h, f) : Mm(h, f)
            },
            createSmoothTorusModel: function (N, R, o, L, g, B) {
                return Hj(new Nm(N, R, o, L, g, B))
            },
            createTorusModel: function ($, k, w, g, D, i, W) {
                return $ ? Pk($, k, w, g, D, i, W) : zo(i, W)
            },
            createExtrusionModel: function (s, P, k, c, D, h, w, X) {
                return yh(s, P, k, c, D, h, w, X)
            },
            createSmoothRingModel: function (X, Z, Q, O, L, k) {
                for (var J = [], i = 0; i < X.length - 1; i += 2) J.push({x: X[i], y: X[i + 1]});
                for (X = Sn(J, Z, Q)[0], J = [], i = 0; i < X.length; i++) {
                    var w = X[i];
                    J.push(new Yd(w.x, 0, w.y))
                }
                return Hj(new Qr(J, k, O, L))
            },
            createTextGeometry: function (X, A) {
                return Hj(new wr(X, A))
            },
            loadFontFace: function (e, O) {
                F.xhrLoad(e, function (N) {
                    if (!N) return O();
                    var g;
                    try {
                        g = JSON.parse(N)
                    } catch (Z) {
                        g = JSON.parse(N.substring(65, N.length - 2))
                    }
                    Rm.loadFace(g), O && O(g.familyName.toLowerCase())
                }, O ? null : {sync: !0})
            },
            getRotationFromMatrix4: function () {
                var P = {};
                return function (y, S, p) {
                    var z = K, X = y[0], d = y[4], a = y[8], o = y[1], k = y[5], T = y[9], u = y[2], x = y[6],
                        N = y[10];
                    if (S = S || "xyz", S = S[2] + S[1] + S[0], S = S.toUpperCase(), "XYZ" === S) P._y = Math.asin(z(a, -1, 1)), Math.abs(a) < .99999 ? (P._x = Math.atan2(-T, N), P._z = Math.atan2(-d, X)) : (P._x = Math.atan2(x, k), P._z = 0); else if ("YXZ" === S) P._x = Math.asin(-z(T, -1, 1)), Math.abs(T) < .99999 ? (P._y = Math.atan2(a, N), P._z = Math.atan2(o, k)) : (P._y = Math.atan2(-u, X), P._z = 0); else if ("ZXY" === S) P._x = Math.asin(z(x, -1, 1)), Math.abs(x) < .99999 ? (P._y = Math.atan2(-u, N), P._z = Math.atan2(-d, k)) : (P._y = 0, P._z = Math.atan2(o, X)); else if ("ZYX" === S) P._y = Math.asin(-z(u, -1, 1)), Math.abs(u) < .99999 ? (P._x = Math.atan2(x, N), P._z = Math.atan2(o, X)) : (P._x = 0, P._z = Math.atan2(-d, k)); else if ("YZX" === S) P._z = Math.asin(z(o, -1, 1)), Math.abs(o) < .99999 ? (P._x = Math.atan2(-T, k), P._y = Math.atan2(-u, X)) : (P._x = 0, P._y = Math.atan2(a, N)); else {
                        if ("XZY" !== S) return null;
                        P._z = Math.asin(-z(d, -1, 1)), Math.abs(d) < .99999 ? (P._x = Math.atan2(x, k), P._y = Math.atan2(a, X)) : (P._x = Math.atan2(-T, N), P._y = 0)
                    }
                    return p ? (p[0] = P._x, p[1] = P._y, p[2] = P._z, p) : [P._x, P._y, P._z]
                }
            }(),
            createRingModel: function (M, k, N, S, Y, U, X, B, w, x) {
                for (var E = [], J = 0; J < M.length - 1; J += 2) E.push({x: M[J], y: M[J + 1]});
                U = U || F.shapeSide, X = X || 0, B = B || U;
                var I, r, s, R, T, A, L, o, H, V, J, u, q, Z, h, d, g, n, K = [], e = [], i = w ? [] : c,
                    O = w ? [] : c, y = x ? [] : c, v = x ? [] : c, j = S ? [] : c, z = S ? [] : c, $ = Y ? [] : c,
                    t = Y ? [] : c, M = Sn(E, k, N), W = uk(M), l = 0, _ = 2 * Math.PI / U;
                return M.forEach(function (m) {
                    if (s = m.length, s > 1) {
                        if (R = m[0], S) for (A = R.x, o = R.y, J = X; B > J; J++) u = J + 1, q = J * _, Z = u * _, h = D(q), d = C(q), g = D(Z), n = C(Z), j.push(h * A, o, -d * A, g * A, o, -n * A, 0, o, 0), z.push(.5 - .5 * h, .5 - .5 * d, .5 - .5 * g, .5 - .5 * n, .5, .5);
                        for (V = 0; s > V; V++) {
                            for (T = m[V], A = R.x, L = T.x, o = R.y, H = T.y, I = l / W, l += Wg(R, T), r = l / W, J = X; B > J; J++) u = J + 1, q = J * _, Z = u * _, h = D(q), d = C(q), g = D(Z), n = C(Z), K.push(h * L, H, -d * L, g * L, H, -n * L, h * A, o, -d * A, g * L, H, -n * L, g * A, o, -n * A, h * A, o, -d * A), e.push(J / U, r, u / U, r, J / U, I, u / U, r, u / U, I, J / U, I), w && J === X && (i.push(0, o, 0, 0, H, 0, h * L, H, -d * L, h * L, H, -d * L, h * A, o, -d * A, 0, o, 0), O.push(0, .5 - o, 0, .5 - H, 2 * L, .5 - H, 2 * L, .5 - H, 2 * A, .5 - o, 0, .5 - o)), x && u === B && (y.push(0, o, 0, g * L, H, -n * L, 0, H, 0, g * L, H, -n * L, 0, o, 0, g * A, o, -n * A), v.push(1, .5 - o, 1 - 2 * L, .5 - H, 1, .5 - H, 1 - 2 * L, .5 - H, 1, .5 - o, 1 - 2 * A, .5 - o));
                            R = T
                        }
                        if (Y) for (A = R.x, o = R.y, J = X; B > J; J++) u = J + 1, q = J * _, Z = u * _, h = D(q), d = C(q), g = D(Z), n = C(Z), $.push(g * A, o, -n * A, h * A, o, -d * A, 0, o, 0), t.push(.5 - .5 * g, .5 + .5 * n, .5 - .5 * h, .5 + .5 * d, .5, .5)
                    }
                }), {
                    vs: K,
                    uv: e,
                    bottom_vs: $,
                    bottom_uv: t,
                    top_vs: j,
                    top_uv: z,
                    from_vs: i,
                    from_uv: O,
                    to_vs: y,
                    to_uv: v
                }
            }
        }, !0), Nn(j, {
            "3d.move.mode": $,
            "3d.selectable": !0,
            "3d.visible": !0,
            "3d.movable": !0,
            "3d.editable": !0,
            "shape.border.gradient.color": $,
            "edge.gradient.color": $,
            "edge.source.t3": $,
            "edge.target.t3": $,
            "light.type": yl,
            "light.center": [0, 0, 0],
            "light.color": [1, 1, 1, 1],
            "light.disabled": !1,
            "light.angle": u / 4,
            "light.range": 0,
            "light.exponent": 1,
            "light.intensity": 1,
            "wf.visible": !1,
            "wf.width": 1,
            "wf.color": bh,
            "wf.short": !1,
            "wf.mat": $,
            "wf.geometry": !1,
            batch: $,
            "transparent.mask": !1,
            brightness: $,
            "select.brightness": .7,
            "repeat.uv.length": $,
            alphaTest: .4,
            "label.face": Aj,
            "label.t3": $,
            "label.r3": $,
            "label.texture.scale": 2,
            "label.rotationMode": co,
            "label.light": !1,
            "label.blend": $,
            "label.reverse.flip": !1,
            "label.reverse.color": pl,
            "label.reverse.cull": !1,
            "label.transparent": !1,
            "label.autorotate": !1,
            "label2.face": Aj,
            "label2.t3": $,
            "label2.r3": $,
            "label2.texture.scale": 2,
            "label2.rotationMode": co,
            "label2.light": !1,
            "label2.blend": $,
            "label2.reverse.flip": !1,
            "label2.reverse.color": pl,
            "label2.reverse.cull": !1,
            "label2.transparent": !1,
            "label2.autorotate": !1,
            "note.face": Aj,
            "note.t3": $,
            "note.r3": $,
            "note.texture.scale": 2,
            "note.rotationMode": co,
            "note.light": !1,
            "note.blend": $,
            "note.reverse.flip": !1,
            "note.reverse.color": pl,
            "note.reverse.cull": !1,
            "note.transparent": !1,
            "note.autorotate": !1,
            "note2.face": Aj,
            "note2.t3": $,
            "note2.r3": $,
            "note2.texture.scale": 2,
            "note2.rotationMode": co,
            "note2.light": !1,
            "note2.blend": $,
            "note2.reverse.flip": !1,
            "note2.reverse.color": pl,
            "note2.reverse.cull": !1,
            "note2.transparent": !1,
            "note2.autorotate": !1,
            shape3d: $,
            "shape3d.color": Jn,
            "shape3d.top.color": $,
            "shape3d.bottom.color": $,
            "shape3d.from.color": $,
            "shape3d.to.color": $,
            "shape3d.image": $,
            "shape3d.top.image": $,
            "shape3d.bottom.image": $,
            "shape3d.from.image": $,
            "shape3d.to.image": $,
            "shape3d.light": !0,
            "shape3d.side": 0,
            "shape3d.side.from": $,
            "shape3d.side.to": $,
            "shape3d.visible": !0,
            "shape3d.from.visible": !0,
            "shape3d.to.visible": !0,
            "shape3d.top.visible": !0,
            "shape3d.bottom.visible": !0,
            "shape3d.torus.radius": .17,
            "shape3d.resolution": 0,
            "shape3d.blend": $,
            "shape3d.opacity": $,
            "shape3d.reverse.flip": !1,
            "shape3d.reverse.color": pl,
            "shape3d.reverse.cull": !1,
            "shape3d.transparent": !1,
            "shape3d.uv.offset": $,
            "shape3d.uv.scale": $,
            "shape3d.top.uv.offset": $,
            "shape3d.top.uv.scale": $,
            "shape3d.bottom.uv.offset": $,
            "shape3d.bottom.uv.scale": $,
            "shape3d.from.uv.offset": $,
            "shape3d.from.uv.scale": $,
            "shape3d.to.uv.offset": $,
            "shape3d.to.uv.scale": $,
            "shape3d.top.cap": $,
            "shape3d.bottom.cap": $,
            "shape3d.start.angle": 0,
            "shape3d.sweep.angle": k,
            "shape3d.discard.selectable": !0,
            "shape3d.top.discard.selectable": !0,
            "shape3d.bottom.discard.selectable": !0,
            "shape3d.from.discard.selectable": !0,
            "shape3d.to.discard.selectable": !0,
            "shape3d.scaleable": !0,
            "shape3d.autorotate": !1,
            "shape3d.fixSizeOnScreen": $,
            "shape3d.image.cache": !1,
            "shape3d.alwaysOnTop": !1,
            "all.light": !0,
            "all.visible": !0,
            "all.color": Jn,
            "all.image": $,
            "all.blend": $,
            "all.opacity": $,
            "all.reverse.flip": !1,
            "all.reverse.color": pl,
            "all.reverse.cull": !1,
            "all.transparent": !1,
            "all.uv": $,
            "all.uv.offset": $,
            "all.uv.scale": $,
            "all.discard.selectable": !0,
            mat: $,
            "left.mat": $,
            "right.mat": $,
            "top.mat": $,
            "bottom.mat": $,
            "front.mat": $,
            "back.mat": $
        }, !0);
        var Eq, ef = !1, Of = [0, 0, 0, 0], Br = {
                left: [1 / 255, 0, 0, 1],
                right: [2 / 255, 0, 0, 1],
                top: [3 / 255, 0, 0, 1],
                bottom: [4 / 255, 0, 0, 1],
                front: [5 / 255, 0, 0, 1],
                back: [6 / 255, 0, 0, 1],
                m: {1: Ch, 2: Te, 3: Gn, 4: Qk, 5: Aj, 6: Hr}
            }, ak = function (E, L, e, d) {
                if (L.getFaceVisible(E, e)) {
                    oq(L, mh(E, L.getFaceMat(E, e) || L.getMat(E)));
                    var l = L._26I;
                    L.getFaceReverseCull(E, e) ? l.enable(l.CULL_FACE) : l.disable(l.CULL_FACE), Kd(l, L._prg.uFixPickReverseColor, Br[e]), Um(l), Sp(l, d, 6), Bl(l), ud(L)
                }
            }, Wr = function ($) {
                return $ instanceof js
            }, bs = function (V) {
                return [V.x, V.e || 0, V.y]
            }, Tf = function (n, u, l) {
                for (var u = Ao(u), T = u[0], Q = u[1], W = u[2]; l--;) n.push(T, Q, W)
            }, Gi = function (g, o, j) {
                for (var o = Ao(o), B = o[0], Z = o[1], _ = o[2], I = o[3]; j--;) g.push(B, Z, _, I)
            }, dn = function (f, U, r) {
                if (U) for (var S, j, x, A = U[0], p = U[1], O = U[2], k = U[4], L = U[5], w = U[6], F = U[8], R = U[9], X = U[10], Y = U[12], o = U[13], c = U[14], v = r.length, V = 0, V = 0; v > V; V += 3) S = r[V], j = r[V + 1], x = r[V + 2], f.push(A * S + k * j + F * x + Y, p * S + L * j + R * x + o, O * S + w * j + X * x + c); else Ml(f, r)
            }, so = function (e, I) {
                var O = I.s("light.intensity"), t = Ao(I.s(bk)), P = t[0], T = t[1], l = t[2];
                1 !== O && (P *= O, T *= O, l *= O), e.push(P, T, l, I.s("light.disabled") ? 1 : 0)
            }, mb = function (n, a, u) {
                Kd(a, u.uHeadlightRange, n._headlightRange);
                var f = n._headlightIntensity, W = Ao(n._headlightColor);
                1 !== f && (W = [W[0] * f, W[1] * f, W[2] * f]), Kd(a, u.uHeadlightColor, [W[0], W[1], W[2], n._headlightDisabled ? 1 : 0]);
                var k = n._59O, B = n._spots, K = n._dirs;
                if (k.length) {
                    var v = [], i = [], m = [];
                    k.forEach(function (r) {
                        so(v, r), Ml(i, n._transformPointToViewSpace(r.p3())), m.push(r.s("light.range"))
                    }), a.uniform4fv(u.uPointColor, v), a.uniform1fv(u.uPointRange, m), a.uniform3fv(u.uPointPosition, i)
                }
                if (B.length) {
                    var s = [], b = [], d = [], w = [], z = [], P = [];
                    B.forEach(function (Z) {
                        so(s, Z), Ml(b, n._transformPointToViewSpace(Z.p3())), Ml(z, n._transformDirectionToViewSpace(Z.p3(), Z.s("light.center"))), d.push(Z.s("light.range")), w.push(D(Z.s("light.angle") / 2)), P.push(Z.s("light.exponent"))
                    }), a.uniform4fv(u.uSpotColor, s), a.uniform1fv(u.uSpotRange, d), a.uniform1fv(u.uSpotAngle, w), a.uniform1fv(u.uSpotExponent, P), a.uniform3fv(u.uSpotPosition, b), a.uniform3fv(u.uSpotDirection, z)
                }
                if (K.length) {
                    var j = [], G = [];
                    K.forEach(function (c) {
                        so(j, c), Ml(G, n._transformDirectionToViewSpace(c.p3()))
                    }), a.uniform4fv(u.uDirColor, j), a.uniform3fv(u.uDirDirection, G)
                }
            }, Kh = function (C) {
                return C > 0 && 0 === (C - 1 & C)
            }, ye = function (I) {
                return I = y(0, x(u, I)), I = y(Dp, x(u - Dp, I))
            }, Cq = function () {
                return .05 + U() / 2
            }, ul = function (b, i, r, M) {
                var P, N = b.getEye();
                return b.isOrtho() ? (P = $k(b.getCenter(), N), P[0] += M[0], P[1] += M[1], P[2] += M[2]) : P = N, Nk(i, r, M, P)
            }, Nk = function (f, w, k, p) {
                var q = kb(f, w), D = $k(p, k, !0), h = kb(D, w);
                if (I(h) < Dp) return c;
                var X = (q - kb(k, w)) / h;
                return [k[0] + D[0] * X, k[1] + D[1] * X, k[2] + D[2] * X]
            }, Fl = function (J, x) {
                return {x: 2 * J.x - x.x, y: 2 * J.y - x.y}
            }, Sq = function (q, B, U, w) {
                var O, j;
                if (!q) return O = n(B.y - U.y, U.x - B.x), {x: B.x + w * C(O), y: B.y + w * D(O)};
                if (!U) return O = n(q.y - B.y, B.x - q.x), {x: B.x + w * C(O), y: B.y + w * D(O)};
                var X = $k([q.x, q.y, 0], [B.x, B.y, 0], !0), A = $k([U.x, U.y, 0], [B.x, B.y, 0], !0),
                    T = -(X[0] + A[0]) / 2, u = -(X[1] + A[1]) / 2, I = s(T * T + u * u);
                if (Dp > I) return O = n(q.y - B.y, B.x - q.x), {x: B.x + w * C(O), y: B.y + w * D(O)};
                var a = q.x - B.x, g = q.y - B.y, h = U.x - B.x, N = U.y - B.y, x = s(a * a + g * g), W = s(h * h + N * N);
                O = Z(kb(X, A)) / 2, j = X[1] * A[0] - X[0] * A[1] > 0 ? -1 : 1, T /= I, u /= I;
                var F = w / C(O), H = y(x, W) / D(O);
                I = Math.min(F, H);
                var V = {x: B.x + j * I * T, y: B.y + j * I * u};
                return U.b && F > W / D(O) && (V.adjust = !0), V
            }, hf = function (j) {
                var F = j[1], g = j[2], W = j[3], Z = j[6], A = j[7], H = j[11];
                j[1] = j[4], j[2] = j[8], j[3] = j[12], j[4] = F, j[6] = j[9], j[7] = j[13], j[8] = g, j[9] = Z, j[11] = j[14], j[12] = W, j[13] = A, j[14] = H
            }, Fd = function (e) {
                var E = e[0], r = e[1], t = e[2], M = e[3], m = e[4], U = e[5], T = e[6], f = e[7], i = e[8], F = e[9],
                    x = e[10], h = e[11], a = e[12], o = e[13], O = e[14], K = e[15], w = E * U - r * m, g = E * T - t * m,
                    V = E * f - M * m, b = r * T - t * U, P = r * f - M * U, A = t * f - M * T, J = i * o - F * a,
                    q = i * O - x * a, d = i * K - h * a, k = F * O - x * o, L = F * K - h * o, z = x * K - h * O,
                    S = w * z - g * L + V * k + b * d - P * q + A * J;
                return S ? (S = 1 / S, e[0] = (U * z - T * L + f * k) * S, e[1] = (t * L - r * z - M * k) * S, e[2] = (o * A - O * P + K * b) * S, e[3] = (x * P - F * A - h * b) * S, e[4] = (T * d - m * z - f * q) * S, e[5] = (E * z - t * d + M * q) * S, e[6] = (O * V - a * A - K * g) * S, e[7] = (i * A - x * V + h * g) * S, e[8] = (m * L - U * d + f * J) * S, e[9] = (r * d - E * L - M * J) * S, e[10] = (a * P - o * V + K * w) * S, e[11] = (F * V - i * P - h * w) * S, e[12] = (U * q - m * k - T * J) * S, e[13] = (E * k - r * q + t * J) * S, e[14] = (o * g - a * b - O * w) * S, e[15] = (i * b - F * g + x * w) * S, void 0) : c
            }, Cs = function (g, K) {
                if (K) {
                    var Q = K[0], S = K[1], h = K[2];
                    g[12] = g[0] * Q + g[4] * S + g[8] * h + g[12], g[13] = g[1] * Q + g[5] * S + g[9] * h + g[13], g[14] = g[2] * Q + g[6] * S + g[10] * h + g[14], g[15] = g[3] * Q + g[7] * S + g[11] * h + g[15]
                }
            }, Nf = function (n, l) {
                if (l) {
                    var Z = l[0], t = l[1], K = l[2];
                    n[0] = n[0] * Z, n[1] = n[1] * Z, n[2] = n[2] * Z, n[3] = n[3] * Z, n[4] = n[4] * t, n[5] = n[5] * t, n[6] = n[6] * t, n[7] = n[7] * t, n[8] = n[8] * K, n[9] = n[9] * K, n[10] = n[10] * K, n[11] = n[11] * K
                }
            }, Ig = function (d, F, I) {
                var h = F[0], a = F[1], k = F[2], Y = F[3], r = F[4], Q = F[5], j = F[6], u = F[7], y = F[8], R = F[9],
                    G = F[10], s = F[11], D = F[12], E = F[13], t = F[14], H = F[15], V = I[0], U = I[1], w = I[2],
                    T = I[3];
                return d[0] = V * h + U * r + w * y + T * D, d[1] = V * a + U * Q + w * R + T * E, d[2] = V * k + U * j + w * G + T * t, d[3] = V * Y + U * u + w * s + T * H, V = I[4], U = I[5], w = I[6], T = I[7], d[4] = V * h + U * r + w * y + T * D, d[5] = V * a + U * Q + w * R + T * E, d[6] = V * k + U * j + w * G + T * t, d[7] = V * Y + U * u + w * s + T * H, V = I[8], U = I[9], w = I[10], T = I[11], d[8] = V * h + U * r + w * y + T * D, d[9] = V * a + U * Q + w * R + T * E, d[10] = V * k + U * j + w * G + T * t, d[11] = V * Y + U * u + w * s + T * H, V = I[12], U = I[13], w = I[14], T = I[15], d[12] = V * h + U * r + w * y + T * D, d[13] = V * a + U * Q + w * R + T * E, d[14] = V * k + U * j + w * G + T * t, d[15] = V * Y + U * u + w * s + T * H, d
            }, Bb = function (j, m, q, R) {
                var u, H, $, y, x, S, v, G, c, e, p = m[0], V = m[1], h = m[2], F = R[0], w = R[1], k = R[2], B = q[0],
                    i = q[1], M = q[2];
                return I(p - B) < Dp && I(V - i) < Dp && I(h - M) < Dp ? Dm(j) : (v = p - B, G = V - i, c = h - M, e = 1 / s(v * v + G * G + c * c), v *= e, G *= e, c *= e, u = w * c - k * G, H = k * v - F * c, $ = F * G - w * v, e = s(u * u + H * H + $ * $), e ? (e = 1 / e, u *= e, H *= e, $ *= e) : (u = 0, H = 0, $ = 0), y = G * $ - c * H, x = c * u - v * $, S = v * H - G * u, e = s(y * y + x * x + S * S), e ? (e = 1 / e, y *= e, x *= e, S *= e) : (y = 0, x = 0, S = 0), j[0] = u, j[1] = y, j[2] = v, j[3] = 0, j[4] = H, j[5] = x, j[6] = G, j[7] = 0, j[8] = $, j[9] = S, j[10] = c, j[11] = 0, j[12] = -(u * p + H * V + $ * h), j[13] = -(y * p + x * V + S * h), j[14] = -(v * p + G * V + c * h), j[15] = 1, j)
            }, Ak = function (z, V, I, D, h) {
                var b = 1 / i(V / 2), S = 1 / (D - h);
                return z[0] = b / I, z[1] = 0, z[2] = 0, z[3] = 0, z[4] = 0, z[5] = b, z[6] = 0, z[7] = 0, z[8] = 0, z[9] = 0, z[10] = (h + D) * S, z[11] = -1, z[12] = 0, z[13] = 0, z[14] = 2 * h * D * S, z[15] = 0, z
            }, Ye = function (i, f, F, k, U, D, A) {
                var C = 1 / (f - F), W = 1 / (k - U), y = 1 / (D - A);
                return i[0] = -2 * C, i[1] = 0, i[2] = 0, i[3] = 0, i[4] = 0, i[5] = -2 * W, i[6] = 0, i[7] = 0, i[8] = 0, i[9] = 0, i[10] = 2 * y, i[11] = 0, i[12] = (f + F) * C, i[13] = (U + k) * W, i[14] = (A + D) * y, i[15] = 1, i
            }, vi = function (M, F) {
                var V = F[0], v = F[1], x = F[2], O = F[3], g = V * V + v * v + x * x + O * O, p = g ? 1 / g : 0;
                return M[0] = -V * p, M[1] = -v * p, M[2] = -x * p, M[3] = O * p, M
            }, Zo = function (C, D) {
                var O = D[0] + D[5] + D[10], i = 0;
                return O > 0 ? (i = 2 * Math.sqrt(O + 1), C[3] = .25 * i, C[0] = (D[6] - D[9]) / i, C[1] = (D[8] - D[2]) / i, C[2] = (D[1] - D[4]) / i) : D[0] > D[5] & D[0] > D[10] ? (i = 2 * Math.sqrt(1 + D[0] - D[5] - D[10]), C[3] = (D[6] - D[9]) / i, C[0] = .25 * i, C[1] = (D[1] + D[4]) / i, C[2] = (D[8] + D[2]) / i) : D[5] > D[10] ? (i = 2 * Math.sqrt(1 + D[5] - D[0] - D[10]), C[3] = (D[8] - D[2]) / i, C[0] = (D[1] + D[4]) / i, C[1] = .25 * i, C[2] = (D[6] + D[9]) / i) : (i = 2 * Math.sqrt(1 + D[10] - D[0] - D[5]), C[3] = (D[1] - D[4]) / i, C[0] = (D[8] + D[2]) / i, C[1] = (D[6] + D[9]) / i, C[2] = .25 * i), C
            }, Qp = function (s, K, S) {
                var c = K[0], L = K[1], W = K[2], B = K[3], y = c + c, Q = L + L, q = W + W, o = c * y, p = c * Q,
                    $ = c * q, j = L * Q, x = L * q, m = W * q, G = B * y, R = B * Q, u = B * q;
                return s[0] = 1 - (j + m), s[1] = p + u, s[2] = $ - R, s[3] = 0, s[4] = p - u, s[5] = 1 - (o + m), s[6] = x + G, s[7] = 0, s[8] = $ + R, s[9] = x - G, s[10] = 1 - (o + j), s[11] = 0, s[12] = S[0], s[13] = S[1], s[14] = S[2], s[15] = 1, s
            }, pf = F.getRotationFromMatrix4, um = function () {
                var G = [0, 0, 0], i = [0, 0, 0], g = [0, 0, 0], s = function (V, a, h) {
                    V[0] = a[1] * h[2] - a[2] * h[1], V[1] = a[2] * h[0] - a[0] * h[2], V[2] = a[0] * h[1] - a[1] * h[0]
                }, d = function (D) {
                    return D[0] * D[0] + D[1] * D[1] + D[2] * D[2]
                }, t = function (y) {
                    var O = Math.sqrt(d(y));
                    y[0] /= O, y[1] /= O, y[2] /= O
                }, u = function (o, t, X) {
                    o[0] = t[0] - X[0], o[1] = t[1] - X[1], o[2] = t[2] - X[2]
                };
                return function (J, j, n) {
                    var f = ic();
                    return u(g, J, j), 0 === d(g) && (g[2] = 1), t(g), s(G, n, g), 0 === d(G) && (1 === Math.abs(n[2]) ? g[0] += 1e-4 : g[2] += 1e-4, t(g), s(G, n, g)), t(G), s(i, g, G), f[0] = G[0], f[4] = i[0], f[8] = g[0], f[1] = G[1], f[5] = i[1], f[9] = g[1], f[2] = G[2], f[6] = i[2], f[10] = g[2], f
                }
            }(), nd = function (z, $) {
                if (z.vr.enable) {
                    var O = z.vr.getViewMatrix($);
                    if (O) return O
                }
                return Bb($ ? $ : ic(), z._eye, z._center, z._up)
            }, ao = function (e) {
                if (e.vr.enable) {
                    var U = e.vr.getProjectMatrix();
                    if (U) return U
                }
                var r = e.getAspect(), N = e._near, J = e._far, V = ic();
                if (e._ortho) {
                    var h = e._orthoWidth / 2, C = h / r;
                    Ye(V, -h, h, -C, C, N, J)
                } else Ak(V, e._fovy, r, N, J);
                return V
            }, gq = function (i, C) {
                if (!i) return c;
                var K = 0, R = 1, D = 2, F = [], k = 0, e = i.length, B = e / 3;
                if (C) {
                    for (; e > k; k++) F[k] = 0;
                    for (k = 0; k < C.length; k += 3) {
                        var J = [], O = [], d = [];
                        J[K] = i[3 * C[k + 1] + K] - i[3 * C[k] + K], J[R] = i[3 * C[k + 1] + R] - i[3 * C[k] + R], J[D] = i[3 * C[k + 1] + D] - i[3 * C[k] + D], O[K] = i[3 * C[k + 2] + K] - i[3 * C[k + 1] + K], O[R] = i[3 * C[k + 2] + R] - i[3 * C[k + 1] + R], O[D] = i[3 * C[k + 2] + D] - i[3 * C[k + 1] + D], d[K] = J[R] * O[D] - J[D] * O[R], d[R] = J[D] * O[K] - J[K] * O[D], d[D] = J[K] * O[R] - J[R] * O[K];
                        for (var w = 0; 3 > w; w++) F[3 * C[k + w] + K] += d[K], F[3 * C[k + w] + R] += d[R], F[3 * C[k + w] + D] += d[D]
                    }
                } else for (k = 0; B > k; k += 3) {
                    var J = [], O = [], d = [];
                    J[K] = i[3 * (k + 1) + K] - i[3 * k + K], J[R] = i[3 * (k + 1) + R] - i[3 * k + R], J[D] = i[3 * (k + 1) + D] - i[3 * k + D], O[K] = i[3 * (k + 2) + K] - i[3 * (k + 1) + K], O[R] = i[3 * (k + 2) + R] - i[3 * (k + 1) + R], O[D] = i[3 * (k + 2) + D] - i[3 * (k + 1) + D], d[K] = J[R] * O[D] - J[D] * O[R], d[R] = J[D] * O[K] - J[K] * O[D], d[D] = J[K] * O[R] - J[R] * O[K];
                    for (var w = 0; 3 > w; w++) F[3 * (k + w) + K] = d[K], F[3 * (k + w) + R] = d[R], F[3 * (k + w) + D] = d[D]
                }
                for (k = 0; e > k; k += 3) {
                    var h = [];
                    h[K] = F[k + K], h[R] = F[k + R], h[D] = F[k + D];
                    var Z = s(h[K] * h[K] + h[R] * h[R] + h[D] * h[D]);
                    0 === Z && (Z = Dp), h[K] = h[K] / Z, h[R] = h[R] / Z, h[D] = h[D] / Z, F[k + K] = h[K], F[k + R] = h[R], F[k + D] = h[D]
                }
                return new Oq(F)
            }, jd = function (b, _, f, i) {
                if (f || (f = b.createTexture()), _) {
                    var W = b.TEXTURE_2D, X = b.REPEAT, q = b.CLAMP_TO_EDGE, d = b.TEXTURE_MIN_FILTER;
                    i !== b.NEAREST && (i = b.LINEAR), No(b, f), b.texImage2D(W, 0, b.RGBA, b.RGBA, b.UNSIGNED_BYTE, _), Gf(b, b.TEXTURE_MAG_FILTER, i), Kh(_.width) && Kh(_.height) && !_.clampToEdge ? (Gf(b, b.TEXTURE_WRAP_S, X), Gf(b, b.TEXTURE_WRAP_T, X), Gf(b, d, b.LINEAR_MIPMAP_LINEAR), b.generateMipmap(W)) : (Gf(b, b.TEXTURE_WRAP_S, q), Gf(b, b.TEXTURE_WRAP_T, q), Gf(b, d, i)), No(b, c)
                }
                return f
            }, ym = function ($, M) {
                var N = new Uint8Array(3);
                return M = M || $.createTexture(), No($, M), Gf($, $.TEXTURE_MIN_FILTER, $.LINEAR), $.texImage2D($.TEXTURE_2D, 0, $.RGB, 1, 1, 0, $.RGB, $.UNSIGNED_BYTE, N), M
            }, Ad = function (u) {
                u._26I && u._prg && (u._26I.deleteProgram(u._prg), u._prg = c)
            }, vk = function (E, U, z, G) {
                var S = E.createShader(z);
                return E.shaderSource(S, G), E.compileShader(S), E.attachShader(U, S), S
            }, qs = function (V) {
                return V.createBuffer()
            }, No = function (h, V) {
                h.bindTexture(h.TEXTURE_2D, V)
            }, jg = function (r, H) {
                r.bindFramebuffer(r.FRAMEBUFFER, H)
            }, Gf = function (u, F, A) {
                u.texParameteri(u.TEXTURE_2D, F, A)
            }, Rl = function (A, E) {
                if (E) {
                    var E = Ao(E);
                    A.clearColor(E[0], E[1], E[2], E[3])
                }
            }, fi = function (U, F) {
                Kd(U, F.uFix, !0), Jf(U, F.aNormal)
            }, yi = function (w, x) {
                Kd(w, x.uFix, !1), hm(w, x.aNormal)
            }, Xj = function (C, f, o, P, p, y, m, D) {
                C._picking || (o ? (Kd(C, f.uBlend, !0), Kd(C, f.uBlendColor, o)) : Kd(C, f.uBlend, !1), Kd(C, f.uLight, P == c ? !0 : P), Zc(p) && 1 !== p && Kd(C, f.uPartOpacity, p), Kd(C, f.uReverseFlip, y == c ? !1 : y), Kd(C, f.uFixPickReverseColor, m || pl)), D ? C.enable(C.CULL_FACE) : C.disable(C.CULL_FACE)
            }, As = function (F, Q) {
                F._picking || Kd(F, Q.uPartOpacity, 1)
            }, Um = function (X, Q, u, _, W, y, M, r, s) {
                if (!u) return X.activeTexture(X.TEXTURE0), No(X, X._emptyTexture), X.activeTexture(X.TEXTURE1), No(X, X._emptyBlendTexture), void 0;
                Kd(X, Q.uTexture, !0), Kd(X, Q.uDiscardSelectable, Dl(_) ? _ : !0), hm(X, Q.aUv), Li(X, W, y, Q.aUv, 2), s ? (Kd(X, Q.uBlendTexture, !0), X.activeTexture(X.TEXTURE1), No(X, s), X.uniform1i(Q.uBlendSampler, 1)) : (Kd(X, Q.uBlendTexture, !1), X.activeTexture(X.TEXTURE1), No(X, X._emptyBlendTexture)), X.activeTexture(X.TEXTURE0), No(X, u), X.uniform1i(Q.uSampler, 0);
                var J = [0, 0, 1, 1];
                M && (J[0] = M[0], J[1] = M[1]), r && (J[2] = r[0], J[3] = r[1]), Kd(X, Q.uOffsetScale, J)
            }, Bl = function (H, n, $) {
                H.activeTexture(H.TEXTURE0), No(H, c), H.activeTexture(H.TEXTURE1), No(H, c), $ && (Jf(H, n.aUv), Kd(H, n.uTexture, !1), Kd(H, n.uBlendTexture, !1))
            }, iq = function (U, h, G, H, E, Q) {
                !G || _ || M || U.lineWidth(G), H && !U._picking && Kd(U, h.uFixPickReverseColor, H), E && Li(U, E, Q, h.aPosition)
            }, bm = function (I, M, g, q) {
                Eq && (q = I[Eq]), I.drawArrays(q == c ? I.TRIANGLES : q, M, g);
                var S = I._renderInfo;
                S && (S.calls++, S.vertices += g, (q == c || q === I.TRIANGLES) && (S.faces += g / 3), q === I.LINES && (S.lines += g / 2))
            }, Sp = function (D, z, p, G) {
                Eq && (G = D[Eq]), D.drawElements(G == c ? D.TRIANGLES : G, p, D.UNSIGNED_SHORT, z == c ? 0 : 2 * z);
                var A = D._renderInfo;
                A && (A.calls++, A.vertices += p, (G == c || G === D.TRIANGLES) && (A.faces += p / 3), G === D.LINES && (A.lines += p / 2))
            }, qd = function (v, f, M, W, A) {
                var q = v.ARRAY_BUFFER;
                v.bindBuffer(q, f), M && v.bufferData(q, M, v.STATIC_DRAW), W != c && v.vertexAttribPointer(W, A ? A : 3, v.FLOAT, !1, 0, 0)
            }, Li = function (D, Z, j, U, X) {
                return j ? (Xd(D, D.ARRAY_BUFFER, Z, j), U != c && D.vertexAttribPointer(U, X ? X : 3, D.FLOAT, !1, 0, 0), void 0) : qd(D, Z, j, U, X)
            }, dp = function (o, h, D) {
                var Q = o.ELEMENT_ARRAY_BUFFER;
                o.bindBuffer(Q, h), D && o.bufferData(Q, D, o.STATIC_DRAW)
            }, Dq = function (V, l, j) {
                Xd(V, V.ELEMENT_ARRAY_BUFFER, l, j)
            }, Xd = function (B, y, d, X) {
                var d, t = X.glBuf, s = B._id;
                t && (d = t[s]) && d._buf ? B.bindBuffer(y, d._buf) : (d = {_buf: qs(B)}, B._bufPool.push(d), B.bindBuffer(y, d._buf), B.bufferData(y, X, B.STATIC_DRAW), t || (t = X.glBuf = {}), t[s] = d), d._fid = B._renderInfo.frame
            }, Kd = function (G, J, K) {
                if (K != c && J != c) {
                    K = Ao(K);
                    var h = K.length;
                    3 === h ? G.uniform3fv(J, K) : 4 === h ? G.uniform4fv(J, K) : 16 === h ? G.uniformMatrix4fv(J, !1, K) : Dl(K) ? G.uniform1i(J, K ? 1 : 0) : 2 === h ? G.uniform2fv(J, K) : G.uniform1f(J, K)
                }
            }, hm = function (k, X) {
                X != c && X >= 0 && k.enableVertexAttribArray(X)
            }, Jf = function (W, z) {
                z != c && z >= 0 && W.disableVertexAttribArray(z)
            }, ud = function (h, B) {
                var n = h.getGL(), g = h._prg;
                h._7O = h._8O.pop(), B && (Kd(n, g.uMVMatrix, h._7O), h._6O = B, Kd(n, g.uNMatrix, B))
            }, Kc = function (p, y) {
                return y || (y = ic()), Yl(y, p), Fd(y), hf(y), y
            }, oq = function (E, C) {
                var T = E.getGL(), O = E._prg, w = E._7O;
                C && (E._8O.push(Do(w)), Ig(w, w, C)), Kd(T, O.uMVMatrix, w), Kd(T, O.uNMatrix, Kc(w, E._6O))
            }, Xm = function (J, S, y, e, Q, m) {
                if (y) {
                    if (e) {
                        var t = y.value++, j = 2147483648 | t,
                            c = [(255 & j >> 16) / 255, (255 & j >> 8) / 255, (255 & j) / 255, (255 & j >> 24) / 255];
                        y[t] = {data: Q, part: m}
                    } else c = Of;
                    return Kd(J, S.uFixPickReverseColor, c), c
                }
            }, Fb = function () {
                var t = {
                    center: function (r, f, p, P, t) {
                        var V = -f[1] / 2, e = {x: -f[0] / 2, y: V, width: f[0], height: f[1]}, u = Nc(r, e, p);
                        return [u.x + P, -u.y - t, Cq()]
                    }, front: function (V, e, E, B, W) {
                        var J = -e[1] / 2, c = {x: -e[0] / 2, y: J, width: e[0], height: e[1]}, p = Nc(V, c, E);
                        return [p.x + B, -p.y - W, e[2] / 2 + Cq()]
                    }, back: function (R, K, y, W, m) {
                        var h = -K[0] / 2, p = -K[1] / 2, v = {x: h, y: p, width: K[0], height: K[1]}, s = Nc(R, v, y);
                        return [-s.x - W, -s.y - m, -K[2] / 2 - Cq()]
                    }, left: function (g, I, $, W, h) {
                        var i = -I[1] / 2, l = {x: -I[2] / 2, y: i, width: I[2], height: I[1]}, O = Nc(g, l, $);
                        return [-I[0] / 2 - Cq(), -O.y - h, O.x + W]
                    }, right: function (R, u, L, q, p) {
                        var l = -u[2] / 2, Z = -u[1] / 2, V = {x: l, y: Z, width: u[2], height: u[1]}, W = Nc(R, V, L);
                        return [u[0] / 2 + Cq(), -W.y - p, -W.x - q]
                    }, top: function (n, G, H, k, s) {
                        var f = {x: -G[0] / 2, y: -G[2] / 2, width: G[0], height: G[2]}, D = Nc(n, f, H);
                        return [D.x + k, G[1] / 2 + Cq(), D.y + s]
                    }, bottom: function ($, y, S, l, n) {
                        var W = -y[2] / 2, Y = {x: -y[0] / 2, y: W, width: y[0], height: y[2]}, L = Nc($, Y, S);
                        return [L.x + l, -y[1] / 2 - Cq(), -L.y - n]
                    }
                };
                return function (i, n, T, G, C, l) {
                    return t[G](i, n, T, C || 0, l || 0)
                }
            }(), To = function (c, k, N, L, V, o, P, n, v, I) {
                if (V && (k[0] += V[0], k[1] += V[1], k[2] += V[2]), Cs(c, N), n) {
                    var A = ic();
                    if (sq(A, v, I), Ce(k, A), Cs(c, k), c.auto = n, c.pos = Ce([0, 0, 0], c), o) {
                        var b = c.mat2 = ic();
                        sq(b, o, P)
                    }
                } else sq(c, v, I), Cs(c, k), L === Ch ? El(c, -B) : L === Te ? El(c, B) : L === Gn ? Ec(c, -B) : L === Qk ? Ec(c, B) : L === Hr && El(c, u), sq(c, o, P);
                return c
            }, Ae = function (t, e) {
                var m = e.auto, k = e.mat2, X = t.gv;
                if (m) {
                    var y, a = ic(), B = [0, 0, 0, 0];
                    y = "string" == typeof m ? [m.indexOf("x") < 0 ? X._eye[0] : X._center[0], m.indexOf("y") < 0 ? X._eye[1] : X._center[1], m.indexOf("z") < 0 ? X._eye[2] : X._center[2]] : X._eye, Zo(B, Bb(ic(), y, X._center, X._up)), Qp(a, vi(B, B), e.pos), k && Ig(a, a, k), oq(X, a)
                } else oq(X, e)
            }, Kg = function (q, p, F, O, E) {
                var R = q.s, P = q.gv, c = P.getGL(), H = P._prg, G = P._buffer, i = P._1O;
                jd(c, vm, i), Ae(q, F), Xj(c, H, R(p + ".blend"), R(p + ".light"), R(p + ".opacity"), R(p + ".reverse.flip"), R(p + ".reverse.color"), R(p + ".reverse.cull")), Um(c, H, i, E, G.uv, yj), Li(c, G.vs, O, H.aPosition), Li(c, G.ns, Cr, H.aNormal), Dq(c, G.is, jj), Sp(c, 0, jj.length), Bl(c, H, i), As(c, H), ud(P)
            }, Hp = function (S, e, m) {
                var s = S.gv, x = S.data, O = S[e] = {
                    blend: s.getBodyColor(x) || s.getFaceBlend(x, e),
                    light: s.getFaceLight(x, e),
                    color: s.getFaceColor(x, e),
                    opacity: s.getFaceOpacity(x, e),
                    transparent: s.getFaceTransparent(x, e),
                    reverseFlip: s.getFaceReverseFlip(x, e),
                    reverseColor: s.getFaceReverseColor(x, e),
                    reverseCull: s.getFaceReverseCull(x, e),
                    texture: s.getFaceImage(x, e),
                    blendTexture: s.getFaceBlendImage(x, e),
                    discardSelectable: s.getFaceDiscardSelectable(x, e)
                };
                if ("csg" !== e) {
                    O.uv = s.getFaceUv(x, e) || m && m[e + "Uv"], O.uvScale = s.getFaceUvScale(x, e) || m && m[e + "UvScale"], O.uvOffset = s.getFaceUvOffset(x, e) || m && m[e + "UvOffset"];
                    var C = s.getFaceMat(x, e);
                    C && (O.mat = mh(x, C))
                }
                return O
            }, vf = function (M, $, w, l, t) {
                if (l) {
                    if (!t(l.transparent)) return;
                    var Y = M.data, K = M.gv, x = K._buffer, J = K.getTexture(l.texture, Y),
                        e = K.getTexture(l.blendTexture, Y);
                    Um($, w, J, l.discardSelectable, x.uv, l.tuv, l.uvOffset, l.uvScale, e), Xj($, w, l.blend, l.light, l.opacity, l.reverseFlip, l.reverseColor, l.reverseCull), Kd($, w.uDiffuse, l.color), Li($, x.vs, l.vs, w.aPosition), Li($, x.ns, l.ns, w.aNormal), bm($, 0, l.vs.length / 3), As($, w), Bl($, w, J)
                }
            }, nh = function (u, I, w, V, q, O) {
                var n, G, s, H, T, M, D, p, k, E, t, z = [V - I, q - w], m = u ? u.length : 0;
                for (s = 0; m > s; s++) {
                    for (H = 2, n = u[s], T = n[0], M = n[1]; H + 1 < n.length;) {
                        if (D = n[H], p = n[H + 1], G = Qm(I, w, V, q, T, M, D, p, !0)) {
                            k = [D - T, p - M], E = Wg(k), k[0] /= E, k[1] /= E, E = kb(z, k), E = E > 0 ? O : -O, t = [k[0] * E, k[1] * E];
                            break
                        }
                        T = D, M = p, H += 2
                    }
                    if (t) break
                }
                if (t) for (V = I + t[0], q = w + t[1], s = 0; m > s; s++) for (H = 2, n = u[s], T = n[0], M = n[1]; H + 1 < n.length;) {
                    if (D = n[H], p = n[H + 1], G = Qm(I, w, V, q, T, M, D, p, !0)) return [0, 0];
                    T = D, M = p, H += 2
                }
                return t ? t : [V - I, q - w]
            }, Ol = t.graph3d = {}, us = function (T, P, D) {
                fs(G + ".graph3d." + T, P, D)
            },
            wm = "~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<wVb!>!wVs|*fsvuyfUeofmCv)gj~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVs!3dfw!hojzsbw<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",
            $m = "~~<eJ!>!spmpDhbsG`mh~<spmpDsfmqnbTwv!>+!eJ<*wVs!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw|!*fsvuyfUeofmCv)!gj!!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDhbsG`mh)!gj!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!!!!|!ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!!!!|!*uofsbqtobsUv)!gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<wVs!3dfw!hojzsbw<sfmqnbTeofmCv!E3sfmqnbt!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov<utfUbiqmBv!ubpmg!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";
        Nn(F, {
            setBatchInfo: function (Z, g) {
                Mn[Z] = g
            }, getBatchInfo: function (Y) {
                return Mn[Y]
            }
        }, !0);
        var pk = [1, 1, 1], Ph = [1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0],
            lp = [-.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, .5, .5],
            bj = [.5, .5, -.5, .5, .5, .5, .5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5],
            io = [.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5],
            Tk = [.5, -.5, .5, -.5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, .5],
            Ur = [.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5],
            km = [-.5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5],
            Lj = function (M, u) {
                ss(M, u, "_batchModelMap", "_batchIndexMap"), Je(M, u, "_wireframeModelMap", "_wireframeIndexMap"), Je(M, u, "_polylineModelMap", "_polylineIndexMap"), Je(M, u, "_wireframeModelMapSwap", "_wireframeIndexMapSwap"), Je(M, u, "_polylineModelMapSwap", "_polylineIndexMapSwap")
            }, ss = function (g, E, F, O) {
                if (!E) return g[F] = {}, g[O] = {}, void 0;
                var Q = E._id, n = g[O], d = n[Q];
                if (d) {
                    var P = g[F], m = d.batch, b = P[m], H = b.ds, k = d.index;
                    if (b.invalidate = !0, delete n[Q], H.splice(k, 1), Uc(H)) return delete P[m], void 0;
                    for (var s = d.begin, l = d.size, S = 3 * s, V = 3 * l, t = 4 * s, I = 4 * l, o = b.vs, G = b.ps, A = b.uv, D = b.cs, y = b.bs, C = b.rs, L = b.ns, q = b.ls; k < H.length; k++) d = n[H[k]._id], d.index--, d.begin -= l;
                    o.splice(S, V), G.splice(t, I), A && A.splice(2 * s, 2 * l), D && D.splice(t, I), y && y.splice(S, V), C && C.splice(s, l), L && L.splice(S, V), q && q.splice(s, l)
                }
            }, Je = ss, Ve = function (U, G, N, I) {
                if (!I) return c;
                var Q = G[I];
                if (!Q) {
                    var t = Mn[I] || jq, a = t.image ? [] : c;
                    Q = G[I] = {
                        vs: [],
                        ns: [],
                        uv: a,
                        cs: a ? c : t.color ? c : [],
                        bs: t.blend ? [] : c,
                        ps: [],
                        rs: t.brightness ? [] : c,
                        ds: []
                    }
                }
                return Q.invalidate = !0, U[N._id] = {index: Q.ds.length, begin: Q.vs.length / 3, batch: I}, Q.ds.push(N), Q
            }, fg = function (W, n) {
                return n != c && 1 !== n ? [W[0] * n, W[1] * n, W[2] * n, W[3]] : W
            }, Hd = function (J, X, O) {
                var y = J.getBrightness(X), e = Ao(O.color || "white"), d = e[3] < 1, k = Math.ceil(O.width) || 1,
                    A = (d ? "T" : "O") + k, V = J._wireframeIndexMap, s = J._wireframeModelMap, x = s[A];
                x || (x = s[A] = {vs: [], cs: [], ps: [], ds: [], T: d, W: k});
                var w, j = J.getData3dUI(X), H = lq(j);
                if (O.geometry) {
                    if (!H) return;
                    if (w = Hk(H), !w) return
                } else w = O.short ? on : Cf;
                x.invalidate = !0;
                var F = x.vs, K = x.cs, t = x.ds, C = V[X._id] = {index: t.length, begin: F.length / 3, batch: A};
                t.push(X);
                var u = mh(X, O.mat), E = j._calcAnchorMat(X);
                E && Ig(u, u, E), dn(F, u, w);
                var n = C.size = F.length / 3 - C.begin;
                Gi(K, fg(e, y), n)
            }, Di = function (v, z, U, n, j, l, I, Y, m) {
                var R = v.getBrightness(z);
                R == c && (R = 1);
                var s = fg(Ao(n), R), X = s[3] < 1;
                l = Math.ceil(l) || 1;
                var T = (X ? "T" : "O") + l;
                if (I) {
                    var F = I[0], V = (I[1] || F) + F;
                    T += "-" + F + "-" + V, m && (T += "-" + wg(m) + "-" + R, m = fg(Ao(m), R))
                }
                var r = v._polylineIndexMap, P = v._polylineModelMap, W = P[T];
                W || (W = P[T] = {
                    vs: [],
                    cs: [],
                    ps: [],
                    ds: [],
                    ls: I ? [] : c,
                    T: X,
                    W: l
                }, I && (W.D = F, W.G = V, W.A = m)), W.invalidate = !0;
                var f, k = W.vs, u = W.cs, a = W.ds, b = W.ls,
                    p = r[z._id] = {index: a.length, begin: k.length / 3, batch: T};
                a.push(z), Ml(k, U);
                var O, B = p.size = k.length / 3 - p.begin, $ = U.length, H = 0, J = [];
                if (I || j) for (f = 0; $ > f; f += 6) O = Wg([U[f], U[f + 1], U[f + 2]], [U[f + 3], U[f + 4], U[f + 5]]), J.push(O), H += O;
                if (H && j) {
                    var w, K = fg(Ao(j), R), i = [K[0] - s[0], K[1] - s[1], K[2] - s[2], K[3] - s[3]], x = 0;
                    for (f = 0; $ > f; f += 6) w = x / H, Gi(u, [s[0] + i[0] * w, s[1] + i[1] * w, s[2] + i[2] * w, s[3] + i[3] * w], 1), x += J[f / 6], w = x / H, Gi(u, [s[0] + i[0] * w, s[1] + i[1] * w, s[2] + i[2] * w, s[3] + i[3] * w], 1)
                } else Gi(u, s, B);
                if (I) for (x = Y || 0, f = 0; $ > f; f += 6) b.push(x), x += J[f / 6], b.push(x)
            }, Kp = function (p, m, G) {
                if (m) for (var K = 4 * m.begin, v = G[m.batch].ps, k = 0; k < m.size; k++) v[K++] = p[0], v[K++] = p[1], v[K++] = p[2], v[K++] = p[3]
            }, xd = function (i, V) {
                var p = V + ["32"], L = i[V], P = i[p];
                L ? P && P.length === L.length ? (P.set(L), P.glBuf = null) : i[p] = new Oq(L) : delete i[p]
            }, Vb = function (B, g, P, t, $, x, H, f, j) {
                if (Qd(P)) P.forEach(function (w) {
                    Vb(B, g, w, t, $, x, H, f, j)
                }); else if (Rp(P)) Vb(B, g, lq(t, P), t, $, x, H, f, j); else if (Pe(P)) {
                    var h, C = eq(P.mat, g, B), M = eq(P.s3, g, B), S = eq(P.t3, g, B), r = eq(P.r3, g, B);
                    if ((M || r || S || C) && (h = pr(C, M, r, eq(P.rotationMode, g, B), S), x.push(h)), P.shape3d) Vb(B, g, P.shape3d, t, $, x, H, f, P); else {
                        var I = t.s;
                        j = j || jq;
                        var q = x[0], d = x.length, V = I("shape3d.color", P.color, j.color);
                        if ($ || ($ = I("shape3d.blend", P.blend, j.blend)), d > 1) {
                            q = Do(q);
                            for (var A = 1; d > A; A++) Ig(q, q, x[A])
                        }
                        P.vs && I(Fn, P.visible, j.visible) && je(q, H, f, P.vs, P.uv, P.is, $, V), P.top_vs && I(jc, P.topVisible, j.topVisible) && je(q, H, f, P.top_vs, P.top_uv, P.top_is, $, I("shape3d.top.color", P.topColor, j.topColor) || V), P.bottom_vs && I(uq, P.bottomVisible, j.bottomVisible) && je(q, H, f, P.bottom_vs, P.bottom_uv, P.bottom_is, $, I("shape3d.bottom.color", P.bottomColor, j.bottomColor) || V), P.from_vs && I(Ic, P.fromVisible, j.fromVisible) && je(q, H, f, P.from_vs, P.from_uv, P.from_is, $, I("shape3d.from.color", P.fromColor, j.fromColor) || V), P.to_vs && I(Qf, P.toVisible, j.toVisible) && je(q, H, f, P.to_vs, P.to_uv, P.to_is, $, I("shape3d.to.color", P.toColor, j.toColor) || V)
                    }
                    h && x.pop()
                }
            }, je = function (M, G, q, d, n, L, $, u) {
                var b, N = G.cs, o = G.uv, U = G.bs;
                if (L) {
                    b = L.length;
                    for (var k = 0; b > k; k++) {
                        var B = L[k];
                        dn(q, M, [d[3 * B], d[3 * B + 1], d[3 * B + 2]]), o && Ml(o, [n[2 * B], n[2 * B + 1]])
                    }
                } else b = d.length / 3, dn(q, M, d), o && Ml(o, n);
                N && Gi(N, u, b), U && ($ ? Tf(U, $, b) : Ml(U, pk, b))
            }, Co = function (l, h, w, r) {
                var n = [];
                r ? Vb(l.gv, l.data, r, l, l.getBodyColor(), [h], w, n) : (Rf(l, Ch, h, w, n), Rf(l, Te, h, w, n), Rf(l, Aj, h, w, n), Rf(l, Hr, h, w, n), Rf(l, Gn, h, w, n), Rf(l, Qk, h, w, n), Rf(l, "csg", h, w, n)), n.length && (Ml(w.vs, n), Ml(w.ns, gq(n)))
            }, Rf = function (a, s, j, K, u) {
                var h = a[s];
                if (h) {
                    var r = h.tuv;
                    if (r) {
                        var S, p, v, _, y = h.uvScale, g = h.uvOffset;
                        if (y) for (S = r.length, p = y[0], v = y[1], _ = 0; S > _; _ += 2) r[_] *= p, r[_ + 1] *= v;
                        if (g) for (S = r.length, p = g[0], v = g[1], _ = 0; S > _; _ += 2) r[_] += p, r[_ + 1] += v
                    }
                    je(j, K, u, h.vs, r, c, h.blend, h.color)
                }
            }, Zr = function (r, G, B, E, f, s, C, N) {
                var R, K = B.cs, Q = B.uv, j = B.bs;
                if (r.getFaceVisible(G, s)) {
                    var Z = r.getFaceMat(G, s);
                    if (Z && (f = mh(G, Z)), dn(C, f, N), K && Gi(K, r.getFaceColor(G, s), 6), Q) {
                        var p = r.getFaceUv(G, s) || E[s + "Uv"], m = r.getFaceUvScale(G, s) || E[s + "UvScale"],
                            O = r.getFaceUvOffset(G, s) || E[s + "UvOffset"];
                        p = p ? [p[6], p[7], p[0], p[1], p[2], p[3], p[2], p[3], p[4], p[5], p[6], p[7]] : Ph;
                        var T = p[0], e = p[1], X = p[2], S = p[3], P = p[4], F = p[5], Y = p[6], D = p[7], J = p[8],
                            U = p[9], y = p[10], h = p[11];
                        if (m) {
                            var u = m[0], $ = m[1];
                            T *= u, e *= $, X *= u, S *= $, P *= u, F *= $, Y *= u, D *= $, J *= u, U *= $, y *= u, h *= $
                        }
                        if (O) {
                            var w = O[0], V = O[1];
                            T += w, e += V, X += w, S += V, P += w, F += V, Y += w, D += V, J += w, U += V, y += w, h += V
                        }
                        Q.push(T, e, X, S, P, F, Y, D, J, U, y, h)
                    }
                    j && (R = r.getBodyColor(G) || r.getFaceBlend(G, s), R ? Tf(j, R, 6) : Ml(j, pk, 6))
                }
            }, Sj = function (P, k, E, Y) {
                var F = P.getGL(), W = P._prg, T = P._buffer;
                if (!jk(k)) {
                    oq(P), fi(F, W);
                    for (var d in k) {
                        var R = k[d];
                        if (!(Y && !R.T || !Y && R.T)) {
                            R.invalidate ? (R.invalidate = !1, xd(R, "vs"), xd(R, "cs"), xd(R, "ls"), xd(R, "ps")) : E && xd(R, "ps");
                            var M = R.vs32, y = E ? R.ps32 : R.cs32;
                            iq(F, W, R.W, c, T.vs, M);
                            var U = R.D, D = !P._dashDisabled && U;
                            Kd(F, W.uAlphaTest, j.alphaTest), D && (Kd(F, W.uDash, !0), Kd(F, W.uDashDistance, U), Kd(F, W.uDashGapDistance, R.G), hm(F, W.aLineDistance), Li(F, T.lineDistance, R.ls32, W.aLineDistance, 1), Kd(F, W.uDiffuse, R.A || wn));
                            var r = !P._batchColorDisabled;
                            r && (Kd(F, W.uBatchColor, !0), hm(F, W.aBatchColor), Li(F, T.batchColor, y, W.aBatchColor, 4)), Um(F), bm(F, 0, M.length / 3, F.LINES), Bl(F), r && (Kd(F, W.uBatchColor, !1), Jf(F, W.aBatchColor)), D && (Kd(F, W.uDash, !1), Jf(F, W.aLineDistance))
                        }
                    }
                    yi(F, W)
                }
            }, Ne = function (F, v, m) {
                var y, n, r, h, H, l, i, X, R, q, T, K = F.getGL(), V = F._prg, N = F._buffer, P = F._batchModelMap;
                if (!jk(P)) {
                    oq(F);
                    for (y in P) if (n = Mn[y] || jq, !(m && !n.transparent || !m && n.transparent) && (r = P[y], v || !n.transparentMask)) {
                        var U = m && n.autoSort !== !1 && (F._33Q || r.invalidate);
                        if (r.invalidate ? (r.invalidate = !1, xd(r, "vs"), xd(r, "ns"), xd(r, "cs"), xd(r, "rs"), xd(r, "ps"), xd(r, "bs"), xd(r, "uv")) : v && xd(r, "ps"), H = r.vs32, l = v ? r.ps32 : r.cs32, R = r.uv32, i = r.bs32, X = r.rs32, T = H.length / 3, U && (r.is = rk(H, F.getEye())), T) {
                            h = n.light, q = F.getTexture(n.image), Xj(K, V, c, n.light, n.opacity, n.reverseFlip, n.reverseColor, n.reverseCull), l ? F._batchColorDisabled || (Kd(K, V.uBatchColor, !0), hm(K, V.aBatchColor), Li(K, N.batchColor, l, V.aBatchColor, 4)) : Kd(K, V.uDiffuse, n.color || wn);
                            var o = n.alphaTest;
                            Kd(K, V.uAlphaTest, o === $ ? j.alphaTest : o);
                            var a = i && !F._batchBlendDisabled;
                            a && (Kd(K, V.uBatchBlend, !0), hm(K, V.aBatchBlend), Li(K, N.batchBlend, i, V.aBatchBlend));
                            var p = X && !F._batchBrightnessDisabled;
                            p && (Kd(K, V.uBatchBrightness, !0), hm(K, V.aBatchBrightness), Li(K, N.batchBrightness, X, V.aBatchBrightness, 1)), R ? Um(K, V, q, n.discardSelectable, N.uv, R, n.uvOffset, n.uvScale) : Um(K), Li(K, N.vs, H, V.aPosition), Li(K, N.ns, r.ns32, V.aNormal), r.is ? (dp(K, N.is, r.is), Sp(K, 0, T)) : bm(K, 0, T), R ? Bl(K, V, q) : Bl(K), l && !F._batchColorDisabled && (Kd(K, V.uBatchColor, !1), Jf(K, V.aBatchColor)), a && (Kd(K, V.uBatchBlend, !1), Jf(K, V.aBatchBlend)), p && (Kd(K, V.uBatchBrightness, !1), Jf(K, V.aBatchBrightness)), As(K, V)
                        }
                    }
                }
            }, rk = function (T, V) {
                for (var M = T.length / 3, t = new Array(M), y = M / 3, Z = new Array(y), J = 0; y > J; J++) Z[J] = J;
                Z.sort(function (W, _) {
                    var s = 9 * W,
                        l = [(T[s] + T[s + 3] + 2 * T[s + 6]) / 4, (T[s + 1] + T[s + 4] + 2 * T[s + 7]) / 4, (T[s + 2] + T[s + 5] + 2 * T[s + 8]) / 4];
                    s = 9 * _;
                    var r = [(T[s] + T[s + 3] + 2 * T[s + 6]) / 4, (T[s + 1] + T[s + 4] + 2 * T[s + 7]) / 4, (T[s + 2] + T[s + 5] + 2 * T[s + 8]) / 4],
                        K = Wg(V, l) - Wg(V, r);
                    return K > 0 ? -1 : 0 > K ? 1 : 0
                });
                for (var J = 0; y > J; J++) {
                    var Y = 3 * J, g = 3 * Z[J];
                    t[Y] = g, t[Y + 1] = g + 1, t[Y + 2] = g + 2
                }
                return new Kj(t)
            }, an = {
                obj: function (g, C) {
                    var m = {
                        mat: g.mat,
                        s3: g.s3,
                        r3: g.r3,
                        rotationMode: g.rotationMode,
                        t3: g.t3,
                        cube: g.cube == c ? !0 : g.cube,
                        center: g.center == c ? !0 : g.center,
                        ignoreMtls: g.ignoreMtls,
                        ignoreTransparent: g.ignoreTransparent,
                        ignoreColor: g.ignoreColor,
                        ignoreImage: g.ignoreImage,
                        ignoreNormal: g.ignoreNormal,
                        prefix: g.prefix,
                        flipY: g.flipY,
                        flipFace: g.flipFace,
                        reverseFlipMtls: g.reverseFlipMtls,
                        finishFunc: function (e, z) {
                            if (e) {
                                var z = [];
                                for (var R in e) {
                                    var s = e[R];
                                    z.rawS3 = s.rawS3, z.push(s), g.eachModel && g.eachModel(R, s)
                                }
                                z.json = g, C(z)
                            } else C()
                        }
                    };
                    F.loadObj(g.obj, g.mtl, m)
                }
            };
        F.getModelTypeHandlers = function () {
            return an
        }, F.setModelTypeHandler = function (a, Q) {
            an[a] = Q
        }, F.getModelTypeHandler = function (B) {
            return an[B]
        }, F.handleModelLoaded = function () {
        }, F.handleUnfoundModel = function () {
        };
        var Pi = c, kf = c, eh = function (u) {
                Pi && !u._loadingModelView_ && (kf || (kf = {}), kf[u._loadingModelView_ = Ck()] = u)
            }, gm = function (f, y) {
                Pi || (Pi = {});
                var R = Pi[f];
                if (R) {
                    if (R.url === y) return;
                    R.request.onload = ds, R.request.onerror = ds
                }
                var m = new XMLHttpRequest;
                if (Pi[f] = {
                    request: m,
                    url: y
                }, m.overrideMimeType && m.overrideMimeType("text/plain"), y = F.beforeLoadURL(y), y.data) {
                    var D = F.parse(y.data);
                    Ci(f, D, y)
                } else m.open("GET", encodeURI(y), !0), m.onload = function (C) {
                    if (200 === this.status || 0 === this.status) {
                        var N = F.parse(C.target.response || C.target.responseText);
                        Ci(f, N, y)
                    } else Sm(f, F.handleUnfoundModel(f, y) || c)
                }, m.onerror = function () {
                    Sm(f, F.handleUnfoundModel(f, y) || c)
                }, m.send(null)
            }, Ci = function (b, y, d) {
                var W = y.modelType;
                if (!W) return Sm(b, y), F.handleModelLoaded(b, y), void 0;
                var n = F.getModelTypeHandler(W);
                if (n) {
                    var P = function (N) {
                        N ? (Sm(b, N), F.handleModelLoaded(b, N)) : Sm(b, F.handleUnfoundModel(b, d) || c)
                    };
                    n(y, P)
                } else Sm(b, F.handleUnfoundModel(b, d) || c)
            }, Sm = function (k, R) {
                if (rl[k] = R, delete Pi[k], jk(Pi) && (Pi = c, kf)) {
                    for (var V in kf) {
                        var _ = kf[V];
                        _._2O && (_._2O = {}), _.invalidateAll && _.invalidateAll($, "modelLoaded", k), _.redraw && _.redraw(), _.iv(), delete _._loadingModelView_
                    }
                    kf = c
                }
                if (R && kf) for (var V in kf) {
                    var _ = kf[V];
                    _.invalidateAll && _.invalidateAll($, "modelLoading", k), _.redraw && _.redraw(), _.iv()
                }
            }, yj = new Oq([0, 0, 0, 1, 1, 1, 1, 0]), Cr = new Oq([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]),
            jj = new Kj([0, 1, 2, 2, 3, 0]),
            Bi = new Oq([-.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, .5, -.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5, -.5, -.5, .5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, .5]),
            Pf = new Kj([0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23]),
            Se = new Oq([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0]),
            Nl = gq(Bi, Pf),
            fl = (new Oq([-.5, .5, .5, -.5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, -.5, -.5, .5, .5, -.5, -.5, -.5, -.5, -.5, .5, -.5]), new Kj([0, 1, 2, 3, 0, 7, 5, 4, 6, 7, 5, 3, 2, 4, 6, 1]), [Ch, Aj, Te, Hr, Gn, Qk]),
            Cf = [-.5, .5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, .5, .5, .5, .5, .5, .5, .5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, -.5, -.5, -.5, -.5, .5, -.5, -.5, .5, -.5, -.5, .5, .5, -.5, .5, .5, -.5, -.5, .5, -.5, .5, .5, .5, .5, .5, -.5, .5, -.5, .5, .5, -.5, -.5, -.5, .5, .5, -.5, .5, -.5, -.5, -.5, .5, -.5, -.5, -.5],
            on = [-.5, .5, .5, -.4, .5, .5, -.5, .5, .5, -.5, .4, .5, -.5, .5, .5, -.5, .5, .4, .5, .5, .5, .4, .5, .5, .5, .5, .5, .5, .4, .5, .5, .5, .5, .5, .5, .4, -.5, -.5, .5, -.4, -.5, .5, -.5, -.5, .5, -.5, -.4, .5, -.5, -.5, .5, -.5, -.5, .4, .5, -.5, .5, .4, -.5, .5, .5, -.5, .5, .5, -.4, .5, .5, -.5, .5, .5, -.5, .4, -.5, .5, -.5, -.4, .5, -.5, -.5, .5, -.5, -.5, .4, -.5, -.5, .5, -.5, -.5, .5, -.4, .5, .5, -.5, .4, .5, -.5, .5, .5, -.5, .5, .4, -.5, .5, .5, -.5, .5, .5, -.4, -.5, -.5, -.5, -.4, -.5, -.5, -.5, -.5, -.5, -.5, -.4, -.5, -.5, -.5, -.5, -.5, -.5, -.4, .5, -.5, -.5, .4, -.5, -.5, .5, -.5, -.5, .5, -.4, -.5, .5, -.5, -.5, .5, -.5, -.4],
            If = function (c, R, t, O, U, h) {
                h = h || 16, c = c || 16, R = R || 0, t = t || c;
                var Q, E, B, A, p, N, X, $, n = .5, K = [], d = [], _ = k / c, P = u / h;
                for (Q = 0; h > Q; Q++) for (p = Q + 1, A = Q * P, $ = p * P, E = R; t > E; E++) N = E + 1, B = E * _, X = N * _, K.push(n * C(A) * D(B), n * D(A), -n * C(A) * C(B), n * C($) * D(X), n * D($), -n * C($) * C(X), n * C(A) * D(X), n * D(A), -n * C(A) * C(X), n * C(A) * D(B), n * D(A), -n * C(A) * C(B), n * C($) * D(B), n * D($), -n * C($) * C(B), n * C($) * D(X), n * D($), -n * C($) * C(X)), d.push(E / c, Q / h, N / c, p / h, N / c, Q / h, E / c, Q / h, E / c, p / h, N / c, p / h);
                if (O) {
                    var e = [], o = [];
                    for (B = R * _, Q = 0; h > Q; Q++) p = Q + 1, A = Q * P, $ = p * P, e.push(0, 0, 0, n * C($) * D(B), n * D($), -n * C($) * C(B), n * C(A) * D(B), n * D(A), -n * C(A) * C(B)), o.push(0, .5, R / c, p / h, R / c, Q / h)
                }
                if (U) {
                    var s = [], l = [];
                    for (B = t * _, Q = 0; h > Q; Q++) p = Q + 1, A = Q * P, $ = p * P, s.push(0, 0, 0, n * C(A) * D(B), n * D(A), -n * C(A) * C(B), n * C($) * D(B), n * D($), -n * C($) * C(B)), l.push(1, .5, t / c, Q / h, t / c, p / h)
                }
                return {vs: K, uv: d, from_vs: e, from_uv: o, to_vs: s, to_uv: l}
            }, zo = function (I, t, j) {
                I = I || .17, t = t || 12, j = j || 18, 0 > I ? I = 0 : I > .25 && (I = .25);
                var T, L, l, r, p, g, c, f = .5, s = [], Y = [], Q = [], o = k / j, h = k / t, J = f - I;
                for (L = 0; t >= L; L++) for (r = -u + L * h, g = D(r), p = C(r), T = 0; j >= T; T++) l = T * o, c = J + I * g, s.push(D(l) * c, p * I, -C(l) * c), Y.push(T / j, 1 - L / t);
                for (L = 0; t > L; L++) {
                    var m = L * (j + 1), U = (L + 1) * (j + 1);
                    for (T = 0; j > T; T++) Q.push(m + T, U + T + 1, U + T, m + T, m + T + 1, U + T + 1)
                }
                return {vs: s, uv: Y, is: Q}
            }, Pk = function (y, Q, O, q, x, R, Z) {
                Z = Z || 12, y = y || 18, Q = Q || 0, O = O || y, R = R || .17, 0 > R ? R = 0 : R > .25 && (R = .25);
                var c, f, H, L, W, G, E, s, o, Y, S = .5, h = [], K = [], J = k / y, A = k / Z, r = S - R;
                for (H = 0; Z > H; H++) for (L = H + 1, E = -u + H * A, s = -u + L * A, c = Q; O > c; c++) f = c + 1, W = c * J, G = f * J, o = r + R * D(E), Y = r + R * D(s), h.push(D(W) * o, C(E) * R, -C(W) * o, D(G) * o, C(E) * R, -C(G) * o, D(G) * Y, C(s) * R, -C(G) * Y, D(W) * o, C(E) * R, -C(W) * o, D(G) * Y, C(s) * R, -C(G) * Y, D(W) * Y, C(s) * R, -C(W) * Y), K.push(c / y, 1 - H / Z, f / y, 1 - H / Z, f / y, 1 - L / Z, c / y, 1 - H / Z, f / y, 1 - L / Z, c / y, 1 - L / Z);
                if (q) {
                    var X = [], B = [];
                    for (H = 0; Z > H; H++) L = H + 1, E = -u + H * A, s = -u + L * A, W = Q * J, o = r + R * D(E), Y = r + R * D(s), X.push(D(W) * o, C(E) * R, -C(W) * o, D(W) * Y, C(s) * R, -C(W) * Y, D(W) * r, 0, -C(W) * r), B.push(.5 + .5 * D(E), .5 - .5 * C(E), .5 + .5 * D(s), .5 - .5 * C(s), .5, .5)
                }
                if (x) {
                    var T = [], t = [];
                    for (H = 0; Z > H; H++) L = H + 1, E = -u + H * A, s = -u + L * A, W = O * J, o = r + R * D(E), Y = r + R * D(s), T.push(D(W) * o, C(E) * R, -C(W) * o, D(W) * r, 0, -C(W) * r, D(W) * Y, C(s) * R, -C(W) * Y), t.push(.5 - .5 * D(E), .5 - .5 * C(E), .5, .5, .5 - .5 * D(s), .5 - .5 * C(s))
                }
                return {vs: h, uv: K, from_vs: X, from_uv: B, to_vs: T, to_uv: t}
            }, Mm = function (r, b) {
                for (var J, O, v, t = .5, y = 16, T = [], E = [], U = [], a = k / y, Q = 0; y >= Q; Q++) J = Q * a, O = D(J) * t, v = C(J) * t, T.push(O, -t, v, O, t, v), E.push(1 - Q / y, 1, 1 - Q / y, 0);
                for (Q = 0; y > Q; Q++) U.push(2 * Q, 2 * Q + 1, 2 * Q + 3, 2 * Q, 2 * Q + 3, 2 * Q + 2);
                if (b) {
                    var W = [], h = [], l = [];
                    for (W.push(0, -t, 0), h.push(.5, .5), Q = 0; y >= Q; Q++) J = Q * a, O = D(J), v = C(J), W.push(O * t, -t, -v * t), h.push(.5 + .5 * O, .5 + .5 * v);
                    for (Q = 0; y > Q; Q++) l.push(0, Q + 2, Q + 1)
                }
                if (r) {
                    var L = [], S = [], N = [];
                    for (L.push(0, t, 0), S.push(.5, .5), Q = 0; y >= Q; Q++) J = Q * a, O = D(J), v = C(J), L.push(O * t, t, -v * t), S.push(.5 + .5 * O, .5 - .5 * v);
                    for (Q = 0; y > Q; Q++) N.push(0, Q + 1, Q + 2)
                }
                return {vs: T, uv: E, is: U, bottom_vs: W, bottom_uv: h, bottom_is: l, top_vs: L, top_uv: S, top_is: N}
            }, xo = function (A, P, n, E, i, g, y) {
                A = A || 12, P = P || 0, n = n || A;
                for (var K, S, q, I, B, c, h, d, L = .5, W = [], H = [], r = k / A, U = P; n > U; U++) K = U + 1, S = U * r, q = K * r, I = D(S) * L, B = C(S) * L, c = D(q) * L, h = C(q) * L, W.push(I, -L, -B, c, -L, -h, I, L, -B, c, -L, -h, c, L, -h, I, L, -B), H.push(U / A, 1, K / A, 1, U / A, 0, K / A, 1, K / A, 0, U / A, 0);
                if (y) {
                    var u = [], Z = [];
                    for (U = P; n > U; U++) S = r * U, q = r * (U + 1), I = D(S), B = C(S), c = D(q), h = C(q), u.push(I * L, -L, -B * L, 0, -L, 0, c * L, -L, -h * L), Z.push(.5 + .5 * I, .5 + .5 * B, .5, .5, .5 + .5 * c, .5 + .5 * h)
                }
                if (g) {
                    var X = [], m = [];
                    for (U = P; n > U; U++) S = r * U, q = r * (U + 1), I = D(S), B = C(S), c = D(q), h = C(q), X.push(I * L, L, -B * L, c * L, L, -h * L, 0, L, 0), m.push(.5 + .5 * I, .5 - .5 * B, .5 + .5 * c, .5 - .5 * h, .5, .5)
                }
                if (E) {
                    var l = [], w = [];
                    S = r * P, I = D(S) * L, B = C(S) * L, d = P / A, l.push(0, L, 0, 0, -L, 0, I, -L, -B, I, -L, -B, I, L, -B, 0, L, 0), w.push(0, 0, 0, 1, d, 1, d, 1, d, 0, 0, 0)
                }
                if (i) {
                    var M = [], V = [];
                    S = r * n, I = D(S) * L, B = C(S) * L, d = n / A, M.push(0, -L, 0, 0, L, 0, I, L, -B, I, L, -B, I, -L, -B, 0, -L, 0), V.push(1, 1, 1, 0, d, 0, d, 0, d, 1, 1, 1)
                }
                return {
                    vs: W,
                    uv: H,
                    bottom_vs: u,
                    bottom_uv: Z,
                    top_vs: X,
                    top_uv: m,
                    from_vs: l,
                    from_uv: w,
                    to_vs: M,
                    to_uv: V
                }
            }, Vd = function (U, G, E, Y, I) {
                G = G || 18, E = E || 0, Y = Y == c ? k : Y, I = I == c ? .5 : I;
                for (var z, s, l, V, S, d, r = [0, .5, .75, .875, .9375], W = [], T = [], L = [], p = Y / G, x = 0; x < r.length; x++) {
                    var B = 0 === x % 2 ? 0 : .5;
                    for (z = 0; G >= z; z++) s = (z + B) * p + E, l = 1 - r[x], W.push(D(s) * I * l, -I + 2 * r[x] * I, -C(s) * I * l), T.push((z + B) / G, l)
                }
                for (x = 0; x < r.length - 1; x++) {
                    var e = x * (G + 1), N = (x + 1) * (G + 1);
                    for (z = 0; G > z; z++) L.push(e + z, N + z + 1, N + z, e + z, e + z + 1, N + z + 1)
                }
                for (d = W.length / 3 - (G + 1), z = 0; G > z; z++) W.push(0, I, 0), T.push((z + .5) / G, 0);
                for (z = 0; G > z; z++) L.push(d + z, d + z + 1, d + (G + 1) + z);
                if (U) {
                    var q = [], K = [], J = [];
                    for (q.push(0, -I, 0), K.push(.5, .5), z = 0; G >= z; z++) s = z * p + E, V = D(s), S = C(s), q.push(V * I, -I, -S * I), K.push(.5 + .5 * V, .5 + .5 * S);
                    for (z = 0; G > z; z++) J.push(0, z + 2, z + 1)
                }
                return {vs: W, uv: T, is: L, bottom_vs: q, bottom_uv: K, bottom_is: J}
            }, ei = function (l, K, h, O, P, G) {
                l = l || 16, K = K || 0, h = h || l;
                for (var n = .5, m = [], _ = [], Q = k / l, W = K; h > W; W++) {
                    var S = W + 1, Y = Q * W, e = Q * S;
                    m.push(D(Y) * n, -n, -C(Y) * n, D(e) * n, -n, -C(e) * n, 0, n, 0), _.push(W / l, 1, S / l, 1, (W + S) / 2 / l, 0)
                }
                if (G) {
                    var q = [], X = [];
                    for (W = K; h > W; W++) {
                        Y = Q * W, e = Q * (W + 1);
                        var J = D(Y), R = C(Y), r = D(e), H = C(e);
                        q.push(J * n, -n, -R * n, 0, -n, 0, r * n, -n, -H * n), X.push(.5 + .5 * J, .5 + .5 * R, .5, .5, .5 + .5 * r, .5 + .5 * H)
                    }
                }
                if (O) {
                    var x = [], T = [];
                    Y = Q * K, x.push(0, n, 0, 0, -n, 0, D(Y) * n, -n, -C(Y) * n), T.push(0, 0, 0, 1, K / l, 1)
                }
                if (P) {
                    var i = [], U = [];
                    Y = Q * h, i.push(0, -n, 0, 0, n, 0, D(Y) * n, -n, -C(Y) * n), U.push(1, 1, 1, 0, h / l, 1)
                }
                return {vs: m, uv: _, bottom_vs: q, bottom_uv: X, from_vs: x, from_uv: T, to_vs: i, to_uv: U}
            }, yh = function (C, S, D, n, E, f, $, h) {
                for (var B = [], x = 0; x < C.length - 1; x += 2) B.push({x: C[x], y: C[x + 1]});
                return En(B, S, D, n, E, f, $, h, !1)
            }, cb = {
                roundRect: function (K, _) {
                    return yh([.5, .4, .5, .442, .471, .471, .442, .5, .4, .5, -.4, .5, -.442, .5, -.471, .471, -.5, .442, -.5, .4, -.5, -.4, -.5, -.442, -.471, -.471, -.442, -.5, -.4, -.5, .4, -.5, .442, -.5, .471, -.471, .5, -.442, .5, -.4, .5, .4], [1, 3, 3, 2, 3, 3, 2, 3, 3, 2, 3, 3, 2], K, _, 3)
                }, star: function (r, P) {
                    return yh([.193, .079, .333, .5, 0, .233, -.333, .5, -.194, .079, -.5, -.167, -.112, -.167, 0, -.5, .111, -.167, .5, -.167], [1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 5], r, P)
                }, rect: function (O, W) {
                    return yh([.5, -.5, .5, .5, -.5, .5, -.5, -.5], [1, 2, 2, 2, 5], O, W)
                }, billboard: function () {
                    return {
                        vs: [-.5, .5, 0, -.5, -.5, 0, .5, .5, 0, .5, .5, 0, -.5, -.5, 0, .5, -.5, 0],
                        uv: [0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1],
                        ns: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]
                    }
                }, plane: function () {
                    return {
                        vs: [-.5, 0, -.5, -.5, 0, .5, .5, 0, -.5, .5, 0, -.5, -.5, 0, .5, .5, 0, .5],
                        uv: [0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1],
                        ns: [0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0]
                    }
                }, triangle: function (N, g) {
                    return yh([0, -.5, .5, .5, -.5, .5], [1, 2, 2, 5], N, g)
                }, rightTriangle: function (C, P) {
                    return yh([.5, .5, -.5, .5, -.5, -.5], [1, 2, 2, 5], C, P)
                }, parallelogram: function (i, o) {
                    return yh([.5, -.5, .25, .5, -.5, .5, -.25, -.5], [1, 2, 2, 2, 5], i, o)
                }, trapezoid: function (h, V) {
                    return yh([.25, -.5, .5, .5, -.5, .5, -.25, -.5], [1, 2, 2, 2, 5], h, V)
                }
            }, Il = {sphere: 1, cylinder: 1, cone: 1, torus: 1}, Eg = {torus: 1, sphere: 1}, Pj = Nn(hh(cb), {cylinder: 1}),
            Ek = Nn(hh(cb), {cylinder: 1, cone: 1}), wd = function (T, e, S) {
                var f, p = eq(T.mat, S, e), Y = eq(T.s3, S, e), c = eq(T.t3, S, e), x = eq(T.r3, S, e);
                return (Y || x || c || p) && (f = Do(e._6O), oq(e, pr(p, Y, x, eq(T.rotationMode, S, e), c))), f
            }, Fi = function (X, W, d, h, t, i, a) {
                if (Qd(d)) d.forEach(function (l) {
                    Fi(X, W, l, h, t, i, a)
                }); else if (Rp(d)) Fi(X, W, lq(h, d), h, t, i, a); else if (Pe(d)) if (d.shape3d) {
                    var J = wd(d, X, W);
                    Fi(X, W, d.shape3d, h, t, i, d), J && ud(X, J)
                } else cl(X, W, d, h.s, t, i, a)
            }, cl = function (Y, V, _, d, g, X, Z) {
                if (Z = Z || jq, !X || X(d("shape3d.transparent", _.transparent, Z.transparent))) {
                    var w = wd(_, Y, V);
                    Ug(_);
                    var s = Y._26I, y = Y._prg, F = Y._buffer, p = d("shape3d.color", _.color, Z.color);
                    g || (g = d("shape3d.blend", _.blend, Z.blend));
                    var r, Q = _.opacity == c ? Z.opacity : _.opacity, C = d("shape3d.opacity");
                    r = C != c && Q != c ? Q * C : Q != c ? Q : C, Xj(s, y, g, d("shape3d.light", _.light, Z.light), r, d("shape3d.reverse.flip", _.reverseFlip, Z.reverseFlip), d("shape3d.reverse.color", _.reverseColor, Z.reverseColor), d("shape3d.reverse.cull", _.reverseCull, Z.reverseCull)), _.vs && d(Fn, _.visible, Z.visible) && zp(s, y, F, p, Y.getTexture(d("shape3d.image", _.image, Z.image), V), d("shape3d.discard.selectable", _.discardSelectable, Z.discardSelectable), _.vs, _.uv, _.ns, _.is, d("shape3d.uv.offset", _.uvOffset, Z.uvOffset), d("shape3d.uv.scale", _.uvScale, Z.uvScale)), _.top_vs && d(jc, _.topVisible, Z.topVisible) && zp(s, y, F, d("shape3d.top.color", _.topColor, Z.topColor) || p, Y.getTexture(d("shape3d.top.image", _.topImage, Z.topImage), V), d("shape3d.top.discard.selectable", _.topDiscardSelectable, Z.topDiscardSelectable), _.top_vs, _.top_uv, _.top_ns, _.top_is, d("shape3d.top.uv.offset", _.topUvOffset, Z.topUvOffset), d("shape3d.top.uv.scale", _.topUvScale, Z.topUvScale)), _.bottom_vs && d(uq, _.bottomVisible, Z.bottomVisible) && zp(s, y, F, d("shape3d.bottom.color", _.bottomColor, Z.bottomColor) || p, Y.getTexture(d("shape3d.bottom.image", _.bottomImage, Z.bottomImage), V), d("shape3d.bottom.discard.selectable", _.bottomDiscardSelectable, Z.bottomDiscardSelectable), _.bottom_vs, _.bottom_uv, _.bottom_ns, _.bottom_is, d("shape3d.bottom.uv.offset", _.bottomUvOffset, Z.bottomUvOffset), d("shape3d.bottom.uv.scale", _.bottomUvScale, Z.bottomUvScale)), _.from_vs && d(Ic, _.fromVisible, Z.fromVisible) && zp(s, y, F, d("shape3d.from.color", _.fromColor, Z.fromColor) || p, Y.getTexture(d("shape3d.from.image", _.fromImage, Z.fromImage), V), d("shape3d.from.discard.selectable", _.fromDiscardSelectable, Z.fromDiscardSelectable), _.from_vs, _.from_uv, _.from_ns, _.from_is, d("shape3d.from.uv.offset", _.fromUvOffset, Z.fromUvOffset), d("shape3d.from.uv.scale", _.fromUvScale, Z.fromUvScale)), _.to_vs && d(Qf, _.toVisible, Z.toVisible) && zp(s, y, F, d("shape3d.to.color", _.toColor, Z.toColor) || p, Y.getTexture(d("shape3d.to.image", _.toImage, Z.toImage), V), d("shape3d.to.discard.selectable", _.toDiscardSelectable, Z.toDiscardSelectable), _.to_vs, _.to_uv, _.to_ns, _.to_is, d("shape3d.to.uv.offset", _.toUvOffset, Z.toUvOffset), d("shape3d.to.uv.scale", _.toUvScale, Z.toUvScale)), As(s, y), w && ud(Y, w)
                }
            }, zp = function (O, h, M, P, w, B, E, Q, d, y, I, j) {
                E && (Kd(O, h.uDiffuse, P), Q ? Um(O, h, w, B, M.uv, Q, I, j) : Um(O), Li(O, M.vs, E, h.aPosition), Li(O, M.ns, d, h.aNormal), y ? (Dq(O, M.is, y), Sp(O, 0, y.length)) : bm(O, 0, E.length / 3), Q ? Bl(O, h, w) : Bl(O))
            }, lq = function (L, u) {
                var m = L.s;
                if (u || (u = m(ij)), !u) return c;
                var T = kp(u);
                if (T) return T;
                if ("text" === u) {
                    var W = {
                        amount: m("shape3d.text.amount"),
                        size: m("shape3d.text.size"),
                        font: m("shape3d.text.font"),
                        style: m("shape3d.text.style"),
                        weight: m("shape3d.text.weight"),
                        fill: m("shape3d.text.fill"),
                        curveSegments: m("shape3d.text.curveSegments"),
                        spacing: m("shape3d.text.spacing")
                    }, v = L.gv.getShape3dText(L.data), V = v;
                    for (var Z in W) V += "_" + (W[Z] === $ ? "U" : W[Z]);
                    return L._cachedTextKey === V ? L._cachedTextGeometry : (L._cachedTextKey = V, L._cachedTextGeometry = F.createTextGeometry(v, W))
                }
                var Z = u;
                if (Il[u]) {
                    var Q = m("shape3d.side"), q = m("shape3d.side.from"), f = m("shape3d.side.to"), O = m(Ic), h = m(Qf);
                    3 > Q ? (Q = 0, q = 0, f = 0, O = !1, h = !1) : ((q == c || 0 > q) && (q = 0), (f == c || f > Q) && (f = Q), 0 === q && f === Q && (O = !1, h = !1)), Z += "-" + Q + "-" + q + "-" + f + "-" + O + "-" + h
                }
                if (Pj[u]) {
                    var N = m(jc);
                    Z += "-" + N
                }
                if (Ek[u]) {
                    var _ = m(uq);
                    Z += "-" + _
                }
                if ("torus" === u) {
                    var D = m("shape3d.torus.radius");
                    0 > D ? D = 0 : D > .25 && (D = .25), Z += "-" + D
                }
                if (Eg[u]) {
                    var J = m(Ef);
                    Z += "-" + J
                }
                return T = _i[Z], T || ("box" === u ? T = F.createBoxModel() : cb[u] ? T = cb[u](N, _) : "sphere" === u ? T = F.createSphereModel(Q, q, f, O, h, J) : u === df ? T = F.createCylinderModel(Q, q, f, O, h, N, _) : "cone" === u ? T = F.createConeModel(Q, q, f, O, h, _) : "torus" === u && (T = F.createTorusModel(Q, q, f, O, h, D, J)), _i[Z] = T), T
            }, Ug = function () {
                var d = ["vs", "ns", "uv", "top_vs", "top_ns", "top_uv", "bottom_vs", "bottom_ns", "bottom_uv", "from_vs", "from_ns", "from_uv", "to_vs", "to_ns", "to_uv", "er", "al"],
                    c = ["is", "top_is", "bottom_is", "from_is", "to_is"];
                return T = jr(wm.substr(wm.indexOf("^#") + 2)), Yo(F[cg(jb + d[15] + "n" + d[16])]()) && ee() ? function (P) {
                    P && !P._complete_ && (P._complete_ = !0, P.vs && Uc(P.ns) && (P.ns = gq(P.vs, P.is)), P.top_vs && Uc(P.top_ns) && (P.top_ns = gq(P.top_vs, P.top_is)), P.bottom_vs && Uc(P.bottom_ns) && (P.bottom_ns = gq(P.bottom_vs, P.bottom_is)), P.from_vs && Uc(P.from_ns) && (P.from_ns = gq(P.from_vs, P.from_is)), P.to_vs && Uc(P.to_ns) && (P.to_ns = gq(P.to_vs, P.to_is)), d.forEach(function (w) {
                        var d = P[w];
                        Qd(d) && (P[w] = new Oq(d))
                    }), c.forEach(function (x) {
                        var K = P[x];
                        Qd(K) && (P[x] = new Kj(K))
                    }))
                } : void 0
            }(), Ok = function (e, $) {
                var Y = e[$];
                Qd(Y) && (e[$] = new Oq(Y))
            };
        Nn(zh, {
            _25Q: function (V) {
                V._16O = function (r, u, g, o, B, E, k, v, Q) {
                    var $ = this.info;
                    if ($) {
                        var J, f, H, C, A, i, D = ic();
                        if (no[u] ? (J = $.p3, f = $.c1, H = $.c2) : wb[u] ? (f = $.s1 || $.c1, H = $.s2 || $.c2) : (f = $.t1 || $.c1, H = $.t2 || $.c2), J) i = Fb(u, Wi, g, o, v, Q); else {
                            var y = $k(H, f), W = Wg(f, H);
                            C = [0, -n(y[2], y[0]), l(y[1] / W)], A = "zyx", J = [(f[0] + H[0]) / 2, (f[1] + H[1]) / 2, (f[2] + H[2]) / 2], i = Fb(u, [W, 0, 0], g, o, v, Q)
                        }
                        return To(D, i, J, o, B, E, k, r, C, A)
                    }
                    return Hb
                }, V._80o = function (N, g, h) {
                    var W = this, F = W.shapeModel;
                    if (F) {
                        var q = W.gv;
                        oq(q), Fi(q, W.data, F, W, W.getBodyColor(), h)
                    }
                }, V.createLineModel = function (P, r, E, p, C) {
                    for (var o = this, t = o.s, D = rf(P, r, t(Ef)), B = [], J = 0; J < D.length; J++) {
                        var M = D[J], s = M.length;
                        if (s > 1) {
                            var _ = M[0];
                            B.push(_.x, _.y, _.z);
                            for (var F = 1; s - 1 > F; F++) _ = M[F], B.push(_.x, _.y, _.z), B.push(_.x, _.y, _.z);
                            _ = M[s - 1], B.push(_.x, _.y, _.z)
                        }
                    }
                    var k, H, d, e = t(p + ".color"), j = t(C), O = 0;
                    return j && (H = t(C + ".color"), k = t(C + ".pattern"), O = t(C + ".offset"), d = e), Di(o.gv, o.data, B, H || e, d ? c : t(p + ".gradient.color"), E, k || t(p + ".pattern"), O, d), D
                }, V.createTubeModel = function (e, X, j, M) {
                    for (var u = this, B = u.s, G = B("shape3d.side") || fo, T = B("shape3d.start.angle"), o = B("shape3d.sweep.angle"), f = B(jc) ? B("shape3d.top.cap") : c, q = B(uq) ? B("shape3d.bottom.cap") : c, P = "flat" === f, w = "flat" === q, K = P && (M ? M.uv : B("shape3d.top.image")), a = w && (M ? M.uv : B("shape3d.bottom.image")), A = M ? M.uv : B("shape3d.image"), r = {
                        vs: [],
                        uv: A ? [] : c,
                        top_vs: P ? [] : c,
                        top_uv: K ? [] : c,
                        bottom_vs: w ? [] : c,
                        bottom_uv: a ? [] : c
                    }, h = rf(e, X, B(Ef), j), F = 0, Q = h.length; Q > F; F++) zl(r, h[F], B(ub), j, G, T, o, f, q);
                    if (M) {
                        var p = [];
                        Vb(u.gv, u.data, r, u, u.getBodyColor(), [], M, p), p.length && (Ml(M.vs, p), Ml(M.ns, gq(p)))
                    } else u.shapeModel = r;
                    return h
                }, V.getCache = function () {
                    var r = this.info;
                    if (r) {
                        var j = r.list;
                        if (j) {
                            var X = r.cache;
                            return X || (X = r.cache = vb(j)), X
                        }
                    }
                    return c
                }
            }
        });
        var nq = function ($, q) {
            for (var n, m = 0, i = $.length, b = 0, w = i - 1; w >= b;) if (m = Q(b + (w - b) / 2), n = $[m].length - q, 0 > n) b = m + 1; else {
                if (!(n > 0)) {
                    w = m;
                    break
                }
                w = m - 1
            }
            m = w;
            var U = $[m], X = U.point;
            return m === i - 1 || U.length === q || (X = (new Yd).subVectors($[m + 1].point, X).normalize().multiplyScalar(q - U.length).add(X)), {
                point: X,
                tangent: U.tangent
            }
        }, vb = function (d) {
            for (var O, t, f = [], L = 0, F = 0; F < d.length; F++) {
                for (var s = d[F], N = 0; N < s.length; N++) {
                    O = s[N], t && (L += t.distanceTo(O));
                    var z = new Yd, H = s[N + 1];
                    H ? z.subVectors(H, O) : t ? z.subVectors(O, t) : z.x = 1, z.normalize(), f.push({
                        point: O,
                        length: L,
                        tangent: z
                    }), t = O
                }
                t = null
            }
            return f
        }, rf = function (Y, p, w, s) {
            w = w || ac;
            for (var h = [], Q = 0, H = Y.size(); H > Q; Q++) {
                var t = Y.get(Q);
                h.push(new Yd(t.x, t.e || 0, t.y))
            }
            p && ($b(p) && (p = p._as), p.length || (p = null));
            for (var M, g, E, m, n, d = [], b = 0, f = 0, K = p ? p.length : H; K > f; f++) if (n = p ? p[f] : 0 === f ? 1 : 2, 1 === n) d.push(E = []), E.push(h[b++]); else if (2 === n || 5 === n) if (m = 2 === n ? h[b++] : E[0], s) {
                var B = p ? p[f + 1] : K > f + 1 ? 2 : c;
                if (2 === B || 5 === B) {
                    var C = E[E.length - 1], I = 2 === B ? h[b] : E[0], F = (new Yd).subVectors(C, m),
                        L = (new Yd).subVectors(I, m), N = F.length(), u = L.length();
                    if (N && u) if (s > N / 2 && s > u / 2) E.push(m); else for (F.multiplyScalar(x(s, N / 2) / N).add(m), L.multiplyScalar(x(s, u / 2) / u).add(m), M = new xb(F, m, L).getPoints(w), g = 0; w >= g; g++) E.push(M[g])
                } else E.push(m)
            } else E.push(m); else if (3 === n) for (M = new xb(E[E.length - 1], h[b++], h[b++]).getPoints(w), g = 1; w >= g; g++) E.push(M[g]); else if (4 === n) for (M = new np(E[E.length - 1], h[b++], h[b++], h[b++]).getPoints(w), g = 1; w >= g; g++) E.push(M[g]);
            return d
        }, eg = function (a) {
            for (var H, u, C = new Yd, x = [], f = [], Q = [], t = 0, n = a.length; n > t; t++) H = a[t], u = a[t + 1], u ? C.subVectors(u, H) : C.subVectors(H, a[t - 1]), x.push(C.normalize().clone());
            var T, E, R, V, D = new Yd, F = new Yd, c = new sm, Y = 1e-4, d = Number.MAX_VALUE, W = x[0],
                M = f[0] = new Yd, X = Q[0] = new Yd;
            for (E = I(W.x), R = I(W.y), V = I(W.z), d >= E && (d = E, D.set(1, 0, 0)), d >= R && (d = R, D.set(0, 1, 0)), d >= V && D.set(0, 0, 1), F.crossVectors(W, D).normalize(), M.crossVectors(W, F), X.crossVectors(W, M), t = 1; n > t; t++) f[t] = f[t - 1].clone(), Q[t] = Q[t - 1].clone(), F.crossVectors(x[t - 1], x[t]), F.length() > Y && (F.normalize(), T = Z(Df(x[t - 1].dot(x[t]), -1, 1)), f[t].applyMatrix4(c.makeRotationAxis(F, T))), Q[t].crossVectors(x[t], f[t]);
            return {B: Q, T: x, N: f}
        }, zl = function () {
            var w = function (b) {
                for (var R = 1; R < arguments.length; R++) {
                    var t = arguments[R];
                    b.push(t.x, t.y, t.z)
                }
            }, K = function (n) {
                for (var D = 1; D < arguments.length; D++) {
                    var v = arguments[D].uv;
                    n.push(v[0], v[1])
                }
            }, P = function (R, f, e, _, G) {
                var Z = -_ * D(G), V = _ * C(G);
                return new Yd(R.x + Z * e.x + V * f.x, R.y + Z * e.y + V * f.y, R.z + Z * e.z + V * f.z)
            }, I = function (x, V, Q, w, q, L, d, U) {
                d = d || k;
                for (var Y = [], v = d / q, M = 0; q >= M; M++) {
                    var z = P(x, V, Q, w, M * v + L);
                    Y.push(z), U != c && (z.uv = [U, M / q])
                }
                return Y
            }, W = function (I, d, S, v, E, T, $, b, e) {
                e = e || k;
                var h = d ? I.top_vs : I.bottom_vs;
                if (h) for (var M = d ? I.top_uv : I.bottom_uv, K = e / $, q = 0; $ > q; q++) {
                    var A, l;
                    d ? (A = q * K + b, l = (q + 1) * K + b) : (l = q * K + b, A = (q + 1) * K + b), w(h, P(S, v, E, T, A), P(S, v, E, T, l), S), M && M.push(.5 - .5 * D(A), .5 - .5 * C(A), .5 - .5 * D(l), .5 - .5 * C(l), .5, .5)
                }
            };
            return function (o, N, l, X, g, v, f, D, S) {
                var Q = N.length;
                if (Q > 1) {
                    var B, d, A, r, z, b, n, k = eg(N), R = k.T, C = k.N, e = k.B;
                    "flat" === D && W(o, !0, N[0], e[0], C[0], X, g, v, f), "flat" === S && W(o, !1, N[Q - 1], e[Q - 1], C[Q - 1], X, g, v, f);
                    var T, t, P = [], H = E(g / 2), x = "round" === D, Z = "round" === S, Y = N[0], O = R[0], _ = e[0],
                        L = C[0], y = N[Q - 1], u = R[Q - 1], G = e[Q - 1], M = C[Q - 1];
                    if (x) {
                        for (A = 1; H >= A; A++) C.splice(0, 0, L), e.splice(0, 0, _), R.splice(0, 0, O), t = -A / H * X, N.splice(0, 0, O.clone().multiplyScalar(t).add(Y)), P[H - A] = s(X * X - t * t);
                        Q += H
                    }
                    if (Z) {
                        for (A = 1; H >= A; A++) C.push(M), e.push(G), R.push(u), t = A / H * X, N.push(u.clone().multiplyScalar(t).add(y)), P[N.length - 1] = s(X * X - t * t);
                        Q += H
                    }
                    if (o.uv) {
                        var V = 0, F = 0, h = [];
                        for (l && (V = l), z = N[0], h[0] = 0, A = 1; Q > A; A++) r = N[A], h[A] = z.distanceTo(r), z = r, l || (V += h[A]);
                        for (T = [], A = 0; Q > A; A++) F += h[A], T[A] = V ? F / V : 0
                    }
                    for (A = 0; Q > A; A++) {
                        if (r = N[A], b = e[A], n = C[A], B = I(r, b, n, P[A] === $ ? X : P[A], g, v, f, T ? T[A] : c), d) for (var J = 0; g > J; J++) {
                            var m = d[J], j = d[J + 1] || d[0], p = B[J], i = B[J + 1] || B[0];
                            w(o.vs, j, m, p, p, i, j), o.uv && K(o.uv, j, m, p, p, i, j)
                        }
                        d = B
                    }
                }
            }
        }();
        Nn(F, {
            getLineLength: function (M) {
                return M[M.length - 1].length
            }, getLineOffset: function (_, K) {
                return nq(_, K)
            }, getLineCacheInfo: function (e, D, k, s) {
                return vb(rf(e, D, k, s))
            }
        });
        var js = t.Light = function () {
            Mr(js, this), this.s(bk, j[bk]), this.s(ij, "sphere"), this.s3(20, 20, 20)
        };
        ld("Light", Uq, {
            _image: "light_icon", _icon: "light_icon", onStyleChanged: function (d, t, E) {
                js.superClass.onStyleChanged.apply(this, arguments), d === bk && this.s("shape3d.color", E)
            }
        });
        var qe = Ol.Graph3dView = function (j, t) {
            var J = this;
            J._attributes = t || F.graph3dViewAttributes, J._25I = {}, J._view = ts(1, J);
            var f = J._canvas = Jm(J._view);
            f.addEventListener("webglcontextlost", function (A) {
                A.preventDefault(), Ad(J), J._26I && J._doBufferGC(J._26I, !0), J._26I = c, J._1o.texture = c, J._35O = !0
            }, !1), f.addEventListener("webglcontextrestored", function () {
                J._35O = !1, J.iv()
            }, !1), J._batchIndexMap = {}, J._batchModelMap = {}, J._wireframeIndexMap = {}, J._wireframeModelMap = {}, J._wireframeIndexMapSwap = {}, J._wireframeModelMapSwap = {}, J._polylineIndexMap = {}, J._polylineIndexMap = {}, J._polylineIndexMapSwap = {}, J._polylineIndexMapSwap = {}, J._8O = [], J._7O = ic(), J._6O = ic(), J._1o = new sh(J), J._30O = new Km(J), J._31O = new uj(J), J._32O = new bd(J), J._raycaster = new Nb(J), J.vr = new vd(J), J._33Q = !0, J._eye = hh(F.graph3dViewEye), J._center = hh(F.graph3dViewCenter), J._up = hh(F.graph3dViewUp), J._lightChanged = !1, J._59O = [], J._spots = [], J._dirs = [], J._frameId = 0, J.overlappingBox = new Rh(J), J.dm(j ? j : new ek), J._coreInteractor = new Pn(this), J.setInteractors([new ko(J)])
        }, ml = {
            fogDisabled: 1,
            dashDisabled: 1,
            batchColorDisabled: 1,
            batchBlendDisabled: 1,
            batchBrightnessDisabled: 1
        }, ec = 0;
        us("Graph3dView", v, {
            ms_v: 1,
            ms_tip: 1,
            ms_gv: 1,
            ms_dm: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_sm: 1,
            _51o: 1,
            ms_ac: ["devicePixelRatio", "boundaries", "moveStep", "rotateStep", "editHelperDisabled", "sizeEditableFunc", "rotationEditableFunc", "editableFunc", "rotatable", "zoomable", "pannable", "walkable", "resettable", "mouseRoamable", _b, rn, "firstPersonMode", en, "movableFunc", "gridVisible", "gridSize", "gridGap", "gridColor", "originAxisVisible", "centerAxisVisible", "axisXColor", "axisYColor", "axisZColor", "editSizeColor", "rectSelectable", "rectSelectBackground", "headlightRange", "headlightColor", "headlightIntensity", "headlightDisabled", "ortho", "orthoWidth", "fovy", "near", "far", Ap, ns, "up", "aspect", "fogDisabled", "fogColor", "fogNear", "fogFar", "dashDisabled", "batchColorDisabled", "batchBlendDisabled", "batchBrightnessDisabled", "hoverDelay"],
            _editable: !1,
            _editHelperDisabled: F.graph3dViewEditHelperDisabled,
            _devicePixelRatio: $,
            _boundaries: $,
            _moveStep: F.graph3dViewMoveStep,
            _rotateStep: F.graph3dViewRotateStep,
            _pannable: F.graph3dViewPannable,
            _rotatable: F.graph3dViewRotatable,
            _walkable: F.graph3dViewWalkable,
            _resettable: F.graph3dViewResettable,
            _zoomable: F.graph3dViewZoomable,
            _firstPersonMode: F.graph3dViewFirstPersonMode,
            _mouseRoamable: F.graph3dViewMouseRoamable,
            _gridVisible: F.graph3dViewGridVisible,
            _gridSize: F.graph3dViewGridSize,
            _gridGap: F.graph3dViewGridGap,
            _gridColor: F.graph3dViewGridColor,
            _originAxisVisible: F.graph3dViewOriginAxisVisible,
            _centerAxisVisible: F.graph3dViewCenterAxisVisible,
            _axisXColor: F.graph3dViewAxisXColor,
            _axisYColor: F.graph3dViewAxisYColor,
            _axisZColor: F.graph3dViewAxisZColor,
            _ortho: F.graph3dViewOrtho,
            _orthoWidth: F.graph3dViewOrthoWidth,
            _fovy: F.graph3dViewFovy,
            _near: F.graph3dViewNear,
            _far: F.graph3dViewFar,
            _headlightColor: F.graph3dViewHeadlightColor,
            _headlightIntensity: F.graph3dViewHeadlightIntensity,
            _headlightRange: F.graph3dViewHeadlightRange,
            _headlightDisabled: F.graph3dViewHeadlightDisabled,
            _rectSelectable: F.graph3dViewRectSelectable,
            _rectSelectBackground: F.graph3dViewRectSelectBackground,
            _editSizeColor: F.graph3dViewEditSizeColor,
            _autoMakeVisible: Yp,
            _fogDisabled: F.graph3dViewFogDisabled,
            _fogColor: F.graph3dViewFogColor,
            _fogNear: F.graph3dViewFogNear,
            _fogFar: F.graph3dViewFogFar,
            _dashDisabled: F.graph3dViewDashDisabled,
            _batchColorDisabled: F.graph3dViewBatchColorDisabled,
            _batchBlendDisabled: F.graph3dViewBatchBlendDisabled,
            _batchBrightnessDisabled: F.graph3dViewBatchBrightnessDisabled,
            setEye: function ($, k, H) {
                1 === arguments.length && (k = $[1], H = $[2], $ = $[0]);
                var v = this._eye;
                v[0] = $, v[1] = k, v[2] = H, this.fp(Ap, c, v)
            },
            setCenter: function (b, j, t) {
                1 === arguments.length && (j = b[1], t = b[2], b = b[0]);
                var S = this._center;
                S[0] = b, S[1] = j, S[2] = t, this.fp(ns, c, S)
            },
            setUp: function (i, Y, N) {
                1 === arguments.length && (Y = i[1], N = i[2], i = i[0]);
                var z = this._up;
                z[0] = i, z[1] = Y, z[2] = N, this.fp("up", c, z)
            },
            isTransparentMask: function (N) {
                return N.s("transparent.mask")
            },
            getCoreInteractor: function () {
                return this._coreInteractor
            },
            getAspect: function () {
                var w = this, O = w._aspect;
                return O ? O : w.getWidth() / w.getHeight()
            },
            getCanvas: function () {
                return this._canvas
            },
            setDataModel: function (i) {
                var m = this, J = m._dataModel, u = m._selectionModel;
                J !== i && (J && (J.ump(m.handleDataModelPropertyChange, m), J.umm(m.handleDataModelChange, m), J.umd(m.handleDataPropertyChange, m), u || J.sm().ums(m.handleSelectionChange, m)), m._dataModel = i, i.mp(m.handleDataModelPropertyChange, m), i.mm(m.handleDataModelChange, m), i.md(m.handleDataPropertyChange, m), u ? u._21I(i) : i.sm().ms(m.handleSelectionChange, m), m.invalidateAll(!0), m.invalidateLight(), m.fp(kg, J, i), m._canvas.style.background = i.getBackground() || "")
            },
            handleDataModelPropertyChange: function (S) {
                if ("background" === S.property) {
                    var z = this._canvas.style.background, I = S.newValue || "";
                    this._canvas.style.background = I, this.fp("canvasBackground", z, I)
                }
            },
            handleDataPropertyChange: function (o) {
                var e = o.data;
                this.invalidateData(e), Wr(e) && "s:light.type" === o.property && this.invalidateLight()
            },
            invalidateLight: function () {
                this._lightChanged || (this._lightChanged = !0, this.iv())
            },
            onPropertyChanged: function (L) {
                var q = this, r = L.property;
                q.iv(), q._18Q = c, "eye" === r ? q._33Q = !0 : "devicePixelRatio" === r ? q._42(c, q._devicePixelRatio || ur) : ml[r] && Ad(q)
            },
            _5O: function (R) {
                var b = R._22Q();
                return b ? new b(this, R) : c
            },
            getData3dUI: function (y) {
                var U = this._25I[y._id];
                return U === $ && (U = this._5O(y), this._25I[y._id] = U), U
            },
            invalidateAll: function (d) {
                var z = this;
                if (d) {
                    for (var e in z._25I) {
                        var J = z._25I[e];
                        J && J.dispose()
                    }
                    z._25I = {}, z.iv(), Lj(z)
                } else Lj(z), z.dm().each(function (A) {
                    z.invalidateData(A)
                })
            },
            invalidateSelection: function () {
                var $ = this;
                $.sm().each(function (F) {
                    $.invalidateData(F)
                })
            },
            invalidateData: function (h) {
                var z = this, I = z.getData3dUI(h);
                I && (I.iv(), z.iv()), Lj(z, h)
            },
            getShape3dText: function (A) {
                return A.getStyle("shape3d.text") || this.getLabel(A)
            },
            invalidateBatch: function (R) {
                var S = this, P = S._batchModelMap, I = P[R], N = [], q = {};
                if (I) {
                    I.ds.forEach(function (C) {
                        var u = S.getData3dUI(C);
                        u && u.iv(), delete S._batchIndexMap[C._id], N.push(C._id)
                    }), delete P[R];
                    for (var Y, H, w, v, f, _, C, O, i, Q = ["_wireframeModelMap", "_polylineModelMap", "_wireframeModelMapSwap", "_polylineModelMapSwap"], W = ["_wireframeIndexMap", "_polylineIndexMap", "_wireframeIndexMapSwap", "_polylineIndexMapSwap"], z = 0; z < Q.length; z++) {
                        var d = S[Q[z]], Z = S[W[z]];
                        for (q = {}, O = 0; O < N.length; O++) {
                            var s = Z[N[O]];
                            if (s) {
                                delete Z[N[O]], i = s.batch, Y = d[i];
                                var g = s.begin, A = s.size, K = 3 * g, U = 3 * A, p = 4 * g, r = 4 * A;
                                for (H = Y.ds, w = Y.vs, v = Y.cs, f = Y.ps, _ = Y.ls, C = s.index, Y.invalidate = !0, H[C] = $, C = K; K + U > C; C++) w[C] = $;
                                for (C = p; p + r > C; C++) v[C] = $;
                                for (C = p; p + r > C; C++) f[C] = $;
                                if (_) for (C = K; K + U > C; C++) _[C] = $;
                                q[i] = !0
                            }
                        }
                        for (i in q) {
                            Y = d[i], H = Y.ds, w = Y.vs, v = Y.cs, f = Y.ps, _ = Y.ls;
                            var B = [];
                            for (C = 0; C < H.length; C++) H[C] !== $ && B.push(H[C]);
                            if (0 === B.length) delete d[i]; else {
                                for (Y.ds = B, B = [], C = 0; C < w.length; C++) w[C] !== $ && B.push(w[C]);
                                for (Y.vs = B, B = [], C = 0; C < v.length; C++) v[C] !== $ && B.push(v[C]);
                                for (Y.cs = B, B = [], C = 0; C < f.length; C++) f[C] !== $ && B.push(f[C]);
                                if (Y.ps = B, _) {
                                    for (B = [], C = 0; C < _.length; C++) _[C] !== $ && B.push(_[C]);
                                    Y.ls = B
                                }
                            }
                        }
                    }
                    S.iv()
                }
            },
            handleDataModelChange: function (r) {
                var b = this, R = r.kind, Y = r.data;
                if ("add" === R) b.invalidateData(Y), gs(Y) && Y.getEdgeGroup() && Y.getEdgeGroup().eachSiblingEdge(b.invalidateData, b), Wr(Y) && b.invalidateLight(); else if (R === de) {
                    var I = Y._id, v = b._25I[I];
                    v && (v.dispose(), delete b._25I[I], b.iv()), Y === b._currentSubGraph && b.setCurrentSubGraph(c), Lj(b, Y), Wr(Y) && b.invalidateLight()
                } else R === Lg && (b.invalidateAll(!0), b.setCurrentSubGraph(c), Lj(b), b.invalidateLight())
            },
            toCanvas: function (v) {
                var j = this, i = j.getGL();
                if (j.validate(), v) {
                    var w = i.getParameter(i.COLOR_CLEAR_VALUE);
                    Rl(i, v)
                }
                j._42(c, 1);
                var $ = j.getWidth(), l = j.getHeight(), r = new Uint8Array(4 * $ * l), B = Jm(),
                    x = B.getContext("2d");
                i.readPixels(0, 0, $, l, i.RGBA, i.UNSIGNED_BYTE, r), Sd(B, $, l, 1);
                for (var X = x.getImageData(0, 0, $, l), N = X.data, K = 0; K < N.length; K += 4) {
                    var b = K / 4, V = Q(b / $), C = b - V * $;
                    b = 4 * ((l - 1 - V) * $ + C), N[b] = r[K], N[b + 1] = r[K + 1], N[b + 2] = r[K + 2], N[b + 3] = r[K + 3]
                }
                return x.putImageData(X, 0, 0), v && Rl(i, w), j._42(c, j._devicePixelRatio || ur), B
            },
            toDataURL: function (r, z) {
                var G = this, P = G.getGL();
                if (G.validate(), r) {
                    var C = P.getParameter(P.COLOR_CLEAR_VALUE);
                    Rl(P, r)
                }
                G._42(c, 1);
                var U = G._canvas.toDataURL(z || "image/png", 1);
                return r && Rl(P, C), G._42(c, G._devicePixelRatio || ur), U
            },
            getGL: function () {
                var p = this, $ = p._26I, q = p._prg;
                if (!$) try {
                    p._2O = {}, $ = p._26I = p._canvas.getContext("webgl", p._attributes) || p._canvas.getContext("experimental-webgl", p._attributes), $._emptyTexture = ym($), $._emptyBlendTexture = ym($), $._bufPool = [], $._id = ++ec, p._buffer = {
                        vs: qs($),
                        ns: qs($),
                        is: qs($),
                        uv: qs($),
                        batchColor: qs($),
                        batchBlend: qs($),
                        batchBrightness: qs($),
                        lineDistance: qs($)
                    }, p._1O = jd($);
                    var x = p._cube = {vs: qs($), ns: qs($), is: qs($), uv: qs($)};
                    qd($, x.vs, Bi), qd($, x.ns, Nl), qd($, x.uv, Se), dp($, x.is, Pf)
                } catch (N) {
                }
                if ($ && !q) {
                    if (q = p._prg = $.createProgram(), !q) return c;
                    var e = p._dirs.length, C = p._spots.length, l = p._59O.length,
                        t = ["uPMatrix", "uMVMatrix", "uNMatrix", "uViewMatrix", "aNormal", "aUv", "uOffsetScale", "uDiffuse", "uBlend", "uBlendColor", "uBrightness", "uPartOpacity", "uAlphaTest", "uTransparent", "uTexture", "uBlendTexture", "uSampler", "uBlendSampler", "uDiscardSelectable", "uFix", "uPick", "uReverseFlip", "uFixPickReverseColor", "uBatchBrightness", "aBatchBrightness", "uBatchColor", "aBatchColor", "uBatchBlend", "aBatchBlend", "uDash", "aLineDistance", "uDashDistance", "uDashGapDistance", "uLight", "uHeadlightRange", "uHeadlightColor", "uFogColor", "uFogNear", "uFogFar"];
                    e && t.push("uDirColor", "uDirDirection"), C && t.push("uSpotColor", "uSpotRange", "uSpotAngle", "uSpotExponent", "uSpotPosition", "uSpotDirection"), l && t.push("uPointColor", "uPointRange", "uPointPosition"), Rl($, [0, 0, 0, 0]), $.clearDepth(1), $.enable($.DEPTH_TEST), $.depthFunc($.LEQUAL), $.enable($.BLEND), $.blendFuncSeparate($.SRC_ALPHA, $.ONE_MINUS_SRC_ALPHA, $.ONE, $.ONE_MINUS_SRC_ALPHA), ef || (wm = jr(wm.substring(0, wm.indexOf("^#"))), $m = jr($m), ef = !0);
                    var H = ["#define MAX_DIR " + e, "#define MAX_SPOT " + C, "#define MAX_POINT " + l, p._fogDisabled ? "" : "#define FOG", p._dashDisabled ? "" : "#define DASH", p._batchColorDisabled ? "" : "#define BATCHCOLOR", p._batchBlendDisabled ? "" : "#define BATCHBLEND", p._batchBrightnessDisabled ? "" : "#define BATCHBRIGHTNESS", ""].join("\n"),
                        L = vk($, q, $.VERTEX_SHADER, wm.replace("PREFIX", H)),
                        G = vk($, q, $.FRAGMENT_SHADER, $m.replace("PREFIX", H));
                    _ ? t.push("aPosition") : (q.aPosition = 0, $.bindAttribLocation(q, 0, "aPosition")), $.linkProgram(q), t.forEach(function (o) {
                        q[o] = /^u/.test(o) ? $.getUniformLocation(q, o) : $.getAttribLocation(q, o)
                    }), $.useProgram(q), $.deleteShader(L), $.deleteShader(G)
                }
                return $
            },
            getBrightness: function (y) {
                var w = y.s("brightness"), I = this.isSelected(y) ? y.s("select.brightness") : c;
                return w == c ? I : I == c ? w : w * I
            },
            getWireframe: function (D) {
                var o = D.s("wf.visible"), B = D.s("wf.width");
                return o === !0 || B > 0 && "selected" === o && this.isSelected(D) ? {
                    color: D.s("wf.color"),
                    width: B,
                    "short": D.s("wf.short"),
                    mat: D.s("wf.mat")
                } : void 0
            },
            _transformPointToViewSpace: function (D) {
                var T = [D[0], D[1], D[2]];
                return Ce(T, this._viewMatrix), T
            },
            _transformDirectionToViewSpace: function (h, s) {
                var v = [h[0], h[1], h[2]];
                Ce(v, this._viewMatrix);
                var u = s ? [s[0], s[1], s[2]] : [0, 0, 0];
                Ce(u, this._viewMatrix);
                var l = u[0] - v[0], N = u[1] - v[1], z = u[2] - v[2], M = Math.sqrt(l * l + N * N + z * z);
                return M ? [l / M, N / M, z / M] : [l, N, z]
            },
            getWireframeGeometry: function (f) {
                return f.s("wf.geometry") ? {
                    color: f.s("wf.color"),
                    width: f.s("wf.width"),
                    mat: f.s("wf.mat"),
                    geometry: !0
                } : void 0
            },
            getBodyColor: function (l) {
                return l.s("body.color")
            },
            getMat: function (t) {
                return t.getMat ? t.getMat() : t.s("mat")
            },
            getFaceMat: function (n, f) {
                return n.getFaceMat ? n.getFaceMat(f) : n.s(f + ".mat")
            },
            getFaceBlend: function (U, o) {
                return U.s(o + ".blend") || U.s("all.blend")
            },
            getFaceColor: function (r, H) {
                return r.s(H + ".color") || r.s("all.color")
            },
            getFaceImage: function (z, B) {
                return z.s(B + ".image") || z.s("all.image")
            },
            getFaceBlendImage: function ($, S) {
                return $.s(S + ".blend.image") || $.s("all.blend.image")
            },
            getFaceDiscardSelectable: function (P, H) {
                var F = P.s(H + ".discard.selectable");
                return F == c ? P.s("all.discard.selectable") : F
            },
            getFaceUv: function (T, t) {
                return T.s(t + ".uv") || T.s("all.uv")
            },
            getFaceUvOffset: function (V, A) {
                return V.s(A + ".uv.offset") || V.s("all.uv.offset")
            },
            getFaceUvScale: function (A, r) {
                return A.s(r + ".uv.scale") || A.s("all.uv.scale")
            },
            getFaceLight: function (O, P) {
                var M = O.s(P + ".light");
                return M == c ? O.s("all.light") : M
            },
            getFaceVisible: function (k, p) {
                var v = k.s(p + ".visible");
                return v == c ? k.s("all.visible") : v
            },
            getFaceOpacity: function (k, N) {
                var U = k.s(N + ".opacity");
                return U == c ? k.s("all.opacity") : U
            },
            getFaceTransparent: function ($, l) {
                var o = $.s(l + ".transparent");
                return o == c ? $.s("all.transparent") : o
            },
            getFaceReverseColor: function (T, R) {
                return T.s(R + ".reverse.color") || T.s("all.reverse.color")
            },
            getFaceReverseFlip: function (x, P) {
                var $ = x.s(P + ".reverse.flip");
                return $ == c ? x.s("all.reverse.flip") : $
            },
            getFaceReverseCull: function (U, u) {
                var H = U.s(u + ".reverse.cull");
                return H == c ? U.s("all.reverse.cull") : H
            },
            getTextureMap: function () {
                return this._2O
            },
            deleteTexture: function (f) {
                var Q = this, N = Q._2O[f];
                N && (delete Q._2O[f], Q.getGL().deleteTexture(N))
            },
            invalidateShape3dCachedImage: function (_) {
                var S = this.getData3dUI(_);
                S.invalidateCachedTexture(this.getGL())
            },
            isInteractive: function (d) {
                return d.s("interactive")
            },
            getTexture: function (l, O) {
                if (!l) return c;
                var d = this, S = d.getGL(), G = d._2O[l];
                if (!G) {
                    var o = cd(l);
                    if (o) if (o.tagName) {
                        if (o.dynamic) return jd(S, o, d._1O);
                        G = d._2O[l] = jd(S, o)
                    } else {
                        var s, v = O && O.s("shape3d.image.cache") && !d.isInteractive(O);
                        if (v && (s = d.getData3dUI(O), G = s.getCachedTexture()), !G) {
                            var q = O && O.s("shape3d.fixSizeOnScreen"), i = q ? S.NEAREST : S.LINEAR;
                            q || O && O.s("shape3d.vector.dynamic") && (s || (s = d.getData3dUI(O)), q = s.getVectorDynamicSize());
                            var V = O && O.s("shape3d.texture.scale") || 1, R = q && q[0] > 0 ? q[0] : V * fc(o, O),
                                I = q && q[1] > 0 ? q[1] : V * qr(o, O);
                            if (R >= 1 && I >= 1) {
                                R *= devicePixelRatio, I *= devicePixelRatio;
                                var _ = Zk(R, I);
                                if (!s && O && (s = d.getData3dUI(O)), s && s.interactiveInfo) {
                                    var g = s.interactiveInfo[l] = {};
                                    _.interactiveInfo = g.bodyInfo = {
                                        compInfos: [],
                                        matrix: new rr,
                                        rect: {x: 0, y: 0, width: R, height: I}
                                    }
                                }
                                sp(_, o, 0, 0, R, I, O, d), _.interactiveInfo && (_.interactiveInfo = null), _.restore(), v && af(o, O) ? (G = jd(S, vm, null, i), s.setCachedTexture(G), vm = null) : G = jd(S, vm, d._1O, i)
                            }
                        }
                    }
                }
                return G
            },
            redraw: function () {
                this.iv()
            },
            validateImpl: function () {
                var N = this;
                if (N._lightChanged) {
                    N._lightChanged = !1;
                    var h = [], J = [], K = [];
                    N.dm().each(function (c) {
                        if (Wr(c)) {
                            var f = c.s("light.type");
                            f === yl ? h.push(c) : f === ir ? J.push(c) : f === ui && K.push(c)
                        }
                    }), (h.length !== N._59O.length || J.length !== N._spots.length || K.length !== N._dirs.length) && Ad(N), N._59O = h, N._spots = J, N._dirs = K
                }
                N._42(), N._1o.iv()
            },
            getRenderInfo: function () {
                var R = this.getGL();
                return R ? R._renderInfo : void 0
            },
            showDebugTip: function () {
                var J = this, r = J._debugDiv;
                if (!r) {
                    r = J._debugDiv = S.createElement("div"), r.style.position = "absolute", r.style.overflow = "hidden", r.style.backgroundColor = "white", r.style.color = "black";
                    var R = J.getView();
                    J._79O ? R.insertBefore(r, J._79O) : R.appendChild(r), J._debugTipTimerId = setInterval(function () {
                        var o = J.getRenderInfo();
                        if (o) {
                            var A = J.getGL()._bufPool, w = A.length - (A._ivCount || 0),
                                m = "Draw Calls: " + o.calls + "<br/>" + "Vertices: " + o.vertices + "<br/>" + "Faces: " + o.faces + "<br/>" + "Lines: " + o.lines + "<br/>" + "Buffer Count: " + w;
                            r.innerHTML = m
                        }
                    }, 10)
                }
            },
            hideDebugTip: function () {
                var m = this, M = m._debugDiv;
                M && (delete m._debugDiv, cancelAnimationFrame(m._debugTipTimerId), delete m._debugTipTimerId, m.getView().removeChild(M))
            },
            _42: function (B, I) {
                var F = this;
                if (!F._35O && (!_k || xi(_k))) {
                    var L, U;
                    B && (B instanceof Uq ? U = B : L = B);
                    var E = F._canvas, y = F.getWidth(), e = F.getHeight(), D = F.getGL(), o = F._prg;
                    if (D) {
                        I ? B || Sd(E, y, e, I) : (I = F._devicePixelRatio || ur, B || y === E.clientWidth && e === E.clientHeight || Sd(E, y, e, I)), D.clear(D.COLOR_BUFFER_BIT);
                        var s = function () {
                            if (D._renderInfo = {
                                calls: 0,
                                vertices: 0,
                                faces: 0,
                                lines: 0,
                                frame: ++F._frameId
                            }, F.overlappingBox.clear(), F._81O = c, D.clear(D.DEPTH_BUFFER_BIT), Kd(D, o.uBrightness, 1), Kd(D, o.uOpacity, 1), Kd(D, o.uPartOpacity, 1), D._picking = !!B, Kd(D, o.uPick, !!B), Kd(D, o.uTexture, !1), Kd(D, o.uBlendTexture, !1), Kd(D, o.uAlphaTest, j.alphaTest), Kd(D, o.uTransparent, !1), Kd(D, o.uFix, !1), Kd(D, o.uBatchColor, !1), Kd(D, o.uBatchBlend, !1), Kd(D, o.uBatchBrightness, !1), Kd(D, o.uPMatrix, F._projectMatrix = ao(F)), Kd(D, o.uViewMatrix, nd(F, F._7O)), F._viewMatrix = Do(F._7O), B || (mb(F, D, o), F._fogDisabled || (Kd(D, o.uFogColor, F._fogColor), Kd(D, o.uFogNear, F._fogNear), Kd(D, o.uFogFar, F._fogFar))), hm(D, o.aPosition), hm(D, o.aNormal), Jf(D, o.aUv), Jf(D, o.aBatchColor), Jf(D, o.aBatchBlend), Jf(D, o.aBatchBrightness), Jf(D, o.aLineDistance), U) {
                                var Q = D.getParameter(D.COLOR_CLEAR_VALUE);
                                D.clearColor(0, 0, 0, 0), D.disable(D.BLEND), Jf(D, o.aNormal), qd(D, F._cube.vs, c, o.aPosition), dp(D, F._cube.is), ak(U, F, Ch, 0), ak(U, F, Aj, 6), ak(U, F, Te, 12), ak(U, F, Hr, 18), ak(U, F, Gn, 24), ak(U, F, Qk, 30), hm(D, o.aNormal), Rl(D, Q)
                            } else if (L) {
                                L.value = 2;
                                var Q = D.getParameter(D.COLOR_CLEAR_VALUE);
                                D.clearColor(0, 0, 0, 0), D.disable(D.BLEND), F._95I(D, o, L), Ne(F, L), Sj(F, F._polylineModelMap, L), Sj(F, F._wireframeModelMap, L), Kd(D, o.uTransparent, !0), F._95I(D, o, L, !0), Ne(F, L, !0), Sj(F, F._polylineModelMap, L, !0), Sj(F, F._wireframeModelMap, L, !0), Kd(D, o.uTransparent, !1), D.clear(D.DEPTH_BUFFER_BIT), F._swapLineMap(), F._95I(D, o, L, !1, !0), Sj(F, F._polylineModelMap, L), Sj(F, F._wireframeModelMap, L), F._swapLineMap(), D.disable(D.DEPTH_TEST), F._30O._42(D, o, L), D.enable(D.DEPTH_TEST), Rl(D, Q)
                            } else D.disable(D.BLEND), F.drawSky(D, o), F._31O._42(D, o), F._95I(D, o), Ne(F), Sj(F, F._polylineModelMap), Sj(F, F._wireframeModelMap), D.enable(D.BLEND), Kd(D, o.uTransparent, !0), D.depthMask(!1), F._95I(D, o, c, !0), Ne(F, c, !0), Sj(F, F._polylineModelMap, c, !0), Sj(F, F._wireframeModelMap, c, !0), D.depthMask(!0), Kd(D, o.uTransparent, !1), D.clear(D.DEPTH_BUFFER_BIT), F._swapLineMap(), F._95I(D, o, c, !1, !0), Sj(F, F._polylineModelMap), Sj(F, F._wireframeModelMap), F._swapLineMap(), D.disable(D.DEPTH_TEST), D.disable(D.BLEND), F._32O._42(D, o), F._30O._42(D, o), D.enable(D.DEPTH_TEST);
                            qd(D, c), dp(D, c)
                        }, S = !1, N = y * I, n = e * I, Y = F.vr;
                        Y.enable && Y._42(D, N, n, s) && (S = !0);
                        var v = F.envRenderer;
                        v && v.enable && v._42(D, N, n, s) && (S = !0), S || (D.viewport(0, 0, y * I, e * I), s()), F._33Q = !1, F._doBufferGC(D)
                    }
                }
            },
            setBufferGCInterval: function (L) {
                this._bufferGCInterval = L
            },
            _doBufferGC: function (_, y) {
                var E = _._bufPool, k = E.length;
                if (k) {
                    var t, L, b = _._renderInfo.frame, Q = this._bufferGCInterval || 10, M = 0;
                    for (t = 0; k > t; t++) L = E[t], L ? (y || b - L._fid > Q) && (M++, _.deleteBuffer(L._buf), L._buf = null, E[t] = null) : M++;
                    if (M > k / 2 && M > 128) {
                        var R = [];
                        for (t = 0; k > t; t++) E[t] && R.push(E[t]);
                        _._bufPool = R
                    } else E._ivCount = M
                }
            },
            _swapLineMap: function () {
                var E = this;
                b = E._polylineModelMap, E._polylineModelMap = E._polylineModelMapSwap, E._polylineModelMapSwap = b, b = E._wireframeModelMap, E._wireframeModelMap = E._wireframeModelMapSwap, E._wireframeModelMapSwap = b, b = E._polylineIndexMap, E._polylineIndexMap = E._polylineIndexMapSwap, E._polylineIndexMapSwap = b, b = E._wireframeIndexMap, E._wireframeIndexMap = E._wireframeIndexMapSwap, E._wireframeIndexMapSwap = b
            },
            _updateSkyBoxPosition: function (l) {
                if (this._skyBox && l && "eye" === l.property) {
                    var x = l.newValue;
                    this._skyBox.p3(x[0], x[1], x[2]), this.invalidateData(this._skyBox)
                }
            },
            setSkyBox: function (E) {
                this._skyBox = E, this.ump(this._updateSkyBoxPosition, this), this.invalidateAll(), E && (this.mp(this._updateSkyBoxPosition, this), this._updateSkyBoxPosition())
            },
            drawSky: function (w, u, I) {
                var q = this, f = q._skyBox;
                if (f) {
                    var p = q._headlightIntensity, Q = Ao(q._headlightColor), u = q._prg;
                    1 !== p && (Q = [Q[0] * p, Q[1] * p, Q[2] * p]), Kd(w, u.uHeadlightColor, [Q[0], Q[1], Q[2], 1]);
                    var X = q.getData3dUI(f);
                    X && X._42(w, u, I, function () {
                        return !0
                    }), w.clear(w.DEPTH_BUFFER_BIT), Kd(w, u.uHeadlightColor, [Q[0], Q[1], Q[2], q._headlightDisabled ? 1 : 0])
                }
            },
            _95I: function (m, K, r, T, d) {
                function $(v) {
                    if (!!v.s("shape3d.alwaysOnTop") == !!d && z.isVisible(v) && (!V || L)) {
                        if (!r && z.isTransparentMask(v)) return;
                        var c = z.getData3dUI(v);
                        c && c._42(m, K, r, x)
                    }
                }

                var z = this, x = function (l) {
                    return T ? l : !l
                };
                z.sky && m.clear(m.DEPTH_BUFFER_BIT), z.dm().each($)
            },
            getLogicalPoint: function (K) {
                return xk(K, this._canvas)
            },
            isRectOverlapping: function (l) {
                var n = this.getData3dUI(l);
                return n._rectOverlapping
            },
            getHitFaceInfo: function (G) {
                G.target && (G = this.lp(G));
                var e = this.getDataInfoAt(G);
                if (e) {
                    var h = this._1o.face(e.data, Wn(G.x, G.y));
                    if (h) return {data: e.data, face: h}
                }
                return c
            },
            unproject: function (V, G) {
                var H = this, W = H.getWidth(), I = H.getHeight(), P = V.target ? H.lp(V) : V, j = P.x - W / 2,
                    F = P.y - I / 2, e = 2 * (j / W), U = 2 * (-1 * F / I);
                G = G || 0;
                var p = ic(), z = ao(H), D = nd(H);
                Ig(p, z, D), Fd(p);
                var A = yo([e, U, G, 1], p);
                return [A[0] / A[3], A[1] / A[3], A[2] / A[3]]
            },
            getDataAt: function (n) {
                var C = this.getDataInfoAt(n);
                return C ? C.data : c
            },
            getDataInfoAt: function (I, T) {
                return I.target && (I = this.lp(I)), this._1o.get(Wn(I.x, I.y, T), !0)
            },
            getDatasInRect: function (Z) {
                return this._1o.get(Z)
            },
            setEditable: function (w) {
                var H = this, U = H._editable;
                H._editable = w, this.fp(fr, U, w)
            },
            isEditable: function (W) {
                var v = this;
                return v._editable ? Ik(W) ? W.s("3d.editable") ? v._editableFunc ? v._editableFunc(W) : !0 : !1 : !1 : !1
            },
            isSelectable: function (l) {
                return l.s("3d.selectable") && this.sm().isSelectable(l)
            },
            isMovable: function (t) {
                var q = this;
                return gs(t) && t.getStyle(ms) !== ik ? !1 : t.s("3d.movable") ? q._movableFunc ? q._movableFunc(t) : !0 : !1
            },
            isSizeEditable: function (k) {
                return Ik(k) ? this._sizeEditableFunc ? this._sizeEditableFunc(k) : !0 : !1
            },
            isRotationEditable: function (S) {
                return Ik(S) && S.IRotatable !== !1 ? this._rotationEditableFunc ? this._rotationEditableFunc(S) : !0 : !1
            },
            handleDelete: function () {
                this._editable && this.removeSelection()
            },
            zoomIn: function ($) {
                this.setZoom(ib, $)
            },
            zoomOut: function (K) {
                this.setZoom(1 / ib, K)
            },
            setZoom: function (z, Y) {
                if (1 !== z) {
                    var s = this;
                    if (s._ortho) return s.setOrthoZoom(z, Y), void 0;
                    s._14o && s._14o.stop(!0);
                    var t = 1 / z, N = s._eye, q = s._center, D = q[0] + (N[0] - q[0]) * t - N[0],
                        _ = q[1] + (N[1] - q[1]) * t - N[1], K = q[2] + (N[2] - q[2]) * t - N[2];
                    if (!(Wg(N, q) < s._moveStep && 1 > t)) {
                        if (Y = ho(Y)) {
                            var Z = hh(N);
                            return Y.action = function (S) {
                                s.fi({kind: s._zooming ? "betweenZoom" : "beginZoom"}), s._zooming = 1, N[0] = Z[0] + D * S, N[1] = Z[1] + _ * S, N[2] = Z[2] + K * S, s.fp(Ap, c, N)
                            }, Y._37o = function () {
                                delete s._14o, delete s._zooming, s.fi({kind: "endZoom"}), s.onZoomEnded()
                            }, s._14o = Aq(Y)
                        }
                        N[0] += D, N[1] += _, N[2] += K, s.fp(Ap, c, N)
                    }
                }
            },
            setOrthoZoom: function (O, z) {
                if (1 !== O) {
                    var y = this;
                    y._14o && y._14o.stop(!0);
                    var t = y._orthoWidth, j = t / O - t;
                    if (!(t < y._moveStep && O > 1)) return (z = ho(z)) ? (z.action = function (P) {
                        y.fi({kind: y._zooming ? "betweenZoom" : "beginZoom"}), y._zooming = 1, y.setOrthoWidth(t + j * P)
                    }, z._37o = function () {
                        delete y._14o, delete y._zooming, y.fi({kind: "endZoom"}), y.onZoomEnded()
                    }, y._14o = Aq(z)) : (y.setOrthoWidth(t / O), void 0)
                }
            },
            getPositionInfo: function (o) {
                var D = this, d = D._eye, V = D._center, J = D.getAspect(),
                    p = o ? kb($k(V, d, !0), $k(o, d)) : Wg(d, V);
                if (D._ortho) {
                    var c = D._orthoWidth;
                    return {length: p, height: c / J, width: c}
                }
                var v = 2 * i(D._fovy / 2) * p;
                return {length: p, height: v, width: v * J}
            },
            getCenterInfo: function () {
                var o = this;
                return o._81O || (o._81O = o.getPositionInfo()), hh(o._81O)
            },
            rotate: function (E, J, o, V) {
                var S = this;
                if (E || J) {
                    V == c && (V = S._firstPersonMode), S._88O && S._88O.stop(!0);
                    var Z = S._center, k = S._eye, d = S.getCenterInfo().length, L = V ? Z : k, m = V ? k : Z,
                        F = $k(L, m), G = n(F[0], F[2]), M = n(s(F[0] * F[0] + F[2] * F[2]), F[1]), O = V ? ns : Ap;
                    return V && (J = -J), (o = ho(o)) ? (o.action = function (r) {
                        S.fi({kind: S._rotating ? "betweenRotate" : "beginRotate"}), S._rotating = 1;
                        var K = G + E * r, H = M + J * r;
                        H = ye(H), F[0] = d * C(H) * C(K), F[1] = d * D(H), F[2] = d * C(H) * D(K), L[0] = m[0] + F[0], L[1] = m[1] + F[1], L[2] = m[2] + F[2], S.fp(O, c, L)
                    }, o._37o = function () {
                        delete S._88O, delete S._rotating, S.fi({kind: "endRotate"}), S.onRotateEnded()
                    }, S._88O = Aq(o)) : (G += E, M += J, M = ye(M), F[0] = d * C(M) * C(G), F[1] = d * D(M), F[2] = d * C(M) * D(G), L[0] = m[0] + F[0], L[1] = m[1] + F[1], L[2] = m[2] + F[2], S.fp(O, c, L), void 0)
                }
            },
            pan: function ($, R, j, i) {
                if ($ || R) {
                    var J = this;
                    i == c && (i = J._firstPersonMode), J._89O && J._89O.stop(!0);
                    var U = nd(J), H = [U[0] * $, U[4] * $, U[8] * $], p = [U[1] * R, U[5] * R, U[9] * R],
                        b = H[0] + p[0], m = H[1] + p[1], D = H[2] + p[2], t = J._center, K = J._eye;
                    if (i) {
                        var M = nh(J.getBoundaries(), K[0], K[2], K[0] + b, K[2] + D, s(b * b + D * D));
                        b = M[0], D = M[1]
                    }
                    if (j = ho(j)) {
                        var N = hh(K), V = hh(t);
                        return j.action = function (A) {
                            J.fi({kind: J._panning ? "betweenPan" : "beginPan"}), J._panning = 1, t[0] = V[0] + b * A, t[1] = V[1] + m * A, t[2] = V[2] + D * A, K[0] = N[0] + b * A, K[1] = N[1] + m * A, K[2] = N[2] + D * A, J.fp(Ap, c, K), J.fp(ns, c, t)
                        }, j._37o = function () {
                            delete J._89O, delete J._panning, J.fi({kind: "endPan"}), J.onPanEnded()
                        }, J._89O = Aq(j)
                    }
                    t[0] += b, t[1] += m, t[2] += D, K[0] += b, K[1] += m, K[2] += D, J.fp(Ap, c, K), J.fp(ns, c, t)
                }
            },
            walk: function (z, N, o) {
                if (z) {
                    var p = this;
                    o == c && (o = p._firstPersonMode), p._90O && p._90O.stop(!0);
                    var j = p._center, J = p._eye, W = $k(j, J, !0);
                    if (o) {
                        var y = nh(p.getBoundaries(), J[0], J[2], J[0] + W[0] * z, J[2] + W[2] * z, I(z));
                        if (z = Wg(y), !z) return;
                        W = [y[0] / z, 0, y[1] / z]
                    }
                    if (N = ho(N)) {
                        var w = hh(J), Z = hh(j);
                        return N.action = function (y) {
                            p.fi({kind: p._walking ? "betweenWalk" : "beginWalk"}), p._walking = 1;
                            var o = z * y;
                            J[0] = w[0] + W[0] * o, J[1] = w[1] + W[1] * o, J[2] = w[2] + W[2] * o, j[0] = Z[0] + W[0] * o, j[1] = Z[1] + W[1] * o, j[2] = Z[2] + W[2] * o, p.fp(Ap, c, J), p.fp(ns, c, j)
                        }, N._37o = function () {
                            delete p._90O, delete p._walking, p.fi({kind: "endWalk"}), p.onWalkEnded()
                        }, p._90O = Aq(N)
                    }
                    J[0] += W[0] * z, J[1] += W[1] * z, J[2] += W[2] * z, j[0] += W[0] * z, j[1] += W[1] * z, j[2] += W[2] * z, p.fp(Ap, c, J), p.fp(ns, c, j)
                }
            },
            handleScroll: function (e, L) {
                e.preventDefault();
                var I = this, x = I._moveStep;
                I.isFirstPersonMode() ? I.isPannable() && I.pan(0, L > 0 ? x : -x) : I.isZoomable() && I.setZoom(0 > L ? 1 / He : He)
            },
            handlePinch: function (B, E) {
                this.isZoomable() && this.setZoom(E > B ? 1 / Ed : Ed)
            },
            reset: function () {
                this.setCenter(F.graph3dViewCenter), this.setEye(F.graph3dViewEye), this.setUp(F.graph3dViewUp)
            },
            moveSelection: function (j, T, s) {
                var E = this;
                E.dm().beginTransaction(), Pr(this.sm().toSelection(this.isMovable, this), j, T, s), E.dm().endTransaction()
            },
            getMoveMode: function (c, N) {
                var y = N.s("3d.move.mode");
                if (y) return y;
                var M = "88", w = "89", R = "90";
                return Mp(c) || Xh[M] && Xh[w] && Xh[R] ? "xyz" : Xh[M] && Xh[w] ? "xy" : Xh[M] && Xh[R] ? "xz" : Xh[w] && Xh[R] ? "yz" : Xh[M] ? "x" : Xh[w] ? "y" : Xh[R] ? "z" : "xz"
            },
            handleTick: function () {
                var n = this, D = !1, l = n._moveStep, B = l, p = !1, w = !0, K = n._rotateStep * (w ? -1 : 1);
                if (n.isWalkable() || (B = 0), n.isPannable() || (l = 0), n.isRotatable() || (K = 0), n._32Q) {
                    var e = (Rc() - n._32Q) / 50;
                    B *= e, l *= e, K *= e
                }
                n._31Q && (Ip(n._31Q), delete n._31Q, delete n._32Q), Yb() && (D = !0, n.pan(-l, 0, p, w)), Zj() && (D = !0, n.pan(l, 0, p, w)), wf() && (D = !0, Mp() ? n.pan(0, l, p, w) : n.walk(B, p, w)), _l() && (D = !0, Mp() ? n.pan(0, -l, p, w) : n.walk(-B, p, w)), xr() && (D = !0, n.rotate(-K, 0, p, w)), po() && (D = !0, n.rotate(K, 0, p, w)), Mj() && (D = !0, n.rotate(0, -K / 2, p, w)), qc() && (D = !0, n.rotate(0, K / 2, p, w)), D && (n._32Q = Rc(), n._31Q = Np(n.handleTick, n))
            },
            handleKeyDown: function (s) {
                var n = this;
                !Ag(s) && ol[s.keyCode] ? n.handleTick() : Am(s) ? n.selectAll() : sj(s) ? n.handleDelete(s) : Bq(s) && this.isResettable() && n.reset()
            },
            checkDoubleClickOnNote: function (P, x, s) {
                var G = this;
                if (s === Sl) {
                    if (x.s("note.toggleable")) return x.s(ok, !x.s(ok)), G.fi({
                        kind: "toggleNote",
                        event: P,
                        data: x,
                        part: s
                    }), !0
                } else if (s === oe && x.s("note2.toggleable")) return x.s(Tl, !x.s(Tl)), G.fi({
                    kind: "toggleNote2",
                    event: P,
                    data: x,
                    part: s
                }), !0;
                return !1
            },
            checkDoubleClickOnRotation: function (p, R, q) {
                return q === Dh ? (R.setRotationX(0), !0) : q === _n ? (R.setRotationY(0), !0) : q === zf ? (R.setRotationZ(0), !0) : !1
            },
            onRotateEnded: function () {
            },
            onWalkEnded: function () {
            },
            toViewPosition: function (j) {
                var U = this, M = U.getWidth() / 2, V = U.getHeight() / 2, v = U._18Q;
                return v && v._wh === M / V || (v = ao(U), U._18Q = Ig(v, v, nd(U)), U._18Q._wh !== M / V), j = yo([j[0], j[1], j[2], 1], v), {
                    x: M + M * j[0] / j[3],
                    y: V - V * j[1] / j[3]
                }
            },
            getHitPosition: function ($, J, A) {
                var k = this, n = k.getWidth(), h = k.getHeight(), L = $.target ? k.lp($) : $, C = L.x - n / 2,
                    X = L.y - h / 2, x = k.getCenterInfo(), I = nd(k);
                J = J ? J : [0, 0, 0], A = A ? A : [0, 1, 0], C = C / n * x.width, X = -1 * X / h * x.height;
                var v = [I[0] * C, I[4] * C, I[8] * C], e = [I[1] * X, I[5] * X, I[9] * X],
                    u = [v[0] + e[0], v[1] + e[1], v[2] + e[2]], f = k.getCenter(),
                    y = ul(k, J, A, [u[0] + f[0], u[1] + f[1], u[2] + f[2]]);
                return y ? y : [0, 0, 0]
            },
            intersectObject: function (s, N) {
                return this._raycaster.intersectObject(s, N)
            },
            getLineLength: function (H) {
                this.validate();
                var G = this.getData3dUI(H);
                if (G && G.getCache) {
                    var w = G.getCache();
                    if (w) return w[w.length - 1].length
                }
                return 0
            },
            getLineOffset: function (a, R) {
                var U = this.getData3dUI(a);
                if (U && U.getCache) {
                    var H = U.getCache();
                    if (H) return nq(H, R)
                }
                return c
            },
            isLabelVisible: function () {
                return !0
            },
            isNoteVisible: function () {
                return !0
            },
            flyTo: function () {
                function Q(N, O, l) {
                    S.fromArray(mh(l, O.getMat(l)));
                    var F = l.getAnchor3d();
                    N.push((new Lo).set(0 - F.x, 0 - F.y, 0 - F.z).applyMatrix4(S)), N.push((new Lo).set(0 - F.x, 0 - F.y, 1 - F.z).applyMatrix4(S)), N.push((new Lo).set(0 - F.x, 1 - F.y, 0 - F.z).applyMatrix4(S)), N.push((new Lo).set(0 - F.x, 1 - F.y, 1 - F.z).applyMatrix4(S)), N.push((new Lo).set(1 - F.x, 0 - F.y, 0 - F.z).applyMatrix4(S)), N.push((new Lo).set(1 - F.x, 0 - F.y, 1 - F.z).applyMatrix4(S)), N.push((new Lo).set(1 - F.x, 1 - F.y, 0 - F.z).applyMatrix4(S)), N.push((new Lo).set(1 - F.x, 1 - F.y, 1 - F.z).applyMatrix4(S))
                }

                var l = new Lo, r = new Lo, I = new Lo, v = new Lo, S = new Xi, f = new t.Math.Quaternion;
                return function (A, z, m) {
                    var b = this;
                    if (m !== $) z = {animation: z, ratio: m}; else {
                        var S = typeof z;
                        ("boolean" === S || "object" === S && z.duration) && (z = {animation: z})
                    }
                    z = z || {}, l.fromArray(b.getEye()), r.fromArray(b.getCenter());
                    var E, C, i = [], j = z.center, F = z.distance === $;
                    if (j && I.fromArray(j), A instanceof t.Node) j || I.fromArray(A.p3()), F && (Q(i, b, A), E = i.length); else {
                        if (A || (A = b.dm().getDatas()), !A.length) return;
                        if ((F || !j) && (i = [], A.forEach(function (J) {
                            Q(i, b, J)
                        }), E = i.length), !j) {
                            for (I.set(0, 0, 0), C = 0; E > C; C++) I.add(i[C]);
                            I.multiplyScalar(1 / E)
                        }
                    }
                    if (b.setCenter(I.x, I.y, I.z), v.subVectors(l, r), z.direction || z.worldDirection) {
                        !z.worldDirection && A instanceof t.Node ? f.setFromEuler(A.r3(), A.getRotationMode()) : f.set(0, 0, 0, 1);
                        var O = v.length();
                        v.fromArray(z.worldDirection || z.direction).applyQuaternion(f).setLength(O)
                    }
                    if (F) {
                        for (var w, K, M, Y, G, x = b.getNear(), c = 10, m = z.ratio || .8; c--;) {
                            for (b._eye[0] = v.x + I.x, b._eye[1] = v.y + I.y, b._eye[2] = v.z + I.z, w = ao(b), Ig(w, w, nd(b)), Y = !0, G = -1 / 0, C = 0; E > C; C++) {
                                if (M = i[C], K = yo([M.x, M.y, M.z, 1], w), K[3] < x && c) {
                                    v.multiplyScalar(2), Y = !1;
                                    break
                                }
                                G = Math.max(G, Math.max(Math.abs(K[0]), Math.abs(K[1])) / m - K[3])
                            }
                            if (Y) break
                        }
                        v.setLength(G + v.length()).add(I)
                    } else v.setLength(z.distance).add(I);
                    b._flyAnim && b._flyAnim.stop(!0);
                    var U = ho(z.animation);
                    if (U) {
                        b.setEye(l.x, l.y, l.z), b.setCenter(r.x, r.y, r.z);
                        var n = (new Lo).subVectors(v, l), k = (new Lo).subVectors(I, r), B = new Lo, J = new Lo;
                        return U.action = function (m) {
                            B.copy(l).addScaledVector(n, m), J.copy(r).addScaledVector(k, m), b.setCenter(J.x, J.y, J.z), b.setEye(B.x, B.y, B.z)
                        }, U._37o = function () {
                            delete b._flyAnim
                        }, {lastEye: l, lastCenter: r, eye: v, center: I, animation: b._flyAnim = Aq(U)}
                    }
                    return b.setEye(v.x, v.y, v.z), {lastEye: l, lastCenter: r, eye: v, center: I}
                }
            }()
        }), Ol.RenderEnv = function (F) {
            this.gv = F, this.enable = !1
        }, v.defineProperties(Ol.RenderEnv.prototype, {
            debugOn: {
                get: function () {
                    return this._debugOn
                }, set: function (F) {
                    this._debugOn = F, this.capture && this.capture()
                }
            }
        }), v.assign(Ol.RenderEnv.prototype, {
            renderEnvToCube: function (S, e, K, j) {
                var w = this, F = w.gv;
                if (!S || !e || !K) return w.enable = !1, w._42 = null, void 0;
                w.enable = !0;
                var x = Math.floor(j / S * e), C = F.getGL(), U = w._renderTargets;
                U ? U.length < K && (U = w._renderTargets = U.concat(new Array(K - U.length))) : U = w._renderTargets = new Array(K);
                for (var V = 0; K > V; V++) U[V] ? U[V].setSize(C, j, x) : U[V] = new Ol.RenderTarget(F, C, j, x);
                var E = !1;
                w.capture = function () {
                    E = !0, F._42(), E = !1
                };
                var D = new Lo, l = new Lo, J = new Lo, n = new Lo, Y = (new Lo).setY(0), u = 2 * Math.PI / K,
                    f = S / 2 / Math.tan(Math.PI / K), W = 2 * Math.atan2(e / 2, f), B = S / e;
                w._42 = function (p, N, j, m) {
                    var H = w._debugOn;
                    if (!E && !H) return !1;
                    D.copy(F.getEye()), n.copy(F.getCenter()).sub(D);
                    var X = Math.atan2(n.z, n.x), C = F.getNear(), k = F.getFovy(), o = F.getAspect();
                    l.copy(F.getCenter());
                    for (var z, L = 0; K > L; L++) if (z = U[L], Y.setZ(Math.cos(X)).setX(Math.sin(X)).multiplyScalar(f), X -= u, J.addVectors(D, Y), F.setNear(f), F.setCenter([J.x, J.y, J.z]), F.setFovy(W), F.setAspect(B), H) {
                        var y = Math.round(N / K);
                        p.viewport(y * L, 0, y, j), m()
                    } else jg(p, z.frame), p.viewport(0, 0, z.width, z.height), p.clear(p.COLOR_BUFFER_BIT), m(), jg(p, c), z.assureTexture();
                    return F.setNear(C), F.setCenter([l.x, l.y, l.z]), F.setFovy(k), F.setAspect(o), !0
                }, w.capture()
            }, getTextureInfo: function (n) {
                var f = this._renderTargets;
                if (!f) return null;
                var R = this._renderTargets[n];
                return R ? {index: n, texture: R.texture, textureName: R.uuid} : null
            }
        }), v.assign(Ol.Graph3dView.prototype, {
            renderEnvToCube: function (e, J, Q, l) {
                var n = this;
                n.envRenderer || (n.envRenderer = new Ol.RenderEnv(n)), n.envRenderer.renderEnvToCube(e, J, Q, l)
            }
        }), Ol.RenderTarget = function (M, q, u, $) {
            var y = this;
            y.uuid = t.Math.generateUUID(), y.gv = M, y.init(M, q), y.setSize(q, u, $)
        }, v.assign(Ol.RenderTarget.prototype, {
            init: function (b, a) {
                var M = this, K = M.texture = a.createTexture();
                a.activeTexture(a.TEXTURE0), a.bindTexture(a.TEXTURE_2D, K), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.NEAREST), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.NEAREST), a.bindTexture(a.TEXTURE_2D, null), M.render = a.createRenderbuffer(), M.frame = a.createFramebuffer(), b._2O[M.uuid] = K
            }, assureTexture: function () {
                var b = this, w = b.uuid, V = b.gv._2O;
                V[w] || (V[w] = b.texture)
            }, setSize: function (J, W, y) {
                var g = this;
                if (g.width !== W || g.height !== y) {
                    var t = J.RGBA, i = J.TEXTURE_2D, j = J.RENDERBUFFER, B = J.FRAMEBUFFER;
                    No(J, g.texture), J.texImage2D(i, 0, t, W, y, 0, t, J.UNSIGNED_BYTE, c), Gf(J, J.TEXTURE_MIN_FILTER, J.LINEAR), J.bindRenderbuffer(j, g.render), J.renderbufferStorage(j, J.DEPTH_COMPONENT16, W, y), jg(J, g.frame), J.framebufferTexture2D(B, J.COLOR_ATTACHMENT0, i, g.texture, 0), J.framebufferRenderbuffer(B, J.DEPTH_ATTACHMENT, j, g.render), No(J, c), J.bindRenderbuffer(j, c), jg(J, c), g.width = W, g.height = y
                }
            }, toCanvas: function () {
                var l = this, G = l.gv.getGL();
                G.bindFramebuffer(G.FRAMEBUFFER, l.frame);
                var q = l.width, g = l.height, R = new Uint8Array(4 * q * g);
                G.readPixels(0, 0, q, g, G.RGBA, G.UNSIGNED_BYTE, R), G.bindFramebuffer(G.FRAMEBUFFER, null);
                var h = S.createElement("canvas");
                h.width = q, h.height = g;
                var b = h.getContext("2d"), J = b.createImageData(q, g);
                return J.data.set(R), b.putImageData(J, 0, 0), h
            }
        });
        var gi = Ol.Interactor = function (r) {
            this.gv = r
        };
        us("Interactor", v, {
            ms_listener: 1, getView: function () {
                return this.gv.getView()
            }, setUp: function () {
                this.addListeners()
            }, tearDown: function () {
                this.removeListeners()
            }
        });
        var ko = Ol.DefaultInteractor = function (c) {
            Mr(ko, this, [c])
        };
        us("DefaultInteractor", gi, {
            handle_contextmenu: function (B) {
                mq(B)
            }, handle_mousewheel: function (t) {
                this.gv.handleScroll(t, t.wheelDelta / 40)
            }, handle_DOMMouseScroll: function (G) {
                2 === G.axis && this.gv.handleScroll(G, -G.detail)
            }, handle_keydown: function (R) {
                this.gv.handleKeyDown(R)
            }, handle_mousedown: function (C) {
                this.handle_touchstart(C)
            }, handle_touchstart: function (E) {
                mq(E);
                var Y = this, L = Y.gv, y = fj(E), l = L.getDataInfoAt(E), Z = l ? l.data : c, W = l ? l.part : c,
                    R = L.sm(), q = Ho(E), v = tb(E);
                L.setFocus(E) && (Y._62O = c, Y._57I = c, Z ? Ag(E) ? R.co(Z) ? R.rs(Z) : R.as(Z) : R.co(Z) || R.ss(Z) : y && (Ag(E) ? L.isRectSelectable() && (Y._62O = Wc) : Y._57I = cc(E)), Y._31Q && (Ip(Y._31Q), delete Y._31Q, delete Y._32Q), Y._62O || (L.isFirstPersonMode() && (Mp(E) || v > 2 ? Y._62O = "pan" : L.isMouseRoamable() || jp ? (Y._62O = "roaming", Y.foward = q && fj(E), Y._32Q = Rc(), Y._31Q = Np(Y.tick, Y)) : y || (Y._62O = "roaming")), Y._62O || (y && q && ni[W] ? (Y._62O = W, Y.p3 = Z.p3()) : y && q && Ik(Z) && L.isSelected(Z) ? L.isMovable(Z) ? (Y._62O = "move", Y.p3 = Z.p3(), Y.movedata = Z) : L.isInteractive(Z) && (Y._62O = "none") : jp && (v > 2 ? Y._62O = "pan" : 2 === v && (Y.dist = fp(E), Y._62O = "pinch")))), Y.point = L.lp(E), oc(Y, E), Ei(E) ? L.handleDoubleClick(E, Z, W) : L.handleClick(E, Z, W))
            }, tick: function () {
                var l = this, H = l.gv, r = H._moveStep;
                l.point && H.isWalkable() && (l._32Q && (r *= (Rc() - l._32Q) / 50), H.walk(l.foward ? r : -r), l._32Q = Rc(), l._31Q = Np(l.tick, l))
            }, handle_mouseup: function (N) {
                this.handle_touchend(N)
            }, handle_touchend: function (o) {
                var n = this._57I;
                n && (Wg(n, cc(o)) <= 1 && this.gv.sm().cs(), this._57I = c)
            }, handleWindowMouseMove: function (c) {
                this.handleWindowTouchMove(c)
            }, handleWindowTouchMove: function (f) {
                var Y, G, X = this, L = X.gv, E = X._62O, o = X.point, s = L.dm(), n = L.lp(f), Q = n.x - o.x,
                    i = n.y - o.y, H = -k * Q / L.getWidth(), T = -k * i / L.getHeight();
                if ("roaming" === E) X.rotate(f, H / 2, T / 2); else if (E === Dh || E === _n || E === zf) L._86O || s.beginTransaction(), L.fi({
                    kind: L._86O ? "betweenEditRotation" : "beginEditRotation",
                    event: f
                }), L._86O = 1, L.sm().each(function (d) {
                    if (Ik(d) && L.isRotationEditable(d)) {
                        var b = I(H) > I(T) ? H : T;
                        E === Dh ? d.setRotationX(d.getRotationX() + b) : E === _n ? d.setRotationY(d.getRotationY() + b) : E === zf && d.setRotationZ(d.getRotationZ() + b)
                    }
                }); else if ("move" === E || ni[E]) {
                    E === ls || E === $j || E === Im ? (L._87O || s.beginTransaction(), L.fi({
                        kind: L._87O ? "betweenEditSize" : "beginEditSize",
                        event: f
                    }), L._87O = 1) : (L._moving || s.beginTransaction(), L.fi({
                        kind: L._moving ? "betweenMove" : "beginMove",
                        event: f
                    }), L._moving = 1);
                    var r, j = X.p3, C = L.getPositionInfo(j), U = nd(L);
                    r = E === ve ? "x" : E === Yc ? "y" : E === hs ? "z" : E === ls ? "sx" : E === $j ? "sy" : E === Im ? "sz" : L.getMoveMode(f, X.movedata), Q = Q / L.getWidth() * C.width, i = -1 * i / L.getHeight() * C.height;
                    var q, y, F = [U[0] * Q, U[4] * Q, U[8] * Q], $ = [U[1] * i, U[5] * i, U[9] * i], _ = F[0] + $[0],
                        M = F[1] + $[1], O = F[2] + $[2], p = [j[0] + _, j[1] + M, j[2] + O], c = $k(L.getEye(), p, !0);
                    if ("xyz" === r ? (q = p, L.moveSelection(_, M, O)) : "xz" === r ? (q = ul(L, j, [0, 1, 0], p), q && L.moveSelection(q[0] - j[0], 0, q[2] - j[2])) : "xy" === r ? (q = ul(L, j, [0, 0, 1], p), q && L.moveSelection(q[0] - j[0], q[1] - j[1], 0)) : "yz" === r ? (q = ul(L, j, [1, 0, 0], p), q && L.moveSelection(0, q[1] - j[1], q[2] - j[2])) : "x" === r || "sx" === r ? (c[0] = 0, q = ul(L, j, c, p), q && (y = q[0] - j[0], "x" === r ? L.moveSelection(y, 0, 0) : L.sm().each(function (I) {
                        Ik(I) && L.isSizeEditable(I) && (Y = I.getScaleX() + y / 100, G = Y / I.getScaleX(), I.setScaleX(Y), Mp(f) && (I.setScaleY(I.getScaleY() * G), I.setScaleTall(I.getScaleTall() * G)))
                    }))) : "y" === r || "sy" === r ? (c[1] = 0, q = ul(L, j, c, p), q && (y = q[1] - j[1], "y" === r ? L.moveSelection(0, y, 0) : L.sm().each(function (m) {
                        Ik(m) && L.isSizeEditable(m) && (Y = m.getScaleTall() + y / 100, G = Y / m.getScaleTall(), m.setScaleTall(Y), Mp(f) && (m.setScaleY(m.getScaleY() * G), m.setScaleX(m.getScaleX() * G)))
                    }))) : ("z" === r || "sz" === r) && (c[2] = 0, q = ul(L, j, c, p), q && (y = q[2] - j[2], "z" === r ? L.moveSelection(0, 0, y) : L.sm().each(function (A) {
                        Ik(A) && L.isSizeEditable(A) && (Y = A.getScaleY() + y / 100, G = Y / A.getScaleY(), A.setScaleY(Y), Mp(f) && (A.setScaleX(A.getScaleX() * G), A.setScaleTall(A.getScaleTall() * G)))
                    }))), !q) return;
                    X.p3 = q
                } else if (E === Wc) {
                    var d = X.div;
                    d || (d = X.div = Gl(), Vo(X.getView(), d), d.op = o, d.style.background = L.getRectSelectBackground()), L.fi({
                        kind: L._rectSelecting ? "betweenRectSelect" : "beginRectSelect",
                        event: f
                    }), L._rectSelecting = 1, d.rect = sd(d.op, n), Ee(d, d.rect)
                } else if ("pinch" === E && 2 === tb(f)) {
                    L.fi({kind: L._pinching ? "betweenPinch" : "beginPinch", event: f}), L._pinching = 1;
                    var y = fp(f);
                    L.handlePinch(y, X.dist), X.dist = y
                } else "pan" === E || Mp(f) ? X.pan(f, Q, i) : "none" === E || L.isFirstPersonMode() || (fj(f) ? X.rotate(f, H, T) : (X.pan(f, Q, 0), L.isWalkable() && (L.fi({
                    kind: L._walking ? "betweenWalk" : "beginWalk",
                    event: f
                }), L._walking = 1, L.walk(i / L.getHeight() * L.getCenterInfo().height))));
                X.point = n
            }, pan: function (y, K, c) {
                var V = this.gv;
                if (V.isPannable()) {
                    var R = V.getCenterInfo(), A = K / V.getWidth() * R.width, b = -1 * c / V.getHeight() * R.height;
                    V.fi({kind: V._panning ? "betweenPan" : "beginPan", event: y}), V._panning = 1, V.pan(-A, -b)
                }
            }, rotate: function (c, s, g) {
                var j = this.gv;
                j.isRotatable() && (j.fi({
                    kind: j._rotating ? "betweenRotate" : "beginRotate",
                    event: c
                }), j._rotating = 1, j.rotate(s, g))
            }, handleWindowMouseUp: function (R) {
                this.handleWindowTouchEnd(R)
            }, handleWindowTouchEnd: function (z) {
                var f = this, F = f.gv, L = F.dm(), B = f.div;
                if (B) {
                    var A = F.getDatasInRect(B.rect);
                    if (!A.isEmpty()) {
                        var v = F.sm(), m = v.toSelection();
                        A.each(function (E) {
                            v.co(E) ? m.remove(E) : m.add(E)
                        }), v.ss(m)
                    }
                    zm(B)
                }
                F._moving && (delete F._moving, F.fi({
                    kind: "endMove",
                    event: z
                }), F.onMoveEnded(), L.endTransaction()), F._panning && (delete F._panning, F.fi({
                    kind: "endPan",
                    event: z
                }), F.onPanEnded()), F._rotating && (delete F._rotating, F.fi({
                    kind: "endRotate",
                    event: z
                }), F.onRotateEnded()), F._86O && (delete F._86O, F.fi({
                    kind: "endEditRotation",
                    event: z
                }), L.endTransaction()), F._87O && (delete F._87O, F.fi({
                    kind: "endEditSize",
                    event: z
                }), L.endTransaction()), F._pinching && (delete F._pinching, F.fi({
                    kind: "endPinch",
                    event: z
                }), F.onPinchEnded()), F._rectSelecting && (delete F._rectSelecting, F.fi({
                    kind: "endRectSelect",
                    event: z
                }), F.onRectSelectEnded()), F._walking && (delete F._walking, F.fi({
                    kind: "endWalk",
                    event: z
                }), F.onWalkEnded()), f.dist = f.point = f._62O = f.p3 = f.movedata = f.div = f._57I = f._32Q = f._31Q = f.foward = c
            }
        });
        var Zd = Ol.MapInteractor = function (M) {
            Mr(Zd, this, [M]), this._minPhi = 0, this._maxPhi = 5 * u / 12, this._keepHorizon = !0, this._threshold = 2, this._touchScaleThreshold = .05, this._touchRotateThreshold = .03, this._touchScaleCheckAccuracy = .01
        };
        us("MapInteractor", gi, {
            handle_contextmenu: function (M) {
                mq(M)
            }, handle_mousewheel: function (D) {
                this.gv.handleScroll(D, D.wheelDelta / 40)
            }, handle_DOMMouseScroll: function (N) {
                2 === N.axis && this.gv.handleScroll(N, -N.detail)
            }, handle_keydown: function (t) {
                this.gv.handleKeyDown(t)
            }, handle_mousedown: function (v) {
                this.handle_touchstart(v)
            }, handle_touchstart: function (I) {
                mq(I);
                var F = this, d = F.gv;
                if (d.setFocus(I)) {
                    d.lp(I);
                    var Q = d.getDataInfoAt(I), t = Q ? Q.data : c, K = Q ? Q.part : c;
                    if (!t || !d.isInteractive(t)) {
                        var C = F.editing = {point: d.lp(I)};
                        jp ? C.touch = !0 : (C.touch = !1, C.pan = fj(I)), oc(F, I)
                    }
                    Ei(I) ? d.handleDoubleClick(I, t, K) : d.handleClick(I, t, K)
                }
            }, handle_mouseup: function (W) {
                this.handle_touchend(W)
            }, handle_touchend: function () {
            }, handleWindowMouseMove: function (e) {
                this.handleWindowTouchMove(e)
            }, handleWindowTouchMove: function (r) {
                var e = this, Q = e.gv, D = e.editing;
                if (D) {
                    var $ = Q.lp(r), f = D.point, F = $.x - f.x, a = $.y - f.y;
                    if (!D.moved) {
                        if (Math.abs(F) < e.threshold && Math.abs(a) < e.threshold && !(r.touches && r.touches.length > 1)) return;
                        D.moved = !0
                    }
                    if (D.point = $, D.touch) {
                        var B = r.touches.length;
                        if (2 !== B) e.pan(r, F, a); else {
                            if (1 >= B) return;
                            var n = r.touches, y = {x: n[0].clientX, y: n[0].clientY},
                                x = {x: n[1].clientX, y: n[1].clientY}, b = {x: x.x - y.x, y: x.y - y.y},
                                j = D.lastCenter, v = Math.atan2(b.y, b.x), Y = D.theta, H = 0;
                            Y == c ? Y = D.theta = v : (H = v - Y, D.thetaStarted || Math.abs(H) > e.touchRotateThreshold ? (D.thetaStarted = !0, D.theta = v) : H = 0);
                            var R = u * (y.y + x.y) / 2 / Q.getHeight(), S = D.phi, p = 0;
                            S == c ? S = D.phi = R : (p = R - S, D.phiStarted || Math.abs(p) > e.touchRotateThreshold ? (D.phiStarted = !0, D.phi = R) : p = 0);
                            var q, o = Math.sqrt(b.x * b.x + b.y * b.y), K = D.vlen;
                            if (K) {
                                var W = y.x - j.x, E = y.y - j.y, J = x.x - j.x, N = x.y - j.y,
                                    M = Math.sqrt(W * W + E * E), A = Math.sqrt(J * J + N * N), G = K / 2,
                                    w = e._sign2(M - G), h = e._sign2(A - G);
                                0 > w * h || 0 === w && 0 === h ? (q = 1, D.vlen = o) : (q || (q = o / K), D.scaleStarted || Math.abs(q - 1) > e.touchScaleThreshold ? (D.vlen = o, D.scaleStarted = !0) : q = 1)
                            } else K = D.vlen = o, q = 1;
                            1 !== q && Q.setZoom(q), (p || H) && e.rotate(r, H, -p), D.lastCenter = {
                                x: (x.x + y.x) / 2,
                                y: (x.y + y.y) / 2
                            }
                        }
                    } else if (D.pan) e.pan(r, F, a); else {
                        var m = -k * F / Q.getWidth(), i = -k * a / Q.getHeight();
                        e.rotate(r, m, i)
                    }
                }
            }, _sign2: function (b) {
                return Math.abs(b) < this._touchScaleCheckAccuracy ? 0 : b > 0 ? 1 : -1
            }, handleWindowMouseUp: function (W) {
                this.handleWindowTouchEnd(W)
            }, handleWindowTouchEnd: function (o) {
                var Q = this, L = Q.editing;
                if (Q.editing = null, L) {
                    var s = Q.gv;
                    if (!L.moved && L.pan) {
                        var i = s.getDataAt(o);
                        i ? s.sm().setSelection([i]) : s.sm().clearSelection()
                    } else s._panning = null, s._rotating = null, s.fi({kind: L.pan ? "endPan" : "endRotate", event: o})
                }
            }, pan: function (v, D, C) {
                var $ = this, N = $.gv;
                if (N.isPannable()) {
                    var q = N.getCenterInfo(), O = -D / N.getWidth() * q.width, e = 1 * C / N.getHeight() * q.height;
                    N.fi({kind: N._panning ? "betweenPan" : "beginPan", event: v}), N._panning = 1;
                    var I = $.keepHorizon, B = $.editing.touch;
                    if ((B && v.touches && v.touches.length > 1 || !B && Mp(v)) && (I = !I), !I) return N.pan(O, e);
                    if (O || e) {
                        var h = nd(N), P = [h[0] * O, h[4] * O, h[8] * O], R = [h[1], 0, h[9]],
                            m = Math.sqrt(R[0] * R[0] + R[2] * R[2]);
                        m && (R = [R[0] / m * e, 0, R[2] / m * e]);
                        var G = P[0] + R[0], z = P[1] + R[1], p = P[2] + R[2], Y = N._center, U = N._eye;
                        Y[0] += G, Y[1] += z, Y[2] += p, U[0] += G, U[1] += z, U[2] += p, N.fp(Ap, c, U), N.fp(ns, c, Y)
                    }
                }
            }, rotate: function (y, O, m) {
                var T = this, x = T.gv;
                if (x.isRotatable()) {
                    var R = x._center, J = x._eye, j = $k(J, R), H = n(s(j[0] * j[0] + j[2] * j[2]), j[1]), k = H + m;
                    k = Math.max(T.minPhi, Math.min(T.maxPhi, k)), m = k - H, x.fi({
                        kind: x._rotating ? "betweenRotate" : "beginRotate",
                        event: y
                    }), x._rotating = 1, x.rotate(O, m)
                }
            }
        }), v.defineProperties(Zd.prototype, {
            minPhi: {
                get: function () {
                    return this._minPhi
                }, set: function (S) {
                    this._minPhi = S
                }
            }, maxPhi: {
                get: function () {
                    return this._maxPhi
                }, set: function (Z) {
                    this._maxPhi = Z
                }
            }, keepHorizon: {
                get: function () {
                    return this._keepHorizon
                }, set: function (x) {
                    this._keepHorizon = x
                }
            }, threshold: {
                get: function () {
                    return this._threshold
                }, set: function (Z) {
                    this._threshold = Z
                }
            }, touchScaleThreshold: {
                get: function () {
                    return this._touchScaleThreshold
                }, set: function (A) {
                    this._touchScaleThreshold = A
                }
            }, touchRotateThreshold: {
                get: function () {
                    return this._touchRotateThreshold
                }, set: function (m) {
                    this._touchRotateThreshold = m
                }
            }
        });
        var sh = function (E) {
            this.gv = E
        };
        fs(sh, v, {
            _iv: !0, iv: function () {
                this._iv = !0
            }, face: function (U, D) {
                var G = this, x = G.gv.getGL();
                if (!x || !Ik(U)) return c;
                var N = D.x, a = D.width, $ = D.height, b = G.height - D.y - $, R = Q(a / 2),
                    K = new Uint8Array(4 * a * $), m = 0;
                for (G.iv(), G.validate(U), jg(x, G.frame), x.readPixels(N, b, a, $, x.RGBA, x.UNSIGNED_BYTE, K), jg(x, c), G.iv(); R >= m; m++) for (var z = R - m, X = R + m, g = z; X >= g; g++) for (var v = z; X >= v; v++) if (g === z || g === X || v === z || v === X) {
                    var B = Br.m[K[4 * (g * a + v)]];
                    if (B) return B
                }
            }, get: function (M, s) {
                this.validate();
                var i = this, e = i.gv.getGL();
                if (!e) return c;
                var d, P, T = M.x, w = M.width, y = M.height, n = i.height - M.y - y, q = Q(w / 2),
                    C = new Uint8Array(4 * w * y), O = 0, D = C.length, E = s ? c : new vp, $ = s ? c : {};
                if (jg(e, i.frame), e.readPixels(T, n, w, y, e.RGBA, e.UNSIGNED_BYTE, C), jg(e, c), s) {
                    for (; q >= O; O++) for (var j = q - O, X = q + O, Z = j; X >= Z; Z++) for (var m = j; X >= m; m++) if ((Z === j || Z === X || m === j || m === X) && (d = i.info(C, 4 * (Z * w + m)))) return d
                } else for (; D > O; O += 4) d = i.info(C, O), d && (P = d.data, $[P._id] || (E.add(P), $[P._id] = P));
                return E
            }, info: function (S, E) {
                return this.colorMap[(S[E] << 16) + (S[E + 1] << 8) + S[E + 2] + ((127 & S[E + 3]) << 24)]
            }, validate: function (d) {
                var A = this, Q = A.gv, S = Q.getGL();
                if (S) {
                    var h = Q.getWidth(), X = Q.getHeight(), $ = S.RGBA, G = S.TEXTURE_2D, v = S.RENDERBUFFER,
                        w = S.FRAMEBUFFER;
                    A.texture || (A.texture = jd(S), A.render = S.createRenderbuffer(), A.frame = S.createFramebuffer()), (A.width !== h || A.height !== X) && (No(S, A.texture), S.texImage2D(G, 0, $, h, X, 0, $, S.UNSIGNED_BYTE, c), Gf(S, S.TEXTURE_MIN_FILTER, S.LINEAR), S.bindRenderbuffer(v, A.render), S.renderbufferStorage(v, S.DEPTH_COMPONENT16, h, X), jg(S, A.frame), S.framebufferTexture2D(w, S.COLOR_ATTACHMENT0, G, A.texture, 0), S.framebufferRenderbuffer(w, S.DEPTH_ATTACHMENT, v, A.render), No(S, c), S.bindRenderbuffer(v, c), jg(S, c), A.width = h, A.height = X), A._iv && (A._iv = !1, jg(S, A.frame), Q._42(d || (A.colorMap = {}), 1), jg(S, c))
                }
            }
        });
        var uj = function (n) {
            this.gv = n
        };
        fs(uj, v, {
            gap: 0, size: 0, _42: function (W, s) {
                var r = this, o = r.gv, f = o._gridGap, l = o._gridSize;
                if (o._gridVisible) {
                    if (r.gap !== f || r.size !== l) {
                        for (var n = [], y = o._gridSize / 2, X = f * y, E = 0; 2 * y + 1 > E; E++) {
                            var N = 6 * E, m = 6 * (2 * y + 1) + N;
                            n[N] = -X, n[N + 1] = 0, n[N + 2] = -X + E * f, n[N + 3] = X, n[N + 4] = 0, n[N + 5] = -X + E * f, n[m] = -X + E * f, n[m + 1] = 0, n[m + 2] = -X, n[m + 3] = -X + E * f, n[m + 4] = 0, n[m + 5] = X
                        }
                        r.vs = new Oq(n), r.gap = f, r.size = l
                    }
                    oq(o), fi(W, s), Um(W), iq(W, s, 1, o._gridColor, o._buffer.vs, r.vs), bm(W, 0, r.vs.length / 3, W.LINES), Bl(W), yi(W, s)
                } else r.vs = r.gap = r.size = c
            }
        });
        var bd = function (N) {
            this.gv = N
        };
        fs(bd, v, {
            _42: function (r, P) {
                var o = this.gv, k = o._buffer.vs, M = o._axisXColor, q = o._axisYColor, W = o._axisZColor,
                    t = o._originAxisVisible, T = o._centerAxisVisible;
                if (t || T) {
                    var J = _ ? r.TRIANGLES : r.TRIANGLE_FAN, N = r.LINES;
                    if (oq(o), fi(r, P), Um(r), t) {
                        var l = o.getCenterInfo(), v = x(l.width, l.height) / 5, h = .8 * v, m = .05 * v;
                        iq(r, P, 1.5, M, k, new Oq([0, 0, 0, v, 0, 0, h, m, 0, h, 0, m, h, -m, 0, h, 0, -m, h, m, 0, 0, 0, 0, 0, v, 0, m, h, 0, 0, h, m, -m, h, 0, 0, h, -m, m, h, 0, 0, 0, 0, 0, 0, v, m, 0, h, 0, m, h, -m, 0, h, 0, -m, h, m, 0, h])), bm(r, 0, 2, N), bm(r, 1, 6, J), iq(r, P, c, q), bm(r, 7, 2, N), bm(r, 8, 6, J), iq(r, P, c, W), bm(r, 14, 2, N), bm(r, 15, 6, J)
                    }
                    if (T) {
                        var z = o._center, U = z[0], I = z[1], n = z[2], l = o.getPositionInfo(z);
                        v = x(l.width, l.height) / 20, iq(r, P, 1.5, M, k, new Oq([U, I, n, U + v, I, n, U, I, n, U, I + v, n, U, I, n, U, I, n + v])), bm(r, 0, 2, N), iq(r, P, c, q), bm(r, 2, 2, N), iq(r, P, c, W), bm(r, 4, 2, N)
                    }
                    Bl(r), yi(r, P)
                }
            }
        });
        var Km = function (H) {
                this.gv = H
            }, ve = "edit_tx", Yc = "edit_ty", hs = "edit_tz", Dh = "edit_rx", _n = "edit_ry", zf = "edit_rz",
            ls = "edit_sx", $j = "edit_sy", Im = "edit_sz", ni = {};
        ni[ve] = 1, ni[Yc] = 1, ni[hs] = 1, ni[Dh] = 1, ni[_n] = 1, ni[zf] = 1, ni[ls] = 1, ni[$j] = 1, ni[Im] = 1, fs(Km, v, {
            _42: function (c, k, S) {
                var i = this, T = i.gv, m = T.sm().ld();
                if (T.isEditable(m) && !T.isEditHelperDisabled() && Ik(m) && (!T.isFirstPersonMode() || !T.isMouseRoamable() && !jp)) {
                    oq(T);
                    var _, K, V = T.isMovable(m), U = T.isRotationEditable(m), A = T.isSizeEditable(m),
                        L = T._axisXColor, b = T._axisYColor, r = T._axisZColor, w = T._editSizeColor, t = m.p3(),
                        E = Wg(T.getEye(), t) / 10, h = E / (S ? 5 : 10), u = .7 * E, F = .4 * u, I = t[0], O = t[1],
                        G = t[2];
                    _ = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0], V && i._17O(c, k, m, S, ve, L, _, [I, O - h, G, I + u, O - h, G, I + u, O, G, I + u, O, G, I, O, G, I, O - h, G, I, O - h, G + h, I + u, O - h, G + h, I + u, O - h, G, I + u, O - h, G, I, O - h, G, I, O - h, G + h]), K = I + u, A && i._17O(c, k, m, S, ls, w, _, [K, O - h, G, K + F, O - h, G, K + F, O, G, K + F, O, G, K, O, G, K, O - h, G, K, O - h, G + h, K + F, O - h, G + h, K + F, O - h, G, K + F, O - h, G, K, O - h, G, K, O - h, G + h]), K += F, U && i._17O(c, k, m, S, Dh, L, _, [K, O - h, G, K + F, O - h, G, K + F, O, G, K + F, O, G, K, O, G, K, O - h, G, K, O - h, G + h, K + F, O - h, G + h, K + F, O - h, G, K + F, O - h, G, K, O - h, G, K, O - h, G + h]), _ = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0], V && i._17O(c, k, m, S, Yc, b, _, [I, O, G, I, O + u, G, I - h, O + u, G, I - h, O + u, G, I - h, O, G, I, O, G, I, O, G, I, O, G - h, I, O + u, G - h, I, O + u, G - h, I, O + u, G, I, O, G]), K = O + u, A && i._17O(c, k, m, S, $j, w, _, [I, K, G, I, K + F, G, I - h, K + F, G, I - h, K + F, G, I - h, K, G, I, K, G, I, K, G, I, K, G - h, I, K + F, G - h, I, K + F, G - h, I, K + F, G, I, K, G]), K += F, U && i._17O(c, k, m, S, _n, b, _, [I, K, G, I, K + F, G, I - h, K + F, G, I - h, K + F, G, I - h, K, G, I, K, G, I, K, G, I, K, G - h, I, K + F, G - h, I, K + F, G - h, I, K + F, G, I, K, G]), _ = [1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0], V && i._17O(c, k, m, S, hs, r, _, [I, O, G, I, O, G + u, I, O - h, G + u, I, O - h, G + u, I, O - h, G, I, O, G, I, O - h, G, I - h, O - h, G, I - h, O - h, G + u, I - h, O - h, G + u, I, O - h, G + u, I, O - h, G]), K = G + u, A && i._17O(c, k, m, S, Im, w, _, [I, O, K, I, O, K + F, I, O - h, K + F, I, O - h, K + F, I, O - h, K, I, O, K, I, O - h, K, I - h, O - h, K, I - h, O - h, K + F, I - h, O - h, K + F, I, O - h, K + F, I, O - h, K]), K += F, U && i._17O(c, k, m, S, zf, r, _, [I, O, K, I, O, K + F, I, O - h, K + F, I, O - h, K + F, I, O - h, K, I, O, K, I, O - h, K, I - h, O - h, K, I - h, O - h, K + F, I - h, O - h, K + F, I, O - h, K + F, I, O - h, K])
                }
            }, _17O: function (d, F, m, p, G, h, b, A) {
                var C = this.gv._buffer;
                Xm(d, F, p, !0, m, G), Xj(d, F, c, !0, c, !0, c, !1), Kd(d, F.uDiffuse, h), qd(d, C.vs, new Oq(A), F.aPosition), qd(d, C.ns, new Oq(b), F.aNormal), Um(d), bm(d, 0, 12), Bl(d), As(d, F)
            }
        });
        var Nb = t.Raycaster = function (B) {
            this.gv = B
        };
        ld("Raycaster", v, {
            intersect: function (_) {
                var A = this, m = A.gv, k = m.getDataAt(_);
                return k ? A.intersectObject(_, k) : null
            }, intersectObject: function (n, g) {
                if (n instanceof Nq) return this._intersectObjectImpl(n, g);
                var u, m, S = this, U = S.gv;
                m = U.unproject(n);
                var z = U.getEye();
                U.isOrtho() ? (u = $k(U.getCenter(), z), u[0] += u[0], u[1] += u[1], u[2] += u[2]) : u = z, u = new Lo(u);
                var V = new Lo(m).sub(u).normalize(), w = new t.Math.Ray(u, V);
                return S._intersectObjectImpl(w, g)
            }, _intersectObjectImpl: function () {
                function E() {
                    var R = new Lo;
                    return R.subVectors(W, V), K.subVectors(U, V), R.cross(K).normalize(), R
                }

                function e(n, m, v, e, N, q, o) {
                    return zr.barycoordFromPoint(n, m, v, e, g), N.multiplyScalar(g.x), q.multiplyScalar(g.y), o.multiplyScalar(g.z), N.add(q).add(o), N.clone()
                }

                var O = new Xi, m = new Xi, Q = new Nq, n = new Lo, Y = new Lo, A = new Lo, y = new Lo, f = new Lo,
                    U = new Lo, V = new Lo, W = new Lo, c = new $r, l = new $r, $ = new $r, K = new Lo,
                    J = {vs: Bi, is: Pf, uv: Se}, g = new Lo;
                return function (Z, k) {
                    var v = this.gv.getData3dUI(k), o = k.mat || v.mat;
                    if (o) {
                        O.fromArray(o), m.getInverse(O), Q.copy(Z).applyMatrix4(m);
                        var d, G, u = "body", w = v.shapeModel;
                        if (w || (w = lq(v)), w || (k instanceof t.Node && !(k instanceof t.Shape) ? (d = !0, w = J) : (G = !0, w = [v.left, v.front, v.right, v.back, v.top, v.bottom])), !w) return console.log("Can not find shape model."), null;
                        Qd(w) || (w = [w]);
                        var i, B, T, M, j, X, x, q, K, H, h, D, F, N = 1 / 0, r = ["", "top_", "bottom_"], p = !1;
                        for (i = 0, B = w.length; B > i; i++) if (D = w[i]) for (T = 0, M = r.length; M > T; T++) if (F = r[T], x = D[F + "vs"], q = D[F + "is"], K = D[F + "uv"] || D[F + "tuv"], x) for (j = 0, X = q ? q.length : x.length / 3; X > j; j += 3) q ? (Y.fromArray(x, 3 * q[j]), A.fromArray(x, 3 * q[j + 1]), y.fromArray(x, 3 * q[j + 2])) : (Y.fromArray(x, 3 * j), A.fromArray(x, 3 * (j + 1)), y.fromArray(x, 3 * (j + 2))), H = Q.intersectTriangle(Y, A, y, !1, n), H && (h = Q.origin.distanceTo(H), N > h && (N = h, f.copy(H), U.copy(Y), V.copy(A), W.copy(y), "" !== F ? u = F.slice(0, -1) : d ? u = fl[Math.floor(j / 6)] : G && (u = fl[i]), K && (p = !0, q ? (c.fromArray(K, 2 * q[j]), l.fromArray(K, 2 * q[j + 1]), $.fromArray(K, 2 * q[j + 2])) : (c.fromArray(K, 2 * j), l.fromArray(K, 2 * (j + 1)), $.fromArray(K, 2 * (j + 2))))));
                        if (!isFinite(N)) return null;
                        var R, b = f.clone().applyMatrix4(O);
                        p && (R = e(f, U, V, W, c, l, $));
                        var C = E(U, V, W), P = E(U.applyMatrix4(O), V.applyMatrix4(O), W.applyMatrix4(O)),
                            z = Q.direction.dot(C);
                        return z > 0 && (C.multiplyScalar(-1), P.multiplyScalar(-1)), {
                            world: b,
                            local: f.clone(),
                            worldNormal: P,
                            normal: C,
                            uv: R,
                            part: u
                        }
                    }
                }
            }()
        });
        var bb = function (K, v) {
            this.gv = K, this.s = function (s, _, N) {
                return _ == c && (_ = N), _ == c ? v.getStyle(s) : eq(_, v, K)
            }, this.data = v
        };
        fs(bb, v, {
            I3d: !0, ms_icons: 1, _iv: !0, iv: function () {
                this._iv = !0
            }, _42: function (T, q, n, V) {
                var h = this, Y = h.data;
                if (!(Y instanceof Th)) {
                    var b, r, v, W, I, K, s, j = h.gv, B = Y._id, H = h.s("shape3d.alwaysOnTop") ? null : h.s("batch"),
                        w = j._batchIndexMap, U = j._batchModelMap, L = j.isSelectable(Y), F = j.getBrightness(Y),
                        o = F != c && 1 !== F;
                    if (h.needValidate(T)) {
                        if (v = Ve(w, U, Y, H), h.validate(v, H ? Mn[H] || jq : c), v && (W = w[B], I = W.size = v.vs.length / 3 - W.begin, s = v.rs)) for (F = o ? F : 1, K = 0; I > K; K++) s.push(F);
                        if (Ik(Y)) {
                            var Q = j.getWireframeGeometry(Y);
                            if (Q) Hd(j, Y, Q); else {
                                var A = j.getWireframe(Y);
                                A && Hd(j, Y, A)
                            }
                        }
                        h.labelInfo = h.label2Info = h.noteInfo = h.note2Info = h._38o = c, h._24O(hg, "getLabel"), h._24O($g, "getLabel2"), h._26O(Sl, "getNote"), h._26O(oe, "getNote2"), h._15O(), h.interactiveInfo = j.isInteractive(Y) ? {} : c, h._iv = !1
                    }
                    o && Kd(T, q.uBrightness, F), Kd(T, q.uAlphaTest, h.s("alphaTest")), r = Xm(T, q, n, L, Y, nc), r && (Kp(r, w[B], U), Kp(r, j._polylineIndexMap[B], j._polylineModelMap), Kp(r, j._wireframeIndexMap[B], j._wireframeModelMap)), w[B] || h._80o(T, q, V), j.isLabelVisible(Y) && ((b = h.labelInfo) && (Xm(T, q, n, L, Y, hg), h._28O(b, hg, V)), (b = h.label2Info) && (Xm(T, q, n, L, Y, $g), h._28O(b, $g, V))), j.isNoteVisible(Y) && ((b = h.noteInfo) && (Xm(T, q, n, L, Y, Sl), h._29O(b, Sl, V)), (b = h.note2Info) && (Xm(T, q, n, L, Y, oe), h._29O(b, oe, V))), (b = h._38o) && h._99O(T, q, b, n, L, V), o && Kd(T, q.uBrightness, 1)
                }
            }, needValidate: function () {
                return this._iv
            }, validate: function () {
            }, _16O: function () {
                return Hb
            }, _80o: function () {
            }, dispose: function () {
            }, _calcAnchorMat: function (o) {
                if (o.hasOwnProperty("_anchor") || o.hasOwnProperty("_anchorElevation")) {
                    var y = o.getAnchor3d(), m = {x: y.x - .5, y: y.y - .5, z: y.z - .5}, Y = ic();
                    return Cs(Y, [-m.x, -m.y, -m.z]), Y
                }
            }, getBodyColor: function (Z) {
                var t = this.data, T = this.gv.getBodyColor(t);
                return T ? T : Z ? t.getStyle(Z) : c
            }, _24O: function (g, t) {
                var T = this, q = T.data, j = T.gv, F = T.s, O = j[t](q);
                if (O != c) {
                    var n = F(g + ".scale"), B = F(g + ".max"), f = T[g + "Info"] = {
                        label: O,
                        textureScale: F(g + ".texture.scale"),
                        color: j[t + "Color"](q),
                        font: F(g + ".font"),
                        align: F(g + ".align"),
                        background: j[t + "Background"](q)
                    }, u = f.rect = wk(f, O);
                    B > 0 && B < u.width && (f.labelWidth = u.width, u.width = B), u.x = u.y = 0, u.width *= n, u.height *= n, f.mat = T._16O(F(g + ".autorotate"), F(g + ".position"), u, F(g + ".face"), F(g + ".t3"), F(g + ".r3"), F(g + ".rotationMode"));
                    var e = u.width / 2, r = u.height / 2;
                    f.vs = new Oq([-e, r, 0, -e, -r, 0, e, -r, 0, e, r, 0]), u.width /= n, u.height /= n
                }
            }, _26O: function (C, w) {
                var r = this, f = r.data, k = r.gv, i = r.s, X = k[w](f);
                if (X != c) {
                    var p = i(C + ".scale"), V = this[C + "Info"] = {
                        note: X,
                        textureScale: i(C + ".texture.scale"),
                        expanded: i(C + ".expanded"),
                        font: i(C + ".font"),
                        color: i(C + ".color"),
                        align: i(C + ".align"),
                        borderWidth: i(C + ".border.width"),
                        borderColor: i(C + ".border.color"),
                        background: k[w + "Background"](f)
                    };
                    if (V.expanded) {
                        var Y = i(C + ".max"), T = wk(V, X);
                        T.width += 6, T.height += 2, Y > 0 && Y < T.width && (V.labelWidth = T.width, T.width = Y);
                        var H = {x: -T.width / 2, y: -8 - T.height, width: T.width, height: T.height + 8}
                    } else H = {x: -6, y: -18, width: 12, height: 18};
                    V.mat = r._16O(i(C + ".autorotate"), i(C + ".position"), c, i(C + ".face"), i(C + ".t3"), i(C + ".r3"), i(C + ".rotationMode")), V.rect = H, 1 !== p && (H = hh(H), H.x *= p, H.height *= p, H.y = -H.height, H.width *= p);
                    var D = H.x, N = H.y, $ = H.width, y = H.height;
                    V.vs = new Oq([D, -N, 0, D, -N - y, 0, D + $, -N - y, 0, D + $, -N, 0])
                }
            }, _28O: function (F, J, L) {
                if (L(this.s(J + ".transparent"))) {
                    var T = F.rect, j = F.textureScale, k = T.width * j, W = T.height * j;
                    if (k >= 1 && W >= 1) {
                        var R = Zk(k, W);
                        1 !== j && (R.translate(R, T.x, T.y), R.scale(j, j), R.translate(R, -T.x, -T.y)), zs(R, F), R.restore(), Kg(this, J, F.mat, F.vs, !0)
                    }
                }
            }, _29O: function (o, M, I) {
                if (I(this.s(M + ".transparent"))) {
                    var w = o.rect, y = o.textureScale, k = w.x, l = w.y, O = w.width * y, d = w.height * y;
                    if (O >= 1 && d >= 1) {
                        w.x = w.y = 0;
                        var m = Zk(O, d);
                        1 !== y && m.scale(y, y), Ih(m, o), m.restore(), w.x = k, w.y = l, Kg(this, M, o.mat, o.vs, !1)
                    }
                }
            }, _99O: function (e, H, V, j, s, d) {
                if (V) {
                    var P = this, X = P.gv, u = P.data, _ = X._buffer, $ = X._1O, n = V.icons;
                    for (var S in n) {
                        var r = n[S], B = V.rects[S];
                        if (B && d(eq(r.transparent, u, X))) {
                            Xm(e, H, j, s, u, S);
                            var N = eq(r.shape3d, u, X), m = N ? [N] : eq(r.names, u, X), L = m ? m.length : 0,
                                I = eq(r.textureScale, u, X) || 1, Y = eq(r.light, u, X);
                            Y == c && (Y = N ? !0 : !1), Xj(e, H, eq(r.blend, u, X), Y, eq(r.opacity, u, X), eq(r.reverseFlip, u, X), eq(r.reverseColor, u, X), eq(r.reverseCull, u, X));
                            for (var b = 0; L > b; b++) {
                                var f = m[b], t = B[b];
                                if (Ae(P, t.mat), N) Fi(X, u, lq(P, N), P); else {
                                    var v = cd(f);
                                    if (v) {
                                        var w = t.width * I, D = t.height * I;
                                        if (w >= 1 && D >= 1) {
                                            var M = Zk(w, D);
                                            pq(M, v, eq(r.stretch, u, X), 0, 0, w, D, u, X), M.restore(), jd(e, vm, $), Um(e, H, $, eq(r.discardSelectable, u, X), _.uv, yj), qd(e, _.vs, t.vs, H.aPosition), Li(e, _.ns, Cr, H.aNormal), Dq(e, _.is, jj), Sp(e, 0, jj.length), Bl(e, H, $)
                                        }
                                    }
                                }
                                ud(X)
                            }
                            As(e, H)
                        }
                    }
                }
            }
        });
        var th = function (I, A) {
            Mr(th, this, [I, A])
        };
        fs(th, bb, {
            _16O: function (D, U, _, u, d, V, a, h, J) {
                var n = this.data, F = n.getFinalScale3d(), v = Fb(U, F, _, u, h, J);
                if (n.hasOwnProperty("_anchor") || n.hasOwnProperty("_anchorElevation")) {
                    var z = n.getAnchor3d();
                    v[0] -= (z.x - .5) * F[0], v[1] -= (z.y - .5) * F[1], v[2] -= (z.z - .5) * F[2]
                }
                return To(ic(), v, n.p3(), u, d, V, a, D, n.getFinalRotation3d(), n.getRotationMode())
            }, clear: function () {
                var D = this;
                D.faceMat = D.mat = D.shapeModel = D.left = D.right = D.front = D.back = D.top = D.bottom = D.csg = c
            }, needValidate: function (u) {
                if (this._iv) return this._validateFrameId = u._renderInfo.frame, !0;
                if (this.s("shape3d.autorotate") || this.s("shape3d.fixSizeOnScreen") || this.s("hide.overlapping.group")) {
                    var N = u._renderInfo.frame;
                    if (this._validateFrameId !== N) return this._validateFrameId = N, !0
                }
                return !1
            }, validate: function (o, d) {
                var O = this, Z = O.gv, r = O.data, L = lq(O);
                O._updateAutoRotation(), O._updateFixSize2d(), O._updateOverlapping(), (this.s("shape3d.autorotate") || this.s("shape3d.fixSizeOnScreen")) && (Je(Z, r, "_wireframeModelMap", "_wireframeIndexMap"), Je(Z, r, "_wireframeModelMapSwap", "_wireframeIndexMapSwap"));
                var K = mh(r, Z.getMat(r), L ? O.s("shape3d.scaleable") : !0), T = O._calcAnchorMat(r);
                if (T && Ig(K, K, T), r.mat = K, O.clear(), o) {
                    var v = [];
                    L ? Vb(Z, r, L, O, O.getBodyColor(), [K], o, v) : (Zr(Z, r, o, d, K, Ch, v, lp), Zr(Z, r, o, d, K, Te, v, bj), Zr(Z, r, o, d, K, Gn, v, io), Zr(Z, r, o, d, K, Qk, v, Tk), Zr(Z, r, o, d, K, Aj, v, Ur), Zr(Z, r, o, d, K, Hr, v, km)), v.length && (Ml(o.vs, v), Ml(o.ns, gq(v)))
                } else O.mat = K, (O.shapeModel = L) || (O._cubeUvs = null, O.vf(Ch, 0), O.vf(Te, 16), O.vf(Aj, 8), O.vf(Hr, 24), O.vf(Gn, 32), O.vf(Qk, 40))
            }, _updateAutoRotation: function () {
                var y = this, j = y.data, q = y.s("shape3d.autorotate");
                if (!q) return j._dynamicRotation && delete j._dynamicRotation, void 0;
                var v, E = y.gv;
                v = "string" == typeof q ? [q.indexOf("x") < 0 ? E._eye[0] : E._center[0], q.indexOf("y") < 0 ? E._eye[1] : E._center[1], q.indexOf("z") < 0 ? E._eye[2] : E._center[2]] : E._eye;
                var U = E._center, c = [v[0] - U[0], v[1] - U[1], v[2] - U[2]], m = j.p3(),
                    N = um([m[0] + c[0], m[1] + c[1], m[2] + c[2]], m, E._up), G = j.r3(),
                    W = pf(N, j.getRotationMode());
                Math.abs(G[0] - W[0]) < 1e-5 && Math.abs(G[1] - W[1]) < 1e-5 && Math.abs(G[2] - W[2]) < 1e-5 || (j._dynamicRotation = W)
            }, _updateFixSize2d: function () {
                var y = this, J = y.data, O = y.s("shape3d.fixSizeOnScreen");
                if (!O) return J._dynamicScale3d && delete J._dynamicScale3d, void 0;
                var p = y.gv;
                J.getFinalScale3d();
                var f = mh(J, p.getMat(J)), b = Ce([0, 0, 0], f), m = p.toViewPosition(b);
                if (!isNaN(m.x) && !isNaN(m.y)) {
                    var C = Ce([1, 0, 0], f), o = p.toViewPosition(C), X = Ce([0, 1, 0], f), w = p.toViewPosition(X),
                        z = o.x - m.x, G = w.y - m.y, d = J._dynamicScale3d || [1, 1, 1], q = cd(J.s("shape3d.image")),
                        I = O[0] > 0 ? O[0] : q ? fc(q, y) : 20, R = O[1] > 0 ? O[1] : q ? qr(q, y) : 20,
                        L = Math.abs(z / I), c = Math.abs(G / R);
                    Math.abs(L - 1) < .001 && Math.abs(c - 1) < .001 || (J._dynamicScale3d = [d[0] / L, d[1] / c, d[2]])
                }
            }, _updateOverlapping: function () {
                var P = this, F = P.s("hide.overlapping.group");
                if (!F) return P._rectOverlapping && (P._rectOverlapping = $), void 0;
                var W, m, M, S = P.gv, O = P.data, a = mh(O, S.getMat(O)), s = 1 / 0, B = 1 / 0, q = -1 / 0, N = -1 / 0,
                    K = O.getAnchor3d(), r = K.x, n = K.y, k = K.z;
                for (W = 0; 8 > W; W++) {
                    if (m = Ce([(W >> 2) - r, (1 & W >> 1) - n, (1 & W) - k], a), M = S.toViewPosition(m), isNaN(M.x) || isNaN(M.y)) return;
                    s = Math.min(s, M.x), q = Math.max(q, M.x), B = Math.min(B, M.y), N = Math.max(N, M.y)
                }
                var p = {x: s, y: B, w: q - s, h: N - B};
                P._rectOverlapping = S.overlappingBox.isOverlapping(F, p)
            }, getVectorDynamicSize: function () {
                var n, X = this, Z = X.s("shape3d"), H = X.data;
                if ("billboard" === Z || "plane" === Z || (n = H._currentCubeElementId) != c) {
                    var o, S, M = X.gv, g = mh(H, M.getMat(H)), w = function (H, r) {
                        var x = M.toViewPosition(Ce(H, g)), m = M.toViewPosition(Ce(r, g)), k = x.x - m.x,
                            B = x.y - m.y;
                        return Math.min(2048, Math.sqrt(k * k + B * B))
                    };
                    if ("billboard" === Z) o = w([-.5, 0, 0], [.5, 0, 0]), S = w([0, -.5, 0], [0, .5, 0]); else if ("plane" === Z) o = w([-.5, 0, 0], [.5, 0, 0]), S = w([0, 0, -.5], [0, 0, .5]); else if (H._currentCubeElementId != c) {
                        var $ = 3 * Pf[n + 1], q = 3 * Pf[n], m = 3 * Pf[n + 2];
                        o = w([Bi[$], Bi[$ + 1], Bi[$ + 2]], [Bi[m], Bi[m + 1], Bi[m + 2]]), S = w([Bi[$], Bi[$ + 1], Bi[$ + 2]], [Bi[q], Bi[q + 1], Bi[q + 2]])
                    }
                    return [o, S]
                }
            }, getCachedTexture: function () {
                var O = this, j = O.data, Y = j._currentCubeElementId;
                return Y != c ? O._cubeCachedImage ? O._cubeCachedImage[Y] : null : O._shape3dCachedImage
            }, setCachedTexture: function (v) {
                var J = this, B = J.data, f = B._currentCubeElementId;
                if (f != c) {
                    if (!J._cubeCachedImage) return J._cubeCachedImage = {};
                    J._cubeCachedImage[f] = v
                } else J._shape3dCachedImage = v
            }, invalidateCachedTexture: function (r) {
                var Q, J, A, H = this;
                if ((A = H._shape3dCachedImage) && (r.deleteTexture(A), H._shape3dCachedImage = null), J = H._cubeCachedImage) {
                    for (Q in J) r.deleteTexture(J[Q]);
                    H._cubeCachedImage = null
                }
            }, vf: function (k, R) {
                var w = this;
                if (w.gv.getFaceVisible(w.data, k)) {
                    var s = Hp(w, k);
                    s.mat && (w.faceMat = !0);
                    var F = s.uv;
                    if (F) {
                        var g = w._cubeUvs;
                        g || (g = w._cubeUvs = new Oq([0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0]));
                        for (var H = 0; 8 > H; H++) g[R + H] = F[H]
                    }
                    return s
                }
            }, _80o: function (z, K, T) {
                var i = this;
                if (i._rectOverlapping) return !0;
                var u = i.gv, l = i.data, O = u._cube, r = i.shapeModel;
                oq(u, i.mat), r ? Fi(u, l, r, i, i.getBodyColor(), T) : (qd(z, O.vs, c, K.aPosition), qd(z, O.ns, c, K.aNormal), dp(z, O.is), i._18O(z, K, i.left, 0, T), i._18O(z, K, i.front, 6, T), i._18O(z, K, i.right, 12, T), i._18O(z, K, i.back, 18, T), i._18O(z, K, i.top, 24, T), i._18O(z, K, i.bottom, 30, T)), ud(u), i.faceMat && (i._18O(z, K, i.left, 0, T, !0), i._18O(z, K, i.front, 6, T, !0), i._18O(z, K, i.right, 12, T, !0), i._18O(z, K, i.back, 18, T, !0), i._18O(z, K, i.top, 24, T, !0), i._18O(z, K, i.bottom, 30, T, !0))
            }, _18O: function (J, P, V, M, B, r) {
                if (V) {
                    if (!B(V.transparent)) return;
                    if (r && !V.mat || !r && V.mat) return;
                    r && oq(this.gv, V.mat);
                    var l = this, f = l.data;
                    f._currentCubeElementId = M;
                    var t = l.gv, R = t.getTexture(V.texture, f), y = V.uv, p = V.uvScale, n = V.uvOffset,
                        z = V.discardSelectable;
                    R ? y ? Um(J, P, R, z, t._buffer.uv, l._cubeUvs, n, p) : Um(J, P, R, z, t._cube.uv, c, n, p) : Um(J), Xj(J, P, V.blend, V.light, V.opacity, V.reverseFlip, V.reverseColor, V.reverseCull), Kd(J, P.uDiffuse, V.color), Sp(J, M, 6), As(J, P), Bl(J, P, R), r && ud(t), f._currentCubeElementId = null
                }
            }
        });
        var Ln = function (B, I) {
            Mr(Ln, this, [B, I])
        };
        fs(Ln, bb, {
            _25Q: 1, validate: function (s) {
                var u = this, L = u.gv, I = u.data, P = u.s, U = P("edge.width"), h = I._40I, o = I._41I;
                if (u.shapeModel = u.info = c, h && o) {
                    var K, n, C, v, A, H, a, e, $, t, T = I.isLooped(), R = P(ms), l = F.getEdgeType(R);
                    if (l) {
                        var g = l(I, Jp(u, L, I, T, R), L, u._19Q);
                        if (!g.points || g.points.isEmpty()) return;
                        H = u.info = {}, a = g.segments, A = g.points, e = A.size();
                        for (var V = h.getElevation(), Z = o.getElevation(), f = 0; e > f; f++) {
                            var d = A.get(f);
                            d.e == c && (d.e = V + (Z - V) * f / (e - 1))
                        }
                        $ = bs(A.get(0)), t = bs(A.get(e - 1));
                        var G = e % 2;
                        0 === G ? (H.c1 = bs(A.get(e / 2 - 1)), H.c2 = bs(A.get(e / 2))) : H.p3 = bs(A.get((e - G) / 2)), H.s1 = $, H.s2 = bs(A.get(1)), H.t1 = bs(A.get(e - 2)), H.t2 = t
                    } else {
                        A = new vp, H = u.info = {};
                        var Y = P("edge.offset"), q = P("edge.center"), S = P("edge.source.t3"),
                            y = P("edge.target.t3"), X = h.p3(), i = o.p3();
                        if (S && (X[0] += S[0], X[1] += S[1], X[2] += S[2]), y && (i[0] += y[0], i[1] += y[1], i[2] += y[2]), R === ik) {
                            a = P("edge.segments");
                            var N = H.points = P(mm) || Ah;
                            if (e = N.size()) {
                                $ = bs(N.get(0)), t = bs(N.get(e - 1)), !q && Y && (C = $k($, X, !0), Y = x(Y, Wg(X, $)), X = [X[0] + C[0] * Y, X[1] + C[1] * Y, X[2] + C[2] * Y], C = $k(i, t, !0), Y = x(Y, Wg(t, i)), i = [i[0] - C[0] * Y, i[1] - C[1] * Y, i[2] - C[2] * Y]);
                                var G = e % 2;
                                0 === G ? (K = bs(N.get(e / 2 - 1)), n = bs(N.get(e / 2))) : H.p3 = bs(N.get((e - G) / 2)), H.s1 = X, H.s2 = $, H.t1 = t, H.t2 = i
                            } else !q && Y && (C = $k(i, X, !0), v = Wg(X, i), Y = kc(Y, v), X = [X[0] + C[0] * Y, X[1] + C[1] * Y, X[2] + C[2] * Y], i = [i[0] - C[0] * Y, i[1] - C[1] * Y, i[2] - C[2] * Y]), K = X, n = i;
                            A.add({x: X[0], y: X[2], e: X[1]}), A.addAll(N), A.add({x: i[0], y: i[2], e: i[1]})
                        } else {
                            var J = Jp(u, L, I, T, R);
                            if (u._19Q || (J = -J), T) {
                                var O = X[0], r = X[1], B = X[2], W = h.getTall() / 2 + J;
                                K = [O - J, r + W, B], n = [O + J, r + W, B], A.add({
                                    x: O - J,
                                    y: B,
                                    e: r
                                }), A.add({x: O - J, y: B, e: r + W}), A.add({
                                    x: O + J,
                                    y: B,
                                    e: r + W
                                }), A.add({x: O + J, y: B, e: r})
                            } else {
                                C = $k(i, X, !0), v = Wg(X, i);
                                var k = {x: X[0], y: X[2]}, w = {x: i[0], y: i[2]}, M = Sq(c, k, w, J), p = M.x - k.x,
                                    D = M.y - k.y;
                                Y = kc(Y, v), C[0] *= Y, C[1] *= Y, C[2] *= Y, K = [X[0] + C[0] + p, X[1] + C[1], X[2] + C[2] + D], n = [i[0] - C[0] + p, i[1] - C[1], i[2] - C[2] + D], q ? (A.add({
                                    x: X[0],
                                    y: X[2],
                                    e: X[1]
                                }), A.add({x: K[0], y: K[2], e: K[1]}), A.add({
                                    x: n[0],
                                    y: n[2],
                                    e: n[1]
                                }), A.add({x: i[0], y: i[2], e: i[1]})) : (A.add({
                                    x: K[0],
                                    y: K[2],
                                    e: K[1]
                                }), A.add({x: n[0], y: n[2], e: n[1]}))
                            }
                        }
                        H.c1 = K, H.c2 = n
                    }
                    H.list = P(ij) === df ? u.createTubeModel(A, a, U / 2, s) : u.createLineModel(A, a, U, "edge", "edge.dash")
                }
            }
        });
        var pm = function (U, N) {
            Mr(pm, this, [U, N])
        };
        fs(pm, th, {
            _80o: function (W, V, s) {
                var q = this, m = q.gv, T = q.shapeModel;
                oq(m, q.mat), T ? Fi(m, q.data, T, q, q.getBodyColor(), s) : (vf(q, W, V, q.left, s), vf(q, W, V, q.front, s), vf(q, W, V, q.right, s), vf(q, W, V, q.back, s), vf(q, W, V, q.top, s), vf(q, W, V, q.bottom, s)), ud(m)
            }, validate: function (y, p) {
                var F, D, e = this, w = e.s, M = e.data, q = M.p3(), R = M._thickness / 2, S = M.isClosePath(),
                    E = M.getPoints(), X = M.getSegments(), H = w(Ef), Q = y && y.uv;
                if (e.clear(), 0 > R) D = e.shapeModel = En(E, X, w(jc), w(uq), H, w(ub), M.getTall(), M.getShapeElevation(), S), w(Fn) ? w("shape3d.image") || delete D.uv : (delete D.vs, delete D.ns, delete D.uv), w("shape3d.top.image") || delete D.top_uv, w("shape3d.bottom.image") || delete D.bottom_uv; else if (w(ij) === df) F = Sn(E, X, H, S), D = e.shapeModel = {vs: []}, w("shape3d.image") && (D.uv = [], D.sum = w(ub) || uk(F) || 1, D.len = 0), w(jc) && !S && (D.top_vs = [], w("shape3d.top.image") && (D.top_uv = [])), w(uq) && !S && (D.bottom_vs = [], w("shape3d.bottom.image") && (D.bottom_uv = [])), e._12O(F, R); else {
                    var N, d, I, m, f, A, b, P, C, s;
                    if (F = Sn(E, X, H, S), f = e.vf(Aj, Q, !1, p), R && (A = e.vf(Hr, Q, !1, p), b = S ? c : e.vf(Ch, Q, !1, p), P = S ? c : e.vf(Te, Q, !1, p), C = e.vf(Gn, Q, !1, p), s = e.vf(Qk, Q, !1, p)), R) {
                        for (var V = 0, l = F.length; l > V; V++) F[V] = e._tryRemoveBezierPoints(F[V], R);
                        e._12O(F, R)
                    } else f && F.forEach(function (x) {
                        if (m = x.length, m > 0) for (N = x[0], I = 1; m > I; I++) d = x[I], e.addV(f.vs, N, d), N = d
                    });
                    e._20Q(F), y || (f && (f.ns = gq(f.vs), Ok(f, "vs"), Ok(f, ug)), R && (A && (A.ns = gq(A.vs), Ok(A, "vs"), Ok(A, ug)), b && (b.ns = gq(b.vs), Ok(b, "vs"), Ok(b, ug)), P && (P.ns = gq(P.vs), Ok(P, "vs"), Ok(P, ug)), C && (C.ns = gq(C.vs), Ok(C, "vs"), Ok(C, ug)), s && (s.ns = gq(s.vs), Ok(s, "vs"), Ok(s, ug))))
                }
                var G = e.mat = ic();
                Cs(G, q), sq(G, M.getFinalRotation3d(), M.getRotationMode());
                var T = M.getScale3d(), B = M._dynamicScale3d;
                B && (T[0] *= B[0], T[1] *= B[1], T[2] *= B[2]), Nf(G, T), Cs(G, Sg(q)), y && (Co(e, G, y, D), e.clear())
            }, _20Q: function (l) {
                var b, q, j, C, I, t, i, O = this, v = O.front, U = O.back, g = O.top, D = O.bottom, X = v ? v.tuv : c,
                    G = U ? U.tuv : c, Z = g ? g.tuv : c, W = D ? D.tuv : c, k = 0;
                (X || G || Z || W) && (b = O.s(ub) || uk(l) || 1, l.forEach(function (f) {
                    if (q = f.length, q > 0) for (t = f[0], j = 1; q > j; j++) i = f[j], C = k / b, k += Wg(t, i), I = k / b, O._14O(v, C, I), O._14O(U, 1 - I, 1 - C), O._14O(g, C, I), O._14O(D, C, I), t = i
                }))
            }, _14O: function (G, Z, W) {
                if (G) {
                    var N = G.uv, B = G.tuv;
                    if (B) {
                        if (N) var x = N[0] + (N[6] - N[0]) * Z, d = N[1] + (N[7] - N[1]) * Z,
                            h = N[2] + (N[4] - N[2]) * Z, k = N[3] + (N[5] - N[3]) * Z, t = N[2] + (N[4] - N[2]) * W,
                            V = N[3] + (N[5] - N[3]) * W, g = N[0] + (N[6] - N[0]) * W,
                            e = N[1] + (N[7] - N[1]) * W; else x = Z, d = 0, h = Z, k = 1, t = W, V = 1, g = W, e = 0;
                        B.push(h, k, t, V, g, e, g, e, x, d, h, k)
                    }
                }
            }, _13O: function (V) {
                var t = V.uv, J = V.tuv;
                J && (t ? J.push(t[2], t[3], t[4], t[5], t[6], t[7], t[6], t[7], t[0], t[1], t[2], t[3]) : J.push(0, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1))
            }, _tryRemoveBezierPoints: function (r, p) {
                var O = r.length;
                if (4 > O) return r;
                var G, t, c, $, s, h, J = !1, v = function (q) {
                    return r[q]
                }, T = function (J) {
                    return r[O - 1 - J]
                };
                for (s = 0; 1 >= s; s++) for (h = s ? T : v, t = h(0), c = h(1), G = 2; O - 1 > G; G++) if ($ = h(G), !$.remove) if ($.b) {
                    var D = Sq(t, c, $, p);
                    D.adjust ? ($.remove = !0, J = !0) : (t = c, c = $)
                } else t = c, c = $;
                if (!J) return r;
                var d = [];
                for (G = 0; O > G; G++) r[G].remove || d.push(r[G]);
                return d
            }, _12O: function (K, G) {
                var t, T, A, Y, v, L = this;
                K.forEach(function (Q) {
                    if (v = Q.length, v > 0) for (t = {
                        p: Q[0],
                        n: !0
                    }, Y = 1; v > Y; Y++) T = Q[Y], A = v - 1 > Y ? Q[Y + 1] : c, L.addPoint(t, T, A, G, Q)
                })
            }, addPoint: function (k, U, B, h, s) {
                var a, Y, n, t, p, Z, L, E, A, I = this, y = k.p, i = k.f, G = k.b, C = I.s("shape3d.side") || fo,
                    d = I.s("shape3d.start.angle"), K = I.s("shape3d.sweep.angle"), P = I.shapeModel,
                    X = I.data.isClosePath();
                if (k.n && (k.n = !1, i = X && s.length > 2 ? Sq(s[s.length - 2], y, U, h) : Sq(c, y, U, h), G = Fl(y, i), P ? P.top_vs && I._10O(G, i, C, d, K, P.top_vs, P.top_uv) : (a = I.left) && (I.addV(a.vs, G, i), I._13O(a))), Y = B ? Sq(y, U, B, h) : X && s.length > 2 ? Sq(y, U, s[1], h) : Sq(y, U, c, h), n = Fl(U, Y), P) {
                    var x, q, u = P.vs, l = P.uv, f = P.sum;
                    for (l && (x = P.len / f, P.len += Wg(y, U), q = P.len / f), Z = I._9O(G, i, C, d, K), L = I._9O(n, Y, C, d, K), E = 0; C > E; E++) A = E + 1, Ml(u, Z[A]), Ml(u, L[E]), Ml(u, Z[E]), Ml(u, L[E]), Ml(u, Z[A]), Ml(u, L[A]), l && (t = E / C, p = A / C, l.push(x, p, q, t, x, t, q, t, x, p, q, p));
                    !B && P.bottom_vs && I._10O(n, Y, C, d, K, P.bottom_vs, P.bottom_uv, !0)
                } else !B && (a = I.right) && (I.addV(a.vs, Y, n), I._13O(a)), (a = I.front) && I.addV(a.vs, i, Y), (a = I.back) && I.addV(a.vs, n, G), (a = I.top) && I.addH(a.vs, i, Y, n, G, !0), (a = I.bottom) && I.addH(a.vs, G, n, Y, i);
                k.p = U, k.f = Y, k.b = n
            }, _10O: function (F, s, I, Y, x, g, G, p) {
                var y, b, e = this, K = e.data, r = e._9O(F, s, I, Y, x), A = (F.x + s.x) / 2, W = (F.y + s.y) / 2,
                    E = K.getShapeElevation(), i = 0;
                for (i = 0; I > i; i++) p ? (Ml(g, r[i]), Ml(g, r[i + 1])) : (Ml(g, r[i + 1]), Ml(g, r[i])), Ml(g, [A, E, W]), G && (p ? (y = k * (i + 1) / I + Y, b = k * i / I + Y) : (y = k * i / I + Y, b = k * (i + 1) / I + Y), G.push(.5 - .5 * D(b), .5 - .5 * C(b), .5 - .5 * D(y), .5 - .5 * C(y), .5, .5))
            }, _9O: function (v, b, s, Y, g) {
                var A, j, K = this, d = K.data, G = [], i = (v.x + b.x) / 2, $ = (v.y + b.y) / 2, c = d.getTall() / 2,
                    B = d.getShapeElevation(), _ = 0;
                for (g = g || k; s >= _; _++) A = g * _ / s + Y, j = D(A), G.push([i + (v.x - i) * j, B + c * C(A), $ + (v.y - $) * j]);
                return G
            }, addV: function (p, N, P) {
                var F = N.x, U = N.y, W = P.x, L = P.y, Y = this.data, o = Y.getShapeElevation(), j = Y.getTall() / 2;
                p.push(F, o - j, U, W, o - j, L, W, o + j, L, W, o + j, L, F, o + j, U, F, o - j, U)
            }, addH: function (Y, O, G, H, A, J) {
                var x = this.data, W = x.getTall() / 2, p = x.getShapeElevation() + (J ? W : -W);
                Y.push(O.x, p, O.y, G.x, p, G.y, H.x, p, H.y, H.x, p, H.y, A.x, p, A.y, O.x, p, O.y)
            }, vf: function (i, O, T, S) {
                var U, h = this, e = h.gv.getFaceVisible(h.data, i);
                return (T || e) && (U = Hp(h, i, S), U.vs = [], U.tuv = e && (U.texture || O) ? [] : c, U.visible = e), U
            }
        });
        var Nj = function (h, X) {
            Mr(Nj, this, [h, X])
        };
        fs(Nj, bb, {
            _25Q: 1, validate: function (y) {
                var t = this, G = t.data, E = t.s, H = G.getPoints(), h = H.size();
                if (t.shapeModel = t.info = c, h > 1) {
                    var i = t.info = {}, O = G.getSegments(), v = G.getThickness(), r = bs(H.get(0)),
                        p = bs(H.get(h - 1)), B = h % 2;
                    0 === B ? (i.c1 = bs(H.get(h / 2 - 1)), i.c2 = bs(H.get(h / 2))) : i.p3 = bs(H.get((h - B) / 2)), i.s1 = r, i.s2 = bs(H.get(1)), i.t1 = bs(H.get(h - 2)), i.t2 = p, i.list = E(ij) === df ? t.createTubeModel(H, O, v / 2, y) : t.createLineModel(H, O, v, "shape.border", "shape.dash")
                }
                var e = G.p3(), W = t.mat = ic();
                Cs(W, e), sq(W, G.getFinalRotation3d(), G.getRotationMode());
                var w = G.getScale3d(), X = G._dynamicScale3d;
                X && (w[0] *= X[0], w[1] *= X[1], w[2] *= X[2]), Nf(W, w), Cs(W, Sg(e))
            }, _80o: function (x, f, B) {
                var C = this, a = C.shapeModel;
                if (a) {
                    var l = C.gv;
                    oq(l, C.mat), Fi(l, C.data, a, C, C.getBodyColor(), B), ud(l)
                }
            }
        });
        var vd = t.graph3d.VR = function (G) {
            var R = this;
            R.gv = G, R._controllers = [], R.switch = new Cg(R), R._enable = !1, R._defaultCallLater = t.Default.callLater, "undefined" != typeof m && "VRFrameData" in m && (R._frameData = new m.VRFrameData), R.measureOflength = 1, R.eyesOffset = [0, 0, 0]
        };
        fs(vd, v, {
            ms_fire: !0, _42: function (v, P, g, C) {
                var b = this, U = b.gv, m = b._device;
                if (m) {
                    var s = b._measureOflength;
                    if (m.depthNear = U.getNear() * s, m.depthFar = U.getFar() * s, b._controllers.forEach(function (k) {
                        k && k.update()
                    }), m.isPresenting === !1) return U.iv(), !1;
                    var M = b._frameData;
                    m.getFrameData(M);
                    var A = M.pose.position;
                    return A && U.setEye(b.toViewPosition(A)), v.viewport(0, 0, P / 2, g), b._viewMatrix = b._copyViewMatrix(M.leftViewMatrix), b._projectMatrix = b._copyProjectMatrix(M.leftProjectionMatrix), C(), v.viewport(P / 2, 0, P / 2, g), b._viewMatrix = b._copyViewMatrix(M.rightViewMatrix), b._projectMatrix = b._copyProjectMatrix(M.rightProjectionMatrix), C(), b._lastViewMatrix = b._viewMatrix, b._lastProjectMatrix = b._projectMatrix, b._viewMatrix = null, b._projectMatrix = null, b.submitFrame(), !0
                }
            }, addController: function (D) {
                D = D || 0;
                var u = this, T = u.getController(D);
                return T ? T : (T = new vq(u, D), u._controllers.push(T), T)
            }, getController: function (c) {
                c = c || 0;
                for (var w = this._controllers, R = 0, m = w.length; m > R; R++) if (w[R] && w[R].id === c) return w[R];
                return null
            }, removeController: function (A) {
                A = A || 0;
                for (var e = this._controllers, L = 0, K = e.length; K > L; L++) if (e[L] && e[L].id === A) return e.splice(L, 1), !0;
                return !1
            }, toViewPosition: function (u, c) {
                var d = this, $ = d._scaleFactor, I = d._eyesOffset;
                return c ? (c[0] = u[0] * $ + I[0], c[1] = u[1] * $ + I[1], c[2] = u[2] * $ + I[2], c) : [u[0] * $ + I[0], u[1] * $ + I[1], u[2] * $ + I[2]]
            }, _copyViewMatrix: function (q) {
                var R = this.dup(q), G = this._scaleFactor;
                R[12] *= G, R[13] *= G, R[14] *= G;
                var I = this._eyesOffset;
                if (I && (I[0] || I[1] || I[2])) {
                    var e = I[0], O = I[1], g = I[2];
                    R[12] -= R[0] * e + R[4] * O + R[8] * g, R[13] -= R[1] * e + R[5] * O + R[9] * g, R[14] -= R[2] * e + R[6] * O + R[10] * g
                }
                return R
            }, shutdown: function () {
                var $ = this._device;
                $ && $.isPresenting && $.exitPresent()
            }, isPresenting: function () {
                var I = this._device;
                return I && I.isPresenting
            }, _copyProjectMatrix: function (f) {
                var O = this.dup(f), _ = this._scaleFactor;
                return O[14] *= _, O
            }, dup: function (d, b) {
                for (var v = d.length, Y = b || new Array(v); v--;) Y[v] = d[v];
                return Y
            }, getViewMatrix: function (S) {
                var u = this._viewMatrix;
                return u ? this.dup(u, S) : void 0
            }, getProjectMatrix: function () {
                var K = this._projectMatrix;
                return K ? this.dup(K) : void 0
            }, submitFrame: function () {
                var o = this;
                if (o._enable && o._deviceInAction) {
                    var G = o._device;
                    G && G.isPresenting && (G.submitFrame(), o.gv.iv())
                }
            }, setDevice: function (v) {
                var L = this;
                L._device = v
            }, _injectCallLaterFunc: function (f) {
                var H = this;
                if (!f) return Np = t.Default.callLater = H._defaultCallLater, void 0;
                var H = this;
                Np = t.Default.callLater = function (I, Z, K, t) {
                    var x = H._device;
                    return x && x.isPresenting ? t ? g(function () {
                        Np(I, Z, K)
                    }, t) : x.requestAnimationFrame(function () {
                        H._deviceInAction = !0, I.apply(Z, K), H._deviceInAction = !1
                    }) : (H._defaultCallLater(I, Z, K, K), void 0)
                }
            }
        }), v.defineProperties(vd.prototype, {
            enable: {
                get: function () {
                    return this._enable
                }, set: function (U) {
                    var G = this;
                    G._enable !== U && (G._enable = U, U ? (G.switch.showButton(), G._injectCallLaterFunc(!0)) : (G.shutdown(), G.switch.hideButton(), G._injectCallLaterFunc(!1)))
                }
            }, measureOflength: {
                get: function () {
                    return this._measureOflength
                }, set: function (c) {
                    this._measureOflength = c;
                    var S = this._scaleFactor = 1 / c;
                    this._controllers.forEach(function (f) {
                        f && f._setScaleFactor(S)
                    })
                }
            }, eyesOffset: {
                get: function () {
                    return this._eyesOffset
                }, set: function (Q) {
                    this._eyesOffset = Q
                }
            }, controllerModel: {
                get: function () {
                    return this._controllerModel
                }, set: function (p) {
                    var b;
                    "object" == typeof p ? (b = p.mtl, p = p.obj) : (b = p + ".mtl", p += ".obj");
                    var Y = this, S = Y._controllerModel;
                    S && S.obj === p && S.mtl === b || (S = Y._controllerModel = {
                        obj: p,
                        mtl: b
                    }, F.loadObj(p, b, {
                        finishFunc: function (J, G) {
                            Y._controllerModel === S && F.setShape3dModel("vrControllerModel", G)
                        }
                    }))
                }
            }, interactive: {
                get: function () {
                    return !!this._interactive
                }, set: function (b) {
                    !!b != !!this._interactive && (this._interactive = b, b && this.addController(0), this.gv.getCoreInteractor().enableVR(b))
                }
            }
        });
        var vq = function (v, L) {
            function Y(g) {
                var s = navigator.getGamepads && navigator.getGamepads();
                if (s) for (var Y = 0, T = 0, N = s.length; N > Y; Y++) {
                    var l = s[Y];
                    if (l) {
                        var h = l.id;
                        if ("OpenVR Gamepad" === h || "OpenVR Controller" === h || 0 === h.indexOf("Oculus Touch") || 0 === h.indexOf("Spatial Controller")) {
                            if (T === g) return l;
                            T++
                        }
                    }
                }
            }

            function N(t, z, V) {
                return Math.abs(t[0] - z[0]) < V && Math.abs(t[1] - z[1]) < V && Math.abs(t[2] - z[2]) < V ? !0 : !1
            }

            var q = this;
            q.vr = v, q.id = L;
            var V, e, p = [0, 0], i = [{id: "thumbpad", pressed: !1}, {id: "trigger", pressed: !1}, {
                id: "grips",
                pressed: !1
            }, {id: "menu", pressed: !1}], Q = new Uq;
            Q.s("shape3d", "vrControllerModel"), Q.isController = !0, q.getGamepad = function () {
                return e
            }, q.getButtonState = function (C) {
                i.forEach(function (l) {
                    return l.id === C ? l.pressed : void 0
                })
            }, q.getNode = function () {
                return Q
            };
            var o = .003;
            q.setRotationEpsilon = function (_) {
                o = _
            };
            var b = 5e-4, s = b;
            q.setPositionEpsilon = function (j) {
                b = j, s = j * q.vr._scaleFactor
            }, q._setScaleFactor = function (L) {
                Q.s3(L, L, L), s = b * L
            }, q._setScaleFactor(q.vr._scaleFactor);
            var B, J = new sc, O = new Xi, l = [0, 0, 0], S = [0, 0, 0], u = new Lo, n = new Nq;
            q.getRay = function () {
                return B ? (n.origin.fromArray(l), n.direction.copy(u), B = !1, n) : n
            }, q.update = function () {
                if (V = e, e = Y(L), V !== e && console.log("gamepad changed", e), !e || e.pose === $) return e = null, Q.s("3d.visible", !1), void 0;
                if (F.getShape3dModel("vrControllerModel")) {
                    Q.dm() || v.gv.dm().add(Q), Q.s("3d.visible", !0);
                    var Z = e.pose;
                    if (null !== Z) {
                        Z.position && (q.vr.toViewPosition(Z.position, l), N(Q.p3(), l, s) || (B = !0, Q.p3(l))), Z.orientation && (J.fromArray(Z.orientation), u.set(0, 0, -1).applyQuaternion(J).normalize(), O.makeRotationFromQuaternion(J), pf(O.el, Q.getRotationMode(), S), N(Q.r3(), S, o) || (B = !0, Q.r3(S))), B && v.fp("gamepad.pose", null, {
                            position: l,
                            rotation: S,
                            id: L
                        });
                        var T = e.axes;
                        (p[0] !== T[0] || p[1] !== T[1]) && (p = [T[0], T[1]], v.fp("gamepad.axes", null, {
                            id: L,
                            axes: p
                        }));
                        var M, K, b, n, I = e.buttons;
                        for (M = 0, K = I.length; K > M; M++) b = I[M], n = b.pressed, n !== i[M].pressed && (i[M].pressed = n, v.fp("gamepad.button." + i[M].id, null, {
                            id: L,
                            _62O: n ? "down" : "up"
                        }))
                    }
                }
            }
        }, Cg = function (j) {
            this.vr = j, this._button = null
        };
        fs(Cg, v, {
            showButton: function () {
                var K = this.assureButton();
                if (!K.parentNode) {
                    var N = this.vr.gv, o = N.getView();
                    N._79O ? o.insertBefore(K, N._79O) : o.appendChild(K)
                }
            }, hideButton: function () {
                var y = this._button;
                y && y.parentNode && y.parentNode.removeChild(y)
            }, assureButton: function () {
                var v = this._button;
                return v ? v : this._button = this.createButton(this.vr.gv)
            }, createButton: function (a) {
                function L(E, b) {
                    E.textContent = b && b.isPresenting ? " VR " : " VR "
                }

                function A(y) {
                    l.style.display = "", l.style.cursor = "pointer", l.style.left = "calc(50% - 50px)", l.style.width = "100px", L(l, y), l.onmouseenter = function () {
                        l.style.opacity = "1.0"
                    }, l.onmouseleave = function () {
                        l.style.opacity = "0.5"
                    }, l.onclick = function () {
                        y.isPresenting ? y.exitPresent() : y.requestPresent([{source: a.getCanvas()}])
                    }, a.vr.setDevice(y)
                }

                function Z() {
                    l.style.display = "", l.style.cursor = "auto", l.style.left = "calc(50% - 75px)", l.style.width = "150px", L(l, null), l.onmouseenter = null, l.onmouseleave = null, l.onclick = null, a.vr.setDevice(null)
                }

                function B(E) {
                    E.style.position = "absolute", E.style.bottom = "20px", E.style.padding = "12px 6px", E.style.border = "1px solid #fff", E.style.borderRadius = "4px", E.style.color = "#000", E.style.font = "normal 13px sans-serif", E.style.textAlign = "center", E.style.opacity = "0.5", E.style.outline = "none", E.style.zIndex = "999"
                }

                if ("getVRDisplays" in navigator) {
                    var l = this._button = S.createElement("button");
                    return l.style.display = "none", B(l), m.addEventListener("vrdisplayconnect", function (r) {
                        A(r.display)
                    }, !1), m.addEventListener("vrdisplaydisconnect", function () {
                        Z()
                    }, !1), m.addEventListener("vrdisplaypresentchange", function (e) {
                        L(l, e.display)
                    }, !1), navigator.getVRDisplays().then(function (b) {
                        b.length > 0 ? A(b[0]) : Z()
                    }), l
                }
                var v = S.createElement("a");
                return v.href = "https://webvr.info", v.innerHTML = " webvr", v.style.left = "calc(50% - 90px)", v.style.width = "180px", v.style.textDecoration = "none", B(v), v
            }
        }), v.defineProperties(Cg.prototype, {}), Nn(F, {
            accordionViewExpandIcon: _p($p),
            accordionViewCollapseIcon: _p($p, !0),
            accordionViewLabelColor: db,
            accordionViewLabelFont: Jq,
            accordionViewTitleBackground: Cd,
            accordionViewSelectBackground: bh,
            accordionViewSelectWidth: 3,
            accordionViewSeparatorColor: $,
            splitViewDividerSize: 1,
            splitViewDividerBackground: Cd,
            splitViewDragOpacity: .5,
            splitViewToggleIcon: {width: 16, height: 16, comps: [{type: Vf, rect: [2, 2, 12, 12], background: $p}]},
            propertyViewLabelColor: Cj,
            propertyViewLabelSelectColor: db,
            propertyViewLabelFont: Jq,
            propertyViewExpandIcon: _p(Uo),
            propertyViewCollapseIcon: _p(Uo, !0),
            propertyViewBackground: Tc,
            propertyViewRowLineVisible: !0,
            propertyViewColumnLineVisible: !0,
            propertyViewRowLineColor: vj,
            propertyViewColumnLineColor: vj,
            propertyViewSelectBackground: bh,
            listViewLabelColor: Cj,
            listViewLabelSelectColor: db,
            listViewLabelFont: Jq,
            listViewRowLineVisible: !1,
            listViewRowLineColor: vj,
            listViewSelectBackground: bh,
            treeViewLabelColor: Cj,
            treeViewLabelSelectColor: db,
            treeViewLabelFont: Jq,
            treeViewExpandIcon: _p(zg),
            treeViewCollapseIcon: _p(zg, !0),
            treeViewRowLineVisible: !1,
            treeViewRowLineColor: vj,
            treeViewSelectBackground: bh,
            treeViewDoubleClickToToggle: !0,
            tableViewLabelColor: Cj,
            tableViewLabelSelectColor: db,
            tableViewLabelFont: Jq,
            tableViewRowLineVisible: !0,
            tableViewColumnLineVisible: !0,
            tableViewRowLineColor: vj,
            tableViewColumnLineColor: vj,
            tableViewSelectBackground: bh,
            treeTableViewLabelColor: Cj,
            treeTableViewLabelSelectColor: db,
            treeTableViewLabelFont: Jq,
            treeTableViewExpandIcon: _p(zg),
            treeTableViewCollapseIcon: _p(zg, !0),
            treeTableViewRowLineVisible: !0,
            treeTableViewColumnLineVisible: !0,
            treeTableViewRowLineColor: vj,
            treeTableViewColumnLineColor: vj,
            treeTableViewSelectBackground: bh,
            tableHeaderLabelColor: Cj,
            tableHeaderLabelFont: Jq,
            tableHeaderColumnLineVisible: !0,
            tableHeaderColumnLineColor: Wd,
            tableHeaderBackground: Tc,
            tableHeaderMoveBackground: Rr,
            tableHeaderInsertColor: bh,
            tableHeaderSortDescIcon: Ob(Uo, !0),
            tableHeaderSortAscIcon: Ob(Uo),
            tabViewTabGap: 1,
            tabViewLabelColor: db,
            tabViewLabelFont: Jq,
            tabViewTabBackground: Cd,
            tabViewSelectWidth: 3,
            tabViewSelectBackground: bh,
            tabViewMoveBackground: Rr,
            tabViewInsertColor: bh,
            toolbarLabelColor: Cj,
            toolbarLabelSelectColor: db,
            toolbarLabelFont: Jq,
            toolbarBackground: Tc,
            toolbarSelectBackground: bh,
            toolbarItemGap: 8,
            toolbarSeparatorColor: id
        }, !0);
        var Yf = {translateX: 1, sortColumn: 1}, Ke = {sortable: 1, sortOrder: 1, sortFunc: 1}, gg = {focusData: 1},
            xn = {dataModel: 1, sortColumn: 1, sortFunc: 1, visibleFunc: 1, rootData: 1, rootVisible: 1},
            mr = {dataModel: 1, sortFunc: 1, visibleFunc: 1, categorizable: 1}, Xg = function (e, H) {
                H.add(e), e.hasChildren() && e.eachChild(function (S) {
                    Xg(S, H)
                })
            }, Ej = function (M, B, k, b, u, v, h, y, Y, N, D) {
                var J, Q = k.getValueType(N), H = k.getAlign(N);
                if (k.getEnumValues(N)) {
                    var z = k.toEnumLabel(B, N), p = Fp || 0, P = 0, $ = v, l = F.getTextSize(b, z).width;
                    return J = cd(k.toEnumIcon(B, N)), J && (P = v + Fp / 2, "center" === H ? P += (y - (p + l)) / 2 : "right" === H && (P = P + y - (p + l)), hi(M, J, P, h + Y / 2, N, D), $ = P + Fp / 2), z != c && (J ? Vr(M, z, b, u, $, h, y - ($ - v), Y) : Vr(M, z, b, u, v, h, y, Y, H)), void 0
                }
                return B = k.formatValue(B), B != c ? Q === Io ? (Ui(M, v, h, y, Y, B), void 0) : Q === om || !Q && Dl(B) ? (J = cd(B ? Vi : Yn), hi(M, J, v + y / 2, h + Y / 2, N, D), void 0) : (Vr(M, B, b, u, v, h, y, Y, H), void 0) : void 0
            }, Kq = function (m, o) {
                var y = o.view, R = Ri(m), l = o.column || o.property;
                y.getDataModel().beginTransaction(), o.editor = m, m.info = o, y.setCurrentEditor(m), y.getView().insertBefore(R, y._79O), Ee(m, o.editorRect), m.setFocus ? m.setFocus() : Cm(m), m.commitValue = function (f, I) {
                    m._17Q && (m = m._17Q), I || y.setValue(o.data, l, m.getValue ? m.getValue() : m.value), m.close && m.close(), zm(R)
                }, l.onEditorCreated && l.onEditorCreated(o)
            }, Tn = function (e, z, X, q, l) {
                var J = Bp(e, X), D = z.value, E = z.view, K = l.getValueType(z.data);
                return J.onblur = J.onchange = function () {
                    E.endEditing()
                }, "input" === e ? (D = l.formatValue(D), D != c && (J.value = D), J.onkeydown = function (n) {
                    Mk(n) ? E.endEditing() : fb(n) && E.endEditing(!0)
                }, (K === jb || K === rc) && J.addEventListener(uo, F.numberListener, !1)) : e === Wc && q.forEach(function (q) {
                    var y = S.createElement("option");
                    y.innerHTML = l.toEnumLabel(q), y.value = q, l.isEnumEqual(D, q) && (y.selected = !0), Vo(J, y)
                }), Kq(J, z), J
            }, mo = t.widget = {}, qo = function (q, h, D) {
                fs(G + ".widget." + q, h, D)
            };
        Nn(zh, {
            ms_value: function (t) {
                t.getValue = function (p) {
                    var v = this.getItemById(p), x = v.element;
                    return Rp(x) ? x : x ? x.getValue ? x.getValue() : x.value : v.selected
                }, t.setValue = function (s, y) {
                    var B = this.getItemById(s);
                    if (B) {
                        var U = B.element;
                        U && !Rp(U) ? U.setValue ? U.setValue(y) : U.value = y : Dl(y) ? (B.selected = y, this.iv()) : (B.element = y, this.iv())
                    }
                }, t.v = function (l, Y) {
                    var n = this;
                    if (2 === arguments.length) n.setValue(l, Y); else {
                        if (!Pe(l)) return n.getValue(l);
                        for (var G in l) n.setValue(G, l[G])
                    }
                    return n
                }
            }, _46o: function (K) {
                K._icon = c, K._accessType = c, K._valueType = c, K._editable = !1, K._batchEditable = !0, K._align = Ch, K._nullable = !0, K._emptiable = !1, K.setParent = ze, K.formatValue = function (Z) {
                    var W = this, t = W._valueType;
                    return W.getEnumValues() ? W.toEnumLabel(Z) : t === om ? !!Z : Z != c && t === jb ? P(Z) : Z
                }, K.setEnum = function (P, t, d, y, N, F, w) {
                    var g = this;
                    P && !Qd(P) && P.values && (y = P.editable, d = P.icons, t = P.labels, N = P.strict, F = P.maxHeight, w = P.dropDownWidth, P = P.values), $b(P) && (P = P._as), $b(t) && (t = t._as), $b(d) && (d = d._as), g._enumValues = P, g._enumLabels = t, g._enumIcons = d, g._enumEditable = y, g._enumStrict = N == c ? !0 : N, g._enumMaxHeight = F, g._enumDropDownWidth = w, P && P.length && Zc(P[0]) && (g._valueType = rc), g.fp("enum", !1, !0)
                }, K.getEnumDropDownWidth = function () {
                    return this._enumDropDownWidth
                }, K.getEnumMaxHeight = function () {
                    return this._enumMaxHeight
                }, K.isEnumEditable = function () {
                    return this._enumEditable
                }, K.getEnumValues = function () {
                    return this._enumValues
                }, K.getEnumLabels = function () {
                    return this._enumLabels
                }, K.getEnumIcons = function () {
                    return this._enumIcons
                }, K.isEnumStrict = function () {
                    return this._enumStrict
                }, K.isEnumEqual = function (Z, d) {
                    return this._enumStrict ? Z === d : Z == d
                }, K.toEnumLabel = function (f, Y) {
                    var n = this, k = n.getEnumValues(Y), p = n.getEnumLabels(Y);
                    if (k && p) for (var b = 0; b < k.length; b++) if (n.isEnumEqual(f, k[b])) return p[b];
                    return f
                }, K.toEnumIcon = function (t, i) {
                    var A = this, P = A.getEnumValues(i), q = A.getEnumIcons(i);
                    if (P && q) for (var G = 0; G < P.length; G++) if (A.isEnumEqual(t, P[G])) return q[G];
                    return $
                }
            }, _45o: function (n) {
                n._87o = function (K, u, S, s, x, w) {
                    if (K) {
                        var f = this, b = f._90I, B = Gl(1);
                        f._columnLineVisible && (x -= 1), f._rowLineVisible && (w -= 1), 0 >= x || 0 >= w || (f._90I || (b = f._90I = {}), b[u] || (b[u] = new vp), Ee(B, f.tx() + S, f.ty() + s, x, w), Vo(B, K), f._view.insertBefore(B, f._79O), K.onParentAdded && K.onParentAdded(B), b[u].add(B))
                    }
                }, n._76o = function () {
                    var L = this, C = L._90I;
                    if (C) {
                        for (var i in C) C[i].each(function (k) {
                            zm(k)
                        });
                        delete L._90I
                    }
                }, n._77o = function (G) {
                    var M = this;
                    if (M._90I) {
                        var o = M._90I[G];
                        o && (o.each(function (c) {
                            zm(c)
                        }), delete M._90I[G])
                    }
                }
            }, _47o: function (t) {
                t.getValue = function (h, c) {
                    return c.getValue ? c.getValue(h, c, this) : Rb(h, c.getAccessType(), c.getName())
                }, t.setValue = function (D, M, B) {
                    if (M.isEmptiable(D) || "" !== B || (B = $), M.isNullable(D) || B != c) {
                        var W = this, U = M.getName(D), Z = M.getAccessType(D), m = M.getValueType(D);
                        m === jb && Rp(B) ? B = A(B) : m === rc && Rp(B) ? B = parseFloat(B) : m === om && Rp(B) && (B = "true" === B), W._batchEditable && M._batchEditable && W.isSelected(D) ? W.sm().each(function (R) {
                            M.setValue ? M.setValue(R, M, B, W) : Ub(R, Z, U, B)
                        }) : M.setValue ? M.setValue(D, M, B, W) : Ub(D, Z, U, B)
                    }
                }, t.setCurrentEditor = function (q) {
                    this.endEditing(), this._currentEditor = q, this.redraw()
                }, t.isEditing = function (T, z) {
                    var J = this, x = J._currentEditor;
                    if (!x) return !1;
                    if (z) {
                        var H = x.info;
                        return H ? (H.column || H.property) === z && H.data === T : !1
                    }
                    return !0
                }, t.endEditing = function (k) {
                    var X = this, O = X._currentEditor;
                    O && (delete X._currentEditor, O.commitValue && O.commitValue(O.info, k), X.redraw(), X.getDataModel().endTransaction())
                }, t.beginEditing = function (E) {
                    this.endEditing();
                    var t = this, $ = E.column || E.property;
                    if ($.beginEditing) $.beginEditing(E); else {
                        var p = E.data, R = E.value, V = t.getSelectBackground(p), D = $.getEnumValues(p),
                            h = $.getSlider(p), q = $.getColorPicker(p);
                        if (h) {
                            var e = Ai(mo.Slider, h);
                            return e.setValue(R), e.getView().onblur = function () {
                                t.endEditing()
                            }, e.isInstant() && (e.onValueChanged = function () {
                                t.setValue(p, $, e.getValue())
                            }), Kq(e, E), void 0
                        }
                        if (q || $.getValueType(p) === Io) {
                            var b = Ai(mo.ColorPicker, q);
                            return b.setValue(R), b.onClosed = function () {
                                t.endEditing()
                            }, b.isInstant() && (b.onValueChanged = function (D, Z) {
                                t.setValue(p, $, Z)
                            }), Kq(b, E), b.open(), void 0
                        }
                        if (D) {
                            if (mo.ComboBox) {
                                var m = new mo.ComboBox;
                                m.setValue(R), m.setValues(D), m.setLabels($.getEnumLabels(p)), m.setIcons($.getEnumIcons(p)), m.setEditable($.isEnumEditable(p)), m.setStrict($.isEnumStrict(p)), m.setMaxHeight($.getEnumMaxHeight(p)), m.setDropDownWidth($.getEnumDropDownWidth(p)), m.onClosed = function () {
                                    t.endEditing()
                                }, Kq(m, E), m.open()
                            } else Tn(Wc, E, V, D, $);
                            return
                        }
                        var d = $.getValueType(p);
                        if (d === om || Dl(R)) return t.setValue(p, $, !R), void 0;
                        if ($.getItemEditor(p)) {
                            var I = qn($.getItemEditor(p)), T = new I(p, $, t, E), j = T.getView();
                            return j._17Q = T, T.setValue(R), gh(j), Kq(j, E), T.editBeginning && T.editBeginning(), void 0
                        }
                        Tn("input", E, V, c, $)
                    }
                }
            }, _44o: function (u) {
                u.init = function (g) {
                    var N = this, p = N.th = new xs(g), M = N._view = ts(1, N);
                    N.tv = N._tableView = g, Vo(M, p.getView()), Vo(M, g.getView()), p.mp(function (d) {
                        d.property === pb && N.iv()
                    }), N.iv()
                }, u.getTableView = function () {
                    return this.tv
                }, u.getTableHeader = function () {
                    return this.th
                }, u.getDataModel = function () {
                    return this.tv.dm()
                }, u.getColumnModel = function () {
                    return this.tv.getColumnModel()
                }, u.setColumns = function (a) {
                    this.tv.setColumns(a)
                }, u.addColumns = function (W) {
                    this.tv.addColumns(W)
                }, u.endEditing = function () {
                    this.tv.endEditing()
                }, u.validateImpl = function () {
                    var n = this, C = n.th, L = di(C), Q = {x: 0, y: 0, width: n.getWidth(), height: L};
                    Ee(C, Q), Q.y = L, Q.height = y(0, n.getHeight() - L), Ee(n.tv, Q)
                }
            }, ms_vs: function (d) {
                d._41o = function () {
                    return this._29I.height < this._59I
                }, d._43o = function () {
                    var n = this;
                    n._41o() && (n._58I || (g(function () {
                        n._94O()
                    }, Ir), n.iv()), n._58I = new Date)
                }, d._94O = function () {
                    var c = this;
                    if (c._58I) {
                        var U = new Date;
                        U.getTime() - c._58I.getTime() >= Ir ? (delete c._58I, c.iv()) : g(function () {
                            c._94O()
                        }, Ir)
                    }
                }, d._93I = function () {
                    var l = this, F = l._27I;
                    if (l._58I || !l._autoHideScrollBar) {
                        F || Vo(l._79O, F = l._27I = Gl());
                        var d = l._29I, q = d.height, o = l._59I, i = l.getScrollBarSize(), t = d.width - i - 2,
                            M = q * (-l.ty() / o), $ = q * (q / o), O = F.style;
                        o > q ? (go > $ && (M = M + $ / 2 - go / 2, 0 > M && (M = 0), M + go > q && (M = q - go), $ = go), O.visibility = dr, O.background = l.getScrollBarColor(), O.borderRadius = i / 2 + hr, Ee(F, t, M, i, $)) : O.visibility = oh
                    } else F && (F.style.visibility = oh)
                }
            }, ms_hs: function (b) {
                b._40o = function () {
                    return this._29I.width < this._91I
                }, b._42o = function () {
                    var r = this;
                    r._40o() && (r._95O || (g(function () {
                        r._94I()
                    }, Ir), r.iv()), r._95O = new Date)
                }, b._94I = function () {
                    var t = this;
                    if (t._95O) {
                        var w = new Date;
                        w.getTime() - t._95O.getTime() >= Ir ? (delete t._95O, t.iv()) : g(function () {
                            t._94I()
                        }, Ir)
                    }
                }, b._92I = function () {
                    var K = this, A = K._28I;
                    if (K._95O || !K._autoHideScrollBar) {
                        A || Vo(K._79O, A = K._28I = Gl());
                        var W = K._29I, c = W.width, x = K._91I, R = K.getScrollBarSize(), r = W.height - R - 2,
                            H = c * (-K.tx() / x), u = c * (c / x), $ = A.style;
                        x > c ? (go > u && (H = H + u / 2 - go / 2, 0 > H && (H = 0), H + go > c && (H = c - go), u = go), $.visibility = dr, $.background = K.getScrollBarColor(), $.borderRadius = R / 2 + hr, Ee(A, H, r, u, R)) : $.visibility = oh
                    } else A && (A.style.visibility = oh)
                }
            }
        }), Mq(Vi, fq(16, 16, [{type: Wj, rect: [1, 1, 14, 14], background: bh}, {
            type: Yh,
            rect: [1, 1, 14, 14],
            width: 1,
            color: Jh
        }, {
            type: ng,
            points: [13, 3, 7, 12, 4, 8],
            borderWidth: 2,
            borderColor: "#FFF"
        }])), Mq(Yn, fq(16, 16, {type: Yh, rect: [1, 1, 14, 14], width: 1, color: Jh})), Mq(Pc, fq(16, 16, [{
            type: ge,
            rect: [2, 2, 12, 12],
            borderWidth: 1,
            borderColor: Jh,
            background: "#FFF"
        }, {type: ge, rect: [4, 4, 8, 8], background: bh}])), Mq(bl, fq(16, 16, {
            type: ge,
            rect: [2, 2, 12, 12],
            borderWidth: 1,
            borderColor: Jh
        })), zh._15Q = function (G) {
            G._29I = Wo, G._59I = 0, G._91I = 0, G._5o = function (C) {
                var s = this;
                s._30I = new vp, s._rows = new vp, s._rowMap = {}, s._31I = 0, s._14I = 0, s._view = ts(1, s), s._canvas = Jm(s._view), Vo(s._view, s._79O = Gl()), s.dm(C ? C : new ek)
            }, G.getCheckIcon = function (U) {
                var G = this.sm(), W = G.co(U);
                return G.sg() ? cd(W ? Pc : bl) : cd(W ? Vi : Yn)
            }, G.checkData = function (L) {
                var D = this.sm(), k = D.co(L);
                D.sg() && k || (this._32o = 1, k ? D.rs(L) : D.as(L), delete this._32o)
            }, G.getDataAt = function (u) {
                u.target && (u = this.lp(u));
                var V = Q(u.y / this._rowHeight), N = this._rows;
                return 0 > V || V >= N.size() ? c : N.get(V)
            }, G.onDataDoubleClicked = function () {
            }, G.onDataClicked = function () {
            }, G.adjustTranslateX = function () {
                return 0
            }, G.adjustTranslateY = function (F) {
                var H = this.getHeight() - this._59I;
                return H > F && (F = H), F > 0 ? 0 : P(F)
            }, G.onPropertyChanged = function (r) {
                var G = this, F = r.property;
                xn[F] ? G.ivm() : gg[F] || G.redraw(), F === An ? G._42o() : F === $n && G._43o()
            }, G.getLabel = function (G) {
                return G.toLabel()
            }, G.getLabelFont = function () {
                return this._labelFont
            }, G.getLabelColor = function (Y) {
                var n = this;
                if (n.isCheckMode()) {
                    if (n._focusData === Y) return n._labelSelectColor
                } else if (n.isSelected(Y)) return n._labelSelectColor;
                return n._labelColor
            }, G.getStartRowIndex = function () {
                return this._31I
            }, G.getEndRowIndex = function () {
                return this._14I
            }, G.getRowDatas = function () {
                return this._rows
            }, G.getRowIndex = function (S) {
                return this._rowMap[S._id]
            }, G.getRowSize = function () {
                return this._rows.size()
            }, G.getViewRect = function () {
                return hh(this._29I)
            }, G.isVisible = function (q) {
                return this._visibleFunc ? this._visibleFunc(q) : !0
            }, G.getCurrentSortFunc = function () {
                return this._sortFunc
            }, G.setDataModel = function (d) {
                var s = this, C = s._dataModel, O = s._selectionModel;
                C !== d && (C && (C.umm(s.handleDataModelChange, s), C.umd(s.handleDataPropertyChange, s), C.umh(s.handleHierarchyChange, s), O || C.sm().ums(s.handleSelectionChange, s)), s._dataModel = d, d.mm(s.handleDataModelChange, s), d.md(s.handleDataPropertyChange, s), d.mh(s.handleHierarchyChange, s), O ? O._21I(d) : d.sm().ms(s.handleSelectionChange, s), s.fp("dataModel", C, d))
            }, G.validateModel = function () {
                var f = this;
                f._rows.clear(), f._rowMap = {}, f.buildChildren(f._dataModel._roots);
                var H = f._rows = f._rows.toList(f.isVisible, f), k = 0, O = f.getCurrentSortFunc(), y = H.size();
                for (O && H.sort(O); y > k; k++) f._rowMap[H.get(k)._id] = k
            }, G.buildChildren = function (z) {
                var X = this;
                z.each(function (h) {
                    X._rows.add(h), X.buildChildren(h._children)
                })
            }, G.handleDataModelChange = function () {
                this.ivm()
            }, G.handleDataPropertyChange = function (A) {
                "parent" === A.property ? this.ivm() : this.invalidateData(A.data)
            }, G.handleHierarchyChange = function () {
                this.ivm()
            }, G.handleSelectionChange = function (g) {
                g.datas.each(this.invalidateData, this), this.onSelectionChanged(g)
            }, G.onSelectionChanged = function (P) {
                var s = this, h = s.sm();
                !s.isAutoMakeVisible() || 1 !== h.size() || "set" !== P.kind && "append" !== P.kind || s._32o || s.makeVisible(h.ld())
            }, G.handleBackgroundClick = function (z) {
                fj(z) && !this.isCheckMode() && this.sm().cs()
            }, G.makeVisible = function (m) {
                m && (this._23I = m, this.iv())
            }, G.scrollToIndex = function (h) {
                var k = this, w = k._29I, N = w.height, s = k._rowHeight, S = s * h;
                h >= 0 && h < k._rows.size() && N > 0 && (S + s > w.y + N ? k.ty(-S + N - s) : S < w.y && k.ty(-S))
            }, G.autoScroll = function (X, G) {
                var f = this, x = f._rowHeight, r = x, d = x / 4, I = f._29I, U = f.lp(X), n = {x: f.tx(), y: f.ty()};
                return x > 0 && I && (U.x - I.x < r ? f.translate(d, 0) : I.x + I.width - U.x < r && f.translate(-d, 0), U.y - I.y < r ? f.translate(0, d) : I.y + I.height - U.y < r && f.translate(0, -d)), n.x = f.tx() - n.x, n.y = f.ty() - n.y, G && (G.x += n.x, G.y += n.y), n
            }, G.getTopRowOrderSelection = function () {
                var i = this.sm().getTopSelection(), r = {}, C = new vp;
                return i.each(function (f) {
                    r[f._id] = f
                }), this._rows.each(function (E) {
                    r[E._id] && C.add(E)
                }), C
            }, G.getRowOrderSelection = function () {
                var k = new vp;
                return this._rows.each(function (B) {
                    this.isSelected(B) && k.add(B)
                }, this), k
            }, G.ivm = function () {
                this.invalidateModel()
            }, G.invalidateModel = function () {
                var M = this;
                M._96I || (M._96I = 1, M._32I = 1, delete M._24I), M.iv()
            }, G.redraw = function () {
                var f = this;
                f._32I || (f._32I = 1, delete f._24I, f.iv())
            }, G.invalidateData = function (D) {
                var G = this;
                a ? G.redraw() : G._32I || (G._24I || (G._24I = {}), G._24I[D._id] = D, G.iv())
            }, G.getFocusData = function () {
                return this._focusData
            }, G.setFocusDataById = function (l) {
                this.setFocusData(this.dm().getDataById(l))
            }, G.setFocusData = function (f) {
                var O = this, C = O._focusData;
                C !== f && (O._focusData = f, O.fp("focusData", C, f), C && O.invalidateData(C), f && (O.invalidateData(f), O.isAutoMakeVisible() && O.makeVisible(f)))
            }, G.drawRowBackground = function (b, K, l, N, r, n, E) {
                var W = this, p = W.isCheckMode();
                (K === W._focusData && p || l && !p) && Ui(b, N, r, n, E, W.getSelectBackground(K))
            }, G.drawData = function (K, X, Q) {
                var O = this, g = O._rowHeight, W = g * Q, L = O._29I, $ = L.x, z = L.width;
                K.save(), K.beginPath(), K.rect($, W, z, g), K.clip(), O._87o(O.drawRow(K, X, O.isSelected(X), $, W, z, g), Q, $, W, z, g), K.restore(), O._rowLineVisible && Ui(K, $, W + g - 1, z, 1, O._rowLineColor)
            }, G._12I = function (I) {
                var g = this, N = g._31I, e = g._29I, n = e.x, i = e.y, F = e.width, G = e.height;
                for (I.beginPath(), I.rect(n, i, F, G), I.clip(), I.clearRect(n, i, F, G), g._76o(), g._93db(I); N < g._14I; N++) g.drawData(I, g._rows.get(N), N);
                g._92db(I)
            }, G._13I = function (Z) {
                for (var N, Q = this, s = Q._rowHeight, k = Q._29I, F = k.x, W = k.width, B = Q._31I, M = Q._30I; B < Q._14I; B++) N = Q._rows.get(B), Q._24I[N._id] && M.add({
                    data: N,
                    index: B
                });
                M.isEmpty() || (Z.beginPath(), M.each(function (y) {
                    Z.rect(F, y.index * s, W, s)
                }), Z.clip(), M.each(function (C) {
                    Z.clearRect(F, C.index * s, W, s)
                }), M.each(function (K) {
                    Q._77o(K.index)
                }), Q._93db(Z), M.each(function (i) {
                    Q.drawData(Z, i.data, i.index)
                }), Q._92db(Z), M.clear())
            }, G.validateImpl = function () {
                var l = this, P = l._canvas, d = l.getWidth(), n = l.getHeight(), f = l._rowHeight, r = l._32I;
                (d !== P.clientWidth || n !== P.clientHeight) && (Sd(P, d, n), r = 1);
                var t = V && !L;
                l._96I && !t && l.validateModel();
                var N = l._29I, F = {x: -l.tx(), y: -l.ty(), width: d, height: n}, m = l._rows.size(), b = fk(P),
                    p = l._23I;
                r || Ab(F, N) || (r = 1), l._29I = F, l._59I = m * f, l._31I = Q(F.y / f), l._14I = E((F.y + F.height) / f), l._31I < 0 && (l._31I = 0), l._14I > m && (l._14I = m), l._99I && r && l._99I(), Vm(b, l.tx(), l.ty(), 1), r ? l._12I(b) : l._24I && l._13I(b), l._93I(), l._92I(), b.restore(), l._32I = l._24I = l._96I = c, p && (l.scrollToIndex(l.getRowIndex(p)), delete l._23I), l.tx(l.tx()), l.ty(l.ty())
            }
        }, zh._48o = function (q) {
            q._rootVisible = !0, q._rootData = c, q._35o = function () {
                this._expandMap = {}, this._levelMap = {}
            }, q.validateModel = function () {
                var H = this, F = H._rootData;
                H._rows.clear(), H._levelMap = {}, H._rowMap = {}, H._currentLevel = 0, F ? H._rootVisible ? H.isVisible(F) && H.buildData(F) : H.buildChildren(F) : H.buildChildren(), delete H._currentLevel
            }, q.buildData = function (r) {
                var f = this, T = r._id, V = f._rows;
                f._rowMap[T] = V.size(), V.add(r), f._levelMap[T] = f._currentLevel, f.isExpanded(r) && (f._currentLevel++, f.buildChildren(r), f._currentLevel--)
            }, q.buildChildren = function (u) {
                var i = this, o = u ? u._children : i._dataModel._roots, Z = i.getCurrentSortFunc();
                Z && i.isChildrenSortable(u) ? o.toList(i.isVisible, i).sort(Z).each(i.buildData, i) : o.each(function (X) {
                    i.isVisible(X) && i.buildData(X)
                })
            }, q.getLevel = function (G) {
                return this._levelMap[G._id]
            }, q.getToggleIcon = function (u) {
                var B = this, H = B._loader, M = B._collapseIcon;
                return H && !H.isLoaded(u) ? M : u.hasChildren() ? B.isExpanded(u) ? B._expandIcon : M : c
            }, q.isCheckMode = function () {
                return this._checkMode != c
            }, q.isChildrenSortable = function () {
                return !0
            }, q.handleDataModelChange = function (x) {
                var T = this;
                x.kind === de ? delete T._expandMap[x.data._id] : x.kind === Lg && (T._expandMap = {}), T.ivm()
            }, q.toggle = function (l) {
                var C = this;
                C.isExpanded(l) ? C.collapse(l) : C.expand(l)
            }, q.isExpanded = function (h) {
                return 1 === this._expandMap[h._id]
            }, q.expand = function (x) {
                var P = this, $ = P._loader;
                P.isExpanded(x) || ($ && !$.isLoaded(x) && $.load(x), P._expandMap[x._id] = 1, P.ivm(), P.onExpanded(x))
            }, q.onExpanded = function () {
            }, q.collapse = function (I) {
                var X = this;
                X.isExpanded(I) && (delete X._expandMap[I._id], X.ivm(), X.onCollapsed(I))
            }, q.onCollapsed = function () {
            }, q.expandAll = function (c) {
                if (c) this.expand(c), c.eachChild(function (N) {
                    this.expandAll(N)
                }, this); else {
                    var v = this;
                    v._dataModel.each(function (y) {
                        y.hasChildren() && (v._expandMap[y._id] = 1)
                    }), v.ivm()
                }
            }, q.collapseAll = function () {
                this._expandMap = {}, this.ivm()
            }, q.makeVisible = function (C) {
                if (C) {
                    var f = this;
                    if (!f._rootData || C.isDescendantOf(f._rootData)) {
                        for (var s = C._parent; s;) f.expand(s), s = s._parent;
                        f._23I = C, f.iv()
                    }
                }
            }, q.checkData = function (H) {
                var A, $ = this, f = $._checkMode, l = $.sm(), w = l.co(H);
                if (!l.sg() || !w) {
                    if ($._32o = 1, f === Zp) w ? l.rs(H) : l.as(H); else if (f === Zm) A = new vp(H), A.addAll(H._children); else if ("descendant" === f) A = new vp, Xg(H, A); else if ("all" === f && (A = new vp, Xg(H, A), !w)) for (var s = H._parent; s;) A.add(s), s = s._parent;
                    A && (w ? l.rs(A) : l.as(A)), delete $._32o
                }
            }, q._97I = function (s, F, O, z, Y, V, Q) {
                var c = this, M = c._indent, U = c._levelMap[F._id], u = c.getIconWidth(F), n = cd(c.getToggleIcon(F));
                n ? (z += M * U, hi(s, n, z + M / 2, Y + Q / 2, F, c), z += M) : z += M * (U + 1), c._checkMode && (hi(s, c.getCheckIcon(F), z + M / 2, Y + Q / 2, F, c), z += M), c.drawIcon(s, F, z, Y, u, Q), c.drawLabel(s, F, z + u, Y, Q)
            }
        }, zh._14Q = function (L) {
            L.getIcon = function (G) {
                return G.getIcon()
            }, L.getIconWidth = function (M) {
                return this.getIcon(M) ? this._indent : 0
            }, L.drawIcon = function (y, s, k, T, I, H) {
                if (I) {
                    var z = this, e = z.getBodyColor(s), r = cd(z.getIcon(s), e);
                    r && (H -= z.isRowLineVisible() ? 1 : 0, pq(y, r, aj, k, T, I, H, s, z, e), Qg(y, z.getBorderColor(s), k, T, I, H))
                }
            }, L.drawLabel = function (W, X, B, r, j) {
                var y = this;
                Vr(W, y.getLabel(X), y.getLabelFont(X), y.getLabelColor(X), B, r, 0, j)
            }
        }, zh._50o = function (f) {
            f._98I = function () {
                var Z = this, C = Z._39o = new ek;
                Z._60I = new vp, C.mm(Z._17o, Z), C.md(Z._18o, Z), C.mh(Z._19o, Z)
            }, f.setColumns = function (X) {
                this._39o.clear(), this.addColumns(X)
            }, f.addColumns = function (u) {
                var M = this._39o;
                u.forEach(function (t) {
                    if (!(t instanceof Al)) {
                        var n = qn(t.className);
                        t = Ai(n ? n : Al, t)
                    }
                    M.add(t)
                })
            }, f.onColumnClicked = function () {
            }, f.onCheckColumnClicked = function () {
            }, f._3Q = function (D) {
                for (var N, k = 0, W = this._60I, I = W.size(); I > k; k++) if (N = W.get(k), N.column === D) return N;
                return c
            }, f.getColumnAt = function (m) {
                var a = this._4Q(m);
                return a ? a.column : c
            }, f._4Q = function ($) {
                for (var G = this, m = $.target ? G.lp($).x : $.x, l = G._60I, e = 0; e < l.size(); e++) {
                    var S = l.get(e), v = S.startX;
                    if (m >= v && m < v + S.column.getWidth()) return S
                }
                return c
            }, f.getToolTip = function (V) {
                var o = this, L = o.getDataAt(V), y = o.getColumnAt(V);
                return L && y ? y.getToolTip(L, o) : c
            }, f.adjustTranslateX = function (K) {
                var l = this.getWidth() - this._91I;
                return l > K && (K = l), K > 0 ? 0 : P(K)
            }, f._99I = function () {
                var V = this, m = V._29I, G = V._60I;
                G.clear(), V._91I = 0, V._39o._roots.each(function (T) {
                    if (T.isVisible()) {
                        var k = V._91I + T.getWidth();
                        V._91I <= m.x + m.width && k >= m.x && G.add({column: T, startX: V._91I}), V._91I = k
                    }
                })
            }, f.drawData = function (c, Y, g) {
                var h = this, C = h._rowHeight, s = C * g, b = h.isSelected(Y), W = h._29I, U = W.x, j = W.width;
                h.drawRowBackground(c, Y, b, U, s, j, C), h._60I.each(function (r) {
                    var v = r.column, i = r.startX, B = v.getWidth();
                    B > 0 && !h.isEditing(Y, v) && (c.save(), c.beginPath(), c.rect(i, s, B, C), c.clip(), h._87o(h.drawCell(c, Y, b, v, i, s, B, C), g, i, s, B, C), h._columnLineVisible && Ui(c, i + B - 1, s, 1, C, h._columnLineColor), c.restore())
                }), h._rowLineVisible && Ui(c, U, s + C - 1, j, 1, h._rowLineColor)
            }, f.drawCell = function (o, Z, A, K, Q, L, l, Y) {
                var h = this;
                if (K.drawCell) return K.drawCell(o, Z, A, K, Q, L, l, Y, h);
                var f = h.getValue(Z, K);
                Ej(o, f, K, h.getLabelFont(Z, K, f), h.getLabelColor(Z, K, f), Q, L, l, Y, Z, h)
            }, f.getColumnModel = function () {
                return this._39o
            }, f._17o = function () {
                this.redraw()
            }, f._18o = function (P) {
                var F = this;
                P.data === F._sortColumn && Ke[P.property] ? F.ivm() : (F._42o(), F.redraw())
            }, f._19o = function () {
                this.redraw()
            }, f.getCurrentSortFunc = function () {
                var s = this, Z = s._sortColumn;
                if (Z && Z.isSortable()) {
                    var J = Z.getSortFunc(), P = oo === Z.getSortOrder() ? 1 : -1;
                    return J || (J = Db), function (u, D) {
                        return J.call(s, s.getValue(u, Z), s.getValue(D, Z), u, D) * P
                    }
                }
                return s._sortFunc
            }, f.isCellEditable = function (q, N, j) {
                return (!this.isCheckMode() && this.isSelected(q) || this.isCheckMode() && q === this._focusData) && N.isEditable() && this.isEditable() ? N.isCellEditable ? N.isCellEditable(q, N, j, this) : !0 : !1
            }, f._37O = function (v, D) {
                if (fj(D)) for (var i = this, w = i.lp(D), $ = i._60I, G = i._rowHeight, q = i._29I, T = q.x, l = q.y, a = q.width, z = q.height, L = 0; L < $.size(); L++) {
                    var U = $.get(L), r = U.startX, I = U.column, c = I.getWidth();
                    if (I !== i._31o && I !== i._4o && w.x >= r && w.x < r + c && i.isCellEditable(v, I, D)) {
                        var N = {x: r, y: i.getRowIndex(v) * G, width: c, height: G},
                            V = {x: N.x + i.tx(), y: N.y + i.ty(), width: N.width, height: N.height}, K = 0, k = 0;
                        return N.x < T ? K = N.x - T : N.x + N.width > T + a && (K = N.x + N.width - T - a), K && (i.tx(i.tx() - K), V.x -= K), N.y < l ? k = N.y - l : N.y + G > l + z && (k = N.y + G - l - z), k && (i.ty(i.ty() - k), V.y -= k), i.beginEditing({
                            data: v,
                            column: I,
                            value: i.getValue(v, I),
                            event: D,
                            rect: N,
                            editorRect: V,
                            view: i
                        }), void 0
                    }
                }
            }
        }, mo.BaseItemEditor = function (m, C, T, y) {
            this._data = m, this._column = C, this._master = T, this._editInfo = y
        }, qo("BaseItemEditor", v, {
            ms_ac: ["data", "column", "master", "editInfo"], editBeginning: function () {
            }, getView: function () {
            }, getValue: function () {
            }, setValue: function () {
            }
        });
        var aq = t.Tab = function () {
            Mr(aq, this)
        };
        ld("Tab", Zf, {ms_ac: ["view", "closable", "disabled"], _icon: c, _closable: !1, _disabled: !1, setParent: ze});
        var Al = t.Column = function () {
            Mr(Al, this)
        };
        ld("Column", Zf, {
            _46o: 1,
            ms_ac: ["accessType", "valueType", dr, fr, yp, Ql, "align", Io, "sortOrder", Pb, "sortable", "clickable", "nullable", "emptiable", "slider", "colorPicker", "itemEditor"],
            _visible: !0,
            _width: 80,
            _sortOrder: oo,
            _sortFunc: c,
            _sortable: !0,
            _clickable: !0,
            setWidth: function (W) {
                16 > W && (W = 16);
                var K = this._width;
                this._width = W, this.fp(Ql, K, W)
            },
            getToolTip: function (p, n) {
                return this.formatValue(n.getValue(p, this))
            }
        });
        var $i = t.Property = function () {
            Mr($i, this)
        };
        ld("Property", Zf, {
            _46o: 1,
            ms_ac: ["accessType", "valueType", fr, yp, "categoryName", Io, "align", "nullable", "emptiable", "slider", "itemEditor", "colorPicker"],
            _categoryName: c,
            getToolTip: function (J, M, p) {
                var y = this;
                return M ? y.formatValue(p.getValue(J, y)) : p.getPropertyName(y)
            }
        }), mo.AccordionView = function () {
            var n = this;
            n._20o = {}, n._21o = new vp, n._10o = c, n._9o = c, n._11o = c, n._view = ts(0, n), n.iv()
        }, qo("AccordionView", v, {
            ms_v: 1,
            ms_fire: 1,
            ms_ac: [Wl, Tm, "titleHeight", Ki, Be, "titleBackground", "selectWidth", Xl, "orientation", "separatorColor"],
            _expandIcon: F.accordionViewExpandIcon,
            _collapseIcon: F.accordionViewCollapseIcon,
            _titleHeight: Td,
            _labelColor: F.accordionViewLabelColor,
            _labelFont: F.accordionViewLabelFont,
            _titleBackground: F.accordionViewTitleBackground,
            _selectBackground: F.accordionViewSelectBackground,
            _selectWidth: F.accordionViewSelectWidth,
            _orientation: "v",
            _separatorColor: F.accordionViewSeparatorColor,
            onPropertyChanged: function () {
                this.iv()
            },
            getView: function () {
                return this._view
            },
            getTitles: function () {
                return this._21o
            },
            getCurrentTitle: function () {
                return this._10o
            },
            add: function (U, y, _, X) {
                var A = this, g = Gl();
                if (A._20o[U]) throw U + " already exists";
                g.onmousedown = mq, g.style.cursor = dk, g.addEventListener(jp ? qp : rq, function (e) {
                    mq(e)
                }, !1), g.addEventListener(jp ? qb : Wk, function (f) {
                    mq(f), fj(f) && (A._10o === U ? A.collapse() : A.expand(U))
                }, !1), Vo(A._view, g), A._20o[U] = {
                    content: y,
                    div: g,
                    canvas: Jm(g),
                    icon: X
                }, A._21o.add(U), _ && A.expand(U), A.iv()
            },
            remove: function (q) {
                var K = this, I = K._20o[q];
                I && (zm(I.div), delete K._20o[q], K._21o.remove(q), K.iv())
            },
            clear: function () {
                var z = this;
                z._21o.toArray().forEach(z.remove, z), z._20o = {}, z._21o.clear(), z.iv()
            },
            isExpanded: function (C) {
                return this._10o === C
            },
            expand: function (A) {
                var V = this;
                V._20o[A] && V._10o !== A && (V._10o = A, V.onExpanded(A), V.iv())
            },
            onExpanded: function () {
            },
            collapse: function () {
                var y = this;
                y._10o && (y.onCollapsed(y._10o), delete y._10o, y.iv())
            },
            onCollapsed: function () {
            },
            initCanvas: function (Y, C, X) {
                Sd(Y, C, X);
                var t = fk(Y);
                return Vm(t, 0, 0, 1), t.clearRect(0, 0, C, X), t
            },
            drawTitle: function (h, r, q, b, p) {
                var Q = this, B = cd(p.icon), u = Q.isExpanded(r), H = Q._titleHeight, L = Q._titleBackground,
                    s = Q._selectWidth, c = Q._separatorColor, A = cd(u ? Q._expandIcon : Q._collapseIcon), j = s + 4;
                Ui(h, 0, 0, q, b, L), u && s && Ui(h, 0, 0, s, b, Q._selectBackground), (u || Q._21o.get(Q._21o.size() - 1) !== r) && Ui(h, 0, b - 1, q, 1, c ? c : Gj(L)), B && (hi(h, B, j + fc(B) / 2, H / 2), j += fc(B) + 2), Vr(h, r, Q.getLabelFont(r), Q.getLabelColor(r), j, 0, 0, H), A && hi(h, A, q - fc(A) / 2 - 4, H / 2)
            },
            validateImpl: function () {
                var t = this, E = t._view, C = 0, N = 0, Q = t.getWidth(), V = t.getHeight(), K = t._titleHeight,
                    h = t._21o.size() * K, R = t._11o, U = t._9o;
                delete t._11o, delete t._9o, t._21o.each(function (i) {
                    var F, f, O = t._20o[i], d = O.content, L = t._10o === i;
                    up(t) ? (Ee(O.div, C, 0, K, V), F = t.initCanvas(O.canvas, K, V), xe(F, 0, V), Jb(F, -B), t.drawTitle(F, i, V, K, O), F.restore(), L ? (f = y(0, Q - h), d && (t._11o = d, t._9o = Ri(d), Ee(d, C + K, 0, f, V)), C += K + f) : C += K) : (Ee(O.div, 0, N, Q, K), F = t.initCanvas(O.canvas, Q, K), t.drawTitle(F, i, Q, K, O), F.restore(), L ? (f = y(0, V - h), d && (t._11o = d, t._9o = Ri(d), Ee(d, 0, N + K, Q, f)), N += K + f) : N += K)
                });
                var u = t._9o;
                R && R !== t._11o && R.endEditing && R.endEditing(), u && u !== U && Vo(E, u), U && U !== u && zm(U)
            }
        }), mo.SplitView = function (K, L, a, A) {
            var D = this, r = D._dividerDiv = Gl(), F = D._60O = Jm(), q = D._61O = Jm(), i = F.style, u = q.style;
            D._view = ts(1, D), Vo(D._view, r), i.msTouchAction = Ko, i.pointerEvents = Ko, i.cursor = dk, u.msTouchAction = Ko, u.pointerEvents = Ko, u.cursor = dk, K && D.setLeftView(K), L && D.setRightView(L), a && D.setOrientation(a), A != c && D.setPosition(A), D.setStatus(Af), new dm(D)
        }, qo("SplitView", v, {
            ms_v: 1,
            ms_fire: 1,
            ms_ac: ["continuousLayout", "dividerSize", "dividerBackground", "toggleIcon", "togglable", "dragOpacity", "orientation", "draggable", "status"],
            _continuousLayout: !1,
            _position: .5,
            _togglable: !0,
            _orientation: "h",
            _draggable: !0,
            _dividerSize: F.splitViewDividerSize,
            _dividerBackground: F.splitViewDividerBackground,
            _dragOpacity: F.splitViewDragOpacity,
            _toggleIcon: F.splitViewToggleIcon,
            onPropertyChanged: function () {
                this.iv()
            },
            getDividerDiv: function () {
                return this._dividerDiv
            },
            getPosition: function () {
                return this._position
            },
            setPosition: function (O, j) {
                var E = this, K = E._position;
                isNaN(O) || (j || (E._82O = 0 > O ? -1 : O > 1 ? 1 : 0), E._position = O, E.fp(nf, K, O))
            },
            getLeftView: function () {
                return this._leftView
            },
            setLeftView: function (h) {
                var y = this, f = y._leftView, Q = y._view;
                if (y._leftView !== h) {
                    if (f && f !== y._rightView) {
                        var u = Ri(f);
                        u.parentNode === Q && zm(u)
                    }
                    if (y._leftView = h, h) {
                        var J = Ri(h);
                        J.parentNode !== Q && Q.insertBefore(J, y._dividerDiv)
                    }
                    y.fp("leftView", f, h)
                }
            },
            getRightView: function () {
                return this._rightView
            },
            setRightView: function (q) {
                var B = this, Z = B._rightView, p = B._view;
                if (B._rightView !== q) {
                    if (Z && Z !== B._leftView) {
                        var o = Ri(Z);
                        o.parentNode === p && zm(o)
                    }
                    if (B._rightView = q, q) {
                        var k = Ri(q);
                        k.parentNode !== p && p.insertBefore(k, B._dividerDiv)
                    }
                    B.fp("rightView", Z, q)
                }
            },
            validateImpl: function () {
                var K = this, j = K._draggable, k = K._position, X = K.getWidth(), Z = K.getHeight(),
                    i = K._dividerSize, r = K._dividerBackground, I = jp ? 18 : 8, b = K._dividerDiv, E = K._82O,
                    p = K._60O, J = K._61O, Q = K._toggleIcon, A = K._status, w = b.style, d = null, H = jp ? 20 : 4,
                    O = Q.comps[0];
                i >= I || 0 === i ? K._coverDiv && (zm(K._coverDiv), delete K._coverDiv) : K._coverDiv || (K._coverDiv = Gl(), _ && (K._coverDiv.style.background = kn), Vo(b, K._coverDiv)), K._togglable ? p.parentNode || (Vo(b, p), Vo(b, J)) : (zm(p), zm(J));
                var D = K._coverDiv, t = K._leftView, T = K._rightView;
                if (up(K)) {
                    if (i > X && (i = X), A === Af) if (1 === E) var n = x(k, X),
                        S = y(0, X - i - n); else -1 === E ? (S = x(-k, X), n = y(0, X - i - S)) : (n = P((X - i) * k), S = y(0, X - i - n)); else "cl" === A ? (n = 0, S = y(0, X - i)) : "cr" === A && (S = 0, n = y(0, X - i));
                    t && Ee(t, 0, 0, n, Z), T && Ee(T, n + i, 0, S, Z), Ee(b, n, 0, i, Z), K._22o = n, D && (Ee(D, i / 2 - I / 2, 0, I, Z), D.style.cursor = j ? lg : ""), b.style.cursor = j ? lg : "";
                    var e = b.clientHeight / 2, z = b.clientWidth;
                    Sd(p, z, z), Ee(p, 0, e - z - H, z, z), d = fk(p), Vm(d, 0, 0, 1), O.rotation = -B, sp(d, Q, 0, 0, z, z), d.restore(), Sd(J, z, z), Ee(J, 0, e + H, z, z), d = fk(J), Vm(d, 0, 0, 1), O.rotation = B, sp(d, Q, 0, 0, z, z), d.restore()
                } else {
                    if (i > Z && (i = Z), A === Af) if (1 === E) var c = x(k, Z),
                        g = y(0, Z - i - c); else -1 === E ? (g = x(-k, Z), c = y(0, Z - i - g)) : (c = P((Z - i) * k), g = y(0, Z - i - c)); else "cl" === A ? (c = 0, g = y(0, Z - i)) : "cr" === A && (g = 0, c = y(0, Z - i));
                    t && Ee(t, 0, 0, X, c), T && Ee(T, 0, c + i, X, g), Ee(b, 0, c, X, i), K._22o = c, D && (Ee(D, 0, i / 2 - I / 2, X, I), D.style.cursor = j ? sr : ""), w.cursor = j ? sr : "";
                    var U = b.clientWidth / 2, z = b.clientHeight;
                    Sd(p, z, z), Ee(p, U - z - H, 0, z, z), d = fk(p), Vm(d, 0, 0, 1), O.rotation = 0, sp(d, Q, 0, 0, z, z), d.restore(), Sd(J, z, z), Ee(J, U + H, 0, z, z), d = fk(J), Vm(d, 0, 0, 1), O.rotation = u, sp(d, Q, 0, 0, z, z), d.restore()
                }
                w.background = r
            }
        });
        var dm = function (m) {
            this.sv = m, this.addListeners()
        };
        fs(dm, v, {
            ms_listener: 1, getView: function () {
                return this.sv.getView()
            }, handle_touchstart: function (D) {
                var n = this, J = n.sv, S = J._dividerDiv, L = J._60O, c = J._61O, p = J._status, V = D.target;
                if (V === L) p === Af ? J.setStatus("cl") : "cr" === p && J.setStatus(Af); else if (V === c) p === Af ? J.setStatus("cr") : "cl" === p && J.setStatus(Af); else if (Ho(D) && (V === S || V === J._coverDiv) && (mq(D), J.isDraggable())) {
                    J.getLeftView(), J.getRightView();
                    var r = n.maskDiv = Gl();
                    if (r.style.left = 0, r.style.top = 0, r.style.width = J.getWidth() + "px", r.style.height = J.getHeight() + "px", J.getView().appendChild(r), !J.isContinuousLayout()) {
                        var I = n.resizeDiv = Gl();
                        I.style.left = S.style.left, I.style.top = S.style.top, I.style.width = S.style.width, I.style.height = S.style.height, I.style.opacity = J.getDragOpacity(), I.style.background = J.getDividerBackground(), Vo(n.getView(), I)
                    }
                    n._lastAbsPosition = J._22o, n._86o = up(J) ? cc(D).x : cc(D).y, oc(n, D)
                }
            }, handleWindowTouchMove: function (t) {
                Ho(t) && this.update(t, this.sv.isContinuousLayout())
            }, handleWindowTouchEnd: function (e) {
                var x = this;
                x.update(e, !0), x.sv.setStatus(Af), x.maskDiv && zm(x.maskDiv), x.resizeDiv && zm(x.resizeDiv), x.maskDiv = x.resizeDiv = c
            }, handle_mousedown: function (D) {
                fj(D) && this.handle_touchstart(D)
            }, handleWindowMouseMove: function (Q) {
                this.handleWindowTouchMove(Q)
            }, handleWindowMouseUp: function (Z) {
                this.handleWindowTouchEnd(Z)
            }, update: function (Q, J) {
                var $ = this, _ = $.sv, q = up(_) ? _.getWidth() : _.getHeight(), B = _._dividerSize,
                    w = $._lastAbsPosition - $._86o;
                up(_) ? (w += cc(Q).x, w > q - B && (w = q - B), 0 > w && (w = 0), $.resizeDiv && ($.resizeDiv.style.left = w + hr)) : (w += cc(Q).y, w > q - B && (w = q - B), 0 > w && (w = 0), $.resizeDiv && ($.resizeDiv.style.top = w + hr)), J && q !== B && (1 === _._82O ? _.setPosition(w, 1) : -1 === _._82O ? _.setPosition(w - q + B, 1) : _.setPosition(w / (q - B), 1))
            }
        }), mo.TabView = function () {
            var m = this, S = m._view = ts(1, m), P = m._91O = Gl(1), L = m._tabModel = new ek, f = L.sm(),
                A = m.invalidate;
            m._7o = new vp, m._canvas = Jm(P), Vo(S, P), Vo(S, m._92O = Gl(1)), f.setSelectionMode(dh), f.ms(m.handleSelectionChange, m), L.mm(A, m), L.md(A, m), L.mh(A, m), new ab(m), m.iv()
        }, qo("TabView", v, {
            ms_v: 1,
            ms_fire: 1,
            ms_tx: 1,
            ms_ty: 1,
            ms_lp: 1,
            ms_ac: ["movable", "tabGap", "tabHeight", "tabPosition", Ki, Be, "tabBackground", "selectWidth", Xl, "moveBackground", "insertColor"],
            _tabPosition: Gn,
            _tabHeight: Td,
            _tabGap: F.tabViewTabGap,
            _labelColor: F.tabViewLabelColor,
            _labelFont: F.tabViewLabelFont,
            _tabBackground: F.tabViewTabBackground,
            _selectWidth: F.tabViewSelectWidth,
            _selectBackground: F.tabViewSelectBackground,
            _moveBackground: F.tabViewMoveBackground,
            _insertColor: F.tabViewInsertColor,
            _movable: !0,
            handleSelectionChange: function () {
                this._selectionChanged = !0, this.invalidate()
            },
            getContentDiv: function () {
                return this._92O
            },
            getTitleDiv: function () {
                return this._91O
            },
            getTabModel: function () {
                return this._tabModel
            },
            add: function (f, j, L) {
                var H = new aq, S = this._tabModel;
                return H.setName(f), H.setView(j), S.add(H), L && S.sm().ss(H), H
            },
            getLabel: function (b) {
                return b.toLabel()
            },
            onPropertyChanged: function () {
                this.iv()
            },
            _7Q: function (V) {
                this._23o = V, this.iv()
            },
            get: function (M) {
                var P = this, p = P._tabModel;
                if (Zc(M)) return p._roots.get(M);
                if (Rp(M)) {
                    var N;
                    return p.each(function (k) {
                        M === P.getLabel(k) && (N = k)
                    }), N
                }
                return M instanceof aq ? M : c
            },
            select: function (I) {
                this._tabModel.sm().ss(this.get(I))
            },
            remove: function (j) {
                var E = this;
                if (j = E.get(j)) {
                    var w = E._tabModel, V = w._roots.indexOf(j);
                    E._tabModel.remove(j), E._12Q(--V)
                }
            },
            getCurrentTab: function () {
                return this._8o
            },
            hideTabView: function (h, $) {
                $.parentNode === this._92O && (Iq($) ? ($.style.display = mk, $._tab_ = h) : zm($), ll())
            },
            showTabView: function (f, X) {
                Iq(X) && (X.style.display = "block", X._tab_ = f), X.parentNode !== this._92O && (Vo(this._92O, X), ll())
            },
            _24o: function () {
                var G, h = this, O = h._8o, n = h._9o, U = h._tabModel.sm().ld();
                U && (G = Ri(U.getView())), G !== n && (n && (O.getView() && O.getView().endEditing && O.getView().endEditing(), h.hideTabView(O, n)), G && h.showTabView(U, G)), h._8o = U, h._9o = G, O !== U && h.onTabChanged(O, U)
            },
            onTabClosing: function () {
                return !0
            },
            onTabChanged: function () {
            },
            onTabClosed: function (V, f) {
                this._12Q(--f)
            },
            _12Q: function (Q) {
                var J = this, p = J._tabModel, L = p.size();
                if (L && !p.sm().ld()) {
                    Q == c && (Q = 0), Q >= L && (Q = L - 1), 0 > Q && (Q = 0);
                    for (var W = Q; W >= 0; W--) {
                        var y = J.get(W);
                        if (!y.isDisabled()) return J.select(y), y
                    }
                    for (W = Q + 1; L > W; W++) if (y = J.get(W), !y.isDisabled()) return J.select(y), y
                }
            },
            getTabWidth: function (N) {
                var a = 4, P = cd(N.getIcon());
                P && (a += fc(P, N) + 4);
                var m = this.getLabel(N);
                return m && (a += Tr(this.getLabelFont(N), m).width + 4), N.isClosable() && (a += 10), a
            },
            drawTab: function (X, Y, V, F, k, d, S) {
                var A, s = this, N = s._tabPosition, J = V + 4, r = s._selectWidth, n = cd(Y.getIcon()),
                    $ = Y.isDisabled(), O = s.getLabelColor(Y), U = s.getLabelFont(Y), o = s.getLabel(Y),
                    f = s._selectBackground, K = N === Ch + "-vertical", t = N === Te + "-vertical";
                (K || t) && (J = F + 4), $ && (X.globalAlpha = ah), Ui(X, V, F, k, d, S), Y === s._8o && r && (N === Gn ? Ui(X, V, F + d - r, k, r, f) : N === Ch ? Ui(X, V + k - r, F, r, d, f) : N === Te ? Ui(X, V, F, r, d, f) : K ? Ui(X, V + k - r, F, r, d, f) : t ? Ui(X, V, F, r, d, f) : Ui(X, V, F, k, r, f));
                var l = k / 2;
                if (K && (xe(X, l, F + d / 2), Jb(X, u), xe(X, -l, -F - d / 2)), n) {
                    var G = qr(n, Y), b = fc(n, Y);
                    if (K || t) {
                        var g = V + k / 2, T = J + G / 2;
                        xe(X, g, T), Jb(X, B), xe(X, -g, -T), hi(X, n, V + k / 2, J + G / 2, Y, s), xe(X, g, T), Jb(X, -B), xe(X, -g, -T), J += G + 4
                    } else hi(X, n, J + b / 2, F + d / 2, Y, s), J += b + 4
                }
                return K || t ? (xe(X, k / 2, J + k / 2), Jb(X, B), xe(X, -k / 2, -J - k / 2), Vr(X, o, U, O, V, J, d, k), xe(X, k / 2, J + k / 2), Jb(X, -B), xe(X, -k / 2, -J - k / 2)) : Vr(X, o, U, O, J, F, k, d), K && (xe(X, l, F + d / 2), Jb(X, -u), xe(X, -l, -F - d / 2)), Y.isClosable() && (A = t ? {
                    x: V + k - 12,
                    y: F + d - 12,
                    width: 12,
                    height: 12
                } : {
                    x: V + k - 12,
                    y: F + 2,
                    width: 12,
                    height: 12
                }, this.drawCloseIcon(Y, X, O, A)), $ && (X.globalAlpha = 1), A
            },
            drawCloseIcon: function (o, n, e, m) {
                var E = m.x, G = m.y;
                n.strokeStyle = e, n.lineWidth = 1, n.beginPath(), n.moveTo(E + 2, G + 8), n.lineTo(E + 8, G + 2), n.moveTo(E + 8, G + 8), n.lineTo(E + 2, G + 2), n.stroke()
            },
            validateImpl: function () {
                var r = this;
                r._24o();
                var A, J = r._canvas, f = r._tabPosition, S = r._91O, q = r._92O, V = r._tabModel, Y = r.getWidth(),
                    K = r.getHeight(), h = r._tabHeight, O = r._7o, w = r._tabGap, d = f === Gn, e = f === Ch,
                    U = f === Te, P = f === Ch + "-vertical", v = f === Te + "-vertical", c = r._23o, X = 0;
                if ((e || U) && V._roots.each(function (e) {
                    X = y(r.getTabWidth(e), X)
                }), d ? (Ee(S, 0, 0, Y, h), A = {
                    x: 0,
                    y: h,
                    width: Y,
                    height: y(0, K - h)
                }) : e ? (Ee(S, 0, 0, X, K), A = {
                    x: X,
                    y: 0,
                    width: y(0, Y - X),
                    height: K
                }) : U ? (Ee(S, Y - X, 0, X, K), A = {
                    x: 0,
                    y: 0,
                    width: y(0, Y - X),
                    height: K
                }) : P ? (Ee(S, 0, 0, h, K), A = {
                    x: h,
                    y: 0,
                    width: y(0, Y - h),
                    height: K
                }) : v ? (Ee(S, Y - h, 0, h, K), A = {
                    x: 0,
                    y: 0,
                    width: y(0, Y - h),
                    height: K
                }) : (Ee(S, 0, K - h, Y, h), A = {x: 0, y: 0, width: Y, height: y(0, K - h)}), Ee(q, A), P || v) {
                    r._9o && (A.x = 0, Ee(r._8o.getView(), A)), Sd(J, h, K);
                    var l = fk(J), L = 0;
                    if (Vm(l, 0, r.ty(), 1), l.clearRect(0, 0, h, K), O.clear(), V._roots.each(function (p) {
                        var B, P = r.getTabWidth(p);
                        c && c.tab === p || (B = r.drawTab(l, p, 0, L, h, P, r._tabBackground)), O.add({
                            _75o: B,
                            tab: p,
                            startY: L,
                            endY: L + P,
                            height: P
                        }), L += P + w
                    }), r._23Q = y(0, L - w), c) {
                        var F = c.position;
                        r.drawTab(l, c.tab, 0, c.startY, h, c.height, r._moveBackground), Ui(l, 0, F, h, 1, r._insertColor)
                    }
                    if (l.restore(), r._selectionChanged) {
                        r._selectionChanged = !1;
                        for (var R = r.ty(), Z = 0; Z < O.size(); Z++) {
                            var $ = O.get(Z);
                            if ($.tab === r._8o) {
                                if ($.endY + R < 0) {
                                    r.ty(-$.startY);
                                    break
                                }
                                if ($.startY + R > K) {
                                    r.ty(K - $.endY);
                                    break
                                }
                            }
                        }
                    }
                    r.ty(r.ty())
                } else if (e || U) {
                    r._9o && (A.x = 0, Ee(r._8o.getView(), A)), Sd(J, X, K);
                    var l = fk(J), L = 0;
                    if (Vm(l, 0, r.ty(), 1), l.clearRect(0, 0, X, K), O.clear(), V._roots.each(function (o) {
                        var k;
                        c && c.tab === o || (k = r.drawTab(l, o, 0, L, X, h, r._tabBackground)), O.add({
                            _75o: k,
                            tab: o,
                            startY: L,
                            endY: L + h,
                            height: h
                        }), L += h + w
                    }), r._23Q = y(0, L - w), c) {
                        var F = c.position;
                        r.drawTab(l, c.tab, 0, c.startY, X, c.height, r._moveBackground), Ui(l, 0, F, X, 1, r._insertColor)
                    }
                    if (l.restore(), r._selectionChanged) {
                        r._selectionChanged = !1;
                        for (var R = r.ty(), Z = 0; Z < O.size(); Z++) {
                            var $ = O.get(Z);
                            if ($.tab === r._8o) {
                                if ($.endY + R < 0) {
                                    r.ty(-$.startY);
                                    break
                                }
                                if ($.startY + R > K) {
                                    r.ty(K - $.endY);
                                    break
                                }
                            }
                        }
                    }
                    r.ty(r.ty())
                } else {
                    r._9o && (A.y = 0, Ee(r._8o.getView(), A)), Sd(J, Y, h);
                    var l = fk(J), g = 0;
                    if (Vm(l, r.tx(), 0, 1), l.clearRect(0, 0, Y, h), O.clear(), V._roots.each(function (v) {
                        var z, y = r.getTabWidth(v);
                        c && c.tab === v || (z = r.drawTab(l, v, g, 0, y, h, r._tabBackground)), O.add({
                            _75o: z,
                            tab: v,
                            startX: g,
                            endX: g + y,
                            width: y
                        }), g += y + w
                    }), r._64I = y(0, g - w), c) {
                        var F = c.position;
                        r.drawTab(l, c.tab, c.startX, 0, c.width, h, r._moveBackground), yd(l, r._insertColor, F, 0, h)
                    }
                    if (l.restore(), r._selectionChanged) {
                        r._selectionChanged = !1;
                        for (var p = r.tx(), Z = 0; Z < O.size(); Z++) {
                            var $ = O.get(Z);
                            if ($.tab === r._8o) {
                                if ($.endX + p < 0) {
                                    r.tx(-$.startX);
                                    break
                                }
                                if ($.startX + p > Y) {
                                    r.tx(Y - $.endX);
                                    break
                                }
                            }
                        }
                    }
                    r.tx(r.tx())
                }
                for (var s = [], I = q.children, Z = 0; Z < I.length; Z++) {
                    var W = I[Z], t = W._tab_;
                    t && !V.contains(t) && s.push(W)
                }
                s.forEach(function (G) {
                    q.removeChild(G)
                })
            }
        });
        var ab = function (v) {
            this.tv = v, this.addListeners()
        };
        fs(ab, v, {
            ms_listener: 1, getView: function () {
                return this.tv._91O
            }, handle_mousewheel: function (s) {
                this.handleScroll(s, 10 * (s.wheelDelta / 40))
            }, handle_DOMMouseScroll: function (H) {
                this.handleScroll(H, 10 * -H.detail)
            }, handleScroll: function (r, q) {
                mq(r);
                var d = this.tv, h = d._tabPosition;
                !d._40o() || h !== Gn && h !== Qk || d.tx(this.tv.tx() + q), !d._41o() || h !== Ch && h !== Te && h !== Ch + "-vertical" && h !== Te + "-vertical" || d.ty(this.tv.ty() + q)
            }, _8Q: function (r) {
                var K, U, N = this.tv, A = N._tabPosition, Z = N._7o;
                if (A === Gn || A === Qk) {
                    var $ = N.lp(r).x;
                    for (K = 0; K < Z.size(); K++) if (U = Z.get(K), U.startX <= $ && $ <= U.endX) return U
                } else if (A === Ch || A === Te || A === Ch + "-vertical" || A === Te + "-vertical") {
                    var x = N.lp(r).y;
                    for (K = 0; K < Z.size(); K++) if (U = Z.get(K), U.startY <= x && x <= U.endY) return U
                }
                return c
            }, isClickable: function (e) {
                var k = this.tv, N = k._tabPosition, $ = this._73o = this._8Q(e);
                return !k._40o() || N !== Gn && N !== Qk ? !k._41o() || N !== Ch && N !== Te && N !== Ch + "-vertical" && N !== Te + "-vertical" ? $ && (!$.tab.isDisabled() || k.isMovable()) : !0 : !0
            }, handle_mousemove: function (V) {
                var E = this;
                bc ? E._74o = E._8Q(V) : E.getView().style.cursor = E.isClickable(V) ? dk : ""
            }, handle_mousedown: function (I) {
                this.handle_mousemove(I), this.handle_touchstart(I)
            }, handle_touchstart: function (o) {
                var h = this, f = h.tv, F = f._tabPosition;
                mq(o), fj(o) && h.isClickable(o) && (F === Gn || F === Qk ? (h.x = cc(o).x, h.lp = f.lp(o), h.tx = f.tx()) : (h.y = cc(o).y, h.lp = f.lp(o), h.ty = f.ty()), oc(h, o))
            }, handleWindowMouseMove: function (N) {
                this.handleWindowTouchMove(N)
            }, handleWindowTouchMove: function (S) {
                var v, m = this, W = m.tv, t = W._tabPosition, p = m._73o;
                if (t === Gn || t === Qk) {
                    if (v = cc(S).x - m.x, !m._25o && !m.moving && I(v) > 2 && (W._40o() && !Ag(S) ? m._25o = 1 : p && W.isMovable() && (m.moving = 1)), m._25o) W.tx(m.tx + v); else if (m.moving) {
                        var l = m.lp.x + v, d = W._tabGap / 2;
                        W._7o.each(function (V) {
                            var I = V.endX, i = l - V.startX < I - l;
                            l >= V.startX && I >= l && W._7Q({
                                tab: p.tab,
                                startX: p.startX + v,
                                width: p.width,
                                front: i,
                                insertTab: V.tab,
                                position: i ? y(0, V.startX - d) : x(W._64I, I + d)
                            })
                        })
                    }
                } else if (v = cc(S).y - m.y, !m._25o && !m.moving && I(v) > 2 && (W._41o() && !Ag(S) ? m._25o = 1 : p && W.isMovable() && (m.moving = 1)), m._25o) W.ty(m.ty + v); else if (m.moving) {
                    var M = m.lp.y + v, d = W._tabGap / 2;
                    W._7o.each(function (B) {
                        var k = B.endY, O = M - B.startY < k - M;
                        M >= B.startY && k >= M && W._7Q({
                            tab: p.tab,
                            startY: p.startY + v,
                            height: p.height,
                            front: O,
                            insertTab: B.tab,
                            position: O ? y(0, B.startY - d) : x(W._23Q, k + d)
                        })
                    })
                }
            }, handleWindowMouseUp: function (L) {
                this.handleWindowTouchEnd(L)
            }, handleWindowTouchEnd: function () {
                var G = this, x = G.tv, C = x._tabPosition, F = x.getTabModel(), b = F._roots, k = G._73o;
                if (G.moving) {
                    var y = x._23o;
                    if (y && y.insertTab !== y.tab) {
                        var g = y.tab, l = b.remove(g), H = b.indexOf(y.insertTab);
                        H >= 0 && (y.front || H++, H <= b.size() && (b.add(g, H), F._38I(g, l, H)))
                    }
                    x._7Q(c), delete G.moving
                } else if (!G._25o && k) {
                    g = k.tab;
                    var L = G._74o;
                    if (!L || L.tab === g) if (!g.isDisabled() && Jj(k._75o, G.lp)) {
                        var K = function () {
                            var I = b.indexOf(g);
                            F.remove(g), x.onTabClosed(g, I)
                        };
                        x.onTabClosing(g, K) && K()
                    } else g.isDisabled() || x._8o === g || F.sm().ss(g)
                }
                G._25o = G._73o = G._74o = C === Gn || C === Qk ? G.x = G.lp = G.tx = c : G.y = G.lp = G.ty = c
            }
        }), mo.PropertyView = function (v) {
            var y = this;
            y._view = ts(1, y), y._canvas = Jm(y._view), Vo(y._view, y._79O = Gl()), y._rows = new vp, y._28o = new vp, y._26o = {}, y._26Q = {};
            var c = y._propertyModel = new ek, n = y.ivm;
            c.mm(n, y), c.md(n, y), c.mh(n, y), y.dm(v ? v : new ek), new pj(y)
        }, qo("PropertyView", v, {
            ms_ac: [Ki, hl, Be, fr, yp, "categorizable", uh, Pb, en, Wl, Tm, fm, Go, Fk, "selectRowIndex", Xl, "background", Fq, Zl, Mf, ed, am],
            ms_v: 1,
            ms_dm: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            _45o: 1,
            _47o: 1,
            ms_tip: 1,
            _29I: Wo,
            _59I: 0,
            _9I: 0,
            _selectRowIndex: -1,
            _editable: !0,
            _batchEditable: !0,
            _categorizable: !0,
            _indent: Fp,
            _background: F.propertyViewBackground,
            _expandIcon: F.propertyViewExpandIcon,
            _collapseIcon: F.propertyViewCollapseIcon,
            _scrollBarColor: fn,
            _scrollBarSize: fd,
            _autoHideScrollBar: Ym,
            _selectBackground: F.propertyViewSelectBackground,
            _rowHeight: Fe,
            _rowLineVisible: F.propertyViewRowLineVisible,
            _rowLineColor: F.propertyViewRowLineColor,
            _10I: .5,
            _columnLineVisible: F.propertyViewColumnLineVisible,
            _columnLineColor: F.propertyViewColumnLineColor,
            _labelColor: F.propertyViewLabelColor,
            _labelSelectColor: F.propertyViewLabelSelectColor,
            _labelFont: F.propertyViewLabelFont,
            getRows: function () {
                return this._rows
            },
            getColumnPosition: function () {
                return this._10I
            },
            setColumnPosition: function (l) {
                0 > l && (l = 0), l > 1 && (l = 1);
                var X = this, s = X._10I;
                X._10I = l, X.fp("columnPosition", s, l)
            },
            getPropertyName: function (n) {
                return n.toLabel()
            },
            getLabelFont: function () {
                return this._labelFont
            },
            getLabelColor: function (M, j, X) {
                return X === this._selectRowIndex ? this._labelSelectColor : this._labelColor
            },
            getPropertyFont: function () {
                return this._labelFont
            },
            getPropertyColor: function (Y, i) {
                return i === this._selectRowIndex ? this._labelSelectColor : Y.getColor() || this._labelColor
            },
            getCategoryFont: function () {
                return this._labelFont
            },
            getCategoryColor: function () {
                return this._labelColor
            },
            adjustTranslateX: function () {
                return 0
            },
            adjustTranslateY: function (O) {
                var q = this.getHeight() - this._59I;
                return q > O && (O = q), O > 0 ? 0 : P(O)
            },
            isExpanded: function (b) {
                if (!b) return !0;
                var j = this._26o[b];
                return j ? j.isExpanded : !(this._26Q[b] === !1)
            },
            toggle: function (Y) {
                var A = this;
                A.isExpanded(Y) ? A.collapse(Y) : A.expand(Y)
            },
            expandAll: function () {
                this.validate();
                for (var Z in this._26o) this.expand(Z)
            },
            expand: function (P) {
                if (P && P !== mk) {
                    var g = this, G = g._26o[P];
                    G && !G.isExpanded && (G.isExpanded = !0, g.onExpanded(P), g.ivm())
                }
            },
            onExpanded: function () {
            },
            collapseAll: function () {
                this.validate();
                for (var U in this._26o) this.collapse(U)
            },
            collapse: function (m) {
                if (m && m !== mk) {
                    var G = this, p = G._26o[m];
                    p && p.isExpanded && (p.isExpanded = !1, G.onCollapsed(m), G.ivm())
                }
            },
            onCollapsed: function () {
            },
            getCategoryName: function (b) {
                if (!this.isCategorizable()) return mk;
                var s = b.getCategoryName();
                return s ? s : mk
            },
            getPropertyModel: function () {
                return this._propertyModel
            },
            handleSelectionChange: function () {
                this.ivm()
            },
            setDataModel: function (e) {
                var Y = this, y = Y._dataModel;
                y !== e && (y && (y.umd(Y.handlePropertyChange, Y), Y._selectionModel || y.sm().ums(Y.handleSelectionChange, Y)), Y._dataModel = e, e.md(Y.handlePropertyChange, Y), Y._selectionModel ? Y._selectionModel._21I(e) : e.sm().ms(Y.handleSelectionChange, Y), Y.fp(kg, y, e))
            },
            isVisible: function (T) {
                return this._visibleFunc ? this._visibleFunc(T) : !0
            },
            onPropertyChanged: function (E) {
                var g = this, R = E.property;
                mr[R] ? g.ivm() : g.iv(), R === $n && g._43o()
            },
            getCurrentData: function () {
                return this._27o
            },
            updateCurrentData: function () {
                this._27o = this.sm().ld()
            },
            getRawProperties: function () {
                return this._27o ? this._propertyModel._roots : Ah
            },
            handlePropertyChange: function (N) {
                this._27o === N.data && this.iv()
            },
            ivm: function () {
                this.invalidateModel()
            },
            invalidateModel: function () {
                var L = this;
                L._96I || (L.setSelectRowIndex(-1), L._96I = 1, L.iv())
            },
            redraw: function () {
                this.iv()
            },
            validateModel: function () {
                var S = this, N = S._rows, D = S._28o, g = {}, B = new vp, X = S._27o;
                S.updateCurrentData(), X !== S._27o && S.endEditing(), N.clear(), D.clear(), S.getRawProperties().each(function (X) {
                    if (S.isVisible(X)) {
                        B.add(X);
                        var O = S.getCategoryName(X);
                        g[O] || (D.add(O, O === mk ? 0 : $), g[O] = {isExpanded: S.isExpanded(O), properties: new vp})
                    }
                }), S._sortFunc && B.sort(S._sortFunc);
                for (var s in S._26o) S._26Q[s] = S.isExpanded(s);
                S._26o = g, D.each(function (Q) {
                    Q !== mk && N.add(Q);
                    var n = g[Q];
                    n.isExpanded && B.each(function (F) {
                        S.getCategoryName(F) === Q && (n.properties.add(F), N.add({property: F, data: S._27o}))
                    }, S)
                })
            },
            validateImpl: function () {
                var e = this;
                e._76o(), e._96I && (e.validateModel(), delete e._96I);
                var F = e._canvas, Y = e.getWidth(), P = e.getHeight(), z = -e.ty(), n = e._rowHeight, h = e._indent,
                    G = Y - h, A = e._rows, k = A.size(), f = e._9I = h + G * e._10I, I = e._59I = k * n;
                Sd(F, Y, P), e._29I = {
                    x: 0,
                    y: z,
                    width: Y,
                    height: P
                }, e._31I = Q(z / n), e._14I = E((z + P) / n), e._31I < 0 && (e._31I = 0), e._14I > k && (e._14I = k);
                var S, Z = fk(F), U = e._background;
                Vm(Z, 0, -z, 1), Z.beginPath(), Z.rect(0, z, Y, P), Z.clip(), Z.clearRect(0, z, Y, P), e._93db(Z), U && Ui(Z, 0, 0, h, I, U);
                for (var C = e._31I; C < e._14I; C++) {
                    var v = A.get(C), z = n * C;
                    if (Rp(v)) U && Ui(Z, h, z, G, n, U), S = cd(e.isExpanded(v) ? e._expandIcon : e._collapseIcon), S && pq(Z, S, aj, 0, z, h, n), Z.save(), Z.beginPath(), Z.rect(h, z, G, n), Z.clip(), e.drawCategoryName(Z, v, C, h, z, G, n), Z.restore(); else {
                        var l = v.property, j = v.data, S = cd(l.getIcon()),
                            o = e._selectRowIndex === C ? e.getSelectBackground() : c;
                        if (S && pq(Z, S, aj, 0, z, h, n), o && Ui(Z, h, z, G, n, o), Z.save(), Z.beginPath(), Z.rect(h, z, f - h, n), Z.clip(), e.drawPropertyName(Z, l, C, h, z, f - h, n), Z.restore(), !e.isEditing(j, l)) {
                            var u = f + 1, g = Y - f - 1;
                            Z.save(), Z.beginPath(), Z.rect(u, z, g, n), Z.clip(), e._87o(e.drawPropertyValue(Z, l, e.getValue(j, l), C, u, z, g, n, j), C, u, z, g, n), Z.restore()
                        }
                    }
                    e._rowLineVisible && Ui(Z, h, z + n - 1, G, 1, e._rowLineColor)
                }
                e._columnLineVisible && (Ui(Z, f, 0, 1, I, e._columnLineColor), Ui(Z, Y - 1, 0, 1, I)), e._92db(Z), e._93I(), Z.restore(), e.ty(e.ty())
            },
            drawCategoryName: function (e, O, h, n, X, V, c) {
                Vr(e, O, this.getCategoryFont(O), this.getCategoryColor(O), n, X, V, c)
            },
            drawPropertyName: function (c, G, a, m, C, F, p) {
                return G.drawPropertyName ? (G.drawPropertyName(c, G, a, m, C, F, p, this), void 0) : (Vr(c, this.getPropertyName(G), this.getPropertyFont(G, a), this.getPropertyColor(G, a), m, C, F, p), void 0)
            },
            drawPropertyValue: function (t, R, i, l, J, E, o, _, Q) {
                return R.drawPropertyValue ? R.drawPropertyValue(t, R, i, l, J, E, o, _, Q, this) : (Ej(t, i, R, this.getLabelFont(R, i, l), this.getLabelColor(R, i, l), J, E, o, _, Q, this), void 0)
            },
            isPropertyEditable: function ($) {
                return $.isEditable() && this.isEditable()
            },
            setProperties: function (Y) {
                this._propertyModel.clear(), this.addProperties(Y)
            },
            addProperties: function (Z) {
                if (Z) {
                    var D = this._propertyModel;
                    Z.forEach(function (Q) {
                        if (!(Q instanceof $i)) {
                            var M = qn(Q.className);
                            Q = Ai(M ? M : $i, Q)
                        }
                        D.add(Q)
                    })
                }
            },
            getRowIndexAt: function (e) {
                var z = this, U = Q(z.lp(e).y / z._rowHeight);
                return U >= 0 && U < z._rows.size() ? U : -1
            },
            getPropertyAt: function (T) {
                var D = this, t = D.getRowIndexAt(T);
                return t >= 0 ? D._rows.get(t).property : c
            },
            getToolTip: function (I) {
                var G = this, q = G.getPropertyAt(I), X = G._27o;
                return q && X ? q.getToolTip(X, G._9I < G.lp(I).x, G) : c
            }
        });
        var pj = function (v) {
            this.pv = v, this.addListeners()
        };
        fs(pj, v, {
            ms_listener: 1, getView: function () {
                return this.pv._view
            }, setCursor: function (W) {
                this.getView().style.cursor = W
            }, clear: function () {
                var n = this;
                n._62O = n.cp = n.ty = n.p = c, n.setCursor(Zp)
            }, handle_mousedown: function (E) {
                this.handle_touchstart(E)
            }, handle_touchstart: function (q) {
                var X = this, $ = X.pv;
                mq(q), $.setFocus(q) && (fj(q) ? (X.cp = cc(q), X.ty = $.ty(), X.p = $.getColumnPosition(), X.handle_touchmove(q)) : $.setSelectRowIndex($.getRowIndexAt(q)))
            }, handleWindowMouseUp: function () {
                this.clear()
            }, handleWindowTouchEnd: function () {
                this.clear()
            }, handle_mouseup: function (Z) {
                this.handle_touchend(Z)
            }, handle_touchend: function ($) {
                var o = this;
                if (o.cp && !o._62O) {
                    var Y = o.pv, K = Y.lp($), l = K.x, L = K.y, C = Y._indent, Z = Y.getRowIndexAt($), U = Y._9I;
                    if (Z >= 0) {
                        var N = Y._rowHeight, e = N * Z, V = Y._rows.get(Z), w = V.property;
                        if (Rp(V)) cd(Y.isExpanded(V) ? Y._expandIcon : Y._collapseIcon) && l >= 0 && C >= l && L >= e && e + N >= L ? Y.toggle(V) : Ei($) && Y.toggle(V); else if (l > U && Y.isPropertyEditable(w, $)) {
                            var c = {x: U + 1, y: e, width: Y.getWidth() - U - 1, height: N},
                                p = {x: c.x + Y.tx(), y: c.y + Y.ty(), width: c.width, height: c.height}, v = 0,
                                q = Y._29I;
                            c.y < q.y ? v = c.y - q.y : c.y + N > q.y + q.height && (v = c.y + N - q.y - q.height), v && (Y.ty(Y.ty() - v), p.y -= v), Y.beginEditing({
                                data: V.data,
                                property: w,
                                value: Y.getValue(V.data, w),
                                event: $,
                                rect: c,
                                editorRect: p,
                                view: Y
                            })
                        }
                    }
                    Y.setSelectRowIndex(Z)
                }
                o.clear()
            }, handleWindowMouseMove: function (W) {
                this.handleWindowTouchMove(W)
            }, handleWindowTouchMove: function (I) {
                var m = this, l = m.pv, K = m.ty, q = m.cp, u = cc(I), X = m._62O;
                if ("p" === X) l.setTranslateY(K + u.y - q.y); else if ("c" === X) {
                    var M = l.getWidth() - l._indent;
                    if (M > 16) {
                        var r = m.p - (q.x - u.x) / M, s = 16 / M;
                        s > r && (r = s), r > 1 - s && (r = 1 - s), l.setColumnPosition(r)
                    }
                } else "s" === X && l.setTranslateY(K + (q.y - u.y) * l._59I / l._29I.height)
            }, handle_mousemove: function (Y) {
                this.handle_touchmove(Y)
            }, handle_touchmove: function (x) {
                if (!bc && fj(x)) {
                    var v = this, w = v.pv, N = I(w.lp(x).x - w._9I) <= (jp ? 8 : 3);
                    v.cp ? v._62O || (N ? (v._62O = "c", oc(v)) : I(cc(x).y - v.cp.y) >= 2 && (v._62O = v.isV(x) ? "s" : "p", oc(v))) : (N ? v.setCursor(lg) : v.setCursor(Zp), v.isV(x) && w._43o())
                }
            }, isV: function (h) {
                var V = this.pv, i = V._29I;
                return V._41o() && i.x + i.width - V.lp(h).x < Ib
            }, handle_mousewheel: function (N) {
                this.handleScroll(N, N.wheelDelta / 40)
            }, handle_DOMMouseScroll: function (e) {
                2 === e.axis && this.handleScroll(e, -e.detail)
            }, handleScroll: function (s, R) {
                var w = this.pv;
                mq(s), w.endEditing(), w.translate(0, R * w.getRowHeight())
            }, handle_keydown: function (h) {
                var R = this.pv, g = R._rows.size(), K = R._selectRowIndex + (Mj(h) ? -1 : 1);
                (Mj(h) || qc(h)) && (0 > K && (K = 0), K >= g && (K = g - 1), R.setSelectRowIndex(K))
            }
        }), mo.ListView = function (V) {
            this._5o(V), new Lf(this)
        }, qo("ListView", v, {
            ms_ac: [Ki, hl, Be, Fq, uh, Zl, Mf, Pb, en, fm, Go, Fk, rn, Xl],
            ms_v: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            _14Q: 1,
            ms_dm: 1,
            _45o: 1,
            _checkMode: !1,
            _indent: Fp,
            _rowHeight: Fe,
            _rowLineVisible: F.listViewRowLineVisible,
            _rowLineColor: F.listViewRowLineColor,
            _scrollBarColor: fn,
            _scrollBarSize: fd,
            _autoMakeVisible: Yp,
            _autoHideScrollBar: Ym,
            _selectBackground: F.listViewSelectBackground,
            _labelColor: F.listViewLabelColor,
            _labelSelectColor: F.listViewLabelSelectColor,
            _labelFont: F.listViewLabelFont,
            isCheckMode: function () {
                return this._checkMode
            },
            setCheckMode: function (n) {
                var N = this, _ = N._checkMode;
                N._checkMode = n, N.fp(si, _, n)
            },
            drawRow: function (U, y, a, c, v, X, u) {
                var Q = this, G = 0, A = Q._indent, K = Q.getIconWidth(y);
                Q.drawRowBackground(U, y, a, c, v, X, u), Q._checkMode && (hi(U, cd(Q.getCheckIcon(y)), G + A / 2, v + u / 2, y, Q), G += A), Q.drawIcon(U, y, G, v, K, u), Q.drawLabel(U, y, G + K, v, u)
            }
        });
        var Lf = function (b) {
            this.list = b, this._lastSelectDataTime = Rc(), this.addListeners()
        };
        fs(Lf, v, {
            ms_listener: 1, getView: function () {
                return this.list._view
            }, clear: function (Z) {
                var p = this, G = p.list;
                Z && "d" === p._62O && !p.dragCancel && G.handleDragAndDrop(Z, "end"), G.draggingData && (G.draggingData = null, G.redraw()), p.dragCancel = p._62O = p._isV = p._isH = p.cp = p.tx = p.ty = c
            }, handle_mousedown: function (I) {
                this.handle_touchstart(I)
            }, handle_touchstart: function (b) {
                var d = this, F = d.list;
                if (mq(b), F.setFocus(b)) {
                    var r = F.getDataAt(b);
                    d.cp = cc(b), d.tx = F.tx(), d.ty = F.ty(), fj(b) ? r && F.handleDragAndDrop && !d.isV(b) && !d.isH(b) && (F.draggingData = r, F.redraw(), F.handleDragAndDrop(b, "prepare")) : (r && d._33o(b, r), d.clear(b))
                }
            }, handleWindowMouseUp: function (F) {
                this.clear(F)
            }, handleWindowTouchEnd: function (H) {
                this.clear(H)
            }, handle_mouseup: function (U) {
                this.handle_touchend(U)
            }, handle_touchend: function (x) {
                var s = this, g = s.list;
                if (!s._isV && !s._isH && s.cp && !s._62O) {
                    var l = g.getDataAt(x);
                    l ? (g.isCheckMode() ? s._34o(x, l) : s._33o(x, l), Ei(x) ? g.onDataDoubleClicked(l, x) : g.onDataClicked(l, x)) : g.handleBackgroundClick(x)
                }
                s.clear(x)
            }, handleWindowMouseMove: function (D) {
                this.handleWindowTouchMove(D)
            }, handleWindowTouchMove: function (S) {
                var y = this, H = y.list, P = y._62O, t = y.tx, $ = y.ty, f = y.cp, W = cc(S), m = H._29I;
                "p" === P ? H.setTranslate(t + W.x - f.x, $ + W.y - f.y) : "v" === P ? H.ty($ + (f.y - W.y) * H._59I / m.height) : "h" === P ? H.tx(t + (f.x - W.x) * H._91I / m.width) : "d" === P && (y.dragCancel || H.handleDragAndDrop(S, "between"))
            }, handle_mousemove: function (D) {
                this.handle_touchmove(D)
            }, handle_touchmove: function (X) {
                if (!bc && fj(X)) {
                    var R = this, p = R.list;
                    if (R._isV = R.isV(X), R._isH = R.isH(X), R.cp) {
                        if (!R._62O) {
                            if (Wg(cc(X), R.cp) < 2) return;
                            R._isV ? R._62O = "v" : R._isH ? R._62O = "h" : p.draggingData && !this.dragCancel ? (R._62O = "d", p.handleDragAndDrop(X, "begin")) : R._62O = "p", R._62O && "d" !== R._62O && p.draggingData && (p.draggingData = null, p.redraw()), oc(R)
                        }
                    } else R._isV && p._43o(), R._isH && p._42o()
                }
            }, isV: function (b) {
                var L = this.list, O = L._29I;
                return L._41o() && O.x + O.width - L.lp(b).x < Ib
            }, isH: function (W) {
                var s = this.list, n = s._29I;
                return s._40o() && n.y + n.height - s.lp(W).y < Ib
            }, handle_mousewheel: function (f) {
                this.handleScroll(f, f.wheelDelta / 40, f.wheelDelta !== f.wheelDeltaX)
            }, handle_DOMMouseScroll: function (f) {
                this.handleScroll(f, -f.detail, 1)
            }, handleScroll: function (h, i, C) {
                var T = this.list;
                mq(h), T.endEditing && T.endEditing(), C && T._41o() ? T.translate(0, i * T.getRowHeight()) : T._40o() && T.translate(10 * i, 0)
            }, handle_keydown: function (Y) {
                if (!F.isInput(Y.target)) {
                    var T, o = this.list, Z = o.sm(), y = o._rows, P = y.size();
                    if (Am(Y)) o.selectAll(); else if (sj(Y)) o.handleDelete && o.handleDelete(Y); else if (fb(Y)) "d" !== this._62O || this.dragCancel || (o.handleDragAndDrop(Y, "cancel"), this.dragCancel = !0); else if (Bq(Y)) o.isCheckMode() && (T = o.getFocusData(), T && o.checkData(T)); else if (Mj(Y) || qc(Y)) {
                        var j = o.isCheckMode();
                        if (T = j ? o.getFocusData() : Z.ld()) {
                            var c = o.getRowIndex(T);
                            c >= 0 && (Mj(Y) ? 0 !== c && (T = y.get(c - 1), j ? o.setFocusData(T) : Z.ss(T)) : c !== P - 1 && (T = y.get(c + 1), j ? o.setFocusData(T) : Z.ss(T)))
                        } else P > 0 && (T = y.get(0), j ? o.setFocusData(T) : Z.ss(T))
                    }
                }
            }, _34o: function (P, H) {
                var j = this.list, x = j.lp(P).x;
                return x >= 0 && x <= j._indent ? (j.checkData(H), void 0) : (j.setFocusData(H), void 0)
            }, _33o: function (L, M) {
                var h = this.list, E = h.sm(), x = E.ld();
                if (Ag(L)) h.isSelected(M) ? E.rs(M) : E.as(M); else if (Mp(L)) if (x) for (var k = h.getRowIndex(x), e = h.getRowIndex(M); k !== e;) k += e > k ? 1 : -1, E.as(h._rows.get(k)); else E.ss(M); else if (fj(L)) {
                    var W = Rc();
                    if (E.contains(M)) {
                        var B = W - this._lastSelectDataTime;
                        h.handleDataDoubleSelect && B > 500 && 1500 > B && h.handleDataDoubleSelect(L, M)
                    }
                    E.ss(M), this._lastSelectDataTime = W
                } else E.contains(M) || E.ss(M)
            }
        }), mo.TreeView = function (i) {
            var K = this;
            K._35o(), K._5o(i), new yn(K)
        }, qo("TreeView", v, {
            ms_ac: [Ki, hl, Be, "rootVisible", si, "rootData", Pb, en, fm, Go, Fk, uh, Fq, Zl, Mf, Wl, Tm, rn, Xl, "loader", "doubleClickToToggle"],
            ms_v: 1,
            ms_bnb: 1,
            ms_tip: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            _48o: 1,
            _14Q: 1,
            _45o: 1,
            _checkMode: c,
            _indent: Fp,
            _rowHeight: Fe,
            _rowLineVisible: F.treeViewRowLineVisible,
            _rowLineColor: F.treeViewRowLineColor,
            _scrollBarColor: fn,
            _scrollBarSize: fd,
            _autoHideScrollBar: Ym,
            _expandIcon: F.treeViewExpandIcon,
            _collapseIcon: F.treeViewCollapseIcon,
            _autoMakeVisible: Yp,
            _selectBackground: F.treeViewSelectBackground,
            _labelColor: F.treeViewLabelColor,
            _labelSelectColor: F.treeViewLabelSelectColor,
            _labelFont: F.treeViewLabelFont,
            _doubleClickToToggle: F.treeViewDoubleClickToToggle,
            drawRow: function (i, Q, h, M, V, c, G) {
                var S = this;
                S.drawRowBackground(i, Q, h, M, V, c, G), S._97I(i, Q, h, 0, V, c, G)
            },
            isOnToggleIcon: function (W) {
                var k = this.getDataAt(W);
                if (k) {
                    var u = this.getIndent(), G = this.lp(W).x;
                    if (cd(this.getToggleIcon(k))) {
                        var T = u * this.getLevel(k);
                        if (G >= T && T + u >= G) return !0
                    }
                }
                return !1
            }
        });
        var yn = function (m) {
            Mr(yn, this, [m])
        };
        fs(yn, Lf, {
            toggle: function (E, S, v, V) {
                var k = this.list, u = k.lp(E).x;
                if (cd(k.getToggleIcon(S))) {
                    var n = v * V;
                    if (u >= n && n + v >= u) return k.toggle(S), !0
                }
                return k.isDoubleClickToToggle() && Ei(E) ? (k.toggle(S), !0) : !1
            }, _34o: function (V, q) {
                var G = this.list, O = G.lp(V).x, n = G._levelMap[q._id], Z = G._indent, C = Z * (n + 1);
                return O >= C && C + Z >= O ? (G.checkData(q), void 0) : (this.toggle(V, q, Z, n) || G.setFocusData(q), void 0)
            }, _33o: function (K, o) {
                var e = this, C = e.list;
                e.toggle(K, o, C._indent, C.getLevel(o)) || yn.superClass._33o.call(e, K, o)
            }, handle_keydown: function (M) {
                if (xr(M) || po(M)) {
                    var G = this.list, h = G._rows, V = G.isCheckMode(), J = G.sm(), W = V ? G.getFocusData() : J.ld();
                    W ? W.hasChildren() && (xr(M) ? G.collapse(W) : G.expand(W)) : h.size() > 0 && (W = h.get(0), V ? G.setFocusData(W) : J.ss(W))
                } else yn.superClass.handle_keydown.call(this, M)
            }
        });
        var hn = mo.TableView = function (M) {
            this._98I(), this._5o(M), new qq(this)
        };
        qo("TableView", v, {
            ms_ac: [Ki, hl, Be, "sortMode", fr, yp, Fq, Zl, Mf, ed, am, "sortColumn", Pb, en, fm, Go, Fk, rn, Xl],
            ms_v: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            ms_tip: 1,
            _50o: 1,
            _45o: 1,
            _47o: 1,
            _sortMode: ys,
            _editable: !0,
            _batchEditable: !1,
            _rowHeight: Fe,
            _rowLineVisible: F.tableViewRowLineVisible,
            _rowLineColor: F.tableViewRowLineColor,
            _columnLineVisible: F.tableViewColumnLineVisible,
            _columnLineColor: F.tableViewColumnLineColor,
            _scrollBarColor: fn,
            _scrollBarSize: fd,
            _autoHideScrollBar: Ym,
            _autoMakeVisible: Yp,
            _selectBackground: F.tableViewSelectBackground,
            _labelColor: F.tableViewLabelColor,
            _labelSelectColor: F.tableViewLabelSelectColor,
            _labelFont: F.tableViewLabelFont,
            getCheckColumn: function () {
                var q = this;
                if (!q._31o) {
                    var i = q._31o = new Al;
                    i.setEditable(!0), i.setWidth(40), i.getValue = q.getCheckColumValue, i.drawCell = q.drawCheckColumnCell
                }
                return q._31o
            },
            isCheckMode: function () {
                return this._39o.contains(this._31o)
            },
            setCheckMode: function (w) {
                var Z = this, H = Z._39o, c = Z.getCheckColumn();
                w !== Z.isCheckMode() && (w ? H.add(c, 0) : H.remove(c), Z.fp(si, !w, w))
            },
            getCheckColumValue: function (G, O, p) {
                return p.isSelected(G)
            },
            drawCheckColumnCell: function (O, u, r, h, N, G, H, l, t) {
                hi(O, t.getCheckIcon(u), N + H / 2, G + l / 2, u, t)
            }
        });
        var qq = function (X) {
            Mr(qq, this, [X])
        };
        fs(qq, Lf, {
            _34o: function (o, l) {
                var I = this.list, J = I._31o;
                if (I.isCellEditable(l, J, o)) {
                    var d = I._3Q(J), m = I.lp(o).x;
                    if (d && m >= d.startX && m < d.startX + J.getWidth()) return I.checkData(l), void 0
                }
                I._37O(l, o), I.setFocusData(l)
            }, _33o: function (b, U) {
                this.list._37O(U, b), qq.superClass._33o.apply(this, arguments)
            }
        });
        var yc = mo.TreeTableView = function (r) {
            var Y = this, b = Y._4o = new Al;
            Y._35o(), Y._98I(), Y._5o(r), b.setDisplayName("Name"), b.setEditable(!0), b.setWidth(180), b.drawCell = ae, b.getValue = ro, Y._39o.add(b), new Jk(Y)
        }, ae = function (B, F, e, Q, K, m, t, s, J) {
            J._97I(B, F, e, K, m, t, s)
        }, ro = function (Q, V, A) {
            return A.getLabel(Q)
        };
        qo("TreeTableView", v, {
            ms_ac: [Ki, hl, Be, "sortMode", fr, yp, uh, si, "rootData", "rootVisible", Pb, en, "sortColumn", Wl, Tm, fm, Go, Fk, rn, Mf, Fq, Zl, ed, am, Xl, "loader"],
            ms_v: 1,
            ms_bnb: 1,
            ms_fire: 1,
            ms_sm: 1,
            _49o: 1,
            ms_txy: 1,
            ms_lp: 1,
            ms_vs: 1,
            ms_hs: 1,
            _15Q: 1,
            ms_dm: 1,
            ms_tip: 1,
            _50o: 1,
            _48o: 1,
            _14Q: 1,
            _45o: 1,
            _47o: 1,
            _sortMode: ys,
            _checkMode: c,
            _editable: !0,
            _batchEditable: !1,
            _indent: Fp,
            _rowHeight: Fe,
            _rowLineVisible: F.treeTableViewRowLineVisible,
            _rowLineColor: F.treeTableViewRowLineColor,
            _columnLineVisible: F.treeTableViewColumnLineVisible,
            _columnLineColor: F.treeTableViewColumnLineColor,
            _expandIcon: F.treeTableViewExpandIcon,
            _collapseIcon: F.treeTableViewCollapseIcon,
            _scrollBarColor: fn,
            _scrollBarSize: fd,
            _autoHideScrollBar: Ym,
            _autoMakeVisible: Yp,
            _selectBackground: F.treeTableViewSelectBackground,
            _labelColor: F.treeTableViewLabelColor,
            _labelSelectColor: F.treeTableViewLabelSelectColor,
            _labelFont: F.treeTableViewLabelFont,
            getTreeColumn: function () {
                return this._4o
            }
        });
        var Jk = function (f) {
            Mr(Jk, this, [f])
        };
        fs(Jk, Lf, {
            _34o: function (T, e) {
                var Z = this.list, J = Z._4o, s = Z._3Q(J), h = Z.lp(T).x;
                if (s) {
                    var x = Z._indent, r = s.startX + x * Z.getLevel(e);
                    if (cd(Z.getToggleIcon(e)) && h >= r && r + x >= h) return Z.toggle(e), void 0;
                    if (Z.isCellEditable(e, J) && (r += x, h >= r && r + x >= h)) return Z.checkData(e), void 0
                }
                Z._37O(e, T), Z.setFocusData(e)
            }, _33o: function (R, V) {
                var B = this.list, H = B.lp(R).x;
                if (cd(B.getToggleIcon(V))) {
                    var G = B._3Q(B._4o);
                    if (G) {
                        var e = B._indent, E = G.startX + e * B.getLevel(V);
                        if (H >= E && E + e >= H) return B.toggle(V), void 0
                    }
                }
                B._37O(V, R), Jk.superClass._33o.apply(this, arguments)
            }
        });
        var xs = mo.TableHeader = function (V) {
            var b = this, g = b._view = ts(1, b), _ = b._39o = V.getColumnModel(), $ = b.iv;
            b.tv = b._tableView = V, b._60I = new vp, b._canvas = Jm(g), g.style.background = F.tableHeaderBackground || "", g.style.height = Sc + hr, _.mm($, b), _.md($, b), _.mh($, b), V.mp(function (c) {
                Yf[c.property] && b.iv()
            }, b), new hp(b), b.iv()
        };
        qo("TableHeader", v, {
            ms_v: 1,
            ms_lp: 1,
            ms_fire: 1,
            ms_ac: ["checkIcon", "sortDescIcon", "sortAscIcon", Ki, Be, uh, "moveBackground", "insertColor", ed, am, "resizable", "movable"],
            _checkIcon: Yn,
            _movable: !0,
            _resizable: !0,
            _labelColor: F.tableHeaderLabelColor,
            _labelFont: F.tableHeaderLabelFont,
            _columnLineColor: F.tableHeaderColumnLineColor,
            _columnLineVisible: F.tableHeaderColumnLineVisible,
            _sortDescIcon: F.tableHeaderSortDescIcon,
            _sortAscIcon: F.tableHeaderSortAscIcon,
            _moveBackground: F.tableHeaderMoveBackground,
            _insertColor: F.tableHeaderInsertColor,
            _indent: Fp,
            getCheckIcon: function () {
                return this._checkIcon
            },
            getTableView: function () {
                return this.tv
            },
            getLabel: function (b) {
                return b.toLabel()
            },
            getLabelFont: function () {
                return this._labelFont
            },
            getLabelColor: function (U) {
                return U.getColor() || this._labelColor
            },
            getLabelAlign: function (m) {
                return m._align
            },
            onPropertyChanged: function () {
                this.iv()
            },
            _5Q: function (J) {
                this._61I = J, this.iv()
            },
            getLogicalPoint: function (x) {
                return xk(x, this._canvas, this.tv.tx())
            },
            validateImpl: function () {
                var M = this, b = M._canvas, h = M.getWidth(), d = M.getHeight(), O = M.tv, y = M._60I, f = M._61I,
                    K = -O.tx(), o = 0;
                (h !== b.clientWidth || d !== b.clientHeight) && Sd(b, h, d), y.clear(), M._39o._roots.each(function (M) {
                    if (M.isVisible()) {
                        var B = o + M.getWidth();
                        K + h >= o && B >= K && y.add({column: M, startX: o}), o = B
                    }
                });
                var A = fk(b);
                if (Vm(A, -K, 0, 1), A.beginPath(), A.rect(K, 0, h, d), A.clip(), A.clearRect(K, 0, h, d), y.each(function (s) {
                    var O = s.column, V = s.startX, u = O.getWidth();
                    u > 0 && (A.save(), A.beginPath(), A.rect(V, 0, u, d), A.clip(), f && f.column === O || M.drawColumn(A, O, V, 0, u, d), M._columnLineVisible && Ui(A, V + u - 1, 0, 1, d, M._columnLineColor), A.restore())
                }), f) {
                    var X = f.column, o = f.startX, U = f.position, S = X.getWidth();
                    A.save(), A.beginPath(), A.rect(o, 0, S, d), A.clip(), A.fillStyle = M._moveBackground, A.fill(), M.drawColumn(A, X, o, 0, S, d), A.restore(), yd(A, M._insertColor, U, 0, d)
                }
                A.restore()
            },
            _6Q: function (A) {
                var r = this.tv;
                return r._31o === A && r.sm().getSelectionMode() === Mg
            },
            drawColumn: function (z, D, $, Y, V, G) {
                var c = this, U = c.tv, K = cd(D.getIcon()), F = c.getLabelAlign(D);
                if (c._6Q(D)) {
                    var E = cd(c._checkIcon);
                    hi(z, E, $ + V / 2, Y + G / 2, D, c)
                } else {
                    var H = c.getLabel(D), j = c.getLabelFont(D), r = c.getLabelColor(D), Q = Tr(j, H).width,
                        A = K ? c._indent : 0;
                    F === Ch ? (K && pq(z, K, aj, $, Y, A, G), Vr(z, H, j, r, $ + A, Y, V, G, Ch)) : F === Te ? (K && pq(z, K, aj, $ + V - Q - A, Y, A, G), Vr(z, H, j, r, $, Y, V, G, Te)) : (K && pq(z, K, aj, $ + (V - Q - A) / 2, Y, A, G), Vr(z, H, j, r, $ + (V - Q + A) / 2, Y, 0, G, Ch))
                }
                if (D.isSortable() && U.getSortColumn() === D && (K = cd(D.getSortOrder() === oo ? c._sortAscIcon : c._sortDescIcon))) {
                    var q = fc(K, D) / 2 + 2;
                    hi(z, K, F === Te ? $ + q : $ + V - q, Y + G / 2, D, U)
                }
            }
        });
        var hp = function (H) {
            var E = this;
            E.th = H, E.tv = H._tableView, E.addListeners()
        };
        fs(hp, v, {
            ms_listener: 1, getView: function () {
                return this.th.getView()
            }, setCursor: function (i) {
                this.getView().style.cursor = i
            }, handle_mousemove: function (L) {
                if (!bc) {
                    var O = this;
                    delete O._29o, O.setCursor(Zp);
                    for (var N = O.th, B = N._60I, W = N.lp(L).x, k = B.size() - 1; k >= 0; k--) {
                        var F = B.get(k), q = F.column, g = F.startX + q.getWidth();
                        if (N.isResizable() && I(g - W) <= (jp ? 10 : 3)) return O._29o = F, O.setCursor(lg), void 0;
                        W > F.startX && g > W && (O._29o = F), (q.isClickable() || q.isSortable() || N.isMovable() || O.tv.getCheckColumn && q === O.tv.getCheckColumn()) && W > F.startX && g > W && O.setCursor(dk)
                    }
                }
            }, handle_mousedown: function ($) {
                this.handle_touchstart($)
            }, handle_touchstart: function (v) {
                var Y = this;
                mq(v), Y.tv.endEditing(), Y.handle_mousemove(v), Y._29o && (Y.x = cc(v).x, Y.lx = Y.th.lp(v).x, Y.w = Y._29o.column.getWidth(), oc(Y, v))
            }, handleWindowMouseMove: function (L) {
                this.handleWindowTouchMove(L)
            }, handleWindowTouchMove: function (S) {
                var $ = this, w = $.th, t = $.getView().style.cursor, A = $._29o, Z = cc(S).x - $.x;
                if ($.resizing || $.moving || (t === lg ? $.resizing = 1 : w.isMovable() && t === dk && I(Z) > 2 && ($.moving = 1)), $.resizing) A.column.setWidth($.w + Z); else if ($.moving) {
                    var d = $.lx + Z;
                    w._60I.each(function (y) {
                        var l = y.startX, Y = l + y.column.getWidth();
                        if (d >= l && Y >= d) {
                            var Q = {
                                column: A.column,
                                startX: A.startX + Z,
                                front: Y - d > d - l,
                                insertColumn: y.column
                            };
                            Q.position = Q.front ? l : Y, w._5Q(Q)
                        }
                    })
                }
            }, _16Q: function (o, M) {
                var X = this, q = X.tv, Q = X.th, F = Q._checkIcon;
                if (Q._6Q(o)) {
                    var a = cd(F), z = X.lx, C = o.getWidth(), J = fc(a, o);
                    if (z >= M + C / 2 - J && M + C / 2 + J >= z) {
                        Q.setCheckIcon(F === Vi ? Yn : Vi);
                        var S = q.sm(), k = q._rows;
                        return F === Vi ? S.rs(k) : S.ss(k), q.onCheckColumnClicked(o), !0
                    }
                }
                return !1
            }, handleWindowMouseUp: function (f) {
                this.handleWindowTouchEnd(f)
            }, handleWindowTouchEnd: function (E) {
                var l = this, m = l.tv, k = l.th, t = l._29o;
                if (l.moving) {
                    var s = k._61I;
                    if (s && s.insertColumn !== s.column) {
                        var K = s.column, g = m.getColumnModel()._roots, X = g.remove(K), z = g.indexOf(s.insertColumn);
                        z >= 0 && (s.front || z++, z <= g.size() && (g.add(K, z), m.getColumnModel()._38I(K, X, z)))
                    }
                    k._5Q(c), delete l.moving
                } else if (!l.resizing && t) {
                    K = t.column;
                    var h = k.lp(E).x, W = t.startX, d = !0;
                    if (k.onColumnClicked) {
                        var V = k.onColumnClicked(K, E, W);
                        V === !1 && (d = !1)
                    }
                    if (d && h >= W && h <= W + K.getWidth() && !l._16Q(K, W)) {
                        if (K.isSortable()) {
                            var w = m.getSortMode(), b = K.getSortOrder();
                            w === ys ? m.getSortColumn() === K ? (b === Bs && m.setSortColumn(c), K.setSortOrder(b === oo ? Bs : oo)) : m.setSortColumn(K) : "bistate" === w && (m.getSortColumn() === K ? K.setSortOrder(b === oo ? Bs : oo) : m.setSortColumn(K))
                        }
                        m.onColumnClicked(K, E, W)
                    }
                }
                l._29o = l.resizing = l.x = l.lx = l.w = c
            }
        }), mo.TablePane = function (T) {
            this.init(new hn(T))
        }, qo("TablePane", v, {ms_v: 1, _44o: 1}), mo.TreeTablePane = function (u) {
            this.init(new yc(u))
        }, qo("TreeTablePane", v, {ms_v: 1, _44o: 1}), mo.Toolbar = function (q) {
            var n = this, O = n._view = ts(1, n), h = O.style;
            h.background = F.toolbarBackground || "", h.height = Td + hr, n._canvas = Jm(O), n._30o = new vp, n._90I = new vp, n.setItems(q || []), O.handleGroupSelectedChanged = function (L) {
                if (L.isSelected()) {
                    var $ = L.getGroupId();
                    null != $ && n._items.forEach(function (e) {
                        var o = e.element;
                        o && o !== L && o.setSelected && o.getGroupId && o.getGroupId() === $ && o.setSelected(!1)
                    })
                }
            }, new sk(n)
        }, qo("Toolbar", v, {
            ms_v: 1,
            ms_fire: 1,
            ms_tx: 1,
            ms_lp: 1,
            ms_tip: 1,
            ms_value: 1,
            ms_ac: [yr, Ki, Be, hl, Xl, "itemGap", "separatorColor", "currentItem", "stickToRight"],
            _labelColor: F.toolbarLabelColor,
            _labelSelectColor: F.toolbarLabelSelectColor,
            _labelFont: F.toolbarLabelFont,
            _selectBackground: F.toolbarSelectBackground,
            _itemGap: F.toolbarItemGap,
            _separatorColor: F.toolbarSeparatorColor,
            _stickToRight: !1,
            getSumWidth: function () {
                return this._64I
            },
            getToolTip: function (o) {
                var D = this.getItemInfoAt(o);
                return D ? D.item.toolTip : c
            },
            getLabelColor: function (C) {
                return C && C.selected && C.type !== Vi && C.type !== sl ? this._labelSelectColor : this._labelColor
            },
            onPropertyChanged: function (E) {
                this.iv(), E.property === yr && this._items.forEach(function (D) {
                    Ul(D)
                })
            },
            redraw: function () {
                this.iv()
            },
            addItem: function (X, G) {
                var D = this._items;
                G == c ? D.push(X) : D.splice(G, 0, X), this.fp(yr, c, D)
            },
            removeItem: function (K) {
                if (K) for (var N = this._items, F = 0; F < N.length; F++) K === N[F] && (N.splice(F, 1), this.fp(yr, c, N))
            },
            removeItemById: function (f) {
                if (f != c) for (var d = this._items, A = 0; A < d.length; A++) if (f === d[A].id) {
                    var t = d.splice(A, 1)[0];
                    return this.fp(yr, c, d), t
                }
            },
            getItemById: function (N) {
                if (N != c) for (var L = this._items, $ = 0; $ < L.length; $++) {
                    var f = L[$];
                    if (N === f.id) return f
                }
            },
            setItemVisible: function (o, k) {
                var c = this.getItemById(o);
                c && (c.visible = k)
            },
            getItemInfos: function () {
                return this._30o
            },
            getItemInfoAt: function (H) {
                var t = this, f = 0, w = t._30o, N = t.lp(H), y = N.x, n = N.y;
                if (n >= 0 && n <= t.getHeight()) for (; f < w.size(); f++) {
                    var o = w.get(f);
                    if (o.startX <= y && y <= o.endX) return o
                }
                return c
            },
            drawItem: function (l, k, B, $, R) {
                if (k.visible === !1) return 0;
                if ($d(k.visible) && !k.visible()) return 0;
                var x = this, V = k.disabled;
                V && (l.globalAlpha = ah);
                var C = x.drawItemImpl(l, k, B, $, R), o = x._itemGap;
                return V && (l.globalAlpha = 1), this._currentItem !== k || "separator" === k || k.separator === !0 || k.unfocusable || Qg(l, x._separatorColor, B - o / 2, 0, C + o, $), C
            },
            drawItemImpl: function (B, E, j, R, O) {
                var I = this, M = I._view, Z = I._itemGap, l = R / 2, r = E.type, D = E.element, b = E.label;
                Rp(D) && (b = D, D = c);
                var d, h = I.getLabelFont(E), T = I.getLabelColor(E), Y = E.selected, s = cd(E.icon), X = fc(s, E),
                    F = 0, K = X + (b ? Tr(h, b).width : 0);
                if ("separator" === E || E.separator === !0) return yd(B, I._separatorColor, j, R / 4, l), 1;
                if (D) {
                    s && hi(B, s, j + X / 2, l, E, I), Vr(B, b, h, T, j + X, 0, 0, R);
                    var G = Ri(D);
                    O || I._90I.add(G), G.parentNode !== M && Vo(M, G), D.iv && D.iv(), D.validate && D.validate();
                    var x = G.getBoundingClientRect(), $ = x.width, z = G.style;
                    return gh(G), z.left = I.tx() + j + K + hr, z.top = (R - x.height) / 2 + hr, K + $
                }
                return r === sl ? d = cd(Y ? Pc : bl) : r === Vi && (d = cd(Y ? Vi : Yn)), d ? (F = fc(d, E), hi(B, d, j + F / 2, l, E, I), j += F, K += F) : Y && Ui(B, j - Z / 2, 0, K + Z, R, I.getSelectBackground(E)), s && hi(B, s, j + X / 2, l, E, I), Vr(B, b, h, T, j + X, 0, 0, R), K
            },
            validateImpl: function () {
                var v = this, E = v._canvas, G = v.getWidth(), z = v.getHeight(), g = v._30o, R = v._items;
                Sd(E, G, z);
                var j = fk(E), K = v._itemGap, Q = K / 2;
                Vm(j, v.tx(), 0, 1), j.clearRect(0, 0, G, z);
                var q = v._90I;
                v._90I = new vp, g.clear(), R.forEach(function (m) {
                    var Z = v.drawItem(j, m, Q, z);
                    g.add({item: m, startX: Q, endX: Q + Z, width: Z}), Z && (Q += Z + K)
                }), q.each(function (P) {
                    v._90I.contains(P) || zm(P)
                });
                var Y = v._64I;
                v._64I = y(0, Q), j.restore(), v._stickToRight ? (v._65O = 0, j = fk(E), Q = G - v._64I + K, Vm(j, 0, 0, 1), j.clearRect(0, 0, G, z), g.clear(), R.forEach(function (Y) {
                    var Z = v.drawItem(j, Y, Q, z, !0);
                    g.add({item: Y, startX: Q, endX: Q + Z, width: Z}), Z && (Q += Z + K)
                }), j.restore()) : v.tx(v.tx()), Y !== v._64I && v.onSumWidthChanged(Y, v._64I)
            },
            onSumWidthChanged: function () {
            },
            handleClick: function (a, o) {
                var Z = this, Y = a.type, H = a.action, P = a.groupId, h = a.selected;
                a.disabled || (P != c ? h || (a.selected = !0, this._items.forEach(function (o) {
                    o.groupId === P && a !== o && (o.selected = !1)
                }), H && a.action(a, Z, o)) : Y === Vi || "toggle" === Y ? (a.selected = !h, H && a.action(a, Z, o)) : H && a.action(a, Z, o)), ll(), Z.iv()
            }
        });
        var sk = function (G) {
            this.tb = G, this.addListeners()
        };
        fs(sk, v, {
            ms_listener: 1, getView: function () {
                return this.tb._view
            }, handle_mousewheel: function (J) {
                this.handleScroll(J, 10 * (J.wheelDelta / 40))
            }, handle_DOMMouseScroll: function (u) {
                this.handleScroll(u, 10 * -u.detail)
            }, handleScroll: function (C, q) {
                mq(C);
                var t = this.tb;
                t.isScrollable() && !t._stickToRight && (t.tx(t.tx() + q), Kf())
            }, handle_mousemove: function (J) {
                var y = this;
                bc || y.setItem(J)
            }, handle_mouseout: function (Q) {
                var v = this;
                Q.target === v.getView() ? v.tb.setCurrentItem(c) : v.handle_mousemove(Q)
            }, handle_mousedown: function (P) {
                this.handle_mousemove(P), this.handle_touchstart(P)
            }, handle_touchstart: function (P) {
                var k = this, t = k.tb, n = P.target;
                fj(P) && (n === k.getView() || n === t._canvas) && (mq(P), t.setFocus(P) && (this.setItem(P, !0), (t.isScrollable() || k.info && !k.info.item.disabled) && (k.x = cc(P).x, k.tx = t.tx(), oc(k, P))))
            }, handleWindowMouseMove: function (v) {
                this.handleWindowTouchMove(v)
            }, handleWindowTouchMove: function (C) {
                var u = this, Q = u.tb;
                if (!Q._stickToRight) {
                    var D = cc(C).x - u.x;
                    !u._25o && I(D) > 2 && Q.isScrollable() && (u._25o = 1), u._25o && Q.tx(u.tx + D)
                }
            }, handleWindowMouseUp: function (m) {
                this.handleWindowTouchEnd(m)
            }, handleWindowTouchEnd: function (o) {
                var g = this, I = g.tb, S = g.info, A = g.tb.getItemInfoAt(o);
                if (!g._25o && S) {
                    var Z = S.item;
                    A && A.item === Z && I.handleClick(Z, o)
                }
                g._25o = g.x = g.tx = c, g.setItem()
            }, setItem: function (x, h) {
                var I = this, w = I.tb, y = I.info = x ? w.getItemInfoAt(x) : c, O = y ? y.item : c;
                w.setCurrentItem(O), h && O && $d(O.onDown) && O.onDown(x)
            }
        }), mo.BorderPane = function () {
            this._view = ts(1, this), this.iv()
        }, qo("BorderPane", v, {
            ms_v: 1,
            ms_ac: ["topHeight", "bottomHeight", "leftWidth", "rightWidth"],
            ms_fire: 1,
            getLeftView: function () {
                return this._leftView
            },
            setLeftView: function (m, n) {
                this._12o("leftView", m), n != c && this.setLeftWidth(n)
            },
            getRightView: function () {
                return this._rightView
            },
            setRightView: function (v, K) {
                this._12o("rightView", v), K != c && this.setRightWidth(K)
            },
            getTopView: function () {
                return this._topView
            },
            setTopView: function (t, O) {
                this._12o("topView", t), O != c && this.setTopHeight(O)
            },
            getBottomView: function () {
                return this._bottomView
            },
            setBottomView: function (s, I) {
                this._12o("bottomView", s), I != c && this.setBottomHeight(I)
            },
            getCenterView: function () {
                return this._centerView
            },
            setCenterView: function (I) {
                this._12o("centerView", I)
            },
            _12o: function (k, O) {
                var T = this, t = "_" + k, o = T._view, a = T[t];
                a !== O && (a && (a.getView ? zm(a.getView()) : zm(a)), T[t] = O, O && (O.getView ? Vo(o, O.getView(), 1) : Vo(o, O, 1)), T.fp(k, a, O))
            },
            onPropertyChanged: function () {
                this.iv()
            },
            validateImpl: function () {
                var v = this, x = v._topView, k = v._bottomView, E = v._leftView, o = v._rightView, X = v._centerView,
                    C = v.getWidth(), D = v.getHeight(), q = 0, a = 0, H = C, M = D, i = 0, A = 0, p = 0, Q = 0;
                x && (i = v._topHeight == c ? di(x) : v._topHeight, a = i), k && (A = v._bottomHeight == c ? di(k) : v._bottomHeight, M = D - A), E && (p = v._leftWidth == c ? Oc(E) : v._leftWidth, q = p), o && (Q = v._rightWidth == c ? Oc(o) : v._rightWidth, H = C - Q);
                var t = y(0, H - q), J = y(0, M - a);
                x && Ee(x, 0, 0, C, i), k && Ee(k, 0, M, C, A), E && Ee(E, 0, a, p, J), o && Ee(o, H, a, Q, J), X && Ee(X, q, a, t, J)
            }
        })
    }
}("undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : (0, eval)("this"), Object);